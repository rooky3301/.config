"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5057],{43664:(e,t,o)=>{o.d(t,{r:()=>V,z:()=>O});var a=o(1302),n=o(90559),i=o(35011),r=o(99036),s=o(80951),l=o(40506),d=o(7057),c=o(53877),p=o(78106),u=o(84682),g=o(42875),m=o(72126),h=o(38737),f=o(70203),y=o(44805),v=o(97880),S=o(63143),b=o(893),x=o(83197),M=o(53437),k=o(95477),_=o(24990),C=o(49616),P=o(14976),w=o(17809),R=o(33929),j=o(77080),I=o(8406),T=o(51365),Z=o(9953),D=o(61045),F=o(82530);function V(e){const{environment:t,theme:o,store:a,schema:r,property:d,collectionContextStore:m}=e,h=t.device,x=r[d];if(x){switch(x.type){case"formula":"v2"===x.version&&(0,w.V1)()?function(e){const{environment:t,store:o,propertySchema:a,property:n}=e,r=o.getModel();if(!a.formula2||!r)return;const s=R.default.getIntl(),l=(0,g.r)(),d=(0,i.EC)({block:r,property:n,formulaCode:a.formula2.code,getRecordModel:o.getRecordModel,intl:s,userTimeZone:l,depth:0,visitedProperties:new Set,resultCache:new Map});if(!d)return;const c=(0,p.j4)(d),u=(0,P.Xh)(c,o);b.RD({stringValue:u,environment:t,copiedMessage:b.tq.copiedPropertyToClipboard})}({environment:t,store:a,propertySchema:x,property:d}):function(e){var t;const{environment:o,store:a,schema:n,property:i,propertySchema:r}=e,s=a.getValue();if(!s)return;const d=(0,u.AH)({property:i,schema:n,block:s,getRecordValue:a.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,g.r)(),depth:0,intl:R.default.getIntl(),resultCache:new Map,visitedProperties:new Set}}),c=null==r||null===(t=r.formula)||void 0===t?void 0:t.result_type;switch(c){case"number":S.hj(d)&&B({value:d,propertySchema:r,environment:o});break;case"date":d&&l.U3(d)&&L({date:d,environment:o});break;case"text":d&&b.RD({stringValue:d.toString(),environment:o,copiedMessage:b.tq.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,v.t1)(c)}}({environment:t,store:a,schema:r,property:d,propertySchema:x});break;case"person":{const e=a.getPropertyValue(d);N({actors:s.DW({textValue:e,propertySchema:x,blockCreatorPointer:a.getCreatedByPointer()}),environment:t,store:a});break}case"created_by":{const e=a.getCreatedByPointer();e&&N({actors:[e],environment:t,store:a});break}case"last_edited_by":{const e=a.getLastEditedByPointer();e&&N({actors:[e],environment:t,store:a});break}case"number":B({value:s.VY(a.getPropertyValue(d)),propertySchema:x,environment:t});break;case"text":{const e=a.getPropertyValue(d);if(!e)return;const n=y.hW({textValue:{value:e,spaceId:a.getSpaceId()},getRecordModel:a.getRecordModel,getRecordRole:a.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!0,disableLinks:!1,disabled:!1,userTimeZone:(0,g.r)(),isClient:!0,isAndroid:h.isAndroid,isSafariOrIOS:h.isSafari||h.isIOS,isWindows:h.isWindows,showEmojiInline:h.isWindows,emojiType:"raw",theme:o,baseUrl:k.default.domainBaseUrl,publicDomainName:k.default.publicDomainName,currentUserId:t.currentUser.id,intl:R.default.getIntl(),katex:void 0,overwriteBaseUrlFromSpaceId:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:_.Z.state,isMobileNative:h.isMobileNative,isMobileNativeExternalLinkFixEnabled:j.default.checkGate("mobile_native_external_link_fix")}),i=(0,P.Xh)(a.getPropertyValue(d),a);b.g9({stringValue:i,htmlValue:n,environment:t,copiedMessage:b.tq.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=f.Jcv(a.getPropertyValue(d));b.RD({stringValue:e,environment:t,copiedMessage:b.tq.copiedPropertyToClipboard});break}case"date":{const e=a.getPropertyValue(d),o=s.Gl(e);o&&L({date:o,environment:t,dateFormat:x.date_format,timeFormat:x.time_format});break}case"last_edited_time":case"created_time":{const e=a.getKeyStore(x.type).getValue();if(e){L({date:c.CQ(e,(0,g.r)()),environment:t,dateFormat:x.date_format,timeFormat:x.time_format})}break}case"auto_increment_id":{const e=a.getPropertyValue(d);!function(e){const{value:t,environment:o,collectionContextStore:a}=e;if(t&&a){var i;const e=(null===(i=a.collectionStore())||void 0===i||null===(i=i.getRecordKeyStore())||void 0===i?void 0:i.getRecordKey())??"";b.RD({stringValue:(0,n.wf)(e,t),environment:o,copiedMessage:b.tq.copiedPropertyToClipboard})}}({value:s.ah(e),environment:t,collectionContextStore:m});break}}I.S$(t,m,{block_id:a.id,property:d,property_type:x.type})}}function N(e){const{actors:t,environment:o,store:a}=e,n=s.C1(t);b.RD({stringValue:(0,P.Xh)(n,a),environment:o,copiedMessage:b.tq.copiedPropertyToClipboard})}function B(e){const{value:t,propertySchema:o,environment:a}=e;if(!m.i2(t)&&!S.z4(t)){const e=(null==o?void 0:o.number_format)||h.dk,n=h.uf(t,e,R.default.getIntl());b.RD({stringValue:n,environment:a,copiedMessage:b.tq.copiedPropertyToClipboard})}}function L(e){const{date:t,environment:o,dateFormat:a,timeFormat:n}=e,i=(0,d.ZV)({value:t,date_format:a??l.sF,time_format:n??l.c_,allowRelativeDates:!0,intl:R.default.getIntl()});b.RD({stringValue:i,environment:o,copiedMessage:b.tq.copiedPropertyToClipboard})}async function O(e){const{element:t,rect:o,environment:n,onClick:i,store:l,additionalStores:d=[],property:c,format:p,collectionStore:u,blockPropertyValueOverlayStore:g,disableHorizontalEdgeScroll:m,collectionContextStore:h,mouseStore:f,statusSetCheckbox:y,preventClearSelection:v,collectionsBulkActionsToolbarStore:S,scrollers:b}=e,{device:k,WindowSizeStore:_}=n,P=(h&&C.aJ({store:l,additionalStores:d,collectionContextStore:h})?h.normalizedSchemaStore.state:u.getSchema())[c],w=null==P?void 0:P.type;if(!w)return;if(!C.g0({property:c,collectionStore:u})){if("checkbox"===w){const e=l.getPropertyStore(c);e&&F.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:n,perform:e=>{T.vO({stores:[l,...d],property:c,transaction:e})}}),h&&I.rv({environment:n,collectionContextStore:h,block_id:e.id,property:c,property_type:w,from:C.Sy(p),isFromBulkActionsToolbar:Boolean(S)})}else if("status"===w&&"status"===P.type&&y){const e=l.getPropertyValue(c),t=s.rO(e,P,R.default.getIntl());l.getPropertyStore(c)&&F.createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:n,perform:e=>{const o=P.groups??[],a=!0===t?o[0]:o[o.length-1],n=(P.options??[]).find((e=>{var t;return e.id===(null==a||null===(t=a.optionIds)||void 0===t?void 0:t[0])}));if(n)for(const t of[l,...d])Z.sO({store:t.getPropertyStore(c),value:s.Is(n.value),transaction:e})}})}else{-1===r.uk.indexOf(w)&&(f&&f.setState({...f.state,mouseEntered:!1}),t&&b&&k.isMobileNative&&x.m[w]===M.kQ.Popup&&(D.bx({element:t,scrollers:b,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:_.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await a.default.afterNextFlush()),T.bA({environment:n,blockPropertyValueOverlayStore:g,store:l,additionalStores:d,property:c,format:p,rect:o,disableHorizontalEdgeScroll:m,collectionContextStore:h,preventClearSelection:v,collectionsBulkActionsToolbarStore:S}),h&&I.zF({environment:n,collectionContextStore:h,property:c,property_type:w,from:C.Sy(p),isFromBulkActionsToolbar:Boolean(S)}))}i&&i()}}},14473:(e,t,o)=>{o.d(t,{O:()=>p});var a=o(15145),n=o(1800),i=o(70219),r=o(80444),s=o(88923),l=o(26136),d=o(50906),c=o(8055);function p(e,t,o,i,p){const{mainEditorCurrentBlockStore:g}=r.default.state;if(!g)return;const m=e.find((e=>e.id===t.id));if(!m)return;let h;if(p){const e=l.G.createChildStore(g,m).getModel(),t=e?u(o,e.getSpaceId()):void 0;h=(0,n.Z)({pageId:m.id,pageModel:e,baseUrl:t,pageVisitSource:a.tY.MentionInPage})}else{const e=g.getModel(),t=e?u(o,e.getSpaceId()):void 0;h=(0,n.Z)({pageId:g.id,pageModel:e,baseUrl:t,peekViewBlockId:m.id,peekMode:(0,s.getUrlParamFromPeekMode)(s.default.state.mode),pageVisitSource:a.tY.MentionInPage}),d.XXm(o,{from:i,meta_click:Boolean(p)})}c.c4({environment:o,url:h,openInNew:p})}function u(e,t){return(0,i.b)(e)(t)}},30694:(e,t,o)=>{o.d(t,{L:()=>R,Z:()=>T});o(67294);var a=o(480),n=o(86628),i=o(24405),r=o(15145),s=o(8848),l=o(61061),d=o(16184),c=o(26774),p=o(82990),u=o(9291),g=o(75754),m=o(51592),h=o(7692),f=o(24946),y=o(28020),v=o(49616),S=o(98165),b=o(80444),x=o(26136),M=o(74016),k=o(64921),_=o(31278),C=o(85893);const P=(0,u.defineMessages)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"},noAccess:{defaultMessage:"No access",id:"CollectionLocation.noAccess"},emptyCollectionName:{id:"CollectionLocation.EmptyCollectionName",defaultMessage:"Untitled"}});function w(e){return(0,C.jsx)("span",{style:{paddingTop:4,paddingLeft:4,...e.style},children:"/"})}function R(e){window.__c={n:"LocationBreadcrumbTooltip"};const{collectionForLocation:t,collectionContextStore:o}=e,r=(0,a.O7)(),p=(0,u.useIntl)(),g=(0,n.VK)((()=>b.default.state.currentSpaceStore),[]),h=(0,n.VK)((()=>{const e=S.uJ(t);return e.reverse(),e}),[t]),f=(0,n.VK)((()=>o.collectionStoresStore.state),[o]),y=(0,n.VK)((()=>{if(g)return(0,m.x1)({environment:r,typedCollections:f,spaceStore:g})}),[f,r,g]),v=Boolean(null==y?void 0:y.privateDatabases[t.id]),x=Boolean(null==y?void 0:y.restrictedDatabases[t.id]),M=Boolean(null==y?void 0:y.sharedDatabases[t.id]),k=(0,n.VK)((()=>(0,s.gh)({theme:"light"})),[]),_=(0,i.yK)((e=>({textStyle:{color:k.popoverWaxPaperBackground,fontWeight:"normal"},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:k.accentColors.gray[100],borderRadius:3}})),[k]),R=v||x||M;let I=null;return v?I=(0,C.jsxs)(C.Fragment,{children:[(0,d.Q)(_.shareTypeIndicatorIcon),(0,C.jsx)("span",{children:p.formatMessage(P.private)})]}):x?I=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{style:{..._.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,l.B)({..._.shareTypeIndicatorIcon,margin:0,background:void 0})}),(0,C.jsx)("span",{children:p.formatMessage(P.noAccess)})]}):M&&(I=(0,C.jsxs)(C.Fragment,{children:[(0,c.O)(_.shareTypeIndicatorIcon),(0,C.jsx)("span",{children:p.formatMessage(P.shared)})]})),(0,C.jsxs)("div",{style:{display:"flex"},children:[R&&(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4,..._.textStyle},children:[I,!x&&(0,C.jsx)(w,{style:{marginTop:-4,..._.textStyle}})]}),h.length>3?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j,{ancestorStore:h[0],showDivider:!0}),(0,C.jsx)("span",{style:{paddingLeft:2,paddingTop:4,..._.textStyle},children:"..."}),(0,C.jsx)(w,{style:_.textStyle}),!(v||M)&&(0,C.jsx)(j,{ancestorStore:h[h.length-2],showDivider:!0}),(0,C.jsx)(j,{ancestorStore:h[h.length-1],showDivider:!1})]}):h.map(((e,t)=>(0,C.jsx)(j,{ancestorStore:e,showDivider:t<h.length-1},e.id)))]})}function j(e){window.__c={n:"LocationBreadcrumbAncestor"};const{ancestorStore:t,showDivider:o}=e,a=(0,n.VK)((()=>(0,s.gh)({theme:"light"})),[]),r=(0,i.yK)((e=>({teamIconStyle:{background:e.popoverWaxPaperBackground},textStyle:{color:a.popoverWaxPaperBackground,fontWeigth:"normal"}})),[a]);return t instanceof x.zX?(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsx)(f.Z,{store:t,showDivider:!1,maxWidth:160,iconSize:16,iconStyle:r.teamIconStyle,titleStyle:r.textStyle}),o&&(0,C.jsx)(w,{style:r.textStyle})]}):(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsx)(h.Z,{store:t,showDivider:!1,emojiSize:18,maxWidth:160,titleStyle:r.textStyle},t.id),o&&(0,C.jsx)(w,{style:r.textStyle})]})}function I(e){window.__c={n:"CollectionInTeamLocation"};const{team:t,collection:o}=e,a=(0,n.VK)((()=>o.getIcon()),[o]),r=(0,i.yK)((e=>({miniTeamSpaceIcon:{background:e.home.tile.background,position:"absolute",bottom:-3,right:-3,borderRadius:2},teamSpaceIcon:{borderRadius:2,marginRight:2}})),[]);return a?(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",marginRight:2},children:[(0,C.jsx)(_.Z,{icon:a,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),(0,C.jsx)(M.p,{store:t,disabled:!0,size:12,style:r.miniTeamSpaceIcon},"icon")]}):(0,C.jsx)(M.p,{store:t,disabled:!0,size:20,style:r.teamSpaceIcon},"icon")}const T=function(e){window.__c={n:"CollectionLocation"};const{collectionContextStore:t,collectionForLocation:o,shouldShowCollectionName:s}=e,h=(0,a.O7)(),f=(0,u.useIntl)(),x=(0,n.VK)((()=>b.default.state.currentSpaceStore),[]),M=(0,n.VK)((()=>t.collectionStoresStore.state),[t]),w=(0,n.VK)((()=>{if(x)return(0,m.x1)({environment:h,typedCollections:M,spaceStore:x})}),[M,h,x]),R=(0,n.VK)((()=>S.VP(o)),[o]),j=Boolean(null==w?void 0:w.privateDatabases[o.id]),T=Boolean(null==w?void 0:w.restrictedDatabases[o.id]),Z=Boolean(null==w?void 0:w.sharedDatabases[o.id]),D=(0,n.VK)((()=>o.getName()??[[f.formatMessage(P.emptyCollectionName)]]),[o,f]),F=(0,n.VK)((()=>o.getIcon()),[o]),V=(0,n.VK)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id}),[t]),N=(0,n.VK)((()=>{let e=r.tY.LocationProperty;return V?((0,y.qG)(V)&&(e=t.isCompactView.state?r.tY.PersonalHomeTileTasks:r.tY.PersonalHomePageTasks),e):e}),[V,t]),B=(0,i.yK)((e=>({button:{color:e.accentColors.gray[800]},inner:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:e.fill.lightGray,borderRadius:3},miniShareTypeIndicatorIcon:{position:"absolute",bottom:-3,right:-3,width:12,height:12,color:e.mediumIconColor,backgroundColor:e.fill.gray,borderRadius:3,paddingTop:1,paddingBottom:1},collectionTitleTextStyle:{lineHeight:1,fontWeight:p.Z.fontWeight.medium,marginTop:2,marginLeft:2,textWrap:"nowrap",...(0,v.z0)(e)}})),[]);if(!(R||j||T||Z))return null;const L=j||T||Z;let O=(0,c.O)(B.shareTypeIndicatorIcon);return F?O=(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},children:[(0,C.jsx)(_.Z,{icon:F,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),j?(0,d.Q)(B.miniShareTypeIndicatorIcon):(0,c.O)(B.miniShareTypeIndicatorIcon)]}):T?O=(0,C.jsx)("div",{style:{...B.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,l.B)({...B.shareTypeIndicatorIcon,margin:0,background:void 0})}):j&&(O=(0,d.Q)(B.shareTypeIndicatorIcon)),(0,C.jsx)(k.Z,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:B.button,onClick:()=>{const e=o.getParentBlockStore();e&&g._({environment:h,store:e,pageVisitSource:N})},children:(0,C.jsxs)("div",{style:B.inner,children:[R&&(0,C.jsx)(I,{team:R,collection:o}),L&&O,s&&(0,C.jsx)("div",{style:B.collectionTitleTextStyle,children:D})]})})}},28530:(e,t,o)=>{o.d(t,{Z:()=>l});var a=o(67294),n=o(24405),i=o(44495),r=o(35948),s=o(85893);function l(e){let{setIsHovered:t}=e;window.__c={n:"CollectionDescriptionIconTooltipIndicator"};const[o,l]=(0,r.C)();(0,a.useEffect)((()=>{t(l)}),[l,t]);const d=(0,n.yK)((e=>({container:{display:"inline-flex",alignItems:"center"},icon:{width:14,fill:l?e.mediumIconColor:e.lightIconColor,marginLeft:5,marginTop:1}})),[l]);return(0,s.jsx)("div",{ref:o,style:d.container,children:(0,i.D)(d.icon)})}},51774:(e,t,o)=>{o.d(t,{P:()=>s});o(67294);var a=o(77907),n=o(13005),i=o(68785),r=o(85893);function s(e){return(0,r.jsx)(a.LazyCollectionSettings,{...e,renderLoading:t=>(0,r.jsx)(n.ZP,{collectionSettingsStore:e.collectionSettingsStore,collectionContextStore:e.collectionContextStore,fullHeight:e.fullHeight,hideDesktopHeader:e.hideDesktopHeader,children:t&&(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden"},children:(0,r.jsx)(i.Z,{})})})})}},56247:(e,t,o)=>{o.d(t,{b:()=>u});o(67294);var a=o(24405),n=o(72126),i=o(38737),r=o(63143),s=o(49616),l=o(33929),d=o(85248),c=o(78942),p=o(85893);function u(e){window.__c={n:"NumberValue"};const{numberValue:t,numberFormat:o,numberShowAs:u,shouldRenderTooltip:g,withComma:m,style:h}=e,f=(0,a.Fg)();if(n.i2(t)||r.z4(t))return null;const y=e.progressSize??21,v=(null==u?void 0:u.showValue)??!0,S=v&&i.uf(t,o,l.default.getIntl());let b;if("bar"===(null==u?void 0:u.type)||"ring"===(null==u?void 0:u.type)){const a=i.IM(t,u.maxValue),n="default"===u.color?f.selectLightGray:f.accentColors[u.color],r="dark"===f.mode?n[500]:n[400],l=n[50],m="dark"===f.mode?n[200]:f.selectLightGray[200],h=g?s.X7({numberValue:t,numberFormat:o,numberShowAs:u}):void 0;b="bar"===u.type?(0,p.jsx)(d.k,{percentage:a,filledColor:r,gapColor:l,unfilledColor:m,style:{marginLeft:v?8:0,height:y,...e.barStyle,...v?{}:{flexBasis:"100%"}},tooltip:h}):(0,p.jsx)(c.e,{percentage:a,filledColor:r,gapColor:l,unfilledColor:m,size:y,style:{marginLeft:v?8:0},tooltip:h})}const x={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",...h};return(0,p.jsxs)("div",{style:x,children:[S,b,m?", ":null]})}},80559:(e,t,o)=>{o.d(t,{Q:()=>K,Z:()=>E});o(67294);var a=o(83355),n=o(480),i=o(49085),r=o(99036),s=o(80951),l=o(72126),d=o(9291),c=o(5149),p=o(14900),u=o(24677),g=o(98104),m=o(66890),h=o(68641),f=o(43224),y=o(78316),v=o(19124),S=o(98742),b=o(39500),x=o(77907),M=o(22294),k=o(85526),_=o(86628),C=o(24405),P=o(90199),w=o(82990),R=o(31278),j=o(76798),I=o(26388),T=o(85893);const Z=function(e){let{store:t,propertyName:o,disableTooltip:a,render:n}=e;return(0,T.jsx)(I.ZP,{renderTooltip:()=>(0,T.jsx)(D,{store:t,propertyName:o}),disableTooltip:Boolean(a),delayThreshold:300,render:e=>n(e),placement:I.ug.Left})};function D(e){let{store:t,propertyName:o}=e;window.__c={n:"ParentCollectionLockedTooltipComponent"};const a=(0,C.Fg)(),n=(0,_.VK)((()=>t.getIcon()),[t]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{children:o}),(0,T.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,T.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,P.b)({width:12,fill:a.regularInvertedTextColor})}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{children:(0,T.jsx)(d.FormattedMessage,{defaultMessage:"Page properties are locked",id:"database.editProperty.databaseLocked.tooltipPart1"})}),(0,T.jsx)("div",{style:{color:a.mediumInvertedTextColor},children:(0,T.jsx)(d.FormattedMessage,{defaultMessage:"Please go to {recordIconAndTitle} to unlock",id:"database.editProperty.databaseLocked.tooltipPart2",values:{recordIconAndTitle:(0,T.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:w.Z.fontWeight.bold},children:[n&&(0,T.jsx)(R.Z,{disabled:!0,icon:n,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),(0,T.jsx)(j.Z,{store:t,style:{display:"inline"}})]})}})})]})]})]})}var F=o(51774),V=o(28530),N=o(23063),B=o(64921),L=o(50478),O=o(53437),A=o(97820);class K extends a.Z{constructor(){super(...arguments),this.popupContainer=null,this.storeTypes={isHoveringDescriptionIconStore:i.default.createClass(!1)},this.renderOrigin=e=>{const{property:t,schema:o,disabled:a,locked:n,canConfigureCollection:i,disableRowNameInteractivity:r}=this.props,{collectionContextStore:s}=this.context,d=o[t];if(!d)return;const c=null==s?void 0:s.collectionStore();if(!c||!s)return;const m=s.permissionScopes.state,h={onClick:!r&&m.canConfigureBlock?()=>function(e,t,o){g.ZH(o),u.ZH(o),p.wG(),k.Z.setState({...k.Z.state,openProperty:{property:e,isInPeekRenderer:t}})}(this.props.property,this.props.isInPeekRenderer,this.environment):l.yR};return y.p1(c)?(0,T.jsx)(Z,{propertyName:d.name,disableTooltip:n||!c.canEditCollection(),render:s=>(0,T.jsx)(z,{hideIcon:Boolean(this.props.hideIcon),schema:o,property:t,disabled:a||Boolean(r),locked:n,canConfigureCollection:i,events:(0,S.Z)(e,(0,S.Z)(h,s)),propertyNameAriaId:this.props.propertyNameAriaId,setIsDescriptionIconTooltipHovered:e=>this.stores.isHoveringDescriptionIconStore.setState(e)}),store:c}):(0,T.jsx)(z,{hideIcon:Boolean(this.props.hideIcon),schema:o,property:t,disabled:a||Boolean(r),locked:n,canConfigureCollection:i,events:(0,S.Z)(h,e),propertyNameAriaId:this.props.propertyNameAriaId,setIsDescriptionIconTooltipHovered:e=>this.stores.isHoveringDescriptionIconStore.setState(e)})},this.renderPopup=()=>{const{collectionContextStore:e}=this.context,t=null==e?void 0:e.settingsStore;if(e&&t)return(0,T.jsx)(T.Fragment,{children:t.state.open?(0,T.jsx)(F.P,{context:h.HV.TopbarFilterPopup,collectionContextStore:e,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,T.jsx)(x.LazyPagePropertiesRowNameMenu,{...this.props,popupContainer:this.popupContainer})})}}renderComponent(){const{property:e,schema:t,disabled:o,locked:a,canConfigureCollection:n,isInPeekRenderer:i,origin:l,hideDragHandle:p,blockStore:u}=this.props,g=t[e],{device:m}=this.environment;if(!g)return;const{collectionContextStore:h}=this.context,S=null==h?void 0:h.collectionStore();if(!S||!h)return;const x=k.Z.state.hoveredProperty===e&&!M.Z.state.isKeyboardMode&&!p,{openProperty:_}=k.Z.state,C=this.stores.isHoveringDescriptionIconStore.state;return(0,T.jsx)(I.ZP,{renderTooltip:t=>{const o=(0,r.qQ)(g)&&("text"===g.type||(0,v.KZ)())&&(0,r.q3)(g),a=(0,s.KK)(u.getModel(),S.getModel(),e);return(0,T.jsxs)("div",{...t,style:f.F6,children:[(0,T.jsx)("div",{children:g.name}),void 0!==(null==g?void 0:g.description)&&g.description.length>0?(0,T.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:g.description}):null,o&&o.auto_update_on_edit&&(0,T.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:(0,T.jsx)(d.FormattedMessage,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})}),a&&(0,T.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:(0,T.jsx)(d.FormattedMessage,{defaultMessage:"Auto-updated by Notion Calendar",id:"database.tableHeaderCell.tooltipNotionCalendarDescription"})})]})},delayThreshold:C?0:500,placement:I.ug.Left,disableTooltip:y.p1(S),render:t=>(0,T.jsxs)("div",{style:q(this.environment,this.theme,this.props.style),onMouseMove:()=>W(this.props.property),onMouseLeave:H,children:[!m.isMobile&&!o&&!(a||!n)&&!p&&(0,T.jsx)(N.Z,{isVisible:!0,animationStyle:{opacity:x?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,T.jsx)("div",{style:{width:L.C$+4,marginLeft:-(L.C$+4),...this.props.dragHandleStyle},onMouseMove:()=>W(this.props.property),onMouseLeave:H,children:(0,T.jsx)(L.ZP,{role:"cell",disallowTabbing:!0,onClick:e=>function(e,t,o){b.X9()||k.Z.setState({...k.Z.state,openProperty:{property:t,isInPeekRenderer:o}})}(0,this.props.property,this.props.isInPeekRenderer)})})}),(0,T.jsx)(O.ZP,{style:this.props.popupStyle,popupType:m.isMobile?O.kQ.SlideUp:O.kQ.Popup,originGap:1,alignmentToOrigin:O.ZP.Alignment.Start,render:this.renderPopup,open:Boolean(_&&_.property===e&&_.isInPeekRenderer===i),onDismiss:()=>{k.Z.setState({...k.Z.state,openProperty:void 0});const e=h.settingsStore;c.E3({collectionSettingsStore:e})},origin:l??this.renderOrigin(t),ref:e=>{this.popupContainer=e}})]},e)})}}function z(e){var t;window.__c={n:"PagePropertyRowNameLabel"};const{schema:o,property:a,disabled:i,locked:r,canConfigureCollection:s,events:l}=e,d=o[a],{isMobile:c}=(0,n.Fy)();return d?(0,T.jsx)(B.Z,{role:"cell",id:e.propertyNameAriaId,style:{display:"flex",alignItems:"center",height:"100%",width:"100%",borderRadius:4,padding:"0 6px"},disabled:i||r||!s,...l,children:(0,T.jsx)(A.Z,{propertySchema:d,showIcon:!e.hideIcon,badge:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(A.o,{propertySchema:d}),!c&&!(null===(t=d.description)||void 0===t||!t.length)&&(0,T.jsx)(V.Z,{setIsHovered:e.setIsDescriptionIconTooltipHovered})]}),style:{fontSize:14},property:a})}):null}K.displayName="PagePropertiesRowName",K.contextTypes={...a.w,...m.xm};const E=(0,d.injectIntl)(K);function q(e,t,o){const{device:a}=e;return{display:"flex",alignItems:"center",height:34,width:a.isMobile?120:160,flex:"none",color:t.mediumTextColor,...o}}function H(){k.Z.setState({...k.Z.state,hoveredProperty:void 0})}function W(e){k.Z.setState({...k.Z.state,hoveredProperty:e})}},68139:(e,t,o)=>{o.d(t,{Z:()=>H});var a=o(67294),n=o(83355),i=o(15145),r=o(92996),s=o(84619),l=o(22225),d=o(13148),c=o(12217),p=o(58810),u=o(17683),g=o(32240),m=o(47453),h=o(98519),f=o(72126),y=o(82990),v=o(9291),S=o(50906),b=o(26999),x=o(28651),M=o(48543),k=o(73744),_=o(12534),C=o(33929),P=o(39500),w=o(29376),R=o(86098),j=o(19671),I=o(88923),T=o(97039),Z=o(78030),D=o(53876),F=o(64921),V=o(5145),N=o(50478),B=o(73063),L=o(11470),O=o(26388),A=o(10009),K=o(85893);const z=(0,v.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.navigateButton.openAsPageTitle"}});class E extends n.Z{constructor(){var e;super(...arguments),e=this,this.outerRef=a.createRef(),this.relationTokenBlockStoreRef=a.createRef(),this.storeTypes={mouseStore:x.Z},this.isSprintsTypedProperty=this.createComputedStore((()=>this.props.targetCollectionStore.getFormatStore().getKeyStore("app_config_uri").getValue()===r.p$)),this.renderOuterDesktopRelationRow=(e,t,o,a,n,i,r)=>(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},ref:this.outerRef,children:["section"===t&&this.stores.mouseStore.state.mouseEntered&&o&&(0,K.jsx)(O.ZP,{renderTooltip:()=>(0,K.jsx)(v.FormattedMessage,{defaultMessage:"Drag <medium>to move</medium>",id:"database.relationMenuRow..dragPrompt.text",values:{medium:e=>(0,K.jsx)("span",{style:{color:this.theme.mediumInvertedTextColor},children:e})}}),render:e=>(0,K.jsx)(B.Z,{hasBackground:!1,ariaLabel:"Drag to move a related page",icon:c.D,iconStyle:{width:14,height:14,fill:this.theme.lightIconColor},hoveredStyle:{borderRadius:4},style:{cursor:"grab",width:N.C$+4,marginLeft:-(N.C$+4),height:24,borderRadius:4},...e})}),"section"===t?(0,K.jsx)("div",{style:$(this.props.rowType,this.theme,a),onContextMenu:e=>G(e,this.environment),onMouseEnter:i,onMouseLeave:r,onClick:this.handleRelationSectionRelationMenuRowClick,role:"button","aria-label":"Editable title","aria-disabled":this.props.disabled,tabIndex:this.props.disabled?-1:0,children:e}):(0,K.jsx)("div",{style:$(this.props.rowType,this.theme,a),onContextMenu:e=>G(e,this.environment),onMouseEnter:i,onMouseLeave:r,role:"button",tabIndex:this.props.disabled?-1:0,"aria-disabled":this.props.disabled,onClick:e=>{(0,_.ZP)({event:e,context:_.Af.EditorClick,callback:()=>{(0,P.uG)(e)||(n?n(this.outerRef.current):this.handleButtonClick(e,this.isSprintsTypedProperty.state))}})},children:e})]}),this.renderInnerRelationMenuRow=(e,t,o,a,n,i,r,s,d,c,p)=>{const u="section"===o&&!this.props.disabled&&t.canEdit()&&!a.isMobile,g=w.BI(this.props.collectionStore.getSchema(),this.props.property);let h,f;return h=s?g?(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePR.message",defaultMessage:"Unlink PR"}):(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePage.message",defaultMessage:"Unlink page"}):g?(0,K.jsx)(v.FormattedMessage,{defaultMessage:"Link PR",id:"database.relationMenuRow.tooltip.addPR.message"}):(0,K.jsx)(v.FormattedMessage,{defaultMessage:"Link page",id:"database.relationMenuRow.tooltip.addPage.message"}),f="section"===o&&s?g?(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPRInline.message",defaultMessage:"Insert new PR"}):(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):g?(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPR.message",defaultMessage:"Link another PR"}):(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPage.message",defaultMessage:"Link another page"}),(0,K.jsxs)(K.Fragment,{children:[e&&"popup"===o&&(0,K.jsx)(V.ZP,{iconSize:12,style:{marginLeft:2,height:20}}),a.isPhone?this.renderRelationToken(a,u):this.renderRelationProperties(a,u),(n||i)&&(0,K.jsxs)("div",{style:Q(this.theme,n||i,!1),children:[n&&(0,K.jsx)(q,{isOpenPage:!1,ariaLabel:s?"Unlink page":"Link page",onClick:d,style:{borderRadius:3},icon:s?l.g:m.R,tooltipMessage:h}),i&&c&&(0,K.jsx)(q,{isOpenPage:!1,ariaLabel:"section"===o&&s?"Insert new page":"Link another page",onClick:()=>c(this.outerRef.current),style:{borderRadius:0},icon:m.R,tooltipMessage:f})]}),r&&p&&this.renderRelationMenuRowOpenPageButton(n,i,p)]})},this.renderRelationMenuRowOpenPageButton=(e,t,o)=>(0,K.jsx)("div",{style:Q(this.theme,e||t,!0),children:(0,K.jsx)(q,{isOpenPage:!0,ariaLabel:"side_peek"===this.peekModeStore.state?"Open in side peek":"center_peek"===this.peekModeStore.state?"Open in center peek":"Open as page",onClick:o,style:{width:60},icon:"side_peek"===this.peekModeStore.state?g.y:"center_peek"===this.peekModeStore.state?u.Q:p.Z,tooltipMessage:"side_peek"===this.peekModeStore.state?(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPageSidePeek.message",defaultMessage:"Open in side peek"}):"center_peek"===this.peekModeStore.state?(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPageCenterPeek.message",defaultMessage:"Open in center peek"}):(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.openPage.message",defaultMessage:"Open as page"})})}),this.renderSprintsInnerRelationMenuRow=(e,t,o,a,n,i,r,s,d,c,p)=>{const u="section"===o&&!this.props.disabled&&t.canEdit()&&!a.isMobile;return(0,K.jsxs)(K.Fragment,{children:[e&&"popup"===o&&(0,K.jsx)(V.ZP,{iconSize:12,style:{marginLeft:2,height:20}}),a.isPhone?this.renderRelationToken(a,u):this.renderRelationProperties(a,u),s&&"popup"===o&&(0,K.jsx)("div",{style:{display:"inline-flex",marginLeft:"auto",alignItems:"center",justifyContent:"center",padding:0,height:24},children:(0,h.k)({width:16,height:16,fill:this.theme.regularIconColor,display:"inline-flex",alignItems:"center",justifyContent:"center"})}),(n||i)&&(0,K.jsxs)("div",{style:Q(this.theme,n||i,!1),children:[n&&(0,K.jsx)(q,{isOpenPage:!1,ariaLabel:s?"Remove this sprint":"Add this sprint",onClick:d,style:{borderRadius:3},icon:s?l.g:m.R,tooltipMessage:s?(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.removePage.messageSprints",defaultMessage:"Remove this sprint"}):(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.addPage.messageSprints",defaultMessage:"Add this sprint"})}),i&&c&&(0,K.jsx)(q,{isOpenPage:!1,ariaLabel:"section"===o&&s?"Insert new page":"Move to a different sprint",onClick:()=>c(this.outerRef.current),style:{borderRadius:0},icon:m.R,tooltipMessage:"section"===o&&s?(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPageInline.message",defaultMessage:"Insert new page"}):(0,K.jsx)(v.FormattedMessage,{id:"database.relationMenuRow.tooltip.insertPage.messageSprints",defaultMessage:"Move to a different sprint"})})]}),r&&p&&this.renderRelationMenuRowOpenPageButton(n,i,p)]})},this.renderRelationToken=function(t,o){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{relatedPageStore:n,rowType:i,pageStore:r}=e.props;return(0,K.jsx)("div",{style:{display:"flex",alignItems:"center",flex:"0 1 auto",minHeight:0,...!a&&{minWidth:40},paddingLeft:"section"===i?4:6},children:(0,K.jsx)(A.Z,{ref:e.relationTokenBlockStoreRef,format:s.lo.Inline,blockId:n.id,isSingle:!0,parentStore:r,showRelationTooltip:!0,noUnderline:e.isSprintsTypedProperty.state,style:{display:"flex",alignItems:"center",margin:0,whiteSpace:"nowrap",marginRight:"section"===i?0:t.isTablet?8:0},tooltipOriginStyle:{minWidth:0},titleStyle:{...y.Z.textOverflowStyle,maxWidth:"100%"},tooltipDynamicMouseOverflow:!0,clickTitleBehavior:o?"edit":void 0,onTitleEnter:e.props.onInsertInline,index:e.props.index},n.id)})},this.renderRelationProperties=(e,t)=>{const{relatedPageStore:o,targetCollectionStore:n,blockPropertyValueOverlayStore:i,rowType:r}=this.props,s=this.targetPropertiesToDisplay.state;if(f.xb(s))return;const l="section"!==r||(this.props.disabled||!o.canEdit()||this.environment.device.isMobile),d=s.map((s=>{if("title"===s.property){const o=this.isSprintsTypedProperty.state;return(0,K.jsx)(a.Fragment,{children:this.renderRelationToken(e,t,o)},"title")}return(0,K.jsx)(T.Z,{store:o,property:s.property,disabled:l,locked:!1,format:"section"===r?Z.C.RelationSection:Z.C.Relation,tableWrap:!1,blockPropertyValueOverlayStore:i??j.Z,collectionStore:n},s.property)}));return(0,K.jsx)("div",{style:{display:"flex",marginRight:8,maxHeight:22,alignItems:"center",...y.Z.textOverflowStyle},children:d})},this.targetPropertiesToDisplay=this.createComputedStore((()=>{const{collectionStore:e,targetCollectionStore:t,property:o}=this.props,a=t.getSchema();return a?w.U1({collectionStore:e,property:o}).filter((e=>e.visible&&("title"===e.property||a[e.property]))):[]}),!0),this.peekModeStore=this.createComputedStore((()=>{if(I.default.state.open)return I.default.state.mode;const{blockPropertyValueOverlayStore:e}=this.props,t=null==e?void 0:e.state;if(null==t||!t.isOpen||null==t||!t.collectionContextStore)return I.default.state.mode;const o=t.collectionContextStore,a=null==o?void 0:o.collectionViewStore(),n=null==a?void 0:a.getType();return a&&n?a.getFormat().collection_peek_mode??M.Ls[n]:I.default.state.mode})),this.handleMouseMove=()=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0})},this.handleMouseLeave=()=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1})},this.handleButtonClick=(e,t)=>{const{collectionStore:o,targetCollectionStore:a,relatedPageStore:n,onActionButtonClick:r,disabled:s,rowType:l,blockPropertyValueOverlayStore:d,isSelected:c}=this.props;if(s||c){if(t)return;const r=k.DJ(e),s=o.id===a.id?I.default.state.resultsStore:void 0,c=o.id===a.id?I.default.state.collectionContextStore:void 0,p=I.default.isSidePeekOpen();if(b.CH({environment:this.environment,store:n,peekMode:this.peekModeStore.state,openInNew:r,resultsStore:s,collectionContextStore:c,pageVisitSource:i.tY.PeekOpen}),S.XXm(this.environment,{from:"inline"===l||"section"===l?"property_value":"configure_relation_modal",meta_click:Boolean(r)}),"popup"===l&&!p){(d??j.Z).setState({isOpen:!1})}}else r(e)},this.handleRelationSectionRelationMenuRowClick=e=>{const{collectionStore:t,targetCollectionStore:o,isSelected:a,relatedPageStore:n,onActionButtonClick:r,disabled:s}=this.props;(0,_.ZP)({event:e,context:_.Af.EditorClick,callback:()=>{if(!(0,P.uG)(e))if(a||s){const a=k.DJ(e),r=t.id===o.id?I.default.state.resultsStore:void 0,s=t.id===o.id?I.default.state.collectionContextStore:void 0;b.CH({environment:this.environment,store:n,peekMode:this.peekModeStore.state,openInNew:a,resultsStore:r,collectionContextStore:s,pageVisitSource:i.tY.PeekOpen}),S.XXm(this.environment,{from:"relation_section",meta_click:Boolean(a)})}else r(e)}})}}get registries(){return[R.Z]}renderComponent(){const{device:e}=this.environment;return e.isPhone&&"popup"===this.props.rowType?(0,K.jsx)(U,{...this.props}):this.renderDesktopMenuItem()}renderDesktopMenuItem(){const{disabled:e,locked:t,canDrag:o,relatedPageStore:a,focused:n,isSelected:i,rowType:r,targetCollectionStore:s,onActionButtonClick:l,onSecondaryButtonClick:d,onOpenPageButtonClick:c,onMouseEnter:p,onMouseLeave:u}=this.props,{device:g}=this.environment,h=(g.isMobile||n)&&!t&&!e;if(this.isSprintsTypedProperty.state)return this.renderSprintsDesktopMenuItem();const y="section"!==r?(g.isMobile||n)&&!t&&!e:h,S=!t&&!e&&"section"===r&&!g.isMobile&&!(1===this.props.propertyLimit)&&s.canEdit(),b=!g.isMobile&&!t&&n&&!e&&("inline"===r||"section"===r)&&!f.o8(d),x=!g.isMobile&&n&&!e&&"section"===r&&!f.o8(c),M=this.renderInnerRelationMenuRow(o,a,r,g,y,b&&"section"!==r,x,i,l,d,c),k=this.theme.mediumInvertedTextColor;return(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"calc(100% + 48px)",paddingLeft:48,position:"relative",left:-48},onMouseEnter:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,ref:this.outerRef,children:[this.stores.mouseStore.state.mouseEntered&&S&&(0,K.jsx)(O.ZP,{renderTooltip:()=>(0,K.jsx)(v.FormattedMessage,{defaultMessage:"Click <medium>to insert a page below</medium>",id:"database.relationMenuRow.tooltip.floatingAddPageButton.message",values:{medium:e=>(0,K.jsx)("span",{style:{color:k},children:e})}}),render:e=>(0,K.jsx)(B.Z,{hasBackground:!1,ariaLabel:"Create a new related page",icon:m.R,iconStyle:{width:16,height:16,fill:this.theme.lightIconColor},onClick:this.props.onInsertInline,hoveredStyle:{borderRadius:4},style:{marginLeft:o?-44:-22,position:"absolute",marginRight:4},...e})}),this.renderOuterDesktopRelationRow(M,r,o,n,void 0,p,u)]})}renderSprintsDesktopMenuItem(){const{disabled:e,locked:t,canDrag:o,relatedPageStore:a,focused:n,isSelected:i,rowType:r,onActionButtonClick:s,onSecondaryButtonClick:l,onOpenPageButtonClick:d,onMouseEnter:c,onMouseLeave:p,propertyLimit:u}=this.props,{device:g}=this.environment,m=(g.isMobile||n)&&!t&&!e,h="section"!==r?(g.isMobile||n)&&!t&&!e&&1!==u&&"popup"===r&&i:m,y=!g.isMobile&&!t&&n&&!e&&!f.o8(l),v=!g.isMobile&&n&&!e&&("section"===r||"inline"===r)&&!f.o8(d),S=v,b=this.renderSprintsInnerRelationMenuRow(o,a,r,g,h,y&&!S&&"section"!==r,v,i,s,l,d);return this.renderOuterDesktopRelationRow(b,r,o,n,l,c,p)}}function q(e){const{isOpenPage:t,onClick:o,style:a,icon:n,tooltipMessage:i,ariaLabel:r}=e;return(0,K.jsx)(O.ZP,{renderTooltip:()=>i,render:e=>(0,K.jsx)(B.Z,{hasBackground:!1,ariaLabel:r,icon:n,onClick:o,caption:t&&C.default.formatMessage(z.openAsPageTitle),hoveredStyle:{borderRadius:4},style:{height:20,width:20,flex:"0 0 auto",...a},...e})})}E.displayName="RelationMenuRow";const H=E;function W(e){let{onActionButtonClick:t}=e;return(0,K.jsx)(F.Z,{mobileFeedback:!0,onClick:t,style:{padding:12,marginRight:-12},children:(0,d.U)({width:20,height:20})})}function U(e){const t=!e.disabled&&e.isSelected;return(0,K.jsx)(L.Z,{...e,store:e.relatedPageStore,hidePath:!0,right:t?(0,K.jsx)(W,{onActionButtonClick:e.onActionButtonClick}):void 0})}function $(e,t,o){return{...y.Z.textOverflowStyle,display:"flex",alignItems:"center",position:"relative",borderRadius:4,width:"100%",height:w.Mu,paddingTop:2,paddingRight:4,paddingBottom:2,paddingLeft:0,fontSize:D.z6,margin:"popup"===e?"0px 4px":0,cursor:"pointer",background:o?t.buttonHoveredBackground:void 0,userSelect:"none"}}function Q(e,t,o){return{position:"absolute",right:o?t?36:6:6,top:4,display:"inline-flex",flexShrink:0,borderRadius:4,overflow:"hidden",padding:2,gap:1,background:e.popoverBackground,boxShadow:e.lightBoxShadow}}function G(e,t){const{device:o}=t;o.isAndroid&&o.isPhone&&e.preventDefault()}},52247:(e,t,o)=>{o.d(t,{Z:()=>de});o(57658);var a=o(67294),n=o(73935),i=o(83355),r=o(1302),s=o(86628),l=o(24405),d=o(49085),c=o(92996),p=o(41432),u=o(99036),g=o(80951),m=o(39068),h=o(84619),f=o(89767),y=o(47453),v=o(70663),S=o(35840),b=o(4615),x=o(21202),M=o(6287),k=o(70203),_=o(82990),C=o(9291),P=o(50906),w=o(51365),R=o(31869),j=o(98834),I=o(60971),T=o(9953),Z=o(14473),D=o(98104),F=o(82530),V=o(51592),N=o(66890),B=o(49616),L=o(75079),O=o(33929),A=o(65598),K=o(29376),z=o(77907),E=o(86098),q=o(45452),H=o(29798),W=o(85526),U=o(26136),$=o(78030),Q=o(88071),G=o(64921),X=o(79131),Y=o(32163),J=o(72495),ee=o(26388),te=o(80559),oe=o(68139),ae=o(85893);const ne={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};class ie extends i.Z{constructor(){super(...arguments),this.storeTypes={menuListStore:H.Z,customTokenLimit:d.default.createClass(10),draggableListStore:q.Z},this.getRelationMenuRows=(e,t,o,a,n,i)=>{const{store:r,collectionStore:s,disabled:l,property:d,locked:p}=this.props,g=o.getFormatStore().getKeyStore("app_config_uri").getValue()===c.p$;return e.reduce(((e,c,m)=>{const h=U.G.createChildStore(r,c),f=h.getAssociatedCollectionStore();if((null==f?void 0:f.id)===u.F0(t)){const c={key:h.id,render:e=>(0,ae.jsx)(oe.Z,{...e,canDrag:n&&1!==t.limit&&r.canEdit(),collectionStore:s,targetCollectionStore:o,relatedPageStore:h,disabled:l,canConfigureCollection:i,locked:p,isSelected:!0,pageStore:r,property:d,rowType:"section",onActionButtonClick:()=>this.handleRemoveRelationClick(a,h,o),onMouseLeave:()=>this.stores.menuListStore.unsetFocus(),onSecondaryButtonClick:()=>this.handleCreateNewRelation(m+1,o,"relation_section_inline"),onInsertInline:g?()=>{D.ZH(this.environment)}:()=>this.handleCreateNewRelation(m+1,o,"relation_section_inline"),onOpenPageButtonClick:()=>{Z.O(a,h,this.environment,"relation_section_inline")},index:m+1,propertyLimit:t.limit}),action:e=>{}};e.push(c)}return e}),[])},this.relationValueStore=this.createComputedStore((()=>{const{store:e,schema:t,property:o}=this.props,a=t[o];if(!a||"relation"!==a.type)return[];const n=e.getPropertyValue(o);return g.j$({relationValue:g.rq(n),propertySchema:a,getRecordModel:e.getRecordModel})}),!0),this.numberOfRelations=this.createComputedStore((()=>this.relationValueStore.state.length)),this.handleRemoveRelationClick=(e,t,o)=>{var a;const{store:n,schema:i,property:r,blockPropertyValueOverlayStore:s}=this.props,{collectionContextStore:l}=this.context,d=i[r];if("relation"!==(null==d?void 0:d.type)||!l)return;const c=d.limit?[]:e.filter((e=>e.id!==t.id));F.createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:this.environment,perform:e=>{R.sf({store:n,propertyId:r,value:c,environment:this.environment,relatedPageId:t.id,propertySchema:d,transaction:e,collectionContextStore:l,analyticsData:{isFromBulkActionsToolbar:B.VM(s),analyticsFrom:B.Sy($.C.Page)},isUnthrottled:!1})}}),P.WFT(this.environment,{from:"relation_section",collection_id:null===(a=this.props.collectionStore)||void 0===a?void 0:a.id,target_collection_id:null==o?void 0:o.id})},this.handleDraggableListDrop=(e,t)=>{const{menuListStore:o}=this.stores,{collectionStore:a,schema:n,property:i,store:r}=this.props,s=n[i];if(!s||"relation"!==s.type)return;const l=u.j0(s);if(!l)return;const d=U.NW.createChildStore(r,l);if(!(0,A.OY)(r)||!this.props.property)return;const c=r.getPropertyValue(this.props.property),p=g.j$({relationValue:g.rq(c),propertySchema:s,getRecordModel:r.getRecordModel});pe({value:[...e.map((e=>({id:e,spaceId:a.pointer.spaceId,table:x.iU}))),...p.slice(e.length)]},d,this.props.store,this.props.property,this.environment),P.yT1(this.environment,{from:"relation_section"}),I.sv({store:o,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition}})},this.handleOpenProperty=(e,t,o)=>{const{blockPropertyValueOverlayStore:a,store:i,property:r}=this.props,{collectionContextStore:s}=this.context,l=n.findDOMNode(this.relationPropertyPageSectionRef);if(!(l&&l instanceof Element))return;const d=o?null==o?void 0:o.getBoundingClientRect():l.getBoundingClientRect(),c=e?d.top+K.Mu:d.top+5,p=new DOMRect(d.left,c,d.width,d.height);w.bA({environment:this.environment,blockPropertyValueOverlayStore:a,store:i,property:r,rect:p,format:$.C.Page,mode:t,collectionContextStore:s}),P.udZ(this.environment,{from:"relation_section"})},this.handleRelationPropertyPageSectionRefMount=e=>{e&&(this.relationPropertyPageSectionRef=e)},this.handleCreateNewRelation=(e,t,o)=>{const{store:a,schema:n,property:i,collectionStore:r}=this.props,{collectionContextStore:s}=this.context;if(!i)return;const l=n[i];if(!l||"relation"!==l.type)return;if(!a.canEdit())return;const d=(0,b.ZP)(),c=r.pointer.spaceId,p=l.limit,u={id:d,table:x.iU,spaceId:c};if(!(0,A.OY)(a)||!this.props.property)return;const m=a.getPropertyValue(this.props.property),h=g.j$({relationValue:g.rq(m),propertySchema:l,getRecordModel:a.getRecordModel}),{customTokenLimit:f}=this.stores,y=f.state;e&&e+1>y&&f.setState(e+1);pe({newPage:{id:d,spaceId:c,name:""},value:p?[u]:e?[...h.slice(0,e),u,...h.slice(e)]:[u,...h]},t,this.props.store,this.props.property,this.environment),P.W2j(this.environment,{...(0,L.Pn)(s),from:o,type:"page",target_collection_id:null==t?void 0:t.id,new_page_id:d,creating_block_id:d})}}renderComponent(){const{schema:e,format:t,locked:o,property:a,collectionStore:n,store:i,disabled:r,visibility:s,isInPeekRenderer:l,topBorder:d,disableRowNameInteractivity:p}=this.props,{device:g}=this.environment,{collectionContextStore:m}=this.context,S=e[a];if("relation"!==(null==S?void 0:S.type)||!m)return;const b=u.j0(S);if(!b)return;const x=U.NW.createChildStore(i,b),M=m.permissionScopes.state,k=this.relationValueStore.state,{customTokenLimit:_}=this.stores,P=_.state,w=k.slice(0,P),R=x.getFormatStore().getKeyStore("app_config_uri").getValue()===c.p$;if("section_hide"===s)return;if("minimal"===s||0===this.numberOfRelations.state)return(0,ae.jsx)(re,{property:a,propertySchema:S,numberOfRelations:this.numberOfRelations.state,onHandleOpenProperty:this.handleOpenProperty,onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,schema:e,format:t,disabled:r,locked:o,canConfigureCollection:M.canConfigureCollection,blockStore:i,collectionStore:n,collectionContextStore:m,isInPeekRenderer:l,targetCollectionStore:x});const j=1===S.limit,I=!(g.isMobile||r||o||j),T=this.getRelationMenuRows(w,S,x,k,I,M.canConfigureCollection),Z=T.map((e=>e.key.toString())),D=(0,ae.jsx)(Y.Z,{type:Y.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,ae.jsx)(J.Z,{...e,disableDesktopPadding:!0,disableMobileBorders:!0,children:I?(0,ae.jsx)(X.ZP,{direction:"vertical",keys:Z,renderKey:t=>e.children[Z.indexOf(t)],onDrop:this.handleDraggableListDrop,store:this.stores.draggableListStore}):e.children}),items:T}]}),F=x.canEdit(),V=i.canEdit(),N={maxWidth:g.isMobile?"none":300,...!g.isMobile&&{width:"auto"},...g.isMobile&&{paddingLeft:"none"}};return(0,ae.jsx)(se,{collectionContextStore:m,title:(0,ae.jsx)(te.Q,{schema:e,format:t,property:a,blockStore:i,collectionStore:n,disabled:r,locked:o,canConfigureCollection:M.canConfigureCollection,intl:O.default.getIntl(),style:N,popupStyle:N,isInPeekRenderer:l,hideDragHandle:p,disableRowNameInteractivity:p}),collectionStore:n,targetCollectionStore:x,property:a,showRight:!0,disabled:r,schema:e,format:t,locked:o,canEditTargetCollection:x.canEdit(),canConfigureCollection:M.canConfigureCollection,canEditCurrentPage:V,handleMouseMove:this.props.handleMouseMove,onHandleOpenProperty:()=>{this.handleOpenProperty(!1)},onHandleRelationPropertyPageSectionRefMount:this.handleRelationPropertyPageSectionRefMount,onTitleEnter:()=>this.handleCreateNewRelation(void 0,x,"relation_section_inline"),handleClearProperty:()=>ue(x,this.props.store,this.props.property,this.environment),topBorder:d,children:(0,ae.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",paddingBottom:"12px",paddingTop:"12px",width:"100%",...g.isMobile&&{paddingLeft:"none"}},onMouseMove:this.props.handleMouseMove,onMouseLeave:this.props.handleMouseLeave,children:[D,k.length>P&&(0,ae.jsx)(G.Z,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>_.setState(P+10),children:(0,ae.jsx)(Q.Z,{count:k.length-P,format:h.lo.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),F&&V&&!o&&(0,ae.jsxs)(G.Z,{style:(B=this.theme,{display:"flex",alignItems:"center",color:B.lightTextColor,borderRadius:4,paddingLeft:4,paddingRight:6,height:32,width:"100%",fontSize:14}),onClick:()=>{R?ue(x,this.props.store,this.props.property,this.environment):this.handleCreateNewRelation(k.length>=P?P:k.length+1,x,"relation_section_footer")},disabled:r||o,children:[R?(0,f.R)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===S.limit?(0,v.h)(ce(this.theme)):(0,y.R)(ce(this.theme)),(0,ae.jsxs)("div",{style:ne,children:[R&&(0,ae.jsx)("span",{style:{color:this.theme.mediumTextColor},children:(0,ae.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!R&&(1===S.limit?(0,ae.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace linked page from {propertyName}",values:{propertyName:S.name}}):(0,ae.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New page in {propertyName}",values:{propertyName:S.name}}))]})]})]})},a);var B}}function re(e){window.__c={n:"RelationPropertyMinimalPageSection"};const{property:t,propertySchema:o,numberOfRelations:n,schema:i,format:r,disabled:d,locked:p,canConfigureCollection:u,blockStore:g,collectionStore:h,onHandleOpenProperty:f,onHandleRelationPropertyPageSectionRefMount:y,isInPeekRenderer:v,targetCollectionStore:S}=e,b=(0,l.yK)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.mediumTextColor,width:"100%"},minimalButton:{display:"inline-flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:_.Z.fontWeight.medium,color:e.mediumTextColor},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:_.Z.fontWeight.medium,color:e.mediumTextColor},iconStyle:{width:14,height:14,fill:e.mediumIconColor,marginRight:6,alignItems:"baseline"},pagePropertiesRowName:{width:"100%",display:"inline-flex",flexWrap:"wrap"}})),[]),x=(0,l.Fg)(),M=(0,a.useCallback)((()=>{W.Z.setState({...W.Z.state,hoveredProperty:t})}),[t]),k=(0,a.useCallback)((()=>{W.Z.setState({...W.Z.state,hoveredProperty:void 0})}),[]),P=(0,s.VK)((()=>S.getFormatStore().getKeyStore("app_config_uri").getValue()),[S]),w=(0,V.sN)(c.p$),R=(0,V.Q_)(c.p$);return(0,ae.jsx)("div",{style:b.hoverButton,onMouseMove:M,onMouseLeave:k,children:(0,ae.jsx)(te.Q,{schema:i,format:r,property:t,blockStore:g,collectionStore:h,disabled:d,locked:p,canConfigureCollection:u,intl:O.default.getIntl(),style:b.pagePropertiesRowName,popupStyle:b.pagePropertiesRowName,origin:(0,ae.jsx)("div",{ref:y,style:b.minimalButtonWrapper,children:(0,ae.jsx)(G.Z,{style:b.minimalButton,onClick:()=>f(!0),onContextMenu:e=>{d||p||!u||(e.preventDefault(),W.Z.setState({...W.Z.state,openProperty:{property:t,isInPeekRenderer:v}}))},children:(0,ae.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ae.jsx)(m.ZP,{size:14,style:b.iconStyle,theme:x,type:o.type??"relation",icon:o.icon}),P===c.p$?(0,ae.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:n,propertyName:o.name,singleTypedItemName:w,pluralTypedItemName:R}}):(0,ae.jsx)(C.FormattedMessage,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:n,propertyName:o.name}})]})},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:v})})}function se(e){window.__c={n:"RelationPropertyPageSectionHeader"};const{collectionStore:t,targetCollectionStore:o,property:a,showRight:n,disabled:i,locked:r,style:l,children:d,canEditTargetCollection:p,canConfigureCollection:g,canEditCurrentPage:m,handleMouseMove:h,onHandleOpenProperty:f,onHandleRelationPropertyPageSectionRefMount:v,onTitleEnter:b,topBorder:x=!0}=e,M=(0,s.VK)((()=>o.isSyncedCollection()),[o]),k=(0,s.VK)((()=>{const e=t.getSchema()[a];return Boolean(e&&u.NK(e))}),[t,a]),_=(0,s.VK)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===c.p$),[o]);return(0,ae.jsx)("div",{style:{width:"100%"},ref:v,children:(0,ae.jsx)(J.Z,{...e,topBorder:x,children:d,noTextOverflow:!0,isTitleUppercase:!1,right:n&&!M&&!k&&(0,ae.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[m&&(0,ae.jsx)(le,{disabled:i,handleMouseMove:h,onClick:f,icon:S.R,tooltipMessage:_?(0,ae.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,ae.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${a}`),p&&m&&!_&&!r&&(0,ae.jsx)(le,{disabled:i,handleMouseMove:h,onClick:b,icon:y.R,tooltipMessage:_?(0,ae.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButtonSprints.message",defaultMessage:"Create new sprint"}):(0,ae.jsx)(C.FormattedMessage,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.addButton.message",defaultMessage:"Add new page"})},`addIcon-${a}`),(0,ae.jsx)(z.LazyRelationPropertyCustomizeLayoutMenu,{collectionStore:t,targetCollectionStore:o,property:a,disabled:i||!g,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:2,width:"100%",...l},desktopTitleStyle:{height:6,paddingLeft:0,paddingRight:8,paddingTop:24,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function le(e){window.__c={n:"RelationPropertyPageSectionHeaderButton"};const{disabled:t,handleMouseMove:o,onClick:a,icon:n,tooltipMessage:i}=e,r=(0,l.yK)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,ae.jsx)(ee.ZP,{renderTooltip:()=>i,render:e=>(0,ae.jsx)(G.Z,{style:r.buttonStyle,onMouseMove:o,onClick:a,disabled:t,...e,children:n(r.iconStyle)})})}ie.displayName="RelationPropertyPageSection",ie.contextTypes={...i.w,...N.xm};const de=ie;function ce(e){return{width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:e.lightIconColor}}function pe(e,t,o,a,n){if(!(0,A.OY)(o)||!a)return;let i;F.createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:n,perform:r=>{const s=t.id;if(e.newPage&&s){const a=k.TPx(e.newPage.name),l={id:e.newPage.id,version:0,type:p.Ti.page,parent_id:s,parent_table:M.v,alive:!0,properties:{title:a},collection_id:void 0,space_id:e.newPage.spaceId};i=T.ae({environment:n,table:x.iU,value:l,inMemoryRecordCache:t.inMemoryRecordCache,transaction:r});const d=U.G.createChildStore(o,i.pointer),c=t.getDefaultTemplatePageStore();c&&j.ob({title:{text:a},environment:n,store:d,templateStore:c,isKeyboard:!1,isCreateIn:!1,transaction:r,from:"relation_property_page_section"})}if(e.value){const t=g.ow(e.value),n=o.getPropertyStore(a);T.sO({store:n,value:t,transaction:r})}}}),r.default.afterNextFlush((()=>{if(!i)return;const e=E.Z.findRow(i.id,"section",a);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),n=o.getValue(),r=n?n[0][0].length:0,s={start:{index:r,store:o},end:{index:r,store:o}};D.NA({multiSelection:s})}))}function ue(e,t,o,a){pe({value:[]},e,t,o,a)}},91007:(e,t,o)=>{o.d(t,{Z:()=>P});var a=o(67294),n=o(480),i=o(86628),r=o(24405),s=o(8848),l=o(13148),d=o(9291),c=o(38208),p=o(91851),u=o(40663),g=o(66890),m=o(33929),h=o(85957),f=o(24646),y=o(80444),v=o(3418),S=o(88923),b=o(23063),x=o(73063),M=o(32662),k=o(85893);const _="pm_intro_tooltip",C=(0,d.defineMessages)({dismissTooltip:{defaultMessage:"Dismiss tooltip",id:"components.collections.projManagementIntroTooltip.dismissTooltip"}});function P(e){window.__c={n:"ProjManagementIntroTooltip"};const t=(0,n.O7)(),o=(0,g.DK)(),P=(0,n.Fy)(),{store:w,origin:R,isFirstTooltip:j,phase:I,additionalPhaseToShowOn:T}=e,Z=(0,i.VK)((()=>y.default.state.currentUserSettingsStore),[]),D=(0,i.VK)((()=>y.default.state.currentSpaceStore),[]),F=(0,i.VK)((()=>(0,u.jH)(Z,D)),[Z,D]),V=(0,i.VK)((()=>{var e;return null==o||null===(e=o.settingsStore.state)||void 0===e?void 0:e.open}),[o]),N=(0,i.VK)((()=>{if("assign_to_someone"===F||"change_task_status"===F||"select_a_project"===F){const e=S.default.isSidePeekOpen()?590:650;return(0,h.wq)(w)&&(0,h.PQ)(t)>=e||!(0,h.wq)(w)&&(0,f.$3)(t)>=e?"right":"bottom"}return"bottom"}),[F,w,t]),B=(0,i.VK)((()=>{const e=y.default.state.inAppCalloutStore;return!(v.Z.state.openPopups.size>0||V||!e.canShow("pm_intro_tooltip"))&&(F===I||(!(F||!j)||!(!T||F!==T)))}),[V,F,I,j,T]),L=(0,a.useCallback)((()=>{j&&Z&&D&&!F&&p.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"create_a_task",currentUserSettingsStore:Z,currentSpaceStore:D})}),[F,Z,D,t,j]);(0,a.useEffect)((()=>{if(B){var e;y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:_,visible:!0}),c.AD(t,{phase:I,collection_id:null==o||null===(e=o.collectionStore())||void 0===e?void 0:e.id,space_id:null==D?void 0:D.id}),L()}}),[o,null==D?void 0:D.id,t,I,B,L]);const O=(0,a.useCallback)((()=>{var e;if(Z&&D){if("create_a_task"===I)p.uR({environment:t,requiredCurrPhase:"create_a_task",nextPhase:"assign_to_someone",currentUserSettingsStore:Z,currentSpaceStore:D});else{y.default.state.inAppCalloutStore.updateCalloutStatus({calloutId:_,visible:!1}),p.uR({environment:t,requiredCurrPhase:void 0,nextPhase:"complete",currentUserSettingsStore:Z,currentSpaceStore:D})}c.rx(t,{phase:I,collection_id:null==o||null===(e=o.collectionStore())||void 0===e?void 0:e.id,space_id:null==D?void 0:D.id})}}),[o,D,Z,t,I]),A=(0,r.yK)((e=>({popupContainer:{fontSize:12,color:s.ZP.white,position:"absolute",..."bottom"===N?{top:"calc(100% + 12px)",left:"calc(50% - 110px)"}:{},..."right"===N?{top:"select_a_project"===I?"calc(2px - 50%)":"calc(-5px - 50%)",left:"calc(100% + 12px)"}:{},background:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[700],borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:e.largeLightBoxShadow,zIndex:99},circle:{position:"absolute",..."bottom"===N?{top:-12,left:"calc(50% - 3px)"}:{},..."right"===N?{top:"calc(50% - 3px)",left:-12}:{},background:s.ZP.UIDocNotificationsDarkGrayColor,width:6,height:6,borderRadius:6,boxShadow:`0 0 0 1.5px ${e.contentBackground}`},verticalLine:{position:"absolute",..."bottom"===N?{top:-11,left:"calc(50% - 1px)",width:2,height:11}:{},..."right"===N?{top:"calc(50% - 1px)",left:-11,width:11,height:2}:{},background:s.ZP.UIDocNotificationsDarkGrayColor},popupTitle:{width:"90%",fontWeight:500,marginBottom:2},popupDescription:{opacity:.8,lineHeight:1.35},iconButtonStyle:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:s.ZP.white},dotStyle:{width:5,height:5,borderRadius:"50%",background:s.FN.dark.gray[600]},activeDotStyle:{width:5,height:5,borderRadius:"50%",background:s.FN.dark.gray[800]}})),[N,I]),K=(0,a.useCallback)((()=>(0,k.jsxs)("div",{style:A.popupContainer,children:[(0,k.jsx)("div",{style:A.circle}),(0,k.jsx)("div",{style:A.verticalLine}),(0,k.jsxs)("div",{style:A.popupTitle,children:["create_a_task"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Create a new task",id:"pmIntroTooltip.title.createATask"}),"assign_to_someone"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Assign it to someone",id:"pmIntroTooltip.title.assignToSomeone"}),"change_task_status"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Update status",id:"pmIntroTooltip.title.changeTaskStatus"}),"click_view_settings"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Configure your tasks",id:"pmIntroTooltip.title.clickViewSettings"}),"select_a_project"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Select a project",id:"pmIntroTooltip.title.selectAProject"})]}),(0,k.jsxs)("div",{style:A.popupDescription,children:["create_a_task"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Start from scratch or use the dropdown to select or create a template",id:"pmIntroTooltip.subtitle.createATask"}),"assign_to_someone"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Click to select one or multiple people",id:"pmIntroTooltip.subtitle.assignToSomeone"}),"change_task_status"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Click to change the status to ‘In progress’ or something else",id:"pmIntroTooltip.subtitle.changeTaskStatus"}),"click_view_settings"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Further configure your tasks layout, grouping, properties and more",id:"pmIntroTooltip.subtitle.clickViewSettings"}),"select_a_project"===I&&(0,k.jsx)(d.FormattedMessage,{defaultMessage:"Click to add this task to a project",id:"pmIntroTooltip.subtitle.selectAProject"})]}),(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:8},children:[(0,k.jsx)("div",{style:"create_a_task"===I?A.activeDotStyle:A.dotStyle}),(0,k.jsx)(M.Z,{size:6}),(0,k.jsx)("div",{style:"assign_to_someone"===I?A.activeDotStyle:A.dotStyle}),(0,k.jsx)(M.Z,{size:6}),(0,k.jsx)("div",{style:"change_task_status"===I?A.activeDotStyle:A.dotStyle}),(0,k.jsx)(M.Z,{size:6}),(0,k.jsx)("div",{style:"select_a_project"===I||"click_view_settings"===I?A.activeDotStyle:A.dotStyle})]}),(0,k.jsx)(x.Z,{icon:l.U,style:A.iconButtonStyle,iconStyle:A.iconStyle,onClick:O,ariaLabel:m.default.formatMessage(C.dismissTooltip)})]})),[O,I,A.activeDotStyle,A.circle,A.dotStyle,A.iconButtonStyle,A.iconStyle,A.popupContainer,A.popupDescription,A.popupTitle,A.verticalLine]);return P.isMobile?(0,k.jsx)(k.Fragment,{children:R}):(0,k.jsxs)("div",{style:{position:"relative"},children:[R,(0,k.jsx)(b.Z,{isVisible:B,animationStyle:{opacity:1},enterAnimationStyle:{opacity:-10},exitAnimationStyle:{opacity:0},render:K})]})}},61679:(e,t,o)=>{o.d(t,{$K:()=>v,Ar:()=>u,Cq:()=>k,bU:()=>h,cx:()=>S,hy:()=>f,i2:()=>b,kg:()=>x,mZ:()=>y,rO:()=>M,us:()=>m});var a=o(94184),n=o.n(a),i=o(67294),r=o(60177),s=o(64338),l=o(24405),d=o(73420),c=o(97053),p=o(85893);function u(e){let{children:t,type:o,gap:a,withBottomPadding:i,style:r}=e;window.__c={n:"Layout"};const s=(0,c.Bt)(o);return(0,p.jsx)("div",{className:n()("layout",{"layout-wide":"wide"===o,"layout-wide-right-margin-expanded":"wide-right-margin-expanded"===o,"layout-side-peek":"side-peek"===o,"layout-center-peek":"center-peek"===o,"layout-home":"home"===o,"layout-home-phone":"home-phone"===o,"layout-phone":"phone"===o,"layout-tablet":"tablet"===o,"layout-template-preview":"template-preview"===o,"layout-chat":"chat"===o}),style:{paddingBottom:i?s:void 0,gap:a,...r},children:t})}const g="layout-nested-grid",m="hide-scrollbar";function h(e){return(0,p.jsx)("div",{className:n()("layout-content",e.className),style:e.style,children:e.children})}function f(e){return(0,p.jsx)("div",{className:"layout-full",style:e.style,children:e.children})}function y(e){return(0,p.jsx)("div",{className:"layout-margin-left",children:e.children})}function v(e){return(0,p.jsx)("div",{className:"layout-margin-right",children:e.children})}const S=(0,i.forwardRef)((function(e,t){return(0,p.jsx)("div",{className:n()(g,e.className),onClick:e.onClick,style:e.style,role:e.role,id:e.id,"aria-labelledby":e["aria-labelledby"],ref:t,children:e.children})}));function b(e){return(0,p.jsx)("div",{className:n()(g,"layout-margin-scrollable",{[m]:e.hideScrollbar}),style:e.style,children:(0,p.jsx)(h,{children:e.children})})}function x(e){let{items:t,style:o}=e;window.__c={n:"LayoutTabs"};const[a,n]=i.useState(0),c=(0,i.useRef)([]),u=(0,r.Dl)();(0,s.q7)(null==u?void 0:u.domLock);const g=(0,l.yK)((e=>({icon:{width:16,height:16,fill:"currentColor"},label:{fontSize:14,fontWeight:600},tab:"centered"===o?{cursor:"pointer",border:"none",padding:"6px 12px",borderRadius:20,color:e.text.secondary,background:"none"}:{cursor:"pointer",border:"none",borderBottom:"2px solid",borderColor:"transparent",padding:"6px 8px 12px",color:e.text.secondary,background:"none"},tabSelected:"centered"===o?{color:e.text.primary,background:e.tint.regular}:{color:e.text.primary,borderColor:e.regularTextColor}})),[o]),m=(0,i.useId)(),f=(0,i.useCallback)((e=>`${m}-tab-${e}`),[m]),y=(0,i.useCallback)((e=>`${m}-tabpanel-${e}`),[m]),v=(0,i.useCallback)((e=>{let o;var i;("ArrowLeft"===e.key?(e.preventDefault(),o=(a+t.length-1)%t.length):"ArrowRight"===e.key&&(e.preventDefault(),o=(a+1)%t.length),void 0!==o)&&(n(o),null===(i=c.current[o])||void 0===i||i.focus())}),[a,t.length]);return(0,p.jsxs)(S,{children:[(0,p.jsx)(h,{children:(0,p.jsx)("div",{role:"tablist",children:(0,p.jsx)(d.X2,{justifyContent:"centered"===o?"center":"flex-start",children:t.map(((e,t)=>{var o;return(0,p.jsx)("button",{ref:e=>{e&&(c.current[t]=e)},id:f(t),role:"tab","aria-controls":y(t),"aria-selected":t===a,tabIndex:t===a?void 0:-1,onKeyDown:v,style:{...g.tab,...t===a&&g.tabSelected},onClick:e=>{e.stopPropagation(),n(t)},children:(0,p.jsxs)(d.X2,{gap:4,alignItems:"center",children:[null===(o=e.icon)||void 0===o?void 0:o.call(e,g.icon),e.label&&(0,p.jsx)("div",{style:g.label,children:e.label})]})},e.key)}))})})}),(0,p.jsx)(S,{id:y(a),role:"tabpanel","aria-labelledby":f(a),children:t[a]?t[a].children:null})]})}function M(e){return(0,p.jsx)("div",{className:"layout-column",style:{"--min-column-width":`${e.minWidth}px`,...e.style},children:e.children})}function k(e){return(0,p.jsxs)(M,{minWidth:e.minWidth,children:[e.left,e.right]})}},97053:(e,t,o)=>{o.d(t,{Bt:()=>k,Nr:()=>b,Qg:()=>M,WJ:()=>_,h9:()=>S,m4:()=>v,xC:()=>x});var a=o(480),n=o(97511),i=o(86628),r=o(41432),s=o(61045),l=o(57819),d=o(92650),c=o(78316),p=o(19124),u=o(12534),g=o(94841),m=o(16772),h=o(19111),f=o(94896),y=o(17963);function v(e){(0,u.ZP)({event:e,context:u.Af.EditorMouseDown,callback:()=>{}})}function S(e){(0,u.ZP)({event:e,context:u.Af.EditorClick,callback:()=>{}})}function b(e){return(0,i.VK)((()=>Boolean(y.Z.state.pageMap[e.id])||f.Z.state.pages.has(e.id)),[e.id])}function x(e,t){const o=(0,a.O7)(),r=(0,n.l)(),s=b(e),l=M(e);return(0,i.VK)((()=>{const a=o.currentUser.isLoggedIn(),n=r&&r.publicEditModeStore.state;return Boolean(e&&t&&e.isDefined()&&!e.isLocked()&&e.canEdit()&&!e.hasContent()&&a&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!s&&t.state.ready&&!l&&(!(0,p.GD)(n)||"completionPopup"!==m.default.state.type))}),[o,l,t,r,s,e])}function M(e){return(0,i.VK)((()=>{if(e.isCollectionView()){const t=e.getCollectionViewSourceCollectionStore();return!!t&&t.isSyncedCollection()}return e.isType(r.Ti.externalObjectInstancePage)}),[e])}function k(e){const{device:t,WindowSizeStore:o}=(0,a.O7)(),n=(0,i.VK)((()=>{const e=o.state.height,a=t.isMobile&&h.Z.state.open?e:0;return s._4()+a}),[o,t.isMobile]);return(0,i.VK)((()=>Boolean((0,l.RR)(m.default.state))?600:"home-phone"===e?g.jq:t.isTablet?380:t.isIOS?Math.max(350,n):t.isMobile?400:"side-peek"===e||"center-peek"===e?80:"home"===e?g.XX:"30vh"),[t,n,e])}function _(e){const t=(0,a.O7)(),o=(0,i.VK)((()=>(0,d.fg)(t,e)),[t,e]);return(0,i.VK)((()=>o&&!e.isFullWidth()?(0,d.gC)(t,(0,c.en)(e),(0,c.Ks)(e)):0),[t,o,e])}},11028:(e,t,o)=>{o.d(t,{z:()=>m});var a=o(67294),n=o(24405),i=o(94308),r=o(50063),s=o(97880),l=o(82990),d=o(70693),c=o(4308),p=o(9291),u=o(53876),g=o(85893);function m(e){window.__c={n:"VerificationPropertyLabel"};const{verificationValue:t,fontSize:o=u.z6}=e,m=(0,p.useIntl)(),h=(0,a.useMemo)((()=>c.WN(t)),[t]),f=h.type,y=(0,n.yK)((e=>({icon:{width:"expired"===f?8:14,height:"expired"===f?9:14,fill:"verified"===f?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:l.Z.fontWeight.regular,color:e.regularTextColor,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:u.Ac},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[f,o]);if("none"===f)return null;let v=null,S=null;const b=y.caption;switch(f){case"verified":v=(0,i.f)({...y.icon}),S=h.isIndefinite?(0,g.jsx)(p.FormattedMessage,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,g.jsx)(p.FormattedMessage,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:d.mb({dateTime:h.dateTimeRange.end,intl:m})}});break;case"expired":v=(0,g.jsx)("div",{style:y.expiredIconContainer,children:(0,r.X)({...y.icon})}),S=(0,g.jsx)(p.FormattedMessage,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired",values:{timeFromMoment:c.kY(h.dateTimeRange.end)}});break;default:(0,s.t1)(f)}return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,g.jsx)("div",{style:b,children:S})]})}},58230:(e,t,o)=>{o.d(t,{Z:()=>h});o(67294);var a=o(480),n=o(86628),i=o(54368),r=o(77420),s=o(19889),l=o(97880),d=o(70693),c=o(9291),p=o(26136),u=o(39111),g=o(29302),m=o(85893);function h(e){window.__c={n:"VerificationSummary"};const{isMobile:t}=(0,a.Fy)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(f,{...e})})}function f(e){window.__c={n:"VerificationSummaryMessage"};const{verificationState:t,blockStore:o}=e,a=(0,c.useIntl)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),date:(0,d.mb)({dateTime:t.startDateTime,intl:a})}}):(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,d.pe)({luxonRange:t.dateTimeRange,intl:a})}});case"expired":return(0,m.jsx)(c.FormattedMessage,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(y,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,d.pe)({luxonRange:t.dateTimeRange,intl:a})}});default:(0,l.t1)(t)}}function y(e){window.__c={n:"VerificationSummaryUser"};const{actorPointer:t,blockStore:o}=e,a=(0,n.VK)((()=>p.t1.createChildStore(o,t)),[o,t]),d={display:"flex",marginLeft:4,marginRight:4};return a.table===s.KJ?(0,m.jsx)(g.Z,{userStore:a,inline:!0,style:d,avatarSize:16,avatarMarginRight:4}):a.table===r.cZ?(0,m.jsx)(u.Z,{botStore:a,style:d,avatarSize:16}):a.table===i.y?(0,m.jsx)(g.Z,{userStore:void 0,inline:!0,style:d,avatarSize:16,avatarMarginRight:4}):void(0,l.t1)(a)}},49616:(e,t,o)=>{o.d(t,{AF:()=>x,Hw:()=>b,Sy:()=>v,TP:()=>P,VM:()=>y,X7:()=>M,X9:()=>_,aJ:()=>w,g0:()=>k,z0:()=>S});var a=o(15145),n=o(80951),i=o(58810),r=o(17683),s=o(32240),l=o(72126),d=o(38737),c=o(97880),p=o(64002),u=o(63143),g=o(9291),m=o(78030),h=o(84210),f=o(33929);function y(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function v(e){switch(e){case m.C.Table:return"table";case m.C.Board:return"board";case m.C.ListView:return"list";case m.C.GalleryView:return"gallery";case m.C.Relation:case m.C.RelationSection:return"relation_section";case m.C.Timeline:return"timeline";case m.C.Calendar:return"calendar";case m.C.Page:return"page_properties";case m.C.CompactPage:return"compact_page";case m.C.Mini:return"mini_peek";case m.C.PropertyModule:return"property_module";default:(0,c.t1)(e)}}function S(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function b(e){const{store:t,property:o,propertySchema:i}=e,r=null==i?void 0:i.type;if("title"===r)return(0,h.ZP)({store:t,fullyQualified:!1,pageVisitSource:a.tY.LinkInPage});{const e=t.getPropertyValue(o);return n.Hw(r,e)}}function x(e){let t=n.zB(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=p.Qc(t),a=o.host;if(o.protocol&&a||(o=p.Qc(`http://${t}`),a=o.host),!a)return{domain:void 0,restOfUrl:void 0};a&&(a=a.replace(/^www./i,""));const i=t.toLowerCase().indexOf(a.toLowerCase());if(-1===i)return{domain:void 0,restOfUrl:void 0};return{domain:a,restOfUrl:t.slice(i+a.length)}}function M(e){const{numberValue:t,numberFormat:o,numberShowAs:a}=e;if(!(l.i2(t)||u.z4(t)||"bar"!==(null==a?void 0:a.type)&&"ring"!==(null==a?void 0:a.type))){const e=f.default.getIntl();return"percent"===o?d.uf(t,"percent",e):`${t} / ${a.maxValue}`}}function k(e){const{property:t,collectionStore:o}=e,a=o.isSyncedCollection();return Boolean(a)&&n.wl(t)}function _(e,t){switch(e){case"side_peek":return{icon:s.y,tooltip:f.default.formatMessage(C.openInSidePeekTooltip),caption:t?"":f.default.formatMessage(C.openAsPageTitle)};case"center_peek":return{icon:r.Q,tooltip:f.default.formatMessage(C.openInCenterPeekTooltip),caption:t?"":f.default.formatMessage(C.openAsPageTitle)};case"full_page":return{icon:i.Z,tooltip:f.default.formatMessage(C.openAsPageTooltip),caption:t?"":f.default.formatMessage(C.openAsPageTitle)};default:(0,c.t1)(e)}}const C=(0,g.defineMessages)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function P(e){const t=e.getSchema();if(t)for(const[a,n]of Object.entries(t)){var o;if(n&&"text"===n.type&&"summarize"===(null===(o=n.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(a);if(t)return t}}}function w(e){const{store:t,additionalStores:o,collectionContextStore:a}=e,n=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==a?void 0:a.contextType)||!n)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==n.id}))}},16187:(e,t,o)=>{o.d(t,{BG:()=>y,Ol:()=>b,SD:()=>S,Sn:()=>v,VN:()=>g,v6:()=>h});var a=o(41892),n=o(2032),i=o(40506),r=o(7057),s=o(72126),l=o(38737),d=o(97880),c=o(9291),p=o(33929);const u=(0,c.defineMessages)({show_unique:{defaultMessage:"Show unique values",id:"database.aggregationFullName.unique_values"},count:{defaultMessage:"Count all",id:"database.aggregationFullName.count"},count_values:{defaultMessage:"Count values",id:"database.aggregationFullName.count_values"},unique:{defaultMessage:"Count unique values",id:"database.aggregationFullName.unique"},empty:{defaultMessage:"Count empty",id:"database.aggregationFullName.empty"},not_empty:{defaultMessage:"Count not empty",id:"database.aggregationFullName.not_empty"},percent_empty:{defaultMessage:"Percent empty",id:"database.aggregationFullName.percent_empty"},percent_not_empty:{defaultMessage:"Percent not empty",id:"database.aggregationFullName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationFullName.sum"},average:{defaultMessage:"Average",id:"database.aggregationFullName.average"},median:{defaultMessage:"Median",id:"database.aggregationFullName.median"},min:{defaultMessage:"Min",id:"database.aggregationFullName.min"},max:{defaultMessage:"Max",id:"database.aggregationFullName.max"},range:{defaultMessage:"Range",id:"database.aggregationFullName.range"},earliest_date:{defaultMessage:"Earliest date",id:"database.aggregationFullName.earliest_date"},latest_date:{defaultMessage:"Latest date",id:"database.aggregationFullName.latest_date"},date_range:{defaultMessage:"Date range",id:"database.aggregationFullName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationFullName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationFullName.unchecked"},percent_checked:{defaultMessage:"Percent checked",id:"database.aggregationFullName.percent_checked"},percent_unchecked:{defaultMessage:"Percent unchecked",id:"database.aggregationFullName.percent_unchecked"},count_per_group:{defaultMessage:"Count per group",id:"database.aggregationFullName.count_per_group"},percent_per_group:{defaultMessage:"Percent per group",id:"database.aggregationFullName.percent_per_group"}}),g={count:p.default.formatMessage(u.count),count_values:p.default.formatMessage(u.count_values),unique:p.default.formatMessage(u.unique),show_unique:p.default.formatMessage(u.show_unique),empty:p.default.formatMessage(u.empty),not_empty:p.default.formatMessage(u.not_empty),percent_empty:p.default.formatMessage(u.percent_empty),percent_not_empty:p.default.formatMessage(u.percent_not_empty),sum:p.default.formatMessage(u.sum),average:p.default.formatMessage(u.average),median:p.default.formatMessage(u.median),min:p.default.formatMessage(u.min),max:p.default.formatMessage(u.max),range:p.default.formatMessage(u.range),earliest_date:p.default.formatMessage(u.earliest_date),latest_date:p.default.formatMessage(u.latest_date),date_range:p.default.formatMessage(u.date_range),checked:p.default.formatMessage(u.checked),unchecked:p.default.formatMessage(u.unchecked),percent_checked:p.default.formatMessage(u.percent_checked),percent_unchecked:p.default.formatMessage(u.percent_unchecked),count_per_group:p.default.formatMessage(u.count_per_group),percent_per_group:p.default.formatMessage(u.percent_per_group)},m=(0,c.defineMessages)({count:{defaultMessage:"Count",id:"database.aggregationShortName.count"},count_values:{defaultMessage:"Values",id:"database.aggregationShortName.count_values"},unique:{defaultMessage:"Unique",id:"database.aggregationShortName.unique"},show_unique:{defaultMessage:"Show unique",id:"database.aggregationShortName.showUnique"},empty:{defaultMessage:"Empty",id:"database.aggregationShortName.empty"},not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.not_empty"},percent_empty:{defaultMessage:"Empty",id:"database.aggregationShortName.percent_empty"},percent_not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationShortName.sum"},average:{defaultMessage:"Average",id:"database.aggregationShortName.average"},median:{defaultMessage:"Median",id:"database.aggregationShortName.median"},min:{defaultMessage:"Min",id:"database.aggregationShortName.min"},max:{defaultMessage:"Max",id:"database.aggregationShortName.max"},range:{defaultMessage:"Range",id:"database.aggregationShortName.range"},earliest_date:{defaultMessage:"Earliest",id:"database.aggregationShortName.earliest_date"},latest_date:{defaultMessage:"Latest",id:"database.aggregationShortName.latest_date"},date_range:{defaultMessage:"Range",id:"database.aggregationShortName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationShortName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.unchecked"},percent_checked:{defaultMessage:"Checked",id:"database.aggregationShortName.percent_checked"},percent_unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.percent_unchecked"},count_per_group:{defaultMessage:"Count",id:"database.aggregationShortName.count_per_group"},percent_per_group:{defaultMessage:"Percent",id:"database.aggregationShortName.percent_per_group"}}),h={count:p.default.formatMessage(m.count),count_values:p.default.formatMessage(m.count_values),unique:p.default.formatMessage(m.unique),show_unique:p.default.formatMessage(m.show_unique),empty:p.default.formatMessage(m.empty),not_empty:p.default.formatMessage(m.not_empty),percent_empty:p.default.formatMessage(m.percent_empty),percent_not_empty:p.default.formatMessage(m.percent_not_empty),sum:p.default.formatMessage(m.sum),average:p.default.formatMessage(m.average),median:p.default.formatMessage(m.median),min:p.default.formatMessage(m.min),max:p.default.formatMessage(m.max),range:p.default.formatMessage(m.range),earliest_date:p.default.formatMessage(m.earliest_date),latest_date:p.default.formatMessage(m.latest_date),date_range:p.default.formatMessage(m.date_range),checked:p.default.formatMessage(m.checked),unchecked:p.default.formatMessage(m.unchecked),percent_checked:p.default.formatMessage(m.percent_checked),percent_unchecked:p.default.formatMessage(m.percent_unchecked),count_per_group:p.default.formatMessage(m.count_per_group),percent_per_group:p.default.formatMessage(m.percent_per_group)},f=(0,c.defineMessages)({count:{defaultMessage:"Counts the total number of pages, including blank pages.",id:"database.aggregationDescription.count"},count_values:{defaultMessage:"Counts the number of non-empty values for this property. For a type that can contain multiple values like multi-select or person, this will count the number of selected values for each page.",id:"database.aggregationDescription.count_values"},unique:{defaultMessage:"Counts the number of unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.unique"},show_unique:{defaultMessage:"Shows the unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.show_unique"},empty:{defaultMessage:"Counts the number of pages with an empty value for this property.",id:"database.aggregationDescription.empty"},not_empty:{defaultMessage:"Counts the number of pages with a non-empty value for this property.",id:"database.aggregationDescription.not_empty"},percent_empty:{defaultMessage:"Displays the percentage of pages that have an empty value for this property.",id:"database.aggregationDescription.percent_empty"},percent_not_empty:{defaultMessage:"Displays the percentage of pages that have a non-empty value for this property.",id:"database.aggregationDescription.percent_not_empty"},sum:{defaultMessage:"Computes the sum of a numeric property.",id:"database.aggregationDescription.sum"},average:{defaultMessage:"Computes the average of a numeric property.",id:"database.aggregationDescription.average"},median:{defaultMessage:"Finds the median of a numeric property.",id:"database.aggregationDescription.median"},min:{defaultMessage:"Finds the minimum of a numeric property.",id:"database.aggregationDescription.min"},max:{defaultMessage:"Finds the maximum of a numeric property.",id:"database.aggregationDescription.max"},range:{defaultMessage:"Computes the range (maximum - minimum) of a numeric property.",id:"database.aggregationDescription.range"},earliest_date:{defaultMessage:"Finds the earliest date in time of a date property.",id:"database.aggregationDescription.earliest_date"},latest_date:{defaultMessage:"Finds the latest date in time of a date property.",id:"database.aggregationDescription.latest_date"},date_range:{defaultMessage:"Computes the date range (latest date - earliest date) of a date property.",id:"database.aggregationDescription.date_range"},checked:{defaultMessage:"Counts the number of pages with a checked checkbox for this property.",id:"database.aggregationDescription.checked"},unchecked:{defaultMessage:"Counts the number of pages with an unchecked checkbox for this property.",id:"database.aggregationDescription.unchecked"},percent_checked:{defaultMessage:"Displays the percentage of pages that have a checked checkbox for this property.",id:"database.aggregationDescription.percent_checked"},percent_unchecked:{defaultMessage:"Displays the percentage of pages that have an unchecked checkbox for this property.",id:"database.aggregationDescription.percent_unchecked"},count_per_group:{defaultMessage:"Counts the total number of pages that have this Status Group.",id:"database.aggregationDescription.count_per_group"},percent_per_group:{defaultMessage:"Displays the percentage of pages that have this Status Group",id:"database.aggregationDescription.percent_per_group"}}),y={count:p.default.formatMessage(f.count),count_values:p.default.formatMessage(f.count_values),unique:p.default.formatMessage(f.unique),show_unique:p.default.formatMessage(f.show_unique),empty:p.default.formatMessage(f.empty),not_empty:p.default.formatMessage(f.not_empty),percent_empty:p.default.formatMessage(f.percent_empty),percent_not_empty:p.default.formatMessage(f.percent_not_empty),sum:p.default.formatMessage(f.sum),average:p.default.formatMessage(f.average),median:p.default.formatMessage(f.median),min:p.default.formatMessage(f.min),max:p.default.formatMessage(f.max),range:p.default.formatMessage(f.range),earliest_date:p.default.formatMessage(f.earliest_date),latest_date:p.default.formatMessage(f.latest_date),date_range:p.default.formatMessage(f.date_range),checked:p.default.formatMessage(f.checked),unchecked:p.default.formatMessage(f.unchecked),percent_checked:p.default.formatMessage(f.percent_checked),percent_unchecked:p.default.formatMessage(f.percent_unchecked),count_per_group:p.default.formatMessage(f.count_per_group),percent_per_group:p.default.formatMessage(f.percent_per_group)},v={count:a.Z.images.aggregations.countPng,count_values:a.Z.images.aggregations.countValuesPng,unique:a.Z.images.aggregations.uniquePng,show_unique:void 0,empty:a.Z.images.aggregations.emptyPng,not_empty:a.Z.images.aggregations.notEmptyPng,percent_empty:a.Z.images.aggregations.percentEmptyPng,percent_not_empty:a.Z.images.aggregations.percentNotEmptyPng,sum:a.Z.images.aggregations.sumPng,average:a.Z.images.aggregations.averagePng,median:a.Z.images.aggregations.medianPng,min:a.Z.images.aggregations.minPng,max:a.Z.images.aggregations.maxPng,range:a.Z.images.aggregations.rangePng,earliest_date:a.Z.images.aggregations.earliestDatePng,latest_date:a.Z.images.aggregations.latestDatePng,date_range:a.Z.images.aggregations.dateRangePng,checked:a.Z.images.aggregations.checkedPng,unchecked:a.Z.images.aggregations.uncheckedPng,percent_checked:a.Z.images.aggregations.percentCheckedPng,percent_unchecked:a.Z.images.aggregations.percentUncheckedPng,count_per_group:a.Z.images.aggregations.countPng,percent_per_group:a.Z.images.aggregations.percentCheckedPng};function S(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"earliest_date":case"date_range":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":return"percent";case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return"number";case"sum":case"average":case"median":case"min":case"max":case"range":return t??"number";default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return"percent";default:(0,d.t1)(e.operator)}}}function b(e){const{aggregationType:t,value:o,userTimeZone:a,dateFormat:d,roundDecimal:c}=e;if("date"===o.type){if(!(0,n.Fw)(t))return;if(!o.value)return;return"date_range"===t?(0,r.LU)(o.value,a,p.default.getIntl()):(0,r.ZV)({value:i.QD(o.value),date_format:d??i.sF,userTimeZone:a,allowRelativeDates:!0,intl:p.default.getIntl()})}if((0,n.Fw)(t))return;if("show_unique"===t)return;if("object"==typeof o.value)return;if("string"==typeof o.value)return o.value;const u=void 0===o.value?void 0:s.NM(o.value,c),g=S(t,e.numberFormat);return(0,l.uf)(u,g,p.default.getIntl())}},73807:(e,t,o)=>{o.d(t,{_:()=>i});var a=o(86628),n=o(77080);function i(){return(0,a.VK)((()=>n.default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")),[])}},86098:(e,t,o)=>{o.d(t,{Z:()=>i});var a=o(35431);class n extends a.Z{findRow(e,t,o){return this.find((a=>a.props.relatedPageStore.id===e&&a.props.rowType===t&&a.props.property===o))}}const i=new n},51741:(e,t,o)=>{o.d(t,{NW:()=>r,Qi:()=>n,Rt:()=>a,wI:()=>i});let a=function(e){return e[e.SelectedPage=0]="SelectedPage",e[e.SearchPage=1]="SearchPage",e[e.NewPage=2]="NewPage",e}({});const n=4,i=32,r=400},1018:(e,t,o)=>{o.d(t,{NW:()=>a.NW,Qi:()=>a.Qi,ev:()=>n.LazyRelationPropertyMenu,pG:()=>n.LazyRelationPropertyMenuOld,wI:()=>a.wI});var a=o(51741),n=o(77907)},79576:(e,t,o)=>{o.d(t,{W:()=>r});var a=o(49085),n=o(4615);class i extends a.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:a,sessionIdForAnalytics:i}=e,r=a[0].getParentCollectionId()??(null===(t=a[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),s=i||(0,n.ZP)();return this.setState({type:"filling",propertySchema:o,collectionId:r,numBlocksToAutofill:a.length,numBlocksAutofilled:0,sessionId:s,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),s}}const r=new i},70693:(e,t,o)=>{o.d(t,{mb:()=>s,nK:()=>l,pe:()=>d});var a=o(40506),n=o(7057),i=o(53877),r=o(42875);function s(e){const{dateTime:t,intl:o,shortenDateAndRange:a}=e,r=i.OQ.toPersistedDate(t.valueOf());return n.ZV({value:r,allowRelativeDates:!0,intl:o,shortenDateAndRange:a,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:o,userTimeZone:a,displayInUserTimezone:r,alwaysIncludeTimezone:s}=e,l=i.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return n.ZV({value:l,allowRelativeDates:!0,intl:o,userTimeZone:a,displayInUserTimezone:r,alwaysIncludeTimezone:s})}function d(e){const{luxonRange:t,intl:o}=e,s=i.OQ.toPersistedDateRange(t),l=n.ZV({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),d=t.end.setZone((0,r.r)()),c=n.mr({start_time:d.toFormat(a.jK),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:c})}}}]);