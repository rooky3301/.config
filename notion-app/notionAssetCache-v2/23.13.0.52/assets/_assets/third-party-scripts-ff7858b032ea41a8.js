"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9765],{44975:(e,t,s)=>{s.d(t,{EK:()=>l,IM:()=>c,QZ:()=>r,YY:()=>n,_g:()=>o,dy:()=>a,x9:()=>d,yb:()=>u});var i=s(77472);function a(e,t){i.j(e,"download_desktop_app",t)}function n(e,t){i.j(e,"download_mobile_app",t)}function o(e,t){const{name:s,...a}=t;i.j(e,"click_link",{...a,click_name:s})}function r(e,t){i.j(e,"scroll",t)}function c(e,t){i.j(e,"customer_io_in_app_callout_show",t)}function l(e,t){i.j(e,"customer_io_in_app_callout_suppress",t)}function d(e,t){i.j(e,"customer_io_in_app_callout_dismiss",t)}function u(e,t){i.j(e,"customer_io_in_app_callout_error",t)}},37252:(e,t,s)=>{s.r(t),s.d(t,{InjectThirdPartyScripts:()=>j,useThirdPartyScripts:()=>Z});var i=s(67294),a=s(13991),n=s(480),o=s(86628),r=s(72126),c=(s(57658),s(74686)),l=s(66673),d=s(65454),u=s(4615);const p="a2a8e2144b2bbbb4074a",g="901895b8-45c7-40c8-ba91-626cfc6739b3";function f(){var e,t,s;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},t=["load","identify","sidentify","track","page","on","off","reset"],s=0;s<t.length;s++)window._cio[t[s]]=e(t[s])}var m=s(7250),_=s(93724),S=s(49902),y=s(44975),v=s(8055),b=s(95477),I=s(15010),k=s(94134),w=s(58455),C=s(80444),E=s(61893),h=s(74055),R=s(77080),K=s(3418),M=s(69454),P=s(7339),V=s(77907);function Z(){const e=(0,n.O7)(),t=(0,n.Fy)(),{currentUser:s}=e,Z=(0,o.VK)((()=>{var e;return null===(e=C.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),j=(0,o.VK)((()=>P.C.state.ready),[]);!function(e){let{isEnabled:t,isLoggedIn:s,userId:a,onMessageOpened:n,onMessageDismissed:o,onMessageError:r,onMessageAction:m,cookieService:_}=e;(0,i.useEffect)((()=>{(async function(){return!!t&&!!(await c.ec({service:"customer_io",cookieService:_}))&&!("cio-tracker"in window)})().then((e=>{if(e)return f(),(0,d.ZP)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":p,"data-use-array-params":"true","data-in-app-org-id":g,"data-use-in-app":"true","data-auto-track-page":"false"}}).catch((e=>{console.error("Customer.io failed to load",e)}))}))}),[t,_]);const S=(0,l.D9)(a);(0,i.useEffect)((()=>{S!==a&&(f(),s&&void 0!==a?(window._cio.identify({id:(0,u.cj)(a)}),n&&window._cio.on("in-app:message-opened",n),o&&window._cio.on("in-app:message-dismissed",o),m&&window._cio.on("in-app:message-action",m),window._cio.on("in-app:message-error",r)):window._cio.reset())}),[s,a,S,n,o,r,m])}({isEnabled:(0,o.VK)((()=>s.isLoggedIn()&&j&&R.default.checkGate("customerio")),[s,j]),isLoggedIn:s.isLoggedIn(),userId:s.id,onMessageOpened:t=>{h.Z.state.suppressReason?y.EK(e,{message_id:t.detail.messageId,reason:h.Z.state.suppressReason}):(h.Z.setState({...h.Z.state,isVisible:!0}),y.IM(e,{message_id:t.detail.messageId}))},onMessageDismissed:t=>{h.Z.setState({...h.Z.state,isVisible:!1}),y.x9(e,{message_id:t.detail.messageId})},onMessageError:t=>{y.yb(e,{message_id:t.detail.messageId})},onMessageAction:t=>{if(t.detail.actionValue.startsWith("relative_url=")){const s=t.detail.actionValue.split("relative_url=")[1];v.c4({environment:e,url:s})}t.detail.message.dismiss()},cookieService:e.cookieService}),(0,S.kI)({...(0,o.VK)((()=>{const e=w.default.state.isSprigEnabled&&E.Z.state.permission.performance&&R.default.checkGate("sprig")&&t.isDesktop,{currentUserSettingsStore:s,currentSpaceStore:i,currentUserStore:a}=C.default.state,n=null==a?void 0:a.getEmail(),o=s?(0,I.e2)(s):null,r=Boolean(null==i?void 0:i.canAdmin()),c=(null==i?void 0:i.getUserMemberCount())??0;return{isEnabled:e,userEmail:n,userDaysSinceSignup:o??0,userDomainType:(0,I.JF)(),isSpaceAdmin:r,spaceMemberCount:c}}),[t]),isLoggedIn:s.isLoggedIn(),userId:s.id,spaceId:Z,sprigConfig:b.default.sprig}),(0,m.oG)({getLocale:(0,i.useCallback)((()=>a.SP),[]),analyticsSettings:(0,o.VK)((()=>r.ei(w.default.state,["isIntercomEnabled","intercomAppId","intercomUserHash","noIntercomUserId","user_id","user_email"])),[]),onVisibilityChange:(0,i.useCallback)((t=>{M.Z.updateShouldResizeWebview(e,t,"v1"),t?K.Z.addNamedPopup("intercom"):K.Z.removeNamedPopup("intercom")}),[e]),cookieService:e.cookieService}),function(e){var t;const{userId:s,spaceId:a,...n}=e,o=(0,V.useDependency)(V.deps.sentry);(0,i.useEffect)((()=>{if(!o.value)return;const{Sentry:e,sentryInitializeFull:t}=o.value;t({Sentry:{...e,isFullSDK:!0},config:b.default,...n})}),[o.value,n]);const r=null===(t=o.value)||void 0===t?void 0:t.Sentry;(0,i.useEffect)((()=>{r&&r.setUser(s?{id:s}:null)}),[r,s]),(0,i.useEffect)((()=>{r&&r.setTag("space.id",a)}),[r,a])}({userId:s.id,spaceId:Z,getErrorsSampleRate:(0,i.useCallback)((()=>R.default.getConfigKey("sentry","errorsSampleRate")),[]),getTracesSampleRate:(0,i.useCallback)((()=>R.default.getConfigKey("sentry","tracesSampleRate-v0")),[]),getReplaysSessionSampleRate:(0,i.useCallback)((()=>R.default.getConfigKey("sentry","replaysSessionSampleRate-v0")),[]),getReplaysOnErrorSampleRate:(0,i.useCallback)((()=>R.default.getConfigKey("sentry","replaysOnErrorSampleRate-v0")),[]),getIsProfilingEnabled:(0,i.useCallback)((()=>"sentry"===(0,k.getProfilingToolForSession)()),[]),getProfilesSampleRate:(0,i.useCallback)((()=>R.default.getConfigKey("sentry","profilesSampleRate")),[])}),(0,_.useConfigurePalette)({userId:s.id,spaceId:Z,pageType:(0,o.VK)((()=>{var e;return null===(e=C.default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getType()}),[]),device:t})}function j(){return window.__c={n:"InjectThirdPartyScripts"},Z(),null}},74055:(e,t,s)=>{s.d(t,{V:()=>a,Z:()=>o});var i=s(49085);let a=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class n extends i.default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const o=new n}}]);