"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5741],{89941:(e,t,o)=>{o.d(t,{ez:()=>a,fF:()=>s,vE:()=>r});var n=o(19037),i=o(19124);const s=[e=>(0,i.GD)(e.publicEditMode),n.J5],r=[...s,n.ff(n.fI),n.ff(n.OX)],a=[...r,e=>n.P9("ai_block")&&e.blocks.every((e=>e.isSkillBlock()))]},96323:(e,t,o)=>{o.d(t,{F0:()=>D,Hh:()=>J,LK:()=>B,NZ:()=>z,Rr:()=>T,cK:()=>E,cx:()=>H,lA:()=>Y,sH:()=>K,sY:()=>F,xI:()=>O,xj:()=>W,yY:()=>N});o(57658),o(67294);var n=o(480),i=o(86628),s=o(24405),r=o(41432),a=o(8848),l=o(12970),c=o(91856),d=o(56666),u=o(75e3),p=o(25651),m=o(11751),f=o(54434),g=o(97880),y=o(9291),v=o(42858),h=o(82530),x=o(83919),C=o(72495),k=o(19037),w=o(78663),S=o(99417),I=o(19124),A=o(40959),M=o(16772),b=o(27724),P=o(89941),_=o(62967),j=o(85893);const F=(0,y.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"completions.completionActions.AIAssist"},more:{defaultMessage:"See more",id:"completions.completionActions.more"},alternativeUiString:{defaultMessage:"{text}",id:"completions.completionActions.alternativeUiString"},aiSummaryBlockDisplayName:{defaultMessage:"Summary",id:"completions.completionActions.aiSummaryBlockDisplayName"},aiActionItemsBlockDisplayName:{defaultMessage:"Action items",id:"completions.completionActions.aiActionItemsBlockDisplayName"},aiFreePromptBlockDisplayName:{defaultMessage:"Custom AI block",id:"completions.completionActions.aiFreePromptBlockDisplayName"},aiSectionBlockDisplayName:{defaultMessage:"Custom AI section",id:"completions.completionActions.aiSectionBlockDisplayName"}});function N(e){return function(t){return(0,j.jsx)(C.Z,{...t,title:(0,j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,m.t)({width:16,height:16,marginRight:4}),(0,j.jsx)("div",{children:t.title})]}),right:e})}}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const o=[];if(o.push(...e.slice(0,t)),e.length>t){const n=(0,_.$J)({key:"more actions",render:e=>(0,j.jsx)(C.Z,{...e}),actions:e.slice(t)});o.push((0,_.MV)({key:"more",displayName:F.more,analyticsName:"Completions - more",validators:P.vE,svg:()=>(0,j.jsx)(G,{}),subActions:()=>[n],collapseSubActionsIntoParent:!0,width:350}))}return o}function L(){return(0,j.jsx)(Y,{svg:p.R,svgFill:a.FN.light.purple[500]})}function E(e){const{key:t,name:o,analyticsName:n,textToInsert:i,onUpdatePromptState:s,right:r,renderTooltip:a,showEllipsis:l,userProvidedSearchName:c,executeImmediately:d,gtmFavoriteId:u}=e,p=o.length>1e3?`${o.slice(0,1e3)}…`:o;return(0,_.cN)({key:t,analyticsName:`Completions - insert text into prompt - ${n}`,...(m=l?`${p}…`:p,{displayName:F.alternativeUiString,displayNameInterpolatedValues:{text:m}}),validators:[],closeParentMenu:!1,svg:L,action(){s({insertText:i??o,analyticsName:n,gtmFavoriteId:u,executeImmediately:d})},right:r??H("updatePrompt"),renderTooltip:a,userProvidedSearchName:c});var m}function B(e){const{from:t,type:o,onUpdatePromptState:n}=e;function i(e){return E({key:`completions.${e.key}`,name:(0,S.t8)(e),analyticsName:e.key,textToInsert:(0,w.$W)(e),onUpdatePromptState:n,showEllipsis:!0})}const s="cursor"===o?{selectionType:o,isPageEmpty:!k.IC()}:{selectionType:o},r=(0,S.up)(s),a=(0,S.pv)(r,s),l=[];for(const[c,d]of a){const e=[];for(const s of d)"helpMeDraft"!==s.key&&"helpMeEdit"!==s.key&&"helpMeWrite"!==s.key&&("translate"===s.key?e.push(U(s,P.vE,o,t)):"changeTone"===s.key?e.push(V(s,P.vE,o,t)):s.steps?e.push(i(s)):e.push(z({prompt:s,validators:P.vE,type:o,from:t})));const n=(0,_.$J)({key:`completions.${c}`,title:(0,S.Mh)(c,"cursor"===o?"page":"selection"),render:e=>(0,j.jsx)(C.Z,{...e}),actions:T(e.filter(g.$K),7)});l.push(n)}return"cursor"===o&&l.push((0,_.$J)({key:"completions.aiBlocks",title:S.Dr.aiBlocks,render:e=>(0,j.jsx)(C.Z,{...e}),actions:A.O5.map((e=>function(e){const t=A.Hc[e.aiBlockType],{displayName:o,svg:n}=Z[e.aiBlockType],i=e=>!t.shouldShow||t.shouldShow(e);return(0,_.cN)({key:`completions.aiBlocks.${t.key}`,analyticsName:`Completions - ${t.key}`,closeParentMenu:!0,svg:n,displayName:o,validators:[...P.vE,i],action:e=>{let{environment:o}=e;h.createAndCommit({userAction:"completionActions.createAiBlockAction",environment:o,perform:e=>{v.at({environment:o,selection:b.default.state.stores,createBlockItem:t,analyticsFrom:"ai_prompt",transaction:e})}})}})}({aiBlockType:e})))})),l}const Z={[r.MF.aiSummaryBlock]:{displayName:F.aiSummaryBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:c.Y})},[r.MF.aiActionItemsBlock]:{displayName:F.aiActionItemsBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:l.O})},[r.MF.aiFreePromptBlock]:{displayName:F.aiFreePromptBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:m.t})},[r.MF.aiSectionBlock]:{displayName:F.aiSectionBlockDisplayName,svg:()=>(0,j.jsx)(Q,{svg:m.t})}};function O(e){return(0,_.$J)({key:"completions",title:F.notionAI,render:N(),actions:R(e)})}function R(e){const{store:t,from:o}=e,n=[];for(const i of(0,I.G9)()){if("helpMeWrite"===i.key)continue;const e=z({prompt:i,validators:P.vE,type:"aiBlock",from:o,store:t});e&&n.push(e)}return n}function D(e){const{environment:t,inputValue:o,store:n}=e,i=(0,I.qB)({customPrompt:o,isPageEmpty:!1});x.triggerCompletionForAiBlock({environment:t,store:n,prompt:i,additionalContext:{prompt:o}})}function U(e,t,o,n){const{key:i,name:s,svg:r,svgFill:a,steps:l}=e;if("translate"!==i||!l||1!==l.length||"language"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:s,name:r}=i;return(0,_.cN)({key:`completions.translate.${s}`,analyticsName:`Completions - translate - ${s}`,displayName:r,validators:t,closeParentMenu:!0,right:H("submitPrompt"),action:t=>{let{environment:i}=t;q({environment:i,prompt:e,from:n,type:o,additionalContext:{language:s}})}})})),d=(0,_.$J)({key:"translate language actions",render:e=>(0,j.jsx)(C.Z,{...e}),actions:c}),u=r?()=>(0,j.jsx)(Y,{svg:r,svgFill:a}):void 0;return(0,_.MV)({key:"translate",displayName:s,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function V(e,t,o,n){const{key:i,name:s,svg:r,svgFill:a,steps:l}=e;if("changeTone"!==i||!l||1!==l.length||"tone"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((i=>{let{key:s,name:r}=i;return(0,_.cN)({key:`completions.changeTone.${s}`,analyticsName:`Completions - changeTone - ${s}`,displayName:r,validators:t,closeParentMenu:!0,right:H("submitPrompt"),action:t=>{let{environment:i}=t;q({environment:i,prompt:e,from:n,type:o,additionalContext:{tone:s}})}})})),d=(0,_.$J)({key:"changeTone tone actions",render:e=>(0,j.jsx)(C.Z,{...e}),actions:c}),u=r?()=>(0,j.jsx)(Y,{svg:r,svgFill:a}):void 0;return(0,_.MV)({key:"changeTone",displayName:s,analyticsName:`Completions - ${i}`,validators:t,svg:u,subActions:()=>[d]})}function W(e){window.__c={n:"ActionHintIcon"};const{focused:t,type:o}=e,r=(0,n.O7)(),a=(0,i.VK)((()=>r.device.isPhone),[r]),l=(0,s.yK)((e=>({iconStyle:{width:14,height:14,fill:e.mediumIconColor,opacity:!a&&t?1:0},containerStyle:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,a]);switch(o){case"submitPrompt":return(0,j.jsx)("div",{style:l.containerStyle,children:(0,u.U)(l.iconStyle)});case"updatePrompt":return(0,j.jsx)("div",{style:l.containerStyle,children:(0,f.F)(l.iconStyle)});default:(0,g.t1)(o)}}function H(e){return t=>(0,j.jsx)(W,{type:e,focused:t.focused})}function K(e){const{customPrompt:t,execute:o}=e;return(0,_.cN)({analyticsName:"Completions - execute current prompt input",key:"explicitFreeFormAction",displayName:S.Dr.genericHelpMeWrite,displayNameInterpolatedValues:{filter:t},svg:L,right:H("submitPrompt"),validators:[],closeParentMenu:!1,renderTooltip:_.zz,action(){o()}})}const $=()=>(0,S.Nh)();function z(e){const{prompt:t,validators:o,type:n,from:i,store:s,sortScoreMultiplier:r}=e,{key:a,name:l}=t;if("translate"===a&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return U(t,o,n,i);if("changeTone"===a&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return V(t,o,n,i);const c=function(e){const{svg:t,svgFill:o}=e;return t?()=>(0,j.jsx)(Y,{svg:t,svgFill:o}):void 0}(t),d=[...o];return t.requiresContent?d.push(k.IC):t.requiresNoContent&&d.push(k.ff(k.IC)),t.isNewModel&&d.push($),(0,_.cN)({key:`completions.${a}`,analyticsName:`Completions - ${a}`,displayName:l,fuzzySearchKeywords:t.fuzzySearchKeywords,validators:d,closeParentMenu:!0,svg:c,right:H("submitPrompt"),sortScoreMultiplier:r,action:e=>{let{environment:o}=e;q({environment:o,prompt:t,type:n,from:i,store:s})}})}function q(e){const{environment:t,prompt:o,type:n,from:i,store:s,additionalContext:r}=e;if("textSelection"===n)x.openCompletionPopupForSavedContext({environment:t,prompt:o,from:i,additionalContext:r});else if("blockSelection"===n)x.openCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:r});else if("cursor"===n){if(o.preferToNeverInsertTextAtCursor)return void x.selectPageAndOpenCompletionPopupForBlockSelectionContext({environment:t,prompt:o,from:i,additionalContext:r});x.openCompletionPopupForCursorContext({environment:t,prompt:o,from:i,additionalContext:r})}else"aiBlock"===n?s&&x.triggerCompletionForAiBlock({environment:t,store:s,prompt:o,additionalContext:r}):(0,g.t1)(n)}function J(e){const{inputValue:t,from:o,mode:n,environment:i}=e;switch(n){case"edit":return void function(e){const{customPrompt:t,from:o,environment:n}=e,i=(0,S.sB)(t);"closedWithContext"===M.default.state.type&&M.default.state.context&&x.openCompletionPopupForPrefilledContext({environment:n,context:M.default.state.context,prompt:i,additionalContext:{prompt:t},from:o,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o});case"write":const e=(0,S.wq)(t);if(e){const{prompt:t,additionalContext:n}=e,s=(0,w.FD)();if(!s)return;return void x.openCompletionPopupForPrefilledContext({environment:i,context:s,prompt:t,additionalContext:n,from:o,skipInitialForm:!0})}return void function(e){const{environment:t,customPrompt:o,from:n}=e,i=(0,I.qB)({customPrompt:o,isPageEmpty:!k.IC()}),s=(0,w.FD)();s&&x.openCompletionPopupForPrefilledContext({environment:t,context:s,prompt:i,additionalContext:{prompt:o},from:n,skipInitialForm:!0})}({environment:i,customPrompt:t,from:o})}(0,g.t1)(n)}function G(){window.__c={n:"MoreIcon"};const e=(0,s.Fg)();return(0,d.o)({width:12,marginLeft:2,marginRight:2,fill:e.mediumIconColor})}function Y(e){window.__c={n:"BoxedIcon"};const t=(0,s.yK)((t=>({box:{height:e.fixedWidth?22:void 0,width:e.fixedWidth?22:void 0,display:"flex",alignItems:"center",justifyContent:"center",...e.boxStyles},icon:{height:16,width:16,fill:e.svgFill??(0,a.gh)({theme:"light"}).regularIconColor}})),[e]);return(0,j.jsx)("div",{style:t.box,children:e.svg(t.icon)})}function Q(e){window.__c={n:"AiBlockIcon"};const t=(0,s.yK)((e=>({box:{background:e.fill.purple,width:24,height:24,borderRadius:4},icon:{fill:e.icon.purple}})),[]);return(0,j.jsx)(Y,{svg:e.svg,svgFill:t.icon.fill,boxStyles:t.box})}},79474:(e,t,o)=>{o.d(t,{r:()=>i});var n=o(43604);async function i(e){return new Promise((t=>{n.Z.setState({open:!0,onClose:()=>{n.Z.setState({open:!1}),t(!1)},onConfirm:()=>{n.Z.setState({open:!1}),t(!0)},...e})}))}},44866:(e,t,o)=>{o.r(t),o.d(t,{autofillPropertyForBlocks:()=>Y,autofillPropertyForCollection:()=>X,fillAllPagesMessages:()=>W,getDefaultAiInference:()=>oe,getPropertyCompletionForBlock:()=>te,saveOrRemovePropertyAiInference:()=>ee,submitFeedbackForAiAutofill:()=>Q,triggerAiAutofillUpsell:()=>J});o(57658);var n=o(67294),i=o(26263),s=o(99036),r=o(80951),a=o(74229),l=o(482),c=o(4615),d=o(3791),u=o(97880),p=o(9291),m=o(10910),f=o(8406),g=o(54642),y=o(893),v=o(14900),h=o(79474),x=o(47307),C=o(96802),k=o(9953),w=o(64964),S=o(82530),I=o(86628),A=o(98519),M=o(52423),b=o(79576),P=o(73420),_=o(68785),j=o(6854),F=o(85893);const N=function(e){let{environment:t,inferenceIds:o,aiInference:i}=e;window.__c={n:"AiAutofillProgressLabel"};const s=(0,I.VK)((()=>{const{state:e}=b.W;return"uninitialized"===e.type?null:{numBlocksToAutofill:e.numBlocksToAutofill,numBlocksAutofilled:e.numBlocksAutofilled,propertySchema:e.propertySchema,collectionId:e.collectionId,sessionId:e.sessionId,haveAllBlocksCompletedAutofill:e.haveAllBlocksCompletedAutofill}}),[]),r=(0,n.useCallback)((()=>{s&&(o.forEach((e=>{m.qG(t,{ai_inference_type:i.type,type:"undo_from_snackbar",inference_id:e,collection_id:s.collectionId,session_id:s.sessionId})})),M.Yw(t,!0),w.rN(),b.W.setState({type:"filling",...s,didInterruptStreaming:!0}))}),[s,t,i,o]);if(!s)return null;const{numBlocksToAutofill:a,numBlocksAutofilled:l,propertySchema:{name:c}}=s;return l===a?(0,F.jsxs)(P.X2,{gap:4,alignItems:"center",children:[(0,A.k)({width:16}),(0,F.jsx)(p.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillInProgress",values:{propertyName:c,numPages:a}}),(0,F.jsx)(j.Pn,{onClick:r,children:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Undo",id:"snackbar.aiAutofill.undo"})}),(0,F.jsx)(j.Pn,{onClick:()=>{w.rN()},children:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Close",id:"snackbar.aiAutofill.close"})})]}):(0,F.jsxs)(P.X2,{gap:4,alignItems:"center",children:[(0,F.jsx)(_.Z,{}),0===l?(0,F.jsx)(p.FormattedMessage,{defaultMessage:'AI updating "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillStarting",values:{propertyName:c,numPages:a}}):(0,F.jsx)(p.FormattedMessage,{defaultMessage:'AI updated "{propertyName}" on {numFilledPages} of {numTotalPages} pages',id:"snackbar.aiAutofill.completedAutofill",values:{propertyName:c,numFilledPages:l,numTotalPages:a}}),(0,F.jsx)(j.Pn,{onClick:r,children:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Stop & undo",id:"snackbar.aiAutofill.undoAndStop"})})]})};var T=o(99417),L=o(33929),E=o(77907),B=o(80444),Z=o(26136),O=o(1310),R=o(44041),D=o(35057),U=o(88280),V=o(83919);const W=(0,p.defineMessages)({fillAllPagesTooltip:{defaultMessage:"{hasNames, select, true {Autofill {propertyName} for all pages in {collectionName}} other {Autofill this property for all pages in the database}}",id:"aiAutofill.fillAllPages.buttonTooltip"},fillAllPagesAddOnMessage:{defaultMessage:"Only with Notion AI add-on",id:"aiAutofill.fillAllPages.onlyWithAiAddOnMessageInTooltip"}});function H(e){let{environment:t,propertyId:o,propertySchema:n,storesWithCompletions:i,blockIdToInferenceId:a,useTemporaryStore:l,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d,doneStreaming:p}=e;S.createAndCommit({userAction:"BlockPropertyValue.handleActionButtonClick.aiAutofill",environment:t,canUndo:!Boolean(l),undoCheckpoint:!0,perform:e=>{var t,m;for(const{store:f,temporaryStore:g,completion:v}of i){const i=l?g:f;let h;switch(n.type){case"text":h=y.of({text:v.trim(),stripText:!1,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d});break;case"multi_select":case"select":const a=i.getParentCollectionStore();let l=v.trim().split(",").map((e=>e.trim()));if(p&&a&&null!==(t=n.select_ai_inference)&&void 0!==t&&t.add_options){const t=(0,s.RR)({newTokenValues:l.length>0&&"select"===n.type?[[l[0]]]:[l],property:o,propertySchema:n,collectionId:a.id});if(t)for(const o of t)S.applyOperation({store:(0,Z.Kv)(a,o.pointer),operation:o,transaction:e})}!p||null!==(m=n.select_ai_inference)&&void 0!==m&&m.add_options||(l=l.filter((e=>{var t;return null===(t=n.options)||void 0===t?void 0:t.find((t=>t.value===e))}))),h=(0,r.zq)(l);break;default:(0,u.t1)(n)}k.sO({store:i.getPropertyStore(o),value:h,transaction:e});const x=i.getFormat().ai_property_inference_map??{},w=a[f.id]??"";C.FH({stores:[i],update:{ai_property_inference_map:{...x,[o]:{inference_id:w,created_time:Date.now()}}},transaction:e})}}})}const K=(0,p.defineMessages)({FAILED_TO_AUTOFILL:{defaultMessage:"Something went wrong. Please try again later",id:"propertyCompletionActions.error.unableToAutofill"},INVALID_PROPERTY_FOR_AUTOFILL:{defaultMessage:"Invalid property configuration for AI autofill",id:"propertyCompletionActions.error.invalidPropertyForAutofill"},NO_BLOCKS_TO_AUTOFILL:{defaultMessage:"Nothing to update with AI",id:"propertyCompletionActions.error.noBlocksToAutofill"}}),$=(0,p.defineMessages)({featureUnavailable:{id:"completionActions.featureNotEnabledError",defaultMessage:"This feature is not currently enabled"}});function z(e){let{autofillPropertyResult:t}=e;const o=L.default.formatMessage(K[t]);w.rN(),x.deprecatedShowErrorMessage(o)}const q={ai_limit_property_autofill:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Auto-update requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.autoUpdateOnPageEditUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Updating all pages requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.fillAllPagesUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,F.jsx)(p.FormattedMessage,{defaultMessage:"Filling more pages at once requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.bulkFillUpsellDialogMessage"})};function J(e){var t;let{environment:o,from:n}=e;null!==(t=B.default.state.currentSpaceStore)&&void 0!==t&&t.canAdmin()||x.deprecatedShowErrorMessage(q[n]),R.y(o,{from:n,for:(0,D.zt)(),addOnFeature:"ai"})}function G(e){let{errorCode:t,environment:o}=e;return 405===t?w.oV({label:L.default.formatMessage($.featureUnavailable)}):(402===t&&(w.rN(),J({environment:o,from:"ai_limit_property_autofill"})),V.showCompletionErrorWithCode(t))}async function Y(e){var t;let{environment:o,stores:n,property:r,propertySchema:l,userEventForAnalytics:d,sessionIdForAnalytics:p,collectionContextStore:y,from:v,isBulkAction:h,aiInferenceOverride:x}=e;const C=p||(0,c.ZP)(),k=r,S=n.map((e=>({spaceId:e.getSpaceId(),...e.pointer,propertyId:k,inferenceId:(0,c.ZP)()}))),I=n[0].getParentCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),A=new i.Z({name:"propertyCompletionActions.autofillPropertyForBlocks"});if(b.W.setIsWriting({stores:n,propertySchema:l,sessionIdForAnalytics:p}),"uninitialized"!==b.W.state.type&&(0,s.qQ)(l)&&I){w.oV({label:(0,F.jsx)(N,{environment:o,inferenceIds:S.map((e=>e.inferenceId)),aiInference:(0,s.q3)(l)}),durationMs:O.JY});try{var M;if(o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(A),!(0,u.Of)(S))return z({autofillPropertyResult:"NO_BLOCKS_TO_AUTOFILL"});const e=x||(0,s.q3)(l);if(!e)return z({autofillPropertyResult:"INVALID_PROPERTY_FOR_AUTOFILL"});S.forEach((t=>{m.qG(o,{type:d,inference_id:t.inferenceId,ai_inference_type:e.type,collection_id:I,session_id:C})})),null!==(M=B.default.state.currentSpaceStore)&&void 0!==M&&M.id&&g.publishAiSession(o,{inference_type:"autofill",id:C,spaceId:B.default.state.currentSpaceStore.id,metadata:{blockPropertyPointers:S,aiInference:e,collection_id:I}});const t=await g.getCompletionForProperty(o,{blockPropertyPointers:S,aiInference:e,aiSessionId:C,model:(0,T.jq)()});if("success"!==t.type)return z({autofillPropertyResult:"FAILED_TO_AUTOFILL"});y&&f.rv({block_id:n[0].pointer.id,property:k,property_type:l.type,from:v,environment:o,collectionContextStore:y,isFromBulkActionsToolbar:h});const i=Object.fromEntries(n.map((e=>[e.pointer.id,{store:e,temporaryStore:e.clone(A),completion:""}]))),r=Object.fromEntries(S.map((e=>[e.id,e.inferenceId]))),c=new Set,[p,w]=await Promise.all([E.deps.markdownLinkifyIt.loader(),E.deps.tinyMceMicrosoftWordPasteFilter.loader()]);if(a.H1.is(t.data)){for await(const e of t.data){if("error"===e.type)return b.W.setState({...b.W.state,didInterruptStreaming:!0}),G({errorCode:e.errorCode,environment:o});if(b.W.state.didInterruptStreaming)return;const t=i[e.blockPropertyPointer.id],n=t.completion+e.completion;i[e.blockPropertyPointer.id]={...t,completion:n},c.add(e.blockPropertyPointer.id),H({environment:o,propertyId:k,propertySchema:l,storesWithCompletions:Object.values(i),blockIdToInferenceId:r,useTemporaryStore:!0,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:w}),b.W.setState({...b.W.state,numBlocksAutofilled:c.size})}b.W.setState({...b.W.state,haveAllBlocksCompletedAutofill:!0})}o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(A),H({environment:o,propertyId:k,propertySchema:l,storesWithCompletions:Object.values(i),blockIdToInferenceId:r,useTemporaryStore:!1,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:w,doneStreaming:!0})}finally{o.defaultRecordCache.inMemoryRecordCache.hasCacheOverride(A)&&o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(A)}}}function Q(e){const{environment:t,inferenceId:o,feedbackType:n,userContent:i,shareWithNotion:s}=e;m.NF(t,{type:"property_autofill",inference_id:o,feedback_type:n,timestamp:(new Date).toUTCString(),user_comment:i,share_with_notion:s})}async function X(e){var t,o;let{environment:n,collectionStore:i,propertySchema:r,property:a,sessionIdForAnalytics:u}=e;if(!(0,s.qQ)(r))return;const p=(0,s.q3)(r);if(!i||!r||!p)return;const f=(null===(t=U.subscriptionDataStoreInstance.state)||void 0===t?void 0:t.addOns)??[];if(!(0,d.de)(f))return void J({environment:n,from:"ai_autofill_fill_all_pages"});if(!(await h.r({sourceAction:"fill_all_pages",propertyName:r.name,collectionName:(null===(o=i.getName())||void 0===o?void 0:o.toString())||""})))return;m.qG(n,{type:"generate_from_fill_all_pages",inference_id:(0,c.ZP)(),ai_inference_type:p.type,collection_id:i.id,session_id:u??(0,c.ZP)()});const g=[];g.push(l.op.update({pointer:i.pointer,path:["format","update_ai_inferences_status"],args:{[a]:{type:"requested",created_time:Date.now()}}})),v.HW({environment:n,collectionStore:i,performTransaction:e=>{for(const t of g)S.applyOperation({store:(0,Z.Kv)(i,t.pointer),operation:t,transaction:e})}})}function ee(e){const{environment:t,propertySchema:o,collectionStore:n,property:i,draftAiInference:r}=e;let a="";switch(o.type){case"text":a="ai_inference";break;case"select":case"multi_select":a="select_ai_inference";break;default:return}const l=[];if(l.push({pointer:n.pointer,command:"set",path:["schema",i,a],args:r}),r)m._e(t,{type:"set_ai_inference",ai_inference_type:r.type,collection_id:n.id});else{const e=(0,s.q3)(o);m._e(t,{type:"remove_ai_inference",ai_inference_type:null==e?void 0:e.type,collection_id:n.id})}v.HW({environment:t,collectionStore:n,performTransaction:e=>{for(const t of l)S.applyOperation({store:(0,Z.Kv)(n,t.pointer),operation:t,transaction:e})}})}async function te(e){var t;let{environment:o,store:n,property:i,propertySchema:s,userEventForAnalytics:r,sessionIdForAnalytics:l}=e;const d=l||(0,c.ZP)(),u=i,p={spaceId:n.getSpaceId(),...n.pointer,propertyId:u,inferenceId:(0,c.ZP)()},f=n.getParentCollectionId()??(null===(t=n.getCollectionViewCollectionStore())||void 0===t?void 0:t.id),y=oe(s,!1);if(!y)return"";m.qG(o,{type:r,inference_id:p.inferenceId,ai_inference_type:y.type,collection_id:f,session_id:d});const v=(0,c.ZP)();g.publishAiSession(o,{inference_type:"autofill",id:v,metadata:{blockPropertyPointers:[p],aiInference:y,collection_id:f}});const h=await g.getCompletionForProperty(o,{blockPropertyPointers:[p],aiInference:y,aiSessionId:v,model:(0,T.jq)()});if("success"!==h.type)return"";let x="";if(a.H1.is(h.data))for await(const a of h.data)"error"!==a.type&&(x+=a.completion);return x}function oe(e,t){if(!(0,s.qQ)(e))return;const o=(0,s.q3)(e);return!o&&(0,s.cu)(e)?{type:e.type,auto_update_on_edit:t,add_options:!1}:o}},3316:(e,t,o)=>{o.r(t),o.d(t,{AiEligibilityUpdater:()=>yo,CompletionPopup:()=>uo,completionActions:()=>i,completionInitialPromptActions:()=>s,favoriteImportActions:()=>r,propertyCompletionsActions:()=>n});var n=o(44866),i=o(83919),s=o(92022),r=o(62878),a=o(67294),l=o(18466),c=o(26263),d=o(1302),u=o(480),p=o(86628),m=o(24405),f=o(42875),g=o(66673),y=o(59054),v=o(82883),h=o(62965),x=o(97880),C=o(9291),k=o(96323),w=o(10910),S=o(893),I=o(82530),A=o(3386),M=o(43250),b=o(99417),P=o(43455),_=o(95083),j=o(77907),F=o(16772),N=o(29798),T=o(89626),L=o(16091),E=o(11751),B=o(32163),Z=o(50506),O=o(63296),R=o(72495),D=o(24039),U=o(34859),V=o(85893);function W(e){window.__c={n:"ExitConfirmationDialog"};const{open:t,onCancelExit:o,onConfirmExit:n}=e,i=(0,a.useCallback)((()=>(0,V.jsx)(H,{onConfirmExit:n,onCancelExit:o})),[n,o]);return(0,V.jsx)(Z.Z,{open:t,render:i,disableAnimation:!0,onDismiss:o})}function H(e){window.__c={n:"ExitConfirmationDialogContent"};const t=(0,m.yK)((e=>({wrapper:{padding:24,display:"flex",flexDirection:"column",minWidth:280},question:{fontWeight:500,maxWidth:240,textAlign:"center",marginTop:8,marginBottom:8,lineHeight:"1.2em"},icon:{width:32,height:32,alignSelf:"center",paddingTop:8,fill:e.accentColors.purple[400]}})),[]),o={width:"100%",marginTop:8},n=[{key:"confirm",render:e=>(0,V.jsx)(O.Z,{style:o,...e,children:(0,V.jsx)(C.FormattedMessage,{id:"completions.ExitConfirmationDialog.confirmExit",defaultMessage:"Discard"})}),action:e.onConfirmExit},{key:"cancel",render:e=>(0,V.jsx)(O.Z,{style:o,...e,children:(0,V.jsx)(C.FormattedMessage,{id:"completions.ExitConfirmationDialog.cancelExit",defaultMessage:"Cancel"})}),action:e.onCancelExit}];return(0,V.jsx)(D.Z,{capture:!0,preventType:U.Z.All,children:(0,V.jsxs)("div",{style:t.wrapper,children:[(0,E.t)(t.icon),(0,V.jsx)("p",{style:t.question,children:(0,V.jsx)(C.FormattedMessage,{id:"completions.ExitConfirmationDialog.question",defaultMessage:"Do you want to discard the AI response?"})}),(0,V.jsx)(B.Z,{type:B.i.Vertical,initialFocus:0,sections:[{key:"dialog",render:e=>(0,V.jsx)(R.Z,{topBorder:!1,disableMobileBorders:!0,...e}),items:n}]})]})})}o(57658);var K=o(50780),$=o(72126),z=o(62967),q=o(47307),J=o(64964),G=o(73063),Y=o(45010),Q=o(80444),X=o(77080),ee=o(30793),te=o(71184);const oe="favorite-actions",ne=(0,C.defineMessages)({favoriteActions:{defaultMessage:"Favorites",id:"ai.favoriteActions.title"},editOrShareFavorite:{defaultMessage:"Edit or share favorite",id:"ai.favoriteActions.editOrShare"}});function ie(){const[e,t]=(0,a.useState)(void 0),o=(0,p.VK)((()=>X.default.checkGate("ai_favorites")),[]);return function(e){const t=(0,g.D9)(e);(0,a.useEffect)((()=>{e!==t&&Y.Z.MenuScroller&&Y.Z.MenuScroller.scrollToTop()}),[e,t])}(Boolean(e)),(0,a.useMemo)((()=>o?e?{type:"active",current:e,set:t,clear:()=>t(void 0)}:{type:"inactive",set:t}:{type:"disabled"}),[e,o])}const se={maxWidth:400,whiteSpace:"pre-wrap"};function re(e){const{value:t}=e;return(0,V.jsx)("div",{style:se,children:(0,V.jsx)("div",{children:t.action.prompt})})}function ae(e,t,o,n,i){const s=i.filterOut.toLocaleLowerCase().trim(),r=(0,te.JS)(n),a=[];for(const l of r){if(l.action.prompt.toLocaleLowerCase().trim()===s)continue;const n=n=>(0,V.jsxs)("div",{style:{display:"flex"},children:[(0,V.jsx)(G.Z,{style:{visibility:n.focused?"visible":"hidden",width:18,height:18},onClick:()=>{i.favoriteEditingState.set(l),w.Vo(e,{type:"edit",session_id:t.sessionId,gtm_favorite_id:l.gtmFavoriteId})},icon:K.E,ariaLabel:o.formatMessage(ne.editOrShareFavorite)}),!l.executeImmediately&&(0,V.jsx)(k.xj,{type:"updatePrompt",focused:n.focused})]});let r=!1;switch(l.action.type){case"helpMeEdit":"initialPrompt"!==t.stage||"blockSelection"!==t.context.type&&"textSelection"!==t.context.type||(r=!0);break;case"helpMeWrite":"initialPromptForAIBlock"!==t.stage&&"cursor"!==t.context.type||(r=!0);break;default:(0,x.t1)(l.action)}if(r){const e=(0,k.cK)({key:l.id,name:l.name,textToInsert:l.action.prompt,analyticsName:"favoriteAction",gtmFavoriteId:l.gtmFavoriteId,onUpdatePromptState:i.onUpdatePromptState,right:n,renderTooltip:()=>(0,V.jsx)(re,{value:l}),userProvidedSearchName:`${l.name} ${l.action.prompt}`.slice(0,100),executeImmediately:l.executeImmediately});a.push(e)}}return[(0,z.$J)({key:oe,title:ne.favoriteActions,render:e=>(0,V.jsx)(R.Z,{...e}),actions:a})]}function le(e){const{state:t,environment:o,sessionId:n}=e,{currentUserSettingsStore:i}=Q.default.state;i&&(t.current.name?(I.createAndCommit({userAction:"favoriteActions.saveFavoriteEditsAndClearState",environment:o,perform(e){(0,te.gC)(t.current,i,e)}}),t.clear(),w.Vo(o,{type:"save",session_id:n,gtm_favorite_id:t.current.gtmFavoriteId})):J.oV({label:(0,V.jsx)(C.FormattedMessage,{defaultMessage:"Please enter a name for the action.",id:"ai.favoriteActions.nameRequiredMessage"})}))}var ce=o(39186),de=o(38715),ue=o(37612),pe=o(48019),me=o(68894),fe=o(78140),ge=o(86825),ye=o(64369),ve=o(33929),he=o(87279);const xe=(0,C.defineMessages)({save:{id:"ai.favorites.save",defaultMessage:"Save changes"},delete:{id:"ai.favorites.delete",defaultMessage:"Delete"},runImmediately:{id:"ai.favorites.runImmediately",defaultMessage:"Run immediately"},actionNameLabel:{id:"ai.favorites.actionNameLabel",defaultMessage:"Action name"},cancelAndGoBack:{id:"ai.favorites.cancelAndGoBack",defaultMessage:"Cancel and go back"}});function Ce(e){window.__c={n:"FavoriteEditorMenuPopupContent"};const{state:t,context:o,sessionId:n}=e,i=(0,C.useIntl)(),s=(0,u.O7)(),r=(0,a.useMemo)((()=>new N.Z),[]),l=(0,z.cN)({key:"input",analyticsName:"TODO",displayName:xe.save,validators:[],closeParentMenu:!1,render:()=>(0,V.jsx)(R.Z,{isInput:!0,style:{marginTop:0},children:(0,V.jsx)(me.ZP,{value:t.current.name,onChange:e=>{t.set({...t.current,name:e.target.value}),r.setState({focus:{section:0,indexLocal:1,indexGlobal:1}})},placeholder:ve.default.formatMessage(xe.actionNameLabel),focusInitial:!0})}),action(e,t){}}),c=[(0,z.$J)({key:"favorite options section",render:e=>(0,V.jsx)(R.Z,{...e}),actions:[l,(0,z.cN)({key:"runImmediately",analyticsName:"TODO",displayName:xe.runImmediately,validators:[],render:(e,o,n)=>{let{blocks:i,environment:s}=o;const r=Boolean(t.current.executeImmediately);return(0,V.jsx)(ge.Z,{...e,title:ve.default.formatMessage(xe.runImmediately),on:r})},closeParentMenu:!1,action(e,o){t.set({...t.current,executeImmediately:!t.current.executeImmediately})}})]}),(0,z.$J)({actions:[(0,z.cN)({key:"save",analyticsName:"TODO",displayName:xe.save,validators:[],svg:de.N,closeParentMenu:!1,action(e,o){le({state:t,environment:s,sessionId:n})}})],key:"actions",render:e=>(0,V.jsx)(R.Z,{...e})}),(0,z.$J)({key:"delete action section",render:e=>(0,V.jsx)(R.Z,{...e}),actions:[(0,z.cN)({key:"delete",analyticsName:"TODO",displayName:xe.delete,validators:[],svg:ue.y,closeParentMenu:!1,action(e,o){const{currentUserSettingsStore:i}=Q.default.state;i&&(I.createAndCommit({userAction:"ai.favoriteEditorPopup.delete",environment:s,perform(e){(0,te.QC)(t.current,i,e)}}),t.clear(),w.Vo(s,{type:"delete",session_id:n,gtm_favorite_id:t.current.gtmFavoriteId}))}})]})],d=(0,a.useCallback)((()=>{}),[]);return(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px 8px 0 8px"},children:[(0,V.jsx)(G.Z,{icon:ce.G,onClick:()=>{!function(e){const{state:t,environment:o}=e,{currentUserSettingsStore:n}=Q.default.state;n&&(t.current.name||I.createAndCommit({userAction:"favoriteActions.cancelFavoriteEditsAndClearState",environment:o,perform(e){(0,te.QC)(t.current,n,e),(0,ee.Nv)(t.current.action,n,e)}}),t.clear())}({environment:s,state:t})},ariaLabel:i.formatMessage(xe.cancelAndGoBack)}),(0,V.jsx)(ye.Z,{isSecondaryColor:!0,isSmall:!0,style:{fontWeight:700},children:(0,V.jsx)(C.FormattedMessage,{id:"ai.favorites.saveHeader",defaultMessage:"Save AI action"})})]}),(0,V.jsx)(fe.Z,{menuType:he.og.Popup,width:"100%",maxHeight:"min(40vh, 320px)",minHeight:"100%",children:(0,V.jsx)(pe.Z,{menuListStore:r,sections:c,onAccept:d,initialFocus:0,context:o})})]})}var ke=o(57819),we=o(2585),Se=o(5257);const Ie=(0,C.defineMessages)({undoAriaLabel:{defaultMessage:"Go to previous AI response",id:"id.completions.undoAriaLabel"},redoAriaLabel:{defaultMessage:"Go to next AI response",id:"id.completions.redoAriaLabel"},historyLabel:{defaultMessage:"{currentRevision} of {totalRevisions}",id:"id.completions.historyLabel"}}),Ae={display:"flex",alignItems:"center",marginLeft:-2,marginRight:-2},Me={width:20,height:20,marginLeft:2,marginRight:2};function be(e){window.__c={n:"CompletionHistory"};const{onUndo:t,onRedo:o,historyLabel:n}=e,i=(0,C.useIntl)();return t||o?(0,V.jsxs)("div",{style:Ae,children:[(0,V.jsx)(G.Z,{icon:we.f,ariaLabel:i.formatMessage(Ie.undoAriaLabel),disabled:!t,onClick:t,style:Me}),(0,V.jsx)(ye.Z,{isSmall:!0,isSecondaryColor:!0,style:{fontVariantNumeric:"tabular-nums"},children:n}),(0,V.jsx)(G.Z,{icon:Se.o,ariaLabel:i.formatMessage(Ie.redoAriaLabel),disabled:!o,onClick:o,style:Me})]}):null}const Pe={onUndo:void 0,onRedo:void 0,historyLabel:void 0};function _e(e,t){const o=F.default.state;if("completionPopup"!==o.type||"results"!==o.stage)return;const{sessionId:n}=o,i=(0,b.xM)(o);w.Bp(e,{session_id:n,inference_id:i.inferenceId,type:t})}var je=o(56863),Fe=o(81598),Ne=o(21273),Te=o(98180),Le=o(11066),Ee=o(1743),Be=o(74194);const Ze=(0,C.defineMessages)({promptLabel:{defaultMessage:"Prompt for action",id:"ai.favoritePromptEditor.promptLabel"}});function Oe(e,t){e.set({...e.current,action:{...e.current.action,prompt:t}})}function Re(e){window.__c={n:"FavoritePromptEditorContent"};const{state:t,inputRef:o,sessionId:n}=e,i=(0,u.O7)(),s=(0,ke.bJ)(),r=(0,C.useIntl)().formatMessage(Ze.promptLabel);return(0,V.jsxs)(Ee.Z,{capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,V.jsx)(Be.Z,{ref:o,format:Be.B.Transparent,placeholder:r,selectAll:!0,value:t.current.action.prompt,textarea:!0,textareaSubmitOnEnter:!1,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onChange:e=>Oe(t,e.target.value),onKeyDown:e=>{"Enter"===e.key&&Oe(t,`${t.current.action.prompt}\n`)},focusInitial:!1}),(0,V.jsx)("div",{style:s.inputActions,children:(0,V.jsx)(Le.Z,{style:s.purpleButton,onClick:()=>le({state:t,environment:i,sessionId:n}),children:(0,V.jsx)(C.FormattedMessage,{defaultMessage:"Done",id:"ai.favoritePromptEditor.done"})})})]})}var De=o(61519);function Ue(e){window.__c={n:"PromptOrActionInput"};const{query:t,setQuery:o,onDismiss:n,onSubmit:i,inputRef:s,submitOnEnter:r,inputPlaceholder:l,children:c}=e,[d,u]=(0,a.useState)(void 0);return(0,V.jsxs)(Ee.Z,{capture:!0,allowMenuList:!1,allowEsc:!0,children:[(0,V.jsx)(Be.Z,{ref:s,format:Be.B.Transparent,placeholder:l,selectAll:!0,value:t,textarea:!0,textareaSubmitOnEnter:!0,autosize:!0,style:{minHeight:28,paddingTop:4,paddingBottom:4},onSubmit:e=>{t&&r&&(e.stopPropagation(),null==i||i())},onChange:e=>{o(e.target.value)},onKeyUp:e=>{"Backspace"===e.key&&(""===d&&n(),u(void 0))},onKeyDown:e=>{"Backspace"===e.key&&void 0===d&&u(t)},focusInitial:!0}),c]})}var Ve=o(83065),We=o(58261),He=o(26388);function Ke(e){window.__c={n:"SubmitAIPromptButton"};const{onSubmit:t,canSend:o}=e,n=(0,ke.bJ)(),i=(0,u.O7)(),s=(0,p.VK)((()=>i.device.isPhone),[i]),r=(0,p.VK)((()=>Ne.Z.isAssistantInWriterEnabled()),[]);return(0,V.jsx)(He.ZP,{renderTooltip:()=>(0,V.jsxs)("div",{children:[(0,V.jsx)(C.FormattedMessage,{defaultMessage:"Send to AI",id:"completions.CompletionMenuActionBar.sendTooltip"}),(0,V.jsx)(We.Z,{style:n.keyboardShortcutInverted,name:"enter"})]}),placement:He.ug.Bottom,render:e=>(0,V.jsx)(G.Z,{icon:Ve._,onClick:t,isPurple:!r&&o,isBlue:r&&o,disabled:!o,iconStyle:{height:s?24:20,width:s?24:20},style:{pointerEvents:"auto",height:s?24:20,width:s?24:20},...e})})}const $e=(0,C.defineMessages)({followUpInputPlaceholder:{id:"AlternativeCommandPalette.followUp.inputPlaceholder",defaultMessage:"Tell AI what to do next…"}}),ze={padding:"8px 10px 8px 14px"};function qe(e){window.__c={n:"CompletionFinishedContent"};const t=(0,ke.bJ)(),o=(0,C.useIntl)(),n=0===e.query.trim().length,i=(0,p.VK)((()=>Ne.Z.isAssistantInWriterEnabled()),[]);return(0,V.jsx)(Ue,{...e,inputPlaceholder:o.formatMessage($e.followUpInputPlaceholder),children:(0,V.jsxs)("div",{style:t.inputActions,children:[(0,V.jsx)(Ke,{onSubmit:e.onSubmit,canSend:!n}),(e.onUndo||e.onRedo)&&!i&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(De.Z,{vertical:!0,size:1,style:ze}),(0,V.jsx)(be,{...e})]})]})})}var Je=o(64921),Ge=o(91839);function Ye(e){window.__c={n:"CompletionInProgressContent"};const{onStop:t,onRetry:o}=e,n=(0,ke.bJ)(),i=(0,u.O7)().device,s=i.isMobileNative&&i.isIOS;return(0,V.jsxs)(A.Z,{capture:!0,onEnter:()=>{t()},onEsc:()=>{t()},onKeypress:e=>{e.metaKey||"r"!==e.key||o()},children:[(0,V.jsxs)("div",{style:n.writingLabel,children:[(0,V.jsx)(C.FormattedMessage,{id:"AlternativeCompletionsPopupContent.writing",defaultMessage:"AI is writing"}),(0,V.jsx)(Ge.Z,{style:n.loadingDots})]}),!s&&(0,V.jsxs)(Je.Z,{style:n.lightweightButton,onClick:o,children:[(0,V.jsx)(C.FormattedMessage,{id:"AlternativeCompletionsPopupContent.tryAgain.label",defaultMessage:"Try again"}),(0,V.jsx)("span",{style:n.keyboardShortcut,children:(0,V.jsx)(C.FormattedMessage,{id:"AlternativeCompletionsPopupContent.startOver.shortcut",defaultMessage:"r"})})]}),(0,V.jsxs)(Je.Z,{style:n.lightweightButton,onClick:t,children:[s?(0,V.jsx)(C.FormattedMessage,{id:"AlternativeCompletionsPopupContent.cancel.label",defaultMessage:"Cancel"}):(0,V.jsx)(C.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.label",defaultMessage:"Stop"}),(0,V.jsx)("span",{style:n.keyboardShortcut,children:(0,V.jsx)(C.FormattedMessage,{id:"AlternativeCompletionsPopupContent.stop.shortcut",defaultMessage:"esc"})})]})]})}var Qe=o(15201),Xe=o(53336),et=o(55217);function tt(e){window.__c={n:"CompletionPreview"};const{temporaryListStore:t,isLoading:o}=e,n=(0,u.O7)(),i=(0,a.useRef)(null),s=null==i?void 0:i.current,r=null==s?void 0:s.getStore(),l=(0,p.VK)((()=>n.device.isPhone),[n]),c=(0,ke.jq)({resetWhenScrolledToBottom:!0,areWeLoading:o,scrollerStore:r});(0,a.useEffect)((()=>{s&&(c?ot.cancel():ot(s))}),[s,t,c]);const d={scroller:{maxHeight:l?"min(15vh, 200px)":"min(40vh, 320px)",width:"100%"}};return(0,V.jsx)(a.Fragment,{children:(0,V.jsx)(Xe.Z,{type:U.Z.Y,style:d.scroller,ref:i,children:(0,V.jsx)(Qe.O,{displayName:"CompletionPopupContent",disabled:!0,children:(0,V.jsx)(et.Z,{store:t,disabled:!0,disableCommentMenu:!0,disableHoverMenu:!0,disableDrag:!0})})})})}const ot=$.Ds((e=>{e.scrollToBottom({animate:!0})}),60);var nt=o(63594),it=o(54497),st=o(42402);function rt(){window.__c={n:"AiWarningNotice"};const e=(0,a.useCallback)((()=>{window.open("/help/guides/using-notion-ai#what-are-the-current-limitations-of-notion-ai")}),[]),t=(0,m.yK)((e=>({icon:{width:12,height:12,fill:e.lightIconColor,marginLeft:2},link:{color:e.lightTextColor,fontWeight:500}})),[]);return(0,V.jsxs)(V.Fragment,{children:[(0,it.t)(t.icon),(0,V.jsx)(ye.Z,{isSecondaryColor:!0,isSmall:!0,children:(0,V.jsx)(C.FormattedMessage,{id:"completions.AiWarning.warning",defaultMessage:"AI responses can be inaccurate or misleading."})}),(0,V.jsx)(ye.Z,{isSmall:!0,children:(0,V.jsx)(st.Z,{onClick:e,style:t.link,disableHover:!0,disableUnderline:!0,children:(0,V.jsx)(C.FormattedMessage,{id:"completions.AiWarning.learnMore",defaultMessage:"Learn more"})})})]})}var at=o(935),lt=o(81570),ct=o(80671),dt=o(44041),ut=o(88893),pt=o(35057),mt=o(88280);function ft(){window.__c={n:"UpsellNotice"};const e=(0,u.O7)(),t=(0,p.VK)((()=>e.device.isMobile),[e]),o=(0,p.VK)((()=>{const e=mt.subscriptionDataStoreInstance.state;return ut.GJ(e)}),[]),n=(0,a.useCallback)((()=>{t?ct.k2():dt.y(e,{from:"ai_upsell_notice",for:(0,pt.zt)(),addOnFeature:"ai"})}),[e,t]),i=(0,m.yK)((e=>({upsellIcon:{width:14,height:14,fill:e.lightIconColor},upsellLink:{color:e.blueColor,fontWeight:500}})),[]);return(0,V.jsxs)(V.Fragment,{children:[(0,lt.T)(i.upsellIcon),(0,V.jsxs)(ye.Z,{isSecondaryColor:!0,isSmall:!0,children:[(0,V.jsx)(C.FormattedMessage,{id:"UpsellNotice.label",defaultMessage:"All free AI responses have been used for this workspace."}),!o&&(0,V.jsxs)(V.Fragment,{children:[" ",(0,V.jsx)(C.FormattedMessage,{id:"UpsellNotice.contactWorkspaceOwner.label",defaultMessage:"Contact your workspace owner to add Notion AI."})]})]}),o&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(ye.Z,{isSmall:!0,children:(0,V.jsx)(st.Z,{onClick:n,style:i.upsellLink,disableHover:!0,disableUnderline:!0,children:(0,V.jsx)(C.FormattedMessage,{id:"UpsellNotice.link.label",defaultMessage:"Go unlimited"})})})})]})}function gt(e){window.__c={n:"MainPopupFooter"};const{state:t}=e,o=(0,u.O7)(),n=(0,p.VK)((()=>o.device.isPhone),[o]),i=(0,m.yK)((e=>({wrapper:{background:"dark"===e.mode?e.accentColors.gray[100]:e.accentColors.gray[30],display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 12px",borderTop:`1px solid ${e.lightDividerColor}`,gap:8,color:e.lightTextColor,fontSize:12,minHeight:36},noticeContent:{display:"flex",alignItems:"center",gap:8},actionContent:{display:"flex",alignItems:"center"}})),[]),s=(0,p.VK)((()=>!nt.Z.state),[]);if(n)return null;let r,a;return s&&(r=(0,V.jsx)(ft,{})),"results"!==t.stage||t.loading||(r=r??(0,V.jsx)(rt,{}),a=(0,V.jsx)(at.u,{revision:(0,b.xM)(t)})),r?(0,V.jsxs)("div",{style:i.wrapper,children:[(0,V.jsx)("div",{style:i.noticeContent,children:r}),a&&(0,V.jsx)("div",{style:i.actionContent,children:a})]}):null}const yt=(0,C.defineMessages)({writeInputPlaceholder:{defaultMessage:"Ask AI to write anything…",id:"completions.PromptMenu.alternativeUiWriteInputPlaceholder"},editInputPlaceholder:{defaultMessage:"Ask AI to edit or generate…",id:"completions.PromptMenu.alternativeUiEditInputPlaceholder"}});function vt(e){window.__c={n:"MainPopupContent"};const{state:t,onDismiss:o,onCompletionRetry:n,onCompletionStop:i,temporaryListStore:s,favoriteEditingState:r}=e,l=(0,a.useRef)(null);(0,a.useEffect)((()=>{je.w()}),[]);const c=(0,u.O7)(),d=(0,p.VK)((()=>c.device.isPhone),[c]),f=(0,p.VK)((()=>Ne.Z.isAssistantInWriterEnabled()),[]),g=(0,m.yK)((e=>({icon:{height:18,width:18,paddingLeft:d?0:4,marginLeft:d?-4:void 0,...f&&{fill:e.regularIconColor},...!f&&{fill:"dark"===e.mode?e.accentColors.purple[600]:e.accentColors.purple[400]}},outer:{width:"100%",minHeight:d?44:36,padding:d?"2px 16px 2px 16px":"2px 12px 2px 8px",display:"flex",flexDirection:"column",justifyContent:"center",gap:2,fontSize:d?16:14}})),[d,f]),y=(0,p.VK)((()=>{if(!f)return!1;const e=Te.Z.getActiveAssistantConfigurationState();return Boolean((null==e?void 0:e.sampling)||(null==e?void 0:e.evaluating))}),[f]),v=(0,V.jsx)("div",{style:{height:36,alignItems:"center",display:"flex"},children:(0,E.t)(g.icon)});return"active"===r.type?(0,V.jsx)("div",{style:g.outer,ref:l,children:(0,V.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[v,(0,V.jsx)(Re,{state:r,inputRef:e.inputRef,sessionId:t.sessionId})]})}):f?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{style:g.outer,ref:l,children:[(0,V.jsx)(Fe.Sv,{}),(0,V.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:["initialPrompt"===t.stage&&v,y&&(0,V.jsx)(Fe.GL,{}),("initialPrompt"===t.stage||"initialPromptForAIBlock"===t.stage)&&(0,V.jsx)(ht,{...e,paletteMode:(0,ke.rR)(t)}),"results"===t.stage&&!y&&(0,V.jsx)(qe,{...e})]})]}),(0,V.jsx)(gt,{state:t})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{style:g.outer,ref:l,children:[s&&(0,V.jsx)(tt,{temporaryListStore:s,isLoading:"results"===t.stage&&t.loading}),(0,V.jsxs)("div",{style:{display:"flex",gap:8,width:"100%"},children:[v,"initialPrompt"===t.stage||"initialPromptForAIBlock"===t.stage?(0,V.jsx)(ht,{...e,paletteMode:(0,ke.rR)(t)}):t.loading?(0,V.jsx)(Ye,{onDismiss:o,state:t,onRetry:n,onStop:i}):(0,V.jsx)(qe,{...e})]})]}),(0,V.jsx)(gt,{state:t})]})}function ht(e){window.__c={n:"MainPopupInitialPromptContent"};const{query:t,onSubmit:o,paletteMode:n}=e,i=(0,ke.bJ)(),s=(0,C.useIntl)(),r="edit"===n?s.formatMessage(yt.editInputPlaceholder):s.formatMessage(yt.writeInputPlaceholder),a=t.trim().length>0;return(0,V.jsx)(Ue,{...e,inputPlaceholder:r,children:(0,V.jsx)("div",{style:i.inputActions,children:(0,V.jsx)(Ke,{onSubmit:o,canSend:a})})})}o(30541),o(21703);var xt=o(87205),Ct=o(8848),kt=o(30579),wt=o(7500),St=o(88607),It=o(13148),At=o(1230),Mt=o(25651),bt=o(91427),Pt=o(98519),_t=o(55863),jt=o(4615),Ft=o(27967),Nt=o(68204),Tt=o(36769),Lt=o(64275),Et=o(56666),Bt=o(37181);const Zt="recent-actions",Ot=(0,C.defineMessages)({recentActions:{defaultMessage:"Recents",id:"commandPalette.recentActions.title"},more:{defaultMessage:"See more",id:"commandPalette.recentActions.more"},removeFromMenu:{defaultMessage:"Remove this action from the menu",id:"commandPalette.recentActions.removeFromMenu"},addToFavorites:{defaultMessage:"Add to favorites",id:"commandPalette.recentActions.addToFavorites"}});function Rt(e){window.__c={n:"FavoriteButton"};const{focused:t,recentAction:o,state:n,intl:i,sessionId:s}=e,r=(0,u.O7)();return(0,V.jsx)(G.Z,{style:{visibility:t?"visible":"hidden",width:18,height:18},onClick:()=>{w.Vo(r,{type:"create_from_recent",session_id:s,gtm_favorite_id:void 0}),n.set((0,te.kg)(o))},icon:bt.e,ariaLabel:i.formatMessage(Ot.addToFavorites)})}function Dt(){window.__c={n:"MoreIcon"};const e=(0,m.Fg)();return(0,Et.o)({width:12,fill:e.mediumIconColor,marginLeft:2,marginRight:2})}(0,Tt.exposeDebugEnvironmentValue)("resetRecentAndFavoriteAIActions",(e=>()=>{const{currentUserSettingsStore:t}=Q.default.state;if(!t)throw new Error("currentUserSettingsStore not found");I.createAndCommit({userAction:"recentActions.debugging.resetRecentAndFavoriteAIActions",environment:e,perform(e){Bt.d2({userSettingsStore:t,transaction:e,data:{recent_ai_actions:[],favorite_ai_actions:[]}})}})}));const Ut="This string should never show up in analytics",Vt=(0,C.defineMessages)({clickToEditAndRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToEditAndRetry",defaultMessage:"Click to edit prompt and retry"},clickToRetry:{id:"completions.CompletionMenuActionBar.tryAgain.clickToRetry",defaultMessage:"Click to retry"},tryAgain:{id:"completions.CompletionMenuActionBar.tryAgain",defaultMessage:"Try again"},delete:{id:"completions.CompletionMenuActionBar.delete",defaultMessage:"Discard"},close:{id:"completions.CompletionMenuActionBar.close",defaultMessage:"Close"},keep:{id:"completions.CompletionMenuActionBar.done",defaultMessage:"Done"},accept:{id:"completions.CompletionMenuActionBar.accept",defaultMessage:"Accept changes"},replace:{id:"completions.CompletionMenuActionBar.replace",defaultMessage:"Replace selection"},insert:{id:"completions.CompletionMenuActionBar.insert",defaultMessage:"Insert below"},addToFavorites:{id:"completions.CompletionMenuActionBar.addToFavorites",defaultMessage:"Add to favorites"}});function Wt(e){const{filter:t,state:o,from:n,favoriteEditingState:s,onUpdatePromptState:r,onImprove:a,context:l,intl:c,environment:d,completionResultInfo:u}=e,p=Ne.Z.isAssistantInWriterEnabled();let m;switch(o.stage){case"initialPrompt":case"initialPromptForAIBlock":m=function(e){const{state:t,environment:o,intl:n,filter:s,from:r,onUpdatePromptState:a,favoriteEditingState:l,type:c,isAssistant:d}=e,{currentUserSettingsStore:u}=Q.default.state;if(d){const e=(0,Ft.getFilteredClientSkills)({showCustomSkills:!1,hasCurrentPage:!0}),t="blockSelection"===c||"textSelection"===c?Ft.writerSelectionSections:Ft.writerCursorSections;return $.oA(t.map((t=>{const o=$.oA(t.skills.map((t=>e.find((e=>e.skillType===t)))));if(0===o.length)return;return(0,z.$J)({key:t.key,title:t.title,render:e=>(0,V.jsx)(R.Z,{...e}),actions:o.map((e=>"translate"===e.skillType?function(e){const{clientSkill:t,intl:o,from:n}=e;if("translate"!==t.skillType)throw new Error("Expected translate skill");const s=xt.nI.map((e=>{let{key:s,name:r}=e;return(0,z.cN)({key:`assistant.translate.${s}`,analyticsName:`Assistant - translate - ${s}`,displayName:r,validators:[],closeParentMenu:!1,right:(0,k.cx)("submitPrompt"),action:async e=>{let{environment:r}=e;const a=F.default.state;a&&"completionPopup"===a.type&&"initialPrompt"===a.stage&&await i.triggerAssistantSkillCompletion({environment:r,context:a.context,clientSkill:t,skillSettings:{language:s},intl:o,updater:F.default.createUpdater(),sessionId:(0,jt.ZP)(),from:n})}})})),r=(0,z.$J)({key:"translate language actions",render:e=>(0,V.jsx)(R.Z,{...e}),actions:s}),a=()=>(0,V.jsx)(k.lA,{svg:$t(St.Q)});return(0,z.MV)({key:"translate",displayName:Ft.skillMessages.translate,analyticsName:`Assistant - ${t.skillType}`,validators:[],svg:a,subActions:()=>[r]})}({clientSkill:e,intl:n,from:r}):"change_tone"===e.skillType?function(e){const{clientSkill:t,intl:o,from:n}=e;if("change_tone"!==t.skillType)throw new Error("Expected change_tone skill");const s=xt.vK.map((e=>{let{key:s,name:r}=e;return(0,z.cN)({key:`assistant.changeTone.${s}`,analyticsName:`Assistant - changeTone - ${s}`,displayName:r,validators:[],closeParentMenu:!1,right:(0,k.cx)("submitPrompt"),action:async e=>{let{environment:r}=e;const a=F.default.state;a&&"completionPopup"===a.type&&"initialPrompt"===a.stage&&await i.triggerAssistantSkillCompletion({environment:r,context:a.context,clientSkill:t,skillSettings:{tone:s},intl:o,updater:F.default.createUpdater(),sessionId:(0,jt.ZP)(),from:n})}})})),r=(0,z.$J)({key:"changeTone actions",render:e=>(0,V.jsx)(R.Z,{...e}),actions:s}),a=()=>(0,V.jsx)(k.lA,{svg:$t(kt.p)});return(0,z.MV)({key:"changeTone",displayName:Ft.skillMessages.changeTone,analyticsName:`Assistant - ${t.skillType}`,validators:[],svg:a,subActions:()=>[r]})}({clientSkill:e,intl:n,from:r}):(0,z.cN)({key:e.skillType,analyticsName:`Completions - ${e.skillType}`,displayName:Ft.skillNameMap[e.skillType],validators:[],closeParentMenu:!1,svg:$t(Ft.skillIconMap[e.skillType]),right:(0,k.cx)("submitPrompt"),action:async t=>{let{environment:o}=t;const s=F.default.state;s&&"completionPopup"===s.type&&"initialPrompt"===s.stage&&await i.triggerAssistantSkillCompletion({environment:o,context:s.context,clientSkill:e,skillSettings:{},intl:n,updater:F.default.createUpdater(),sessionId:(0,jt.ZP)(),from:r})}})))})})))}const p=u?function(e,t,o,n,i){const s=i.filterOut.toLocaleLowerCase().trim(),r=(0,ee.pz)(o),a=[];let l=0;for(const u of r){const r="recentAction."+l++,c=s=>(0,V.jsxs)("div",{style:{display:"flex"},children:[(0,V.jsx)(G.Z,{style:{visibility:s.focused?"visible":"hidden",width:18,height:18},onClick:()=>I.createAndCommit({userAction:"ai.recentActions.renderRemoveButton",environment:n,perform(e){(0,ee.lG)(u,o,e)}}),icon:Lt.D,ariaLabel:t.formatMessage(Ot.removeFromMenu)}),"inactive"===i.favoriteEditingState.type?(0,V.jsx)(Rt,{sessionId:e.sessionId,state:i.favoriteEditingState,focused:s.focused,recentAction:u,intl:t}):(0,V.jsx)(k.xj,{type:"updatePrompt",focused:s.focused})]});let d;if(u.prompt.toLocaleLowerCase().trim()!==s){switch(u.type){case"helpMeEdit":"initialPrompt"!==e.stage||"blockSelection"!==e.context.type&&"textSelection"!==e.context.type||(d=(0,k.cK)({key:r,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:z.zz}));break;case"helpMeWrite":"initialPromptForAIBlock"!==e.stage&&"cursor"!==e.context.type||(d=(0,k.cK)({key:r,name:u.prompt,analyticsName:"recentAction",right:c,onUpdatePromptState:i.onUpdatePromptState,renderTooltip:z.zz}));break;default:(0,x.t1)(u)}d&&a.push(d)}}const c=a.slice(0,3),d=a.slice(3);if(d.length){const e=(0,z.$J)({key:"more recent actions",render:e=>(0,V.jsx)(R.Z,{...e}),actions:d}),t=(0,z.MV)({key:"more recent actions extension",displayName:Ot.more,analyticsName:"Completions - more",validators:[],svg:()=>(0,V.jsx)(Dt,{}),subActions:()=>[e],collapseSubActionsIntoParent:!0,width:400});c.push(t)}return[(0,z.$J)({key:Zt,title:Ot.recentActions,render:e=>(0,V.jsx)(R.Z,{...e}),actions:c})]}(t,n,u,o,{onUpdatePromptState:a,favoriteEditingState:l,filterOut:s}):[],m=[...u&&"disabled"!==l.type?ae(o,t,n,u,{onUpdatePromptState:a,favoriteEditingState:l,filterOut:s}):[]];"initialPromptForAIBlock"===t.stage?m.push((0,k.xI)({store:t.store,from:r})):"aiBlock"!==c&&m.push(...(0,k.LK)({from:r,type:c,onUpdatePromptState:a}));return m.push(...p),m}({state:o,environment:d,intl:c,filter:t,from:n,context:l,isAssistant:p,favoriteEditingState:s,onUpdatePromptState:r,type:(0,ke.VZ)(o)});break;case"results":m=o.loading?[]:function(e){const{environment:t,state:o,defaultAction:n,closeOrDiscard:i,favoriteEditingState:s,isAssistant:r}=e,a={key:"insert",analyticsName:Ut,displayName:Vt.insert,validators:[],closeParentMenu:!0,svg:At.H,action(){e.onInsert()}},l={key:"delete",analyticsName:Ut,displayName:Vt.delete,validators:[],closeParentMenu:!0,svg:ue.y,action(){e.onCancel()}},c=function(e){const{state:t,onRetry:o}=e;if("results"!==t.stage)return;return{key:"tryAgain",analyticsName:Ut,displayName:Vt.tryAgain,validators:[],closeParentMenu:!0,svg:_t.s,renderTooltip:()=>(0,V.jsx)(Kt,{state:t}),action(){o()}}}({...e}),d=[],u=Pt.k;if(r){const t=Te.Z.getActiveAssistantRuntimeState();if(!t)return[];const o=t.sampledSteps.length>0,n=t.uncommittedOperations.length>0||t.temporaryOperations.length>0;return o?n?[(0,z.$J)({key:"main",render:e=>(0,V.jsx)(R.Z,{...e}),actions:$.oA([(0,z.cN)({key:"keep",analyticsName:Ut,displayName:Vt.accept,validators:[],closeParentMenu:!0,svg:u,action(){e.onAccept({exitType:"accept"})}}),(0,z.cN)({key:"tryAgain",analyticsName:Ut,displayName:Vt.tryAgain,validators:[],closeParentMenu:!1,svg:_t.s,action(){e.onRetry()}}),(0,z.cs)({key:"close",analyticsName:Ut,displayName:Vt.delete,validators:[],closeParentMenu:!0,svg:It.U,shortcuts:["esc"],action(){e.onCancel()}})])})]:[(0,z.$J)({key:"main",render:e=>(0,V.jsx)(R.Z,{...e}),actions:$.oA([(0,z.cN)({...a,svg:u}),(0,z.cN)({key:"tryAgain",analyticsName:Ut,displayName:Vt.tryAgain,validators:[],closeParentMenu:!1,svg:_t.s,action(){e.onRetry()}}),(0,z.cs)({key:"close",analyticsName:Ut,displayName:Vt.close,validators:[],closeParentMenu:!0,svg:It.U,shortcuts:["esc"],action(){e.onCancel()}})])})]:[]}"accept"===n?d.push((0,z.cN)({key:"keep",analyticsName:Ut,displayName:Vt.keep,validators:[],closeParentMenu:!0,svg:u,action(){e.onAccept({exitType:"accept"})}})):"replace"===n?d.push((0,z.cN)({key:"replace",analyticsName:Ut,displayName:Vt.replace,validators:[],closeParentMenu:!0,svg:u,action(){e.onReplace()}}),(0,z.cN)(a)):"insert"===n?d.push((0,z.cN)({...a,svg:u})):(0,x.t1)(n);d.push((0,z.cN)({key:"continueWriting",analyticsName:Ut,displayName:b.Dr.continueWriting,validators:[],closeParentMenu:!0,svg:$t(Mt.R),action(){e.onImprove({type:"continueWriting"})}}),(0,z.cN)({key:"makeLonger",analyticsName:Ut,displayName:b.Dr.makeLonger,validators:[],closeParentMenu:!0,svg:$t(wt.H),action(){e.onImprove({type:"makeLonger"})}}));const p=[(0,z.cN)({key:"addToFavorites",analyticsName:Ut,displayName:Vt.addToFavorites,validators:[()=>Boolean(zt(o,s))],closeParentMenu:!0,svg:bt.e,action(){const e=zt(o,s);if(!e)return;const n=(0,te.kg)(e.recentAction);e.favoriteEditingState.set(n),w.Vo(t,{type:"create_from_completion",session_id:o.sessionId,gtm_favorite_id:void 0})}}),c?(0,z.cN)(c):void 0,"discard"===i?(0,z.cN)(l):(0,z.cs)({key:"close",analyticsName:Ut,displayName:Vt.close,validators:[],closeParentMenu:!0,svg:It.U,shortcuts:["esc"],action(){e.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0})}})],m=(0,z.$J)({key:"main",render:e=>(0,V.jsx)(R.Z,{...e}),actions:d}),f=(0,z.$J)({key:"final",render:e=>(0,V.jsx)(R.Z,{...e}),actions:p.filter(x.$K)});return[m,f]}({environment:d,state:o,onImprove:a,closeOrDiscard:"cursor"===o.context.type?"close":"discard",favoriteEditingState:s,isAssistant:p,...u});break;default:(0,x.t1)(o)}let f=(0,Nt.sG)({sections:m,context:l,query:t});if(1===f.length&&f[0].key===Zt){const e=f[0].actions.slice();(0,b.LN)(t,c)||e.unshift((0,k.sH)({customPrompt:t,execute:u.onSubmit})),f=[(0,z.$J)({key:"actions",render:e=>(0,V.jsx)(R.Z,{...e}),actions:e})]}else(function(e){let t=!1;for(const o of e)if(o.key===oe)t=!0;else if(o.key!==Zt)return!1;return t})(f)&&f.push((0,z.$J)({key:"literal-actions",render:e=>(0,V.jsx)(R.Z,{...e}),actions:[(0,k.sH)({customPrompt:t,execute:u.onSubmit})]}));return f}function Ht(e,t){switch(t.type){case"continueWriting":return e.formatMessage(b.Dr.continueWriting);case"makeLonger":return e.formatMessage(b.Dr.makeLonger);case"helpMeEdit":return t.prompt}}function Kt(e){window.__c={n:"TryAgainTooltip"};const{state:t}=e,o=(0,m.yK)((e=>({hint:{color:e.mediumInvertedTextColor}})),[]),n=(0,b.xM)(t),s=(0,C.useIntl)();let r,a=Vt.clickToEditAndRetry;if("initial"===n.type)if(i.doesPromptNeedAdditionalUserInput(n))r=(0,b.gY)(n);else{a=Vt.clickToRetry;const e=n.clientPrompt.name;r="string"==typeof e?e:s.formatMessage(e)}else"followup"===n.type?r=Ht(s,n.improvement):(0,x.t1)(n);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{children:r}),(0,V.jsx)("div",{style:o.hint,children:s.formatMessage(a)})]})}function $t(e){return()=>(0,V.jsx)(k.lA,{svg:e,svgFill:Ct.FN.light.purple[400]})}function zt(e,t){if("disabled"===t.type)return;const o=function(e){if("completionPopup"!==e.type||"results"!==e.stage)return;const t=(0,b.xM)(e);return"initial"===t.type?t:void 0}(e);if(!o)return;const{currentUserSettingsStore:n}=Q.default.state;if(!n)return;const i=(0,ee.BG)({clientPrompt:o.clientPrompt,additionalContext:o.additionalContext,promptTitle:o.promptTitle});return i&&!(0,te.Gl)(n,i)?{currentInitialRevision:o,recentAction:i,favoriteEditingState:t,currentUserSettingsStore:n}:void 0}function qt(e){window.__c={n:"MenuPopupContent"};const{sections:t,onCloseParentMenu:o,context:n,menuListStore:i}=e,s=(0,a.useCallback)((e=>{e.closeParentMenu&&o()}),[o]),r=(0,u.O7)(),l=(0,p.VK)((()=>r.device.isPhone),[r]);return(0,V.jsx)(fe.Z,{menuType:l?he.og.ActionSheet:he.og.Popup,width:"100%",maxHeight:l?"min(17vh, 160px)":"min(40vh, 320px)",maxWidth:"100%",children:(0,V.jsx)(pe.Z,{menuListStore:i,sections:t,onAccept:s,initialFocus:0,context:n})})}var Jt=o(51454),Gt=o(69454),Yt=o(77794),Qt=o(24098),Xt=o(26136);function eo(e){window.__c={n:"PopupPositioner"};const{scrollerStore:t,openState:o,children:n}=e,[i,s]=(0,a.useState)(Date.now()),r=(0,a.useCallback)((()=>s(Date.now())),[]),l=(0,a.useRef)(null),[c,d]=(0,a.useState)(void 0),[u,f]=(0,a.useState)(void 0),g=(0,p.VK)((()=>{const e=(0,ke.$b)(o);if(!e)return;const n=(0,b.wA)(e);if(!n)return;const{origin:i}=e;"results"!==o.stage&&n&&i instanceof Xt.G&&("spacebar"===o.from||i.isEmptyEditableBlock())&&(n.height=0);const s=t.state,r=s.clientRect??new DOMRect,a=s.scrollTop;return function(e){const{openState:t,originRect:o,scrollerRect:n,scrollerScrollTop:i,popupRect:s}=e,r=(null==s?void 0:s.height)??0,a=(null==s?void 0:s.width)??0,l=Math.min(Math.max(o.width,500),730);let c;const d=o.bottom-n.top+i+oo;o.bottom+r+oo+no>n.bottom&&(c=d-(n.height-r-no+i));let u;a+io+so>n.width?u=io:o.left+a>n.right?u=n.width-a-so:(u=o.left-n.left,"initialPromptForAIBlock"===t.stage&&(u-=a-o.width));return{top:d,left:u,width:l,scrollTopIntoView:c}}({openState:o,originRect:n,scrollerRect:r,scrollerScrollTop:a,popupRect:c})}),[t,c,o]);(0,a.useEffect)((()=>{g&&f(g)}),[g]);const y=g??u;(0,a.useEffect)((()=>{if(Date.now()-i>500)return;const e=null==y?void 0:y.scrollTopIntoView;if(!e)return;const o=ro(t);o&&to(e,o)}),[null==y?void 0:y.scrollTopIntoView,t,i]);const v=(0,m.yK)((e=>({wrap:{position:"absolute",left:null==y?void 0:y.left,top:null==y?void 0:y.top,width:null==y?void 0:y.width,zIndex:Jt.lB}})),[y]);(0,a.useEffect)((()=>{const e=new Yt.E;if(!l.current)throw new Error("ref.current is null");return e.observe(l.current),e.rect.addListener((e=>{d(e.state)})),()=>{e.destroy()}}),[]);const h="results"===o.stage&&!o.loading;(0,a.useEffect)((()=>{h&&r()}),[h,r]);const x="results"===o.stage&&o.loading,C=(0,ke.jq)({resetWhenScrolledToBottom:!1,areWeLoading:x,scrollerStore:t}),k="results"===o.stage&&"cursor"===o.context.type,[w,S]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{!x||!k&&w||(C?to.cancel():null!=y&&y.scrollTopIntoView&&(r(),S(!0)))}),[C,w,k,x,y,r]),(0,V.jsx)(Qt.Z,{capture:!0,render:e=>(0,V.jsx)(Ee.Z,{capture:!0,allowMenuList:!0,allowEsc:!0,children:(0,V.jsx)("div",{style:v.wrap,ref:l,...e,children:y&&n})})})}const to=$.Ds(((e,t)=>{t.scrollByOffset(e,0,{animate:!0}),Y.Z.MenuScroller&&Y.Z.MenuScroller.scrollToTop()}),60),oo=4,no=6,io=6,so=16;function ro(e){var t,o;return e===(null===(t=Y.Z.PageScroller)||void 0===t?void 0:t.stores.store)?Y.Z.PageScroller:e===(null===(o=Y.Z.PeekViewScroller)||void 0===o?void 0:o.stores.store)?Y.Z.PeekViewScroller:void 0}function ao(e){window.__c={n:"MobilePopupPositioner"};const{children:t,scrollerStore:o,openState:n}=e,[i,s]=(0,a.useState)(Date.now()),r=(0,a.useRef)(null),[l,c]=(0,a.useState)(void 0),d=(0,a.useCallback)((()=>s(Date.now())),[]),{WindowSizeStore:m}=(0,u.O7)();(0,a.useEffect)((()=>{const e=new Yt.E,t=r.current;if(!t)throw new Error("ref.current is null");e.observe(t);let o=t.getBoundingClientRect().top;e.rect.addListener((e=>{o=e.state.top,c(e.state)}));const n=setInterval((()=>{const n=t.getBoundingClientRect().top;n!==o&&(o=n,e.recompute())}),50);return()=>{e.destroy(),clearInterval(n)}}),[]);const f="results"===n.stage&&!n.loading,y=("results"===n.stage||"initialPrompt"===n.stage)&&"cursor"===n.context.type,v=(0,p.VK)((()=>{const e=(0,ke.$b)(n);if(!e)return;const t=(0,b.wA)(e);if(!t)return;if(!l)return;const o=t.bottom-l.top;return o>0?o:void 0}),[n,l]);(0,a.useEffect)((()=>{if(Date.now()-i>500)return;if(!v)return;const e=ro(o);e&&to(v,e)}),[v,o,i]),(0,a.useEffect)((()=>{f&&y&&d()}),[f,y,d]);const h="results"===n.stage&&n.loading,x=(0,g.D9)(h),[C,k]=(0,a.useState)();(0,a.useEffect)((()=>{x&&!h&&k(Date.now())}),[h,x]),(0,a.useEffect)((()=>{const e=!!C&&Date.now()-C<1e3;(h||e)&&y&&v&&d()}),[y,h,d,v,C]);const w=(0,p.VK)((()=>{const e=Gt.Z.state.phase===Gt.i.hidden||Gt.Z.state.phase===Gt.i.willHide,t=Gt.Z.estimatedNativeWebBottomOverlap()+no;return e?m.getSafePaddingBottomPx(t):t}),[m]);return(0,V.jsx)("div",{ref:r,style:{position:"absolute",bottom:w,left:io,right:io,zIndex:Jt.Mo},children:t})}var lo=o(58016);const co="notion-alternate-ai-ui";function uo(e){window.__c={n:"CompletionPopup"};const{scrollerStore:t}=e,o=(0,u.O7)(),n=(0,p.VK)((()=>F.default.state),[]);(0,T.w9)(n);const i=(0,a.useMemo)((()=>(0,ke.RR)(n)),[n]),s=(0,p.VK)((()=>i&&(0,ke.$b)(i)),[i]),r=(0,p.VK)((()=>o.device.isPhone),[o]);return i?t!==(null==s?void 0:s.scrollerStore)?null:r?(0,V.jsx)(ao,{scrollerStore:t,openState:i,children:(0,V.jsx)(po,{openState:i})}):(0,V.jsx)(eo,{scrollerStore:t,openState:i,children:(0,V.jsx)(po,{openState:i})}):null}function po(e){window.__c={n:"PopupContent"};const{openState:t}=e,o=(0,u.O7)(),n=(0,C.useIntl)(),r=(0,a.useState)(function(e){switch(e.stage){case"results":return"";case"initialPromptForAIBlock":return e.prompt??e.prefilledValue;case"initialPrompt":return e.prefilledValue;default:return(0,x.t1)(e)}}(t))[0],[E,B]=function(e){const t=(0,C.useIntl)(),[o,n]=(0,a.useState)("");return[(0,p.VK)((()=>{if("initialPromptForAIBlock"!==e.stage||!(0,b.dU)())return o;const n=e.store.getTitleValue();return(0,v.X)({intl:t,textValue:n,getRecordModel:e.store.getRecordModel,userTimeZone:(0,f.r)()})}),[o,t,e]),n]}(t),[Z,O]=(0,a.useState)(!1),[R,D]=(0,a.useState)(!1),[U,H]=(0,a.useState)(""),K=ie(),z=(0,a.useRef)(null),J=(0,ke.rR)(t),G=(0,a.useMemo)((()=>({environment:o,blocks:[],publicEditMode:void 0})),[o]);(0,T.lZ)(t);const Y=(0,a.useCallback)((e=>{w.ov(o,{session_id:t.sessionId,type:e.analyticsName,gtm_favorite_id:e.gtmFavoriteId}),B(e.insertText),i.maybeSetPromptForCurrentAiBlock(o,e.insertText),e.executeImmediately&&O(!0),z.current&&z.current.focusInput()}),[t.sessionId,o,B]),ee="results"===t.stage?(0,b.xM)(t).completion:void 0,oe=(0,g.Z_)(ee,i.COMPLETION_THROTTLE,h.Z),ne="results"===t.stage?t:void 0,se=(0,j.useDependency)(j.deps.markdownLinkifyIt),re=(0,j.useDependency)(j.deps.tinyMceMicrosoftWordPasteFilter),ae=(0,a.useMemo)((()=>{if(!ne||"textSelection"!==ne.context.type&&"blockSelection"!==ne.context.type)return;if(["idle","pending"].includes(se.status)||["idle","pending"].includes(re.status))return;const{userSearchCache:e}=(0,b.xM)(ne);return oe?l.Z.withListenerIgnored((()=>{const t=new c.Z({name:"CompletionPopup.PopupContent",isTemporaryData:!0}),n=I.createAndCommit({userAction:"CompletionPopup.temporarymarkdownToBlocks",environment:o,canUndo:!1,perform:n=>{const s=S.Mt({environment:o,text:oe,inMemoryRecordCache:t,transaction:n,markdownOptions:(0,P.N9)(e),markdownLinkifyIt:se.value,tinyMceMicrosoftWordPasteFilter:re.value});if(s)return i.postProcessAICreatedStores(o,s),S.Lh({environment:o,stores:s,inMemoryRecordCache:t,transaction:n})}}).performResult;return t.addCacheFallback(o.defaultRecordCache.inMemoryRecordCache),n})):void 0}),[ne,oe,o,se,re]),le=(0,p.VK)((()=>{if(!ae||!ne||"completionPopup"!==ne.type||"results"!==ne.stage||"textSelection"!==ne.context.type&&"blockSelection"!==ne.context.type)return;return ne.context.stores.every((e=>{const t=e.getType();return!!t&&("blockSelection"===ne.context.type?Boolean(_.d[t]):"textSelection"===ne.context.type&&Boolean(_.D[t]))}))}),[ne,ae]);let ce=!0,de=!1;switch(t.stage){case"initialPrompt":if(t.futureRevisions.length>0)break;case"initialPromptForAIBlock":ce=!1;break;case"results":t.loading||"cursor"!==t.context.type||""!==E||(de=!0);break;default:(0,x.t1)(t)}const ue=function(e){const{environment:t,sessionId:o}=e,{value:n}=(0,j.useDependency)(j.deps.markdownLinkifyIt),{value:s}=(0,j.useDependency)(j.deps.tinyMceMicrosoftWordPasteFilter),r=(0,p.VK)((()=>Ne.Z.isAssistantInWriterEnabled()),[]),l=(0,a.useCallback)((async e=>{let{exitType:r,selectInsertion:a}=e;const l=F.default.state;"completionPopup"!==l.type||"results"!==l.stage||l.loading||(w.HC(t,{session_id:o,inference_id:(0,b.xM)(l).inferenceId,exit_type:r}),Ne.Z.isAssistantInWriterEnabled()?await i.acceptCursorCompletionAssistant({environment:t,selectInsertion:a,exitType:r,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s}):I.createAndCommit({userAction:"CompletionPopup.handleAccept",environment:t,perform:e=>{i.acceptCursorCompletion({environment:t,transaction:e,selectInsertion:a,exitType:r,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,n,s]),c=(0,a.useCallback)((async()=>{const e=F.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||((0,ke.Tq)(t),w.HC(t,{session_id:o,inference_id:(0,b.xM)(e).inferenceId,exit_type:"insert"}),r?(I.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{const o=Te.Z.getActiveSessionId();if(!o)throw new Error("No assistantSessionId.");(0,lo.insertAssistantChatBelowSelection)({environment:t,sessionId:o,transaction:e})}}),await i.cancelCursorCompletionAssistant({environment:t})):"textSelection"===e.context.type?I.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{i.insertTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}):"blockSelection"===e.context.type&&I.createAndCommit({userAction:"CompletionPopup.handleInsert",environment:t,perform:e=>{i.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!1,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,n,s,r]),d=(0,a.useCallback)((()=>{const e=F.default.state;"completionPopup"!==e.type||"results"!==e.stage||e.loading||"textSelection"!==e.context.type&&"blockSelection"!==e.context.type||((0,ke.Tq)(t),w.HC(t,{session_id:o,inference_id:(0,b.xM)(e).inferenceId,exit_type:"replace"}),"textSelection"===e.context.type?I.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{i.replaceTextSelectionCompletion({environment:t,transaction:e,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}):"blockSelection"===e.context.type&&I.createAndCommit({userAction:"CompletionPopup.handleReplace",environment:t,perform:e=>{i.insertBlockSelectionCompletion({environment:t,transaction:e,replace:!0,markdownLinkifyIt:n,tinyMceMicrosoftWordPasteFilter:s})}}))}),[t,o,n,s]);return(0,a.useMemo)((()=>({onAccept:l,onInsert:c,onReplace:d})),[l,c,d])}({environment:o,sessionId:t.sessionId});(0,a.useEffect)((()=>{B(r),z.current&&z.current.focusInput()}),[r,B]);const pe="results"===t.stage&&t.hasErrored,me=(0,g.D9)(pe),fe=pe&&!me,ge=(0,a.useCallback)((e=>{const{purgeFromHistory:t}=e,s=i.revertCurrentCompletionRevision({environment:o,purgeFromHistory:t});s&&"followup"===s.type&&(B(Ht(n,s.improvement)),z.current&&z.current.focusInput())}),[o,n,B]),ye=(0,a.useCallback)((()=>{"results"===t.stage&&(i.revertCurrentCompletionRevision({environment:o,purgeFromHistory:!1}),z.current&&z.current.focusInput())}),[t,o]),ve=(0,a.useCallback)((()=>{"results"===t.stage&&(i.redoCompletionRevision(o),z.current&&z.current.focusInput())}),[o,t]);(0,y.r5)((async()=>{if(!fe||"results"!==t.stage)return;const{sessionId:e}=t;if((0,b.sr)(t))return void ge({purgeFromHistory:!0});const n=(0,b.Iz)(t);i.doesPromptNeedAdditionalUserInput(n)?(B(U),(0,s.retryInitialPrompt)({environment:o})):await i.cancelCompletion({environment:o,sessionId:e,inferenceId:n.inferenceId,exitType:"error_modal"})}),[o,fe,t,U,ge,B]);const he=(0,a.useCallback)((()=>{if("results"!==t.stage)return;const{sessionId:e}=t,n=(0,b.xM)(t);if((0,b.sr)(t))return w.Xw(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!0}),void ge({purgeFromHistory:!1});w.Xw(o,{session_id:e,inference_id:n.inferenceId,is_reverting_follow_up_improvement:!1});const r=(0,b.Iz)(t);i.doesPromptNeedAdditionalUserInput(r)?(B((0,b.gY)(r)),(0,s.retryInitialPrompt)({environment:o})):i.handleCompletionPopupRetry({environment:o})}),[o,t,ge,B]),xe=(0,a.useCallback)((()=>{if("results"!==t.stage)return;if(!(0,b.xM)(t).completion)return(0,b.sr)(t)?void ge({purgeFromHistory:!0}):(B(U),void(0,s.retryInitialPrompt)({environment:o}));i.stopCompletion(o)}),[t,o,ge,U,B]),we=(0,a.useCallback)((()=>{D(!1),d.default.afterNextFlush((()=>{z.current&&z.current.focusInput()}))}),[]),Se=(0,a.useCallback)((()=>{switch(t.stage){case"initialPromptForAIBlock":w.HC(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,s.closeInitialPromptAndEndSession)();break;case"initialPrompt":B(""),(0,s.closeInitialPromptButContinueSession)();break;case"results":break;default:(0,x.t1)(t)}}),[t,o,B]),Ae=(0,a.useCallback)((async e=>{switch((0,ke.Tq)(o),D(!1),t.stage){case"initialPrompt":case"initialPromptForAIBlock":w.HC(o,{session_id:t.sessionId,inference_id:void 0,exit_type:e}),(0,s.closeInitialPromptAndEndSession)();break;case"results":await i.cancelCompletion({environment:o,sessionId:t.sessionId,inferenceId:(0,b.xM)(t).inferenceId,exitType:e});break;default:(0,x.t1)(t)}}),[t,o]),Me=(0,a.useCallback)((async()=>await Ae("cancel")),[Ae]),be=(0,a.useCallback)((async()=>{"active"!==K.type?de?ue.onAccept({exitType:"click_outside_window_accept",selectInsertion:!0}):ce?D(!0):await Ae("click_outside_window_cancel"):async function(e){const{state:t}=e,{currentUserSettingsStore:o}=Q.default.state;if(o){const e=(0,te.JS)(o).filter((e=>e.id===t.current.id));if(e.length>0&&$.Xy(t.current,e[0]))return void t.clear()}await q.confirmUserAction({message:(0,V.jsx)(C.FormattedMessage,{defaultMessage:"Are you sure you want to stop editing your favorite? Unsaved changes will be lost.",id:"ai.favoriteActions.cancelConfirmation"}),acceptLabel:(0,V.jsx)(C.FormattedMessage,{defaultMessage:"Discard changes",id:"ai.favoriteActions.cancelConfirmation.discardChanges"}),cancelLabel:(0,V.jsx)(C.FormattedMessage,{defaultMessage:"Go back",id:"ai.favoriteActions.cancelConfirmation.goBack"})})&&t.clear()}({state:K})}),[K,de,ue,Ae,ce]),je=(0,p.VK)((()=>(0,b.dU)()),[]);(0,a.useEffect)((()=>{function e(e){return!!(e instanceof Element&&(e.closest(`.${co}`)||e.closest(`.${M.YPt}`)||e.closest(`.${M.p4m}`)||e.closest(`.${M.zov}`)))}function t(t){je||!e(t.target)&&e(t.relatedTarget)&&t.relatedTarget instanceof HTMLElement&&t.relatedTarget.focus()}function o(t){e(t.target)||("click"!==t.type&&"contextmenu"!==t.type||be(),je||(t.preventDefault(),t.stopPropagation()))}if(!R)return window.addEventListener("focus",t,!0),window.addEventListener("click",o,!0),window.addEventListener("contextmenu",o,!0),window.addEventListener("mousedown",o,!0),window.addEventListener("mouseup",o,!0),window.addEventListener("mouseover",o,!0),window.addEventListener("mouseout",o,!0),window.addEventListener("mouseenter",o,!0),window.addEventListener("mouseleave",o,!0),window.addEventListener("mousemove",o,!0),()=>{window.removeEventListener("focus",t,!0),window.removeEventListener("click",o,!0),window.removeEventListener("contextmenu",o,!0),window.removeEventListener("mousedown",o,!0),window.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseover",o,!0),window.removeEventListener("mouseout",o,!0),window.removeEventListener("mouseenter",o,!0),window.removeEventListener("mouseleave",o,!0),window.removeEventListener("mousemove",o,!0)}}),[be,R,je]);const Fe=(0,a.useCallback)((e=>{H(E),B(""),i.improveCompletion(o,e)}),[o,E,B]),Le=(0,a.useCallback)((()=>{switch(t.stage){case"initialPrompt":(0,s.closeInitialPromptButContinueSession)(),H(E),B(""),(0,k.Hh)({environment:o,inputValue:E,from:t.from,mode:J});break;case"initialPromptForAIBlock":w.HC(o,{session_id:t.sessionId,inference_id:void 0,exit_type:"accept"}),(0,s.closeInitialPromptAndEndSession)(),H(E),B(""),(0,k.F0)({environment:o,inputValue:E,store:t.store});break;case"results":Fe({type:"helpMeEdit",prompt:E});break;default:(0,x.t1)(t)}}),[E,J,t,o,Fe,B]);(0,a.useEffect)((()=>{Z&&(O(!1),Le())}),[Z,Le]);let Ee="insert";"results"===t.stage&&"cursor"===t.context.type?Ee="accept":le&&(Ee="replace");const Be=(0,p.VK)((()=>t?Wt({environment:o,intl:n,filter:E,state:t,from:t.from,favoriteEditingState:K,onUpdatePromptState:Y,onImprove:Fe,context:G,completionResultInfo:{...ue,onRetry:he,onSubmit:Le,onCancel:Me,defaultAction:Ee}}):[]),[K,G,o,Y,Le,Fe,E,n,t,ue,he,Me,Ee]),Ze=Be.length>0,Oe=(0,a.useMemo)((()=>new N.Z),[]);(0,a.useEffect)((()=>{Oe.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[E,Oe]);const Re=(0,p.VK)((()=>o.device.isPhone),[o]),De=(0,m.yK)((e=>({mainPopup:{borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,overflow:"hidden",isolation:"isolate"},menuPopup:{marginTop:4,marginBottom:4,borderRadius:6,background:e.popoverBackground,boxShadow:e.mediumBoxShadow,width:Re?"100%":320,overflow:"hidden",isolation:"isolate"}})),[Re]),Ue=(0,a.useRef)(null);let Ve;"active"===K.type?Ve=(0,V.jsx)("div",{style:De.menuPopup,ref:Ue,className:co,children:(0,V.jsx)(Ce,{sessionId:t.sessionId,state:K,context:G})}):Ze&&(Ve=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{style:De.menuPopup,ref:Ue,className:co,children:(0,V.jsx)(qt,{sections:Be,onCloseParentMenu:Se,context:G,menuListStore:Oe})}),(0,V.jsx)(L.gl,{originRef:Ue,openState:t,isInputEmpty:!E})]}));const We=(0,a.useRef)(null),He=function(e){const{openState:t,undoRevision:o,redoRevision:n}=e,i=(0,u.O7)(),s=(0,C.useIntl)(),r=(0,p.VK)((()=>X.default.checkGate("ai_multi_level_undo")),[]),l=(0,a.useCallback)((()=>{o(),_e(i,"undo")}),[i,o]),c=(0,a.useCallback)((()=>{n(),_e(i,"redo")}),[i,n]);if("results"!==t.stage||!r)return Pe;const d=t.revisions.length,m=t.futureRevisions.length,f=d+m,g=d;return 1===f?Pe:{onUndo:d>1?l:void 0,onRedo:m>0?c:void 0,historyLabel:s.formatMessage(Ie.historyLabel,{currentRevision:g.toString(),totalRevisions:f.toString()})}}({openState:t,undoRevision:ye,redoRevision:ve});return je?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(A.Z,{capture:!0,onEsc:be}),Ve]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(A.Z,{capture:!0,onEsc:be}),Re&&Ve,(0,V.jsx)(L.RD,{originRef:We,openState:t}),(0,V.jsx)("div",{ref:We,className:co,style:De.mainPopup,children:(0,V.jsx)(vt,{state:t,onDismiss:be,onCompletionRetry:he,onCompletionStop:xe,query:E,setQuery:B,onSubmit:Le,submitOnEnter:!Ze&&!R,inputRef:z,temporaryListStore:ae,favoriteEditingState:K,...He})}),!Re&&Ve,(0,V.jsx)(W,{open:R,onConfirmExit:Me,onCancelExit:we})]})}var mo=o(63143),fo=o(56206),go=o(2551);function yo(e){window.__c={n:"AiEligibilityUpdater"};const t=(0,u.O7)(),o=(0,p.VK)((()=>"completionPopup"===F.default.state.type||fo.d.state.open),[]),n=(0,p.VK)((()=>{var e;return null===(e=Q.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),s=(0,a.useCallback)((async()=>{n&&await i.updateAiEligibility(t,n)}),[t,n]),r=o?30*mo.C0:30*mo.hM;return(0,go.W)(s,r,!1),null}},16859:(e,t,o)=>{o.d(t,{d:()=>j});var n=o(67294),i=o(480),s=o(9291),r=o(73063),a=o(53437),l=o(26388),c=o(935),d=o(24405),u=o(64275),p=o(81570),m=o(83065),f=o(82990),g=o(42922),y=o(64921),v=o(60458),h=o(1743),x=o(74194),C=o(16354),k=o(64369),w=o(42402),S=o(43250),I=o(18514),A=o(85893);function M(e){const{checked:t,onChange:o}=e;return(0,A.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,A.jsx)(v.Z,{checked:t,onClick:o,size:14}),(0,A.jsx)("div",{onClick:o,children:(0,A.jsx)(k.Z,{style:{cursor:"pointer"},isSmall:!0,children:(0,A.jsx)(s.FormattedMessage,{defaultMessage:"Share this AI session with Notion",id:"completions.FeedbackPopup.shareWithNotion"})})})]})}function b(){window.__c={n:"OptInLearnMore"};const e=(0,d.yK)((e=>({container:{display:"flex",flexDirection:"row"},giftIcon:{width:16,height:16,fill:e.lightIconColor},message:{marginLeft:9,color:e.mediumTextColor,fontSize:12}})),[]);return(0,A.jsxs)("div",{style:e.container,children:[(0,p.T)(e.giftIcon),(0,A.jsx)("div",{style:e.message,children:(0,A.jsx)(s.FormattedMessage,{defaultMessage:"You’re sharing data with Notion for AI quality improvement. <aiTerms>Learn more</aiTerms>",id:"completions.OptInLearnMore.description",values:{aiTerms:e=>(0,A.jsx)(w.Z,{external:!0,href:(0,I.UY)("ai.dataSharingTerms"),children:e})}})})]})}function P(e){window.__c={n:"ShareDataPopup"};const{onSubmit:t}=e,o=(0,d.yK)((e=>({container:{width:300,display:"flex",flexDirection:"column",alignItems:"center",padding:19,position:"relative"},closeButtonContainer:{position:"absolute",top:10,right:10},closeButton:{zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:20,height:20,padding:4},closeButtonHover:{background:e.buttonPressedBackground},closeButtonIcon:{width:16,fill:e.mediumTextColor},giftIcon:{width:24,height:24,fill:e.lightIconColor},terms:{color:e.mediumTextColor,textAlign:"center",fontSize:13},shareButton:{width:"100%",marginTop:17,paddingTop:7,paddingBottom:7},notNowButton:{color:e.mediumTextColor,fontSize:14,marginTop:15},title:{textAlign:"center",marginTop:9,marginBottom:8,fontWeight:f.Z.fontWeight.semibold}})),[]);return(0,A.jsxs)("div",{style:o.container,children:[(0,A.jsx)("div",{style:o.closeButtonContainer,children:(0,A.jsx)(y.Z,{onClick:()=>{t({optIn:!1})},style:o.closeButton,hoveredStyle:o.closeButtonHover,children:(0,u.D)(o.closeButtonIcon)})}),(0,p.T)(o.giftIcon),(0,A.jsx)("div",{style:o.title,children:(0,A.jsx)(s.FormattedMessage,{defaultMessage:"Always share data to improve Notion AI?",id:"completions.ShareDataPopup.title"})}),(0,A.jsx)("div",{style:o.terms,children:(0,A.jsx)(s.FormattedMessage,{defaultMessage:"Help Notion improve AI quality by automatically sharing data from your usage of AI powered features.{br}By continuing, you agree to <aiTerms>AI Data Sharing Terms</aiTerms>",id:"completions.ShareDataPopup.description",values:{br:(0,A.jsx)("br",{}),aiTerms:e=>(0,A.jsx)(w.Z,{external:!0,href:(0,I.UY)("ai.dataSharingTerms"),children:e})}})}),(0,A.jsx)(g.Z,{style:o.shareButton,onClick:()=>{t({optIn:!0})},children:(0,A.jsx)(s.FormattedMessage,{defaultMessage:"Always share",id:"completions.ShareDataPopup.alwaysShareButton"})}),(0,A.jsx)(C.Z,{style:o.notNowButton,onClick:()=>{t({optIn:!1})},children:(0,A.jsx)(s.FormattedMessage,{defaultMessage:"Not now",id:"completions.ShareDataPopup.notNowButton"})})]})}function _(e){window.__c={n:"FeedbackPopup"};const{state:t,onUpdate:o,onSubmit:a,onCancel:l,userOptIn:c}=e,d=(0,n.useCallback)((()=>{o({...t,shareWithNotion:!t.shareWithNotion})}),[t,o]),u=(0,n.useCallback)((()=>{a(t)}),[a,t]),p=(0,n.useCallback)((e=>{o({...t,userContent:e.target.value})}),[o,t]),f=(0,s.useIntl)(),g=(0,i.O7)(),y=!c;return(0,A.jsx)("div",{style:{padding:14,...g.device.isMobile?{width:"100%"}:{minWidth:400}},className:S.YOJ,children:(0,A.jsxs)(h.Z,{capture:!0,children:[(0,A.jsx)(x.Z,{value:t.userContent,onChange:p,onSubmit:e=>{e.stopPropagation(),u()},onCancel:l,focusInitial:!0,placeholder:f.formatMessage({id:"completions.FeedbackPopup.userCommentPlaceholder",defaultMessage:"How could the output be improved? (optional)"})}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:10},children:[y?(0,A.jsx)(M,{checked:t.shareWithNotion,onChange:d}):(0,A.jsx)(b,{}),(0,A.jsx)(r.Z,{icon:m._,onClick:u,ariaLabel:f.formatMessage({id:"completions.FeedbackPopup.submitButtonLabel",defaultMessage:"Submit feedback"}),isBlue:!0,iconStyle:{height:24,width:24},style:{height:20,width:20}})]})]})})}function j(e){window.__c={n:"FeedbackButtonWithPopup"};const{type:t,ariaLabel:o,onClick:d,feedbackState:u,onDismiss:p,onSubmit:m,onUpdate:f,showShareDataPopup:g,onDataShareSubmit:y,userOptIn:v,iconButtonStyles:h}=e,x=(0,i.O7)(),C=t===(null==u?void 0:u.type),k=(0,c.L)(t,C),w=(0,n.useCallback)((()=>d(t)),[d,t]),S=(0,A.jsx)(l.ZP,{renderTooltip:()=>(0,A.jsx)("div",{children:(0,A.jsx)(s.FormattedMessage,{defaultMessage:"Share feedback with Notion",id:"completions.CompletionMenuActionBar.feedbackTooltip"})}),placement:l.ug.Bottom,render:e=>(0,A.jsx)(r.Z,{onClick:w,icon:k,ariaLabel:o,style:{...h},...e})});return(0,A.jsx)(a.ZP,{origin:S,open:(null==u?void 0:u.type)===t,popupType:x.device.isMobile?a.kQ.SlideUp:a.kQ.Popup,onDismiss:p,render:()=>u?g?(0,A.jsx)(P,{onCancel:p,onSubmit:y}):(0,A.jsx)(_,{state:u,onSubmit:m,onUpdate:f,onCancel:p,userOptIn:v}):null})}},935:(e,t,o)=>{o.d(t,{L:()=>k,u:()=>w});var n=o(67294),i=o(480),s=o(86628),r=o(33676),a=o(97022),l=o(39986),c=o(10498),d=o(9291),u=o(10910),p=o(64964),m=o(82530),f=o(37181),g=o(80444),y=o(77080),v=o(35057),h=o(83919),x=o(16859),C=o(85893);function k(e,t){switch(e){case"thumbsup":return t?c.w:l.P;case"thumbsdown":return t?a.E:r.A}}function w(e){window.__c={n:"FeedbackButtons"};const{revision:t}=e,o=(0,d.useIntl)(),r=(0,i.O7)(),[a,l]=(0,n.useState)(void 0),[c,k]=(0,n.useState)(!1),w=(0,n.useRef)(null),S=(0,s.VK)((()=>y.default.checkGate("ai_data_sharing")),[]),I=(0,s.VK)((()=>g.default.state.currentUserSettingsStore),[]),A=(0,s.VK)((()=>{var e;const t=null==I||null===(e=I.getSettings())||void 0===e?void 0:e.seen_ai_data_share_prompt_at,o=!(0,v.mq)();return!Boolean(t)&&o}),[I]),M=(0,s.VK)((()=>{var e;return(null==I||null===(e=I.getSettings())||void 0===e?void 0:e.ai_data_share_opt_in)??false}),[I]),b=(0,n.useCallback)((()=>{p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.showFeedbackThanksMessage",defaultMessage:"Thanks for submitting feedback!"})})}),[o]),P=(0,n.useCallback)((e=>{w.current=document.activeElement,l((t=>({userContent:"",shareWithNotion:true,...t,type:e})))}),[]),_=(0,n.useCallback)((e=>{e.shareWithNotion&&A&&S?k(!0):(b(),l(void 0)),h.submitFeedbackForRevision({...e,environment:r,revision:t,userOptIn:M})}),[t,r,M,A,S,b]),j=(0,n.useCallback)((e=>{e&&e.stopPropagation&&e.stopPropagation(),l(void 0),w.current&&w.current instanceof HTMLElement&&w.current.focus()}),[]),F=(0,n.useCallback)((e=>{const{optIn:t}=e;I&&(m.createAndCommit({userAction:"FeedbackButtons.aiDataShareOptIn",environment:r,userId:I.id,perform:e=>{f.d2({userSettingsStore:I,data:{ai_data_share_opt_in:t,seen_ai_data_share_prompt_at:Date.now()},transaction:e})}}),u.bd(r,{user_opt_in:t}),t?p.oV({label:o.formatMessage({id:"completions.CompletionMenuFooter.dataShareThanks",defaultMessage:"Thank you for your help making Notion better!"})}):b(),k(!1),l(void 0))}),[o,I,r,b]);return t.hasFeedback&&!c?null:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(x.d,{type:"thumbsup",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsUp",defaultMessage:"Submit positive feedback"}),onClick:P,feedbackState:a,onDismiss:j,onSubmit:_,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:F,userOptIn:M}),(0,C.jsx)(x.d,{type:"thumbsdown",ariaLabel:o.formatMessage({id:"completions.CompletionMenuFooter.thumbsDown",defaultMessage:"Submit negative feedback"}),onClick:P,feedbackState:a,onDismiss:j,onSubmit:_,onUpdate:l,showShareDataPopup:c,onDataShareSubmit:F,userOptIn:M})]})}},95083:(e,t,o)=>{o.d(t,{D:()=>i,d:()=>n});const n={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0},i={...n}},79576:(e,t,o)=>{o.d(t,{W:()=>r});var n=o(49085),i=o(4615);class s extends n.default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:o,stores:n,sessionIdForAnalytics:s}=e,r=n[0].getParentCollectionId()??(null===(t=n[0].getCollectionViewCollectionStore())||void 0===t?void 0:t.id),a=s||(0,i.ZP)();return this.setState({type:"filling",propertySchema:o,collectionId:r,numBlocksToAutofill:n.length,numBlocksAutofilled:0,sessionId:a,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),a}}const r=new s},43604:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o(49085).default.createValue({open:!1})},87199:(e,t,o)=>{o.d(t,{k:()=>n});const n=(0,o(9291).defineMessages)({paymentMethodUnverified:{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."}})},44041:(e,t,o)=>{o.d(t,{y:()=>C});o(67294);var n=o(47425),i=o(9291),s=o(86572),r=o(47307),a=o(33929),l=o(52533),c=o(80444),d=o(92083),u=o(39343),p=o(87199),m=o(70060),f=o(88893),g=o(35057),y=o(88280),v=o(34583),h=o(64891),x=o(85893);const C=async function(e,t){var o;s.sA(e,{from:t.from,for_subscription_tier:t.for,addOnFeature:t.addOnFeature});if((0,g.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(t.from)&&!t.addOnFeature&&(0,m.XA)(e))return void d.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});if(!t.addOnFeature&&(0,n.QM)(t.for))return;const C=(0,l.S$)({environment:e})&&"personal"===t.for;if(e.device.isMobileNative){if("ai"===t.addOnFeature){const t=(0,l.Y2)({environment:e})?(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void r.showErrorMessage(t)}if(!C)return}const k=c.default.state.currentSpaceStore;if(!k)return;if(!k.canAdmin())return;await v.bi(e);const w=y.subscriptionDataStoreInstance.state;if(!w)return;if("unsubscribed_admin"!==w.type&&"subscribed_admin"!==w.type)return void(t.dontOpenPlansOnCancel||d.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}));if(f.ri(w))return void r.showErrorMessage(a.default.formatMessage(p.k.paymentMethodUnverified));if(f.Q6(w)){const e=(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void r.showErrorMessage(e)}if(C)return void(e.mobileNative&&k.id&&e.mobileNative.openUpgradeModal(k.id));if("revenueCat"===(null===(o=w.customerData)||void 0===o?void 0:o.activeSubscriptionPlatform)){const e=(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void r.showErrorMessage(e)}const S=f.XX(w);if(t.addOnFeature&&(0,u.Fk)(S)){const e=(0,x.jsx)(i.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:t.addOnFeature}});r.showErrorMessage(e)}else{if(S&&f.MM(w))return t.addOnFeature?void h.af({environment:e,from:t.from,view:"add_ons",addOnFeature:t.addOnFeature,billingInterval:S.interval,pageSection:t.pageSection}):void h.af({environment:e,from:t.from,view:"plans",temporarySubscriptionTier:t.for,billingInterval:S.interval,pageSection:t.pageSection});{const o=(0,m.px)(e,t.for)?"ai_fifty_percent":void 0;v.I0(e,{subscriptionTier:t.for,from:t.from,addOnFeature:t.addOnFeature,coupon:o,isTrial:t.isTrial})}}}},39343:(e,t,o)=>{o.d(t,{Fk:()=>r,nx:()=>a});var n=o(30120),i=o(13991),s=o(7057);function r(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=n.ou.now().toSeconds()}function a(e){const t=function(e){if(!r(e))return;const t=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=n.ou.now().toSeconds()&&e.periodEnd<t?e.periodEnd:t}(e);return t?(0,s.Yx)(t,"long",i.SP):void 0}},39186:(e,t,o)=>{o.d(t,{G:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("backward",{viewBox:"0 0 24 24",svg:(0,i.jsx)("polygon",{points:"23,11 4.801,11 11.4,4.4 10,3 1,12 10,21 11.4,19.6 4.801,13 23,13 "})})},2585:(e,t,o)=>{o.d(t,{f:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},13148:(e,t,o)=>{o.d(t,{U:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},64878:(e,t,o)=>{o.d(t,{h:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("dot",{viewBox:"0 0 5 4",svg:(0,i.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},50780:(e,t,o)=>{o.d(t,{E:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("editPropertyType",{viewBox:"0 0 16 16 ",svg:(0,i.jsx)("path",{d:"M11.5615 4.84473L12.2998 4.11328C12.6689 3.74414 12.6826 3.34082 12.3545 3.00586L12.0879 2.73926C11.7529 2.4043 11.3428 2.43848 10.9736 2.79395L10.2354 3.52539L11.5615 4.84473ZM3.22168 13.1641L10.9053 5.4873L9.59277 4.16797L1.90918 11.8516L1.23926 13.4512C1.16406 13.6562 1.37598 13.875 1.57422 13.7998L3.22168 13.1641ZM3.92578 13.8066H14.1045C14.4736 13.8066 14.7744 13.499 14.7744 13.1367C14.7744 12.7676 14.4736 12.4668 14.1045 12.4668H5.27246L3.92578 13.8066Z"})})},81570:(e,t,o)=>{o.d(t,{T:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("giftOutline",{viewBox:"0 0 32 34",svg:(0,i.jsx)("path",{d:"M7.781 33.219h16.422c2.938 0 4.563-1.547 4.563-4.5v-9.594h.109c1.375-.297 2.14-1.406 2.14-3v-4.11c0-1.906-1.062-3.109-2.968-3.109H24.89c.828-.828 1.312-1.953 1.312-3.25 0-3.031-2.39-5.187-5.422-5.187-2.187 0-4 1.203-4.797 3.297C15.187 1.672 13.39.469 11.187.469c-3.016 0-5.422 2.156-5.422 5.187 0 1.297.484 2.422 1.328 3.25H3.937C2.11 8.906.97 10.11.97 12.016v4.109c0 1.594.75 2.703 2.125 3h.11v9.594c0 2.953 1.624 4.5 4.577 4.5zm6.922-24.313h-2.437c-2.454 0-3.891-1.39-3.891-3.11 0-1.718 1.25-2.718 2.969-2.718 1.86 0 3.36 1.406 3.36 3.719v2.11zm2.563 0v-2.11c0-2.312 1.5-3.718 3.359-3.718 1.719 0 2.969 1 2.969 2.719 0 1.719-1.422 3.11-3.89 3.11h-2.438zm-2.672 7.969H4.578c-.781 0-1.094-.328-1.094-1.11V12.36c0-.78.313-1.093 1.094-1.093h10.016v5.609zm2.781 0v-5.61h10.047c.781 0 1.078.313 1.078 1.094v3.407c0 .78-.297 1.109-1.078 1.109H17.375zm-2.781 14H7.75c-1.297 0-2.031-.734-2.031-2.031v-9.61h8.875v11.641zm2.781 0v-11.64h8.875v9.609c0 1.297-.734 2.031-2.031 2.031h-6.844z"})})},1230:(e,t,o)=>{o.d(t,{H:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("insertDown",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M9.55548 13.0343H14.2085C14.5315 13.0343 14.7951 13.2913 14.7951 13.6142C14.7951 13.9372 14.5315 14.1942 14.2085 14.1942H9.55548C9.23254 14.1942 8.9755 13.9372 8.9755 13.6142C8.9755 13.2913 9.23254 13.0343 9.55548 13.0343ZM1.21167 9.67959C1.21167 9.09961 1.52802 8.74371 2.0421 8.74371C2.55617 8.74371 2.87911 9.11279 2.87911 9.65982V10.7868C2.87911 10.945 2.96479 11.0373 3.12956 11.0373H4.70473V10.365C4.70473 9.818 5.26494 9.60709 5.68675 9.94322L7.56509 11.4525C7.84849 11.6766 7.84849 12.0786 7.56509 12.2961L5.68675 13.812C5.25176 14.1679 4.70473 13.9569 4.70473 13.3836V12.7047H2.93184C1.89051 12.7047 1.21167 12.0984 1.21167 11.057V9.67959ZM9.55548 9.58073H14.2085C14.5315 9.58073 14.7951 9.83777 14.7951 10.1607C14.7951 10.4837 14.5315 10.7407 14.2085 10.7407H9.55548C9.23254 10.7407 8.9755 10.4837 8.9755 10.1607C8.9755 9.83777 9.23254 9.58073 9.55548 9.58073ZM1.78506 6.12721H14.2085C14.5315 6.12721 14.7951 6.38425 14.7951 6.70719C14.7951 7.03014 14.5315 7.28717 14.2085 7.28717H1.78506C1.46211 7.28717 1.20508 7.03014 1.20508 6.70719C1.20508 6.38425 1.46211 6.12721 1.78506 6.12721ZM1.78506 2.68028H14.2085C14.5315 2.68028 14.7951 2.93073 14.7951 3.25367C14.7951 3.5832 14.5315 3.83365 14.2085 3.83365H1.78506C1.46211 3.83365 1.20508 3.5832 1.20508 3.25367C1.20508 2.93073 1.46211 2.68028 1.78506 2.68028Z"})})},38715:(e,t,o)=>{o.d(t,{N:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("save",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M7.99316 10.8877C8.16406 10.8877 8.31445 10.833 8.47168 10.6758L10.7686 8.46094C10.8848 8.34473 10.9463 8.22168 10.9463 8.05762C10.9463 7.74316 10.6934 7.51074 10.3857 7.51074C10.2285 7.51074 10.0713 7.5791 9.96191 7.70215L8.99805 8.7207L8.56055 9.21973L8.62891 8.20801V1.11914C8.62891 0.78418 8.3418 0.49707 7.99316 0.49707C7.65137 0.49707 7.36426 0.78418 7.36426 1.11914V8.20801L7.43262 9.22656L6.98828 8.7207L6.03125 7.70215C5.92188 7.5791 5.75781 7.51074 5.60059 7.51074C5.29297 7.51074 5.04004 7.74316 5.04004 8.05762C5.04004 8.22168 5.1084 8.34473 5.22461 8.46094L7.52148 10.6758C7.67871 10.833 7.8291 10.8877 7.99316 10.8877ZM4.0625 15.3174H11.9307C13.4072 15.3174 14.1729 14.5586 14.1729 13.1025V6.36914C14.1729 4.91309 13.4072 4.1543 11.9307 4.1543H10.0781V5.49414H11.8486C12.4775 5.49414 12.833 5.82227 12.833 6.48535V12.9863C12.833 13.6494 12.4775 13.9775 11.8486 13.9775H4.14453C3.50879 13.9775 3.16016 13.6494 3.16016 12.9863V6.48535C3.16016 5.82227 3.50879 5.49414 4.14453 5.49414H5.92871V4.1543H4.0625C2.58594 4.1543 1.82031 4.91309 1.82031 6.36914V13.1025C1.82031 14.5586 2.58594 15.3174 4.0625 15.3174Z"})})})},35840:(e,t,o)=>{o.d(t,{R:()=>s,T:()=>i});o(67294);var n=o(45238);const i=(0,o(85893).jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"}),s=(0,n.I)("search",{viewBox:"0 0 16 16",svg:i})},91427:(e,t,o)=>{o.d(t,{e:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("star",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.2627 14.7637C3.58398 15.0098 3.98047 14.9277 4.44531 14.5928L8 11.9814L11.5547 14.5928C12.0195 14.9277 12.4229 15.0098 12.7441 14.7637C13.0586 14.5244 13.127 14.1279 12.9424 13.5879L11.541 9.41113L15.1299 6.83398C15.5879 6.50586 15.7861 6.14355 15.6562 5.76074C15.5264 5.38477 15.1641 5.2002 14.5967 5.20703L10.1943 5.23438L8.85449 1.03711C8.68359 0.490234 8.40332 0.196289 8 0.196289C7.60352 0.196289 7.32324 0.490234 7.14551 1.03711L5.80566 5.23438L1.40332 5.20703C0.835938 5.2002 0.480469 5.38477 0.350586 5.76074C0.220703 6.14355 0.412109 6.50586 0.876953 6.83398L4.46582 9.41113L3.05762 13.5879C2.87305 14.1279 2.94141 14.5244 3.2627 14.7637ZM4.45898 13.1162C4.45215 13.1025 4.45215 13.0957 4.45898 13.0615L5.75781 9.39062C5.87402 9.05566 5.83301 8.84375 5.52539 8.63867L2.3125 6.4375C2.28516 6.42383 2.27148 6.41016 2.27832 6.38965C2.29199 6.37598 2.30566 6.36914 2.33984 6.36914L6.22949 6.45801C6.58496 6.47168 6.7627 6.35547 6.86523 6.01367L7.96582 2.28125C7.97266 2.24023 7.98633 2.2334 8 2.2334C8.02051 2.2334 8.02734 2.24023 8.04102 2.28125L9.13477 6.01367C9.2373 6.35547 9.42188 6.47168 9.77051 6.45801L13.6602 6.36914C13.7012 6.36914 13.7148 6.37598 13.7217 6.38965C13.7285 6.41016 13.7217 6.41699 13.6875 6.4375L10.4814 8.63867C10.167 8.85059 10.126 9.05566 10.2422 9.39062L11.541 13.0615C11.5547 13.0957 11.5547 13.1025 11.541 13.1162C11.5273 13.1367 11.5137 13.123 11.4863 13.1094L8.40332 10.7305C8.12305 10.5117 7.87695 10.5117 7.60352 10.7305L4.52051 13.1094C4.49316 13.123 4.47266 13.1367 4.45898 13.1162Z"})})},54434:(e,t,o)=>{o.d(t,{F:()=>s});o(67294);var n=o(45238),i=o(85893);const s=(0,n.I)("upLeftArrow",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.8457 10.5869C2.8457 11.0312 3.19434 11.373 3.59766 11.373C4.00098 11.373 4.3291 11.0176 4.3291 10.6074V8.05762L4.21973 5.22754L5.32031 6.47168L11.8418 12.9932C11.999 13.1504 12.1904 13.2256 12.3818 13.2256C12.7852 13.2256 13.1543 12.8564 13.1543 12.46C13.1543 12.2686 13.0654 12.0771 12.9082 11.9199L6.40039 5.39844L5.15625 4.30469L8.10254 4.40039H10.5361C10.9463 4.40039 11.2881 4.07227 11.2881 3.67578C11.2881 3.27246 10.9736 2.93066 10.5156 2.93066H3.64551C3.16016 2.93066 2.85254 3.25195 2.85254 3.72363L2.8457 10.5869Z"})})}}]);