"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[8324],{7476:(e,t,o)=>{o.d(t,{t:()=>r});var i=o(80444),n=o(56681),s=o(34047);function r(e){var t;let{discussionStore:o,commentStore:r}=e;if(!r.isDefined())return!1;const l=null===(t=i.default.state.currentUserStore)||void 0===t?void 0:t.id;const a=n.Z.state.lastInteractionTimes[o.id];if(r.getCreatedById()===l)return!1;const d=function(){if(!o.isDefined()||!l)return 0;const{pageVisitStore:e}=i.default.state,{lastViewTime:t,lastExitTime:n}=e.state;return n||t}();if(void 0===d)return!1;const c=(0,s.NI)(o).filter((e=>e.getCreatedById()===l)).reverse()[0],u=r.getCreatedTime();return!u||!(c&&u<c.getCreatedTime())&&(!(a&&u<a)&&u>d)}},19446:(e,t,o)=>{o.r(t),o.d(t,{default:()=>_e});var i=o(67294),n=o(1302),s=o(480),r=o(6740),l=o(97511),a=o(33125),d=o(86628),c=o(24405),u=o(59194),m=o(69651),p=o(72141),g=o(21202),h=o(82990),f=o(9291),x=o(54564),v=o(47307),S=o(9953),y=o(61045),b=o(98104),C=o(82530),w=o(74136),j=o(26388),k=o(64369),M=o(42402),I=o(67706),P=o(65085),L=o(12740),R=o(65187),T=o(11368),Z=o(4708),D=o(65598),B=o(16402),_=o(89574),V=o(61766),F=o(96049),A=o(26136),K=o(17707),E=o(95306),O=o(34047),N=o(82994),U=(o(57658),o(15145)),z=o(41432),W=o(37652),H=o(56666),$=o(27714),X=o(25651),G=o(40350),q=o(18101),Y=o(58167),Q=o(98519),J=o(37612),ee=o(72126),te=o(19889),oe=o(97880),ie=o(893),ne=o(52275),se=o(31945),re=o(73063),le=o(78140),ae=o(32163),de=o(72495),ce=o(83182),ue=o(95477),me=o(43250),pe=o(87279),ge=o(18514),he=o(80444),fe=o(90895),xe=o(85893);function ve(e){window.__c={n:"CommentActionGroup"};const{discussionLocation:t}=e,o=(0,f.useIntl)(),n=(0,s.O7)(),r=n.device,a=(0,i.useRef)(null),c=(0,l.l)(),u=(0,d.VK)((()=>Boolean(e.discussionStore.getResolved())),[e.discussionStore]),m=(0,d.VK)((()=>e.store.isDefined()),[e.store]),g=(0,d.VK)((()=>{var e;return null===(e=he.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),h=(0,d.VK)((()=>{const t=e.store.getCreatedById();return e.store.getCreatedByTable()===te.KJ&&g===t}),[g,e.store]),v=(0,d.VK)((()=>{var e;const t=null===(e=he.default.state.currentSpaceStore)||void 0===e?void 0:e.getRole();return t&&p.zz(t)}),[]),S=(0,d.VK)((()=>e.blockStore.getRole()),[e.blockStore]),y=(0,d.VK)((()=>{var e;return null==c||null===(e=c.publicEditModeStore.state)||void 0===e?void 0:e.permission}),[null==c?void 0:c.publicEditModeStore]),b="comment_only"===S||"comment"===y;if(!m||!g)return null;const w=()=>{C.createAndCommit({userAction:"Comment.handleReopen",environment:n,perform:t=>{K.bh({environment:n,commentStore:e.store,discussionStore:e.discussionStore,transaction:t,discussionLocation:e.discussionLocation})}})},j=t=>{C.createAndCommit({userAction:"Comment.handleResolve",environment:n,perform:t=>{K.DX({environment:n,commentStore:e.store,discussionStore:e.discussionStore,transaction:t,discussionLocation:e.discussionLocation})}}),x.Xv(),null==t||t.stopPropagation()},k=()=>{var t,o;const i=e.store.getParentStore();if(!i||null==i||!i.isDefined())return null;let s=i.getParentStore();if(null===(t=s)||void 0===t||!t.isDefined())return null;var r;s.getType()===z.Ti.tableRow&&(s=null===(r=s)||void 0===r?void 0:r.getParentBlockStore());if(null===(o=s)||void 0===o||!o.isDefined())return null;const l=s.getModel().getRenderUrl({baseUrl:ue.default.domainBaseUrl,getRecordModel:e.store.getRecordModel,discussionId:i.id,pageVisitSource:U.tY.CopyLink});ie.RD({environment:n,stringValue:l,copiedMessage:ie.tq.copiedLinkToClipboard})};if(!n.currentUser.isLoggedIn())return null;const M=S&&p.rz(S);if(M)return null;const I=e.isFirstComment&&"comment_unfurl"!==t&&!r.isMobile&&!b&&!M,P=[];!r.isMobile||b||M||(u?P.push("reopen"):P.push("resolve")),h&&P.push("edit"),e.isFirstComment&&P.push("copyLink"),(h||v)&&P.push("delete");const L=P.length>0;return L||I||e.canShowReactions?(0,xe.jsx)(se.ZP,{ref:a,popupType:r.isMobile?se.Z4.SlideUp:se.Z4.Popup,buttonPopupStore:e.buttonPopupStore,placementToOrigin:se.pO.Right,stopClickPropagation:!0,renderOrigin:i=>(0,xe.jsx)(Se,{buttonConfig:{resolve:{visible:I,resolved:u,onResolve:j,onReopen:w},react:{visible:e.canShowReactions,onReact:()=>{var i;(0,fe.openEmojiMenuForReaction)(n,o,e.store,(null===(i=a.current)||void 0===i?void 0:i.getAnchor())??null,t,e.handleReaction)}},moreActions:{visible:L}},visible:e.visible,buttonPopupEvents:i,discussionLocation:e.discussionLocation,store:e.store}),render:t=>{let o;o=r.isMobile?{menuType:pe.og.ActionSheet}:{menuType:pe.og.Popup};const i=P.map((t=>"reopen"===t?{key:"reopen",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,W.V)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.reopenDiscussion.button",defaultMessage:"Re-open discussion"})}),action:w}:"resolve"===t?{key:"resolve",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,Q.k)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.resolveDiscussion.button",defaultMessage:"Resolve comments"})}),action:()=>j()}:"edit"===t?{key:"edit",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,X.R)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.editComment.button",defaultMessage:"Edit comment"})}),action:e.handleEditComment}:"delete"===t?{key:"delete",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,J.y)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.deleteComment.button",defaultMessage:"Delete comment"})}),action:e.handleDeleteComment}:"copyLink"===t?{key:"copyLink",render:e=>(0,xe.jsx)(ne.Z,{...e,icon:(0,$.N)({height:16,width:16}),title:(0,xe.jsx)(f.FormattedMessage,{id:"comment.copyLinkToDiscussion.button",defaultMessage:"Copy link to discussion"})}),action:k}:void(0,oe.t1)(t)));return(0,xe.jsx)("div",{className:me.G6g,children:(0,xe.jsxs)(le.Z,{...o,children:[(0,xe.jsx)(ae.Z,{type:ae.i.Vertical,initialFocus:void 0,onAccept:t.close,sections:ee.oA([i.length&&{key:0,render:e=>(0,xe.jsx)(de.Z,{...e}),items:i}])}),!r.isMobile&&(0,xe.jsx)(de.Z,{topBorder:!0,disableDesktopPadding:!1,children:(0,xe.jsx)(ce.Z,{title:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Learn about comments",id:"comments.learn"}),href:(0,ge.UY)("guides.comments"),analyticsFrom:"comments"})})]})})}}):null}function Se(e){window.__c={n:"ActionGroupOrigin"};const{buttonPopupEvents:t,discussionLocation:o}=e,{resolved:i,onResolve:n,onReopen:r}=e.buttonConfig.resolve,l=(0,s.O7)().device,a=(0,c.yK)((t=>({addIcon:{width:15,fill:t.mediumIconColor},container:{display:"flex",boxShadow:t.lightBoxShadow,position:"absolute",flexShrink:0,padding:"2px",backgroundColor:t.buttonGroupBackground,...l.isMobile?{borderRadius:4,marginTop:4,right:16}:{marginRight:"margin_comments"===o?0:8,marginTop:"updates_sidebar"===e.discussionLocation?6:0,right:"margin_comments"===o?12:16,top:"margin_comments"===o?6:0,opacity:e.visible?1:0,gap:1,borderRadius:4,transition:"opacity 100ms ease-out",zIndex:1}}})),[l.isMobile,o,e.discussionLocation,e.visible]);return(0,xe.jsxs)("div",{style:a.container,children:[e.buttonConfig.react.visible&&(0,xe.jsx)(j.ZP,{renderTooltip:()=>(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Add reaction",id:"comment.actions.addReaction.label"}),render:t=>(0,xe.jsx)(re.Z,{hasBackground:!1,showShadow:!1,icon:()=>(0,G.V)(a.addIcon),onClick:e.buttonConfig.react.onReact,style:{height:22,width:22,flex:"0 0 auto"},...t})}),e.buttonConfig.resolve.visible&&(0,xe.jsx)(j.ZP,{renderTooltip:()=>i?(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Re-open",id:"comment.actions.reopenButton.label"}):(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Resolve",id:"comment.actions.resolveButton.label"}),render:e=>(0,xe.jsx)(re.Z,{hasBackground:!1,showShadow:!1,icon:i?q.b:Y.i,onClick:i?r:n,style:{height:22,width:22,flex:"0 0 auto"},...e})}),e.buttonConfig.moreActions.visible&&(0,xe.jsx)(j.ZP,{renderTooltip:()=>(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"More actions",id:"comment.actions.moreActions.label"}),render:e=>(0,xe.jsx)(re.Z,{...t,...e,hasBackground:!1,showShadow:!1,icon:H.o,style:{height:22,width:22,flex:"0 0 auto"}})})]})}var ye=o(70775),be=o(95538),Ce=o(70203),we=o(31781),je=o(53471),ke=o(68785),Me=o(97496),Ie=o(69721),Pe=o(79954),Le=o(20830);function Re(e){if("image"!==e.getType())return!1;const t=Ce.QaF(e.getPropertyValue("source"));return void 0!==t&&!(0,be.y_)(t,".jfif")&&!(0,be.y_)(t,".webp")}function Te(e){window.__c={n:"CommentContent"};const t=e.discussionFormat===O.O2.Sidebar?we.vW.SidebarComment:we.vW.PageComment,{filmStripFiles:o,embedBlockStores:i}=(0,d.VK)((()=>{if(e.collapsed)return{filmStripFiles:je.nQ(e.contentStores),embedBlockStores:[]};if(e.discussionFormat===O.O2.Page&&e.contentStores.filter((e=>Re(e))).length>1){const[t,o]=ee.uK(e.contentStores,(e=>Re(e)));return{filmStripFiles:je.nQ(t),embedBlockStores:o}}return{filmStripFiles:[],embedBlockStores:e.contentStores}}),[e.contentStores,e.collapsed,e.discussionFormat]),n=i.length>0&&i.map((o=>(0,xe.jsx)(Pe.Z,{store:o,analyticsName:"comment_media",actionSectionGroupKey:"comment_media",canTriggerContextMenu:!0,style:{marginTop:8},children:Me.ZP.hasRendererForStore(o)?(0,xe.jsx)(Me.ZP,{disabled:!1,disableDrag:!0,store:o,disableResizers:!0,preserveScale:!0,inlineContentStyle:{height:"auto",width:"auto",maxHeight:240,maxWidth:"100%",cursor:"zoom-in"},blockLocation:t,iconSvg:()=>(0,xe.jsx)(ke.Z,{style:{marginRight:10}}),onRemoveBlockFromComment:e.onRemoveContent,children:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Uploading file...",id:"comment.embeddedFile.uploadInProgressMessage"})}):(0,xe.jsx)(Ie.Z,{disabled:!1,store:o})},o.id))),s=o.length>0&&(0,xe.jsx)(Le.Z,{files:o,disableRemove:!0});return(0,xe.jsxs)(xe.Fragment,{children:[s,n]})}function Ze(){window.__c={n:"CommentNewBar"};const e=(0,c.yK)((e=>({newBarLine:{height:"0px",borderBottom:`1px solid ${e.darkDividerColor}`,width:"100%",marginLeft:0},newBarWrapper:{color:e.mediumTextColor,textTransform:"uppercase",fontSize:10.5,letterSpacing:.5,fontWeight:h.Z.fontWeight.semibold,display:"flex",alignItems:"center",marginRight:16,marginLeft:16,marginTop:10,marginBottom:10},newBarText:{padding:"0 10px"}})),[]);return(0,xe.jsxs)("div",{style:e.newBarWrapper,children:[(0,xe.jsx)("div",{style:e.newBarLine}),(0,xe.jsx)("div",{style:e.newBarText,children:(0,xe.jsx)(f.FormattedMessage,{id:"comment.newIndicator.label",defaultMessage:"New comments"})}),(0,xe.jsx)("div",{style:e.newBarLine})]})}var De=o(55541);function Be(e){switch(e){case"margin_comments":return 0;case"updates_sidebar":return 35;case"comment_unfurl":return 29;default:return 32}}const _e=function(e){window.__c={n:"Comment"};const{store:t,discussionContext:o,maxLines:U,discussionLocation:z}=e,W=(0,s.O7)(),H=(0,f.useIntl)(),[$,X]=(0,i.useState)(!1),[G,q]=(0,i.useState)(!1),[Y,Q]=(0,i.useState)(!1),J=Be(z),ee=(0,d.VK)((()=>e.store.isDefined()?new N.Z(W,e.store.getSpaceId()):void 0),[W,e.store]),te=(0,d.VK)((()=>D.le(e.store).filter((e=>(0,A.Vh)(e,{table:g.iU,id:e.id},"alive").getValue()))),[e.store]),oe=(0,d.VK)((()=>e.discussionStore.getResolved()),[e.discussionStore]),ie=(0,d.VK)((()=>null==ee?void 0:ee.state.files),[ee]),ne=(0,d.VK)((()=>null==ee?void 0:ee.state.textStore),[ee]),se=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&q(!0)}),[]),re=(0,i.useCallback)((()=>{q(!1)}),[]),le=(0,i.useCallback)((()=>{F.Z.state||Q(!0)}),[]),ae=(0,i.useCallback)((()=>{Q(!1)}),[]),de=(0,l.l)(),ce=(0,d.qz)(void 0,V.Z),ue=(0,d.VK)((()=>ce.state.open),[ce]),me=(0,d.VK)((()=>{const t=e.discussionStore.getComments();return Boolean(t&&t[0]===e.store.id)}),[e.discussionStore,e.store.id]),pe=(0,d.VK)((()=>{var t;const o=e.blockStore.getRole(),i=me&&"comment_unfurl"!==z,n=o&&p.rz(o),{device:s}=W,r="comment_only"===o||de&&"comment"===(null===(t=de.publicEditModeStore.state)||void 0===t?void 0:t.permission),l=i&&!s.isMobile&&!r&&!n;return Y||G||e.hoveringDiscussion&&i||ue||s.isMobile||e.showResolveButtonByDefaultIfPossible&&l}),[e.blockStore,e.hoveringDiscussion,e.showResolveButtonByDefaultIfPossible,me,z,W,de,Y,G,ue]),ge=(0,i.useContext)(T.Ue),he=(0,d.VK)((()=>{const e=t.getCreatedByPointer();return e?{createdByPointer:e,lastEditedTime:t.getLastEditedTime(),createdTime:t.getCreatedTime(),text:t.getText(),reactions:t.getUserVisibleReactions()}:null}),[t]),Se=(0,d.VK)((()=>{if(!he)return null;const e=A.t1.createChildStore(t,he.createdByPointer);return{displayName:e.getDisplayName(H),store:e}}),[he,H,t]),be=(0,d.VK)((()=>(0,Z.En)()),[]),Ce=(0,i.useCallback)((()=>{C.createAndCommit({userAction:"Comment.deleteComment",environment:W,perform:t=>{K.YF({environment:W,commentStore:e.store,transaction:t,discussionLocation:z})},skipUpdatingEditedMetadata:!0})}),[W,e.store,z]),we=(0,i.useCallback)((async()=>{await v.confirmUserAction({message:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Would you like to delete this comment?",id:"comment.confirmDialog.deleteComment.prompt"}),acceptLabel:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Delete",id:"comment.confirmDialog.deleteComment.deleteButton.label"})})&&(Ce(),x.Xv(),E.Cd(W))}),[Ce,W]),je=(0,i.useCallback)((async t=>{const o=D.zP(e.store).getValue(),i=D.le(e.store).filter((e=>e.id!==t.id)),n=o&&o.length>0,s=0===i.length;!n&&s?(await we(),X(!1)):C.createAndCommit({userAction:"Comment.handleRemoveFileFromActions",environment:W,perform:o=>{K.Zo({commentStore:e.store,fileBlocks:[t],transaction:o})}})}),[W,we,e.store]),ke=(0,i.useCallback)((()=>{Re.current&&y.bx({element:Re.current,scrollers:{verticalScroller:null==ge?void 0:ge.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[ge]),Me=(0,i.useCallback)((async()=>{if(!ee)return;const t=D.zP(e.store).getValue()||[],o=ee.state.textStore;C.createAndCommit({userAction:"Comment.handleEditComment",environment:W,perform:e=>{S.sO({store:o,value:t,transaction:e})}}),X(!0),await n.default.afterNextFlush(),await n.default.afterNextFlush(),b.NX({store:o})}),[ee,W,e.store]),Ie=(0,i.useCallback)((async()=>{if(!ee)return!1;if(!(0,O.hu)(ee,e.store))return X(!1),!0;if(await v.confirmUserAction({message:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Do you want to discard this edit?",id:"comment.confirmDialog.discardEdit.prompt"}),acceptLabel:(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"Discard",id:"comment.confirmDialog.discardEdit.discardButton.label"})}))return X(!1),!0;return!1}),[ee,e.store]),Pe=(0,i.useCallback)((async()=>{const t=null==ne?void 0:ne.getValue();t&&t.length>0||ie&&ie.length>0?C.createAndCommit({userAction:"Comment.handleSubmitEdit",environment:W,perform:o=>{K.DF({environment:W,store:e.store,text:t||[],transaction:o,discussionLocation:z,files:ie||[]})}}):await we(),X(!1)}),[ie,ne,z,W,we,e.store]),Le=(0,i.useRef)(null),Re=(0,i.useRef)(null);(0,a.c)(_.Z,(()=>({edit:Me,handleCancelEdit:Ie,getNode:()=>Le.current,isEditing:()=>$,discussionLocation:z,commentId:e.store.id})),[Me,Ie,$,z,e.store.id]);const _e=O.Je[z],Ve=null==he?void 0:he.text,Fe=void 0!==Ve&&Ve.length>0,Ae=Fe&&(0,O.p9)(Ve),Ke=function(e){let{discussionLocation:t,isAllEmojis:o,avatarSize:i}=e;const n=Be(t);return(0,c.yK)((e=>({container:{flexGrow:"comment_unfurl"===t?1:void 0},comment:{display:"flex",alignItems:"flex-start",position:"relative",fontSize:14},avatar:{marginRight:10,marginTop:"comment_unfurl"===t?16:2,userSelect:"none",WebkitUserSelect:"none"},userRow:{alignItems:"center",position:"relative",display:"flex",flexDirection:"row",padding:"margin_comments"===t?"4px 16px 0px 12px":"comment_unfurl"===t?"6px 16px 0px 10px":"6px 16px 0px 18px",marginTop:"comment_unfurl"===t?-11:void 0,userSelect:"none",WebkitUserSelect:"none"},placeholder:{height:8,width:81,borderRadius:4,background:e.lightDividerColor},userNameTooltip:{backgroundColor:e.contentBackground},unfurlLessWrapper:{color:e.regularTextColor,fontWeight:h.Z.fontWeight.medium,paddingLeft:n,marginLeft:7},unfurlMoreWrapper:{color:e.lightTextColor,fontWeight:"comment_unfurl"===t?h.Z.fontWeight.medium:void 0},attachIcon:{width:18,height:18,fill:e.mediumIconColor},text:{cursor:"comment_unfurl"!==t?"text":void 0,paddingLeft:n,marginLeft:"comment_unfurl"===t?8:void 0,...o?{fontSize:32}:{}},textWrapper:{padding:"margin_comments"===t?"2px 16px 6px 42px":"0px 16px 3px 16px",marginTop:"comment_unfurl"===t?"-14px":void 0},reactionContainer:{marginLeft:"margin_comments"===t?41:50,marginRight:14,marginTop:4,marginBottom:4},attachmentContainer:{padding:"0px 16px 6px 54px",marginTop:-12,display:"flex",alignItems:"center"},timestamp:{margin:"0 6px",flexBasis:"comment_unfurl"!==t?140:void 0,whiteSpace:"normal",flexGrow:"updates_sidebar"===t||"comment_unfurl"===t?void 0:1,display:"inline"},commentAttachment:{margin:"0px 16px 0px "+("margin_comments"===t?"40px":"50px")},commentAuthorPlaceholder:{marginRight:8,marginTop:"comment_unfurl"===t?14:2,height:i,width:i,borderRadius:20,flexShrink:0}})),[t,n,o,i])}({discussionLocation:z,isAllEmojis:Ae,avatarSize:_e});if(!ee)return null;if(!he||!Se)return null;const Ee="comment_unfurl"!==z;let Oe,Ne;he.lastEditedTime&&he.lastEditedTime>he.createdTime+100?(Oe=(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"{lastEditedTime} (edited)",id:"comment.editedAtTime.label",values:{lastEditedTime:(0,B.IS)(he.lastEditedTime)}}),Ne=(0,B.uy)(he.lastEditedTime)):(Oe=(0,B.IS)(he.createdTime),Ne=(0,B.uy)(he.createdTime));const Ue=(0,xe.jsx)("div",{style:Ke.commentAttachment,children:(0,xe.jsx)(Te,{contentStores:te,onRemoveContent:je,discussionFormat:(0,O.ad)(z),collapsed:e.collapsed})});return(0,xe.jsxs)("div",{ref:Le,onClick:e=>$&&e.stopPropagation(),style:Ke.container,children:[e.showNewBar&&(0,xe.jsx)(Ze,{}),(0,xe.jsxs)("div",{style:Ke.comment,onFocus:se,onBlur:re,onMouseMove:le,onMouseLeave:ae,children:[(0,xe.jsxs)("div",{style:{flexGrow:1,minWidth:0},children:[(0,xe.jsxs)("div",{style:Ke.userRow,children:[(0,xe.jsx)(ye.S,{authorStore:null==Se?void 0:Se.store,avatarSize:_e,avatarStyle:Ke.avatar,placeholderStyle:Ke.commentAuthorPlaceholder}),(0,xe.jsxs)("div",{style:{overflow:"hidden"},children:[(0,xe.jsx)("span",{style:{fontWeight:h.Z.fontWeight.semibold,whiteSpace:"normal"},children:be?(0,xe.jsx)(j.ZP,{renderTooltip:()=>Se&&Se.store instanceof A.U6?(0,xe.jsx)(L.Z,{targetUserStore:Se.store}):null,placement:j.ug.Top,alignment:j.v2.End,render:e=>(0,xe.jsx)("span",{...e,children:Se.displayName}),style:Ke.userNameTooltip,delayThreshold:600}):Se.displayName||(0,xe.jsx)("span",{style:Ke.placeholder})}),(0,xe.jsx)(k.Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:Ke.timestamp,children:(0,xe.jsx)(I.Z,{text:Oe,tooltipText:Ne,icon:m.C})}),"comment_unfurl"===z&&oe&&(0,xe.jsx)("div",{style:{display:"inline-flex"},children:(0,xe.jsx)(w.Z,{children:(0,xe.jsx)(f.FormattedMessage,{id:"comment.unfurl.resolvedStatus",defaultMessage:"Resolved"})})})]})]}),(0,xe.jsx)("div",{style:{paddingLeft:J+15,paddingRight:16},children:o}),$?(0,xe.jsx)("div",{style:(0,O.ad)(z)===O.O2.Margin?{marginTop:8}:void 0,children:(0,xe.jsx)(De.default,{containerStyle:{padding:"margin_comments"===z?"0px 16px 4px 16px":"0px 10px 0px 45px"},showAvatar:!1,parentStore:e.store,blockStore:e.blockStore,onCancel:Ie,onSubmit:Pe,discussionInputStore:ee,isEditingExistingComment:!0,isMobileSlideUpMenu:!0,shouldSaveUnsentComments:!1,commentStore:e.store,discussionFormat:(0,O.ad)(z),canDrop:!0})}):(0,xe.jsxs)(xe.Fragment,{children:[Fe&&!$&&(0,xe.jsx)("div",{style:Ke.textWrapper,children:(0,xe.jsx)(P.Z,{onMore:"comment_unfurl"===z?void 0:()=>{},lessElement:"comment_unfurl"===z?(0,xe.jsx)("span",{className:"notion-link",style:Ke.unfurlLessWrapper,children:(0,xe.jsx)(f.FormattedMessage,{id:"comments.showLessLabel",defaultMessage:"show less"})}):void 0,moreElement:(0,xe.jsxs)(M.Z,{disableUnderline:!0,style:Ke.unfurlMoreWrapper,children:["…"," ",(0,xe.jsx)("span",{children:(0,xe.jsx)(f.FormattedMessage,{id:"text.truncated.showMoreLabel",defaultMessage:"more"})})]}),maxLines:e.collapsed?U:void 0,children:(0,xe.jsx)(R.Z,{style:Ke.text,store:D.zP(e.store),disabled:!0,disableDateMentions:!0,disableEquationInteraction:!0})})}),"comment_unfurl"!==z?Ue:!Fe&&(0,xe.jsxs)("div",{style:Ke.attachmentContainer,children:[(0,xe.jsx)("div",{style:{marginRight:5},children:(0,u.s)(Ke.attachIcon)}),(0,xe.jsx)(f.FormattedMessage,{defaultMessage:"{numberOfAttachments, plural, one {{numberOfAttachments} attachment} other {{numberOfAttachments} attachments}}",values:{numberOfAttachments:te.length},id:"comment.unfurl.attachments.title"})]})]}),(0,xe.jsx)("div",{ref:Re,children:Ee&&he.reactions.length>0&&(0,xe.jsx)("div",{style:Ke.reactionContainer,children:(0,xe.jsx)(fe.default,{parentStore:e.store,discussionLocation:z})})})]}),"comment_unfurl"!==z&&!$&&(0,xe.jsx)(ve,{store:e.store,discussionStore:e.discussionStore,blockStore:e.blockStore,discussionLocation:z,visible:pe,isFirstComment:me,buttonPopupStore:ce,canShowReactions:Ee,handleEditComment:Me,handleDeleteComment:we,handleReaction:ke})]})]})}},70775:(e,t,o)=>{o.d(t,{S:()=>p});o(67294);var i=o(86628),n=o(24405),s=o(54368),r=o(77420),l=o(19889),a=o(97880),d=o(70301),c=o(45653),u=o(83420),m=o(85893);function p(e){let{authorStore:t,avatarSize:o,avatarStyle:p,placeholderStyle:g}=e;window.__c={n:"CommentAuthorAvatar"};const h=(0,n.Fg)(),f=(0,i.VK)((()=>(0,u.TL)(t)),[t]);return f.asActor?f.table===l.KJ?(0,m.jsx)(c.Z,{hasTooltip:!0,userValue:f.asActor,style:p,size:o,avatarShouldShowShadow:!0}):f.table===r.cZ?(0,m.jsx)(d.Z,{botValue:f,size:o,style:p}):f.table===s.y?(0,m.jsx)("div",{style:{...g,background:h.lightDividerColor}}):void(0,a.t1)(f):(0,m.jsx)("div",{style:{...g,background:h.lightDividerColor}})}},43590:(e,t,o)=>{o.r(t),o.d(t,{default:()=>J});var i=o(67294),n=o(1302),s=o(480),r=o(33125),l=o(86628),a=o(24405),d=o(72126),c=o(70203),u=o(97880),m=o(9291),p=o(47307),g=o(61045),h=o(98104),f=o(82530),x=o(53336),v=o(79954),S=o(93963),y=o(65598),b=o(89574),C=o(46351),w=o(95802),j=o(21853),k=o(34859),M=o(96049),I=o(45589),P=o(17707),L=o(7476),R=o(34047),T=o(82994),Z=o(19446),D=o(13991),B=o(41432),_=o(99036),V=o(8848),F=o(25501),A=o(59753),K=o(82990),E=o(2456),O=o(33929),N=o(85893);const U=new Set([B.Ti.toggle,B.Ti.bulletedList,B.Ti.numberedList,B.Ti.quote,B.Ti.toDo,B.Ti.code,B.Ti.callout,B.Ti.header,B.Ti.subHeader,B.Ti.subSubHeader,B.Ti.tableRow]);function z(e){window.__c={n:"DiscussionContext"};const t=(0,a.Fg)(),o=(0,l.VK)((()=>{var t;return e.store.isDefined()?null===(t=e.store.getParentStore())||void 0===t?void 0:t.getValue():null}),[e.store]),i=(0,l.VK)((()=>e.blockStore.getSpaceId()),[e.blockStore]),n=(0,l.VK)((()=>{if(!e.store.isDefined())return;const t=e.store.getContext();if(!t)return;return c.VP_(t,(t=>!c.xw5(t)||c.h19(t)===e.store.id))}),[e.store]),s=o=>{let{textValue:n,propertySchema:s,discussionParentValue:r}=o;const l=(0,N.jsx)("div",{style:{maxHeight:72,overflow:"hidden",lineHeight:"24px"},children:(0,N.jsx)(E.KX,{value:{value:n,spaceId:i},propertySchema:s,labeled:!1,rootStore:e.blockStore,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!0})});if(!r)return l;const a=r.type;return a===B.Ti.code?(0,N.jsx)(F.Z,{title:(0,E.SP)(r),theme:t,style:{marginTop:0,marginBottom:0},children:(0,N.jsx)("span",{style:{fontFamily:K.Z.getCompositeFontFamily(D.SP).mono,fontSize:12,tabSize:2},children:l})}):(0,E.pH)(a)?(0,N.jsx)(F.Z,{title:(0,E.pH)(a),theme:t,style:{marginTop:0,marginBottom:0},children:l}):l};function r(e){if(!n)return null;const o={display:"flex",alignItems:"flex-start",fontSize:14,marginTop:8,marginBottom:8,color:t.mediumTextColor,width:"100%"},i=_.Kc(O.default.getIntl()).title;return i?(0,N.jsx)("div",{style:o,children:(0,N.jsxs)("div",{style:{display:"flex",width:"100%"},children:[(0,N.jsx)(W,{}),s({textValue:n,discussionParentValue:e,propertySchema:i})]})}):null}if("updates_sidebar"===e.discussionLocation){if(!o)return null;if("text"!==o.type)return(0,N.jsx)("div",{onClick:e.onClick,style:{display:"flex",cursor:A.kk.fromBlock(o).isType(B.Zi)?"text":void 0},children:n&&U.has(o.type)?r(o):(0,N.jsxs)("div",{style:{display:"flex",marginTop:8,marginBottom:8,width:"100%"},children:[(0,N.jsx)(W,{}),(0,N.jsx)(E.ZP,{blockValue:o,rootStore:e.blockStore,blockPreviewLocation:"comments_sidebar"})]})})}return(0,N.jsx)("div",{onClick:e.onClick,style:{cursor:"text"},children:r()})}function W(){return(0,N.jsx)("div",{style:{width:3,borderRadius:4,marginLeft:2,marginRight:8,background:V.DB,flexShrink:0,paddingBottom:2}})}var H=o(7189),$=o(72141),X=o(26388),G=o(55541);const q=i.forwardRef(((e,t)=>{window.__c={n:"DiscussionPopupInput"};const o=(0,s.O7)(),{format:i,role:n,showMoreCommentsButton:r,onMoreCommentsClick:d,inputVisible:c}=e,u=n&&$.rz(n),p=o.currentUser.isLoggedIn(),{device:g,WindowSizeStore:h}=o,f=(0,a.Fg)(),x=(0,l.VK)((()=>({paddingLeft:g.isMobile&&h.getSafePaddingLeftCSS(18)||i===R.O2.Margin&&9||13,paddingRight:g.isMobile&&h.getSafePaddingLeftCSS(14)||i===R.O2.Margin&&12||16})),[h,g.isMobile,i]),v=(0,a.yK)((t=>({container:{paddingTop:e.collapsed?1:4,paddingLeft:x.paddingLeft,paddingRight:x.paddingRight,paddingBottom:(g.isMobile&&i!==R.O2.Page?8:i===R.O2.Sidebar&&14)||0,position:"relative"},moreCommentsWrapper:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:1,left:0,right:0,marginTop:-32,height:30,background:`linear-gradient(to bottom, ${t.contentBackgroundTransparent} 0px, ${t.selectedMarginDiscussionBackground} 30px`},tooltip:{...(0,X.JS)(t,!1),cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"}})),[x,g.isMobile,i,e.collapsed]);return(0,N.jsx)(N.Fragment,{children:p&&!u&&(0,N.jsxs)("div",{style:v.container,children:[r&&(0,N.jsx)("div",{style:v.moreCommentsWrapper,children:(0,N.jsxs)("div",{style:v.tooltip,onClick:d,children:[(0,N.jsx)("div",{style:{marginRight:5},children:(0,H.K)({fill:f.regularInvertedTextColor,height:12,width:12})}),(0,N.jsx)(m.FormattedMessage,{defaultMessage:"More",id:"discussion.moreMessageTooltip"})]})}),c&&(0,N.jsx)(G.default,{showAvatar:"margin_comments"!==e.discussionLocation,containerStyle:g.isMobile?void 0:{paddingLeft:5,paddingRight:2},parentStore:e.store,onCancel:e.onCancel,onSubmit:e.onSubmit,discussionInputStore:e.discussionInputStore,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,onEditPreviousComment:e.onEditPreviousComment,inReplyToDiscussionId:e.store.id,discussionFormat:e.format,showCtaButtons:e.showCtaButtons,ref:t,onFileUploaded:e.onFileUploaded})]})})}));var Y=o(62385);function Q(e){window.__c={n:"DiscussionShowAllButton"};const t=(0,a.yK)((t=>({newBarLine:{height:"0px",borderBottom:`1px solid ${t.darkDividerColor}`,marginLeft:0,flex:1},moreCommentsWrapper:{color:t.lightTextColor,fontSize:14,paddingLeft:e.insetButton?38:25,flexGrow:1,display:"flex",alignItems:"center"},button:{padding:"14px 12px",margin:"1px 4px",borderRadius:4,fontSize:14,color:t.mediumTextColor,width:"calc(100% - 8px)",justifyContent:"space-between"},buttonHovered:{background:t.focusDiscussionInputBackground}})),[e.insetButton]);return e.count<=0?null:(0,N.jsx)(Y.Z,{style:t.button,onClick:e.onClick,hoveredStyle:t.buttonHovered,children:(0,N.jsx)("div",{style:t.moreCommentsWrapper,children:(0,N.jsx)(m.FormattedMessage,{defaultMessage:"{moreCommentsNumber, plural, one {{moreCommentsNumber} more comment} other {{moreCommentsNumber} more comments}}",id:"discussion.showMoreCommentsSidebarButton.label",values:{moreCommentsNumber:e.count}})})},"show")}function J(e){window.__c={n:"Discussion"};const t=(0,i.useRef)(null),o=(0,s.O7)(),D=(0,l.VK)((()=>y.D4(e.store)),[e.store]),B=(0,l.VK)((()=>D.filter((e=>e.isDefined()))),[D]),_=(0,i.useRef)(e.discussionInputStore||new T.Z(o,e.store.pointer.spaceId)).current,V=(0,l.VK)((()=>(0,R.n9)(_)),[_]),F=(0,l.VK)((()=>e.store.isDefined()),[e.store]),A=(0,l.VK)((()=>e.store.getResolved()),[e.store]),[K,E]=(0,i.useState)(!1),[O,U]=(0,i.useState)(!1),[W,H]=(0,i.useState)(!0),$=(0,l.qz)(void 0,I.Z),X=(0,l.VK)((()=>$.state.clientRect),[$]),G=e.format===R.O2.Sidebar,Y=e.format===R.O2.Margin,J=(0,i.useRef)(null);(0,r.c)(C.Z,(()=>({isSidebarFormat:()=>G,isMarginFormat:()=>Y,getStore:()=>e.store,getInputStore:()=>_,getNode:()=>J.current})),[G,Y,e.store,_]);const te=(0,l.VK)((()=>{if(!G)return;return(0,R.NI)(e.store).find((t=>L.t({discussionStore:e.store,commentStore:t})))}),[G,e.store]),oe=(0,i.useRef)(te),ie=(0,l.VK)((()=>{const{showAllRepliesAfterTimestamp:t}=e,o=(()=>{var o;if(O||B.length<=5||"block_menu"===e.discussionLocation||"page_discussion"===e.discussionLocation)return B;const i=[t,null===(o=oe.current)||void 0===o?void 0:o.getCreatedTime(),null==te?void 0:te.getCreatedTime()].filter(u.$K),n=i.length>0?Math.min(...i):void 0;if(n){const e=B.filter((e=>(e.getCreatedTime()||0)>n)),t=B.filter((e=>(e.getCreatedTime()||0)<=n));return t.length<=5?B:[...d.pm(t,2),...e]}return d.pm(B,2)})(),i=new Set(o.map((e=>e.id))),n=B.filter((e=>!i.has(e.id))),s=n.length;return{commentStores:B,commentsToShow:o,commentsToCollapse:n,remainingCommentCount:s,shouldRenderFirstComment:s>0}}),[B,te,e,O],{useDeepEqual:!0}),ne=(0,i.useCallback)((()=>{if(!e.store.isDefined())return;const t=e.store.getContext();if(!t)return;return c.VP_(t,(t=>!c.xw5(t)||c.h19(t)===e.store.id))}),[e.store]),se=(0,l.VK)((()=>{if(!G)return;return(0,R.NI)(e.store).find((t=>L.t({discussionStore:e.store,commentStore:t})))}),[G,e.store]),re=i.createRef(),le=(0,i.useRef)(e.blockStore.clone()).current,ae=(0,a.yK)((t=>({discussionWrapper:{...e.format===R.O2.Page&&{margin:"14px -14px 14px"},...e.format===R.O2.Menu&&{paddingTop:10,paddingBottom:12,marginLeft:-2,boxShadow:e.isFirst?"none":`0 -1px 0 ${t.regularDividerColor}`,marginTop:e.isFirst?0:1},...e.format===R.O2.Margin&&{paddingTop:e.collapsed?8:0,paddingBottom:e.collapsed?8:14,borderRadius:4}}})),[e.collapsed,e.format,e.isFirst]);(0,i.useEffect)((()=>{o.KatexStore.loadIfNeeded(ne)}),[o.KatexStore,ne]);const de=t=>{const{device:i}=o;if(!i.isMobile)return;if(!e.store.isDefined())return;t.stopPropagation(),t.preventDefault(),j.Z.setState({open:!1});const n=d.oA(w.C.findSelectablesFromIds([e.store.getParentId()])),s=null==n?void 0:n[0];s&&g.NQ({component:s,vertical:{reveal:"bottom"},horizontal:{reveal:"closest"},animate:!0})},ce=()=>{const o=(0,R.QT)(D.length);if(!e.collapsed)return(0,N.jsx)(x.Z,{style:{display:"flex",flexDirection:"column",maxHeight:500,overflowY:"scroll",paddingTop:8},ref:t,type:k.Z.Y,store:$,children:D.map((t=>(0,N.jsx)(Z.default,{store:t,discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:K,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o},t.id)))});const i=D[0]&&(0,N.jsx)(Z.default,{store:D[0],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:K,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o,collapsed:e.collapsed},D[0].id),n=D.length>1&&D[D.length-1]&&(0,N.jsx)(Z.default,{store:D[D.length-1],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:K,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,maxLines:o,collapsed:e.collapsed},D[D.length-1].id),s=D.length-2;return(0,N.jsxs)(N.Fragment,{children:[i,(0,N.jsx)(Q,{insetButton:!Y,count:s,onClick:xe}),n]})};const ue=(0,l.VK)((()=>e.blockStore.getRole()),[e.blockStore]),me=t.current,pe=(0,l.VK)((()=>(null==me?void 0:me.atScrollEnd())??!0),[me]),ge=W&&!e.collapsed&&Y&&X&&t.current&&!pe,he=()=>{n.default.afterNextFlush((()=>{t.current&&t.current.scrollToBottom({animate:!0})}))},fe=d.Ds((()=>{setTimeout((()=>H(!0)),50)}),50),xe=e=>{Y||(e.stopPropagation(),U(!0))},ve=()=>{_.reset()};return(0,N.jsx)(v.Z,{store:le,analyticsName:"discussion",canNativeDropOnto:!0,onNativeDrop:async e=>{let{files:t}=e;re.current&&await re.current.uploadFiles(t)},keepTextSelectionOnDrop:!0,shouldShowDropZone:!0,children:(0,N.jsxs)("div",{ref:J,style:ae.discussionWrapper,onMouseMove:()=>{M.Z.state||E(!0)},onMouseLeave:()=>{E(!1)},children:[function(){if(Y)return ce();const{commentStores:t,shouldRenderFirstComment:o,commentsToShow:i,commentsToCollapse:n}=ie,s=i.map(((t,i)=>{var n;return(0,N.jsx)(Z.default,{store:t,discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:K,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,discussionContext:!o&&e.format!==R.O2.Margin&&0===i&&(0,N.jsx)(z,{format:e.format,discussionLocation:e.discussionLocation,store:e.store,blockStore:e.blockStore,onClick:de}),showNewBar:t.id===(null===(n=oe.current)||void 0===n?void 0:n.id)&&0!==i},t.id)})),r=o&&(0,N.jsx)(Z.default,{store:t[0],discussionStore:e.store,blockStore:e.blockStore,hoveringDiscussion:K,discussionLocation:e.discussionLocation,showResolveButtonByDefaultIfPossible:e.showResolveButtonByDefaultIfPossible,discussionContext:e.format!==R.O2.Margin&&F&&(0,N.jsx)(z,{format:e.format,discussionLocation:e.discussionLocation,store:e.store,blockStore:e.blockStore,onClick:de})},t[0].id);return(0,N.jsxs)("div",{style:{position:"relative"},children:[r,G&&se&&(0,N.jsx)(S.z,{style:ee}),(0,N.jsx)(Q,{insetButton:!Y,count:n.length-1,onClick:xe}),s]})}(),A?(0,N.jsx)("div",{style:{height:8}}):(0,N.jsx)(q,{ref:re,showMoreCommentsButton:!!ge,onMoreCommentsClick:he,inputVisible:!e.collapsed||!V,store:e.store,format:e.format,discussionInputStore:_,discussionLocation:e.discussionLocation,onCancel:async()=>{if((0,R.hu)(_)){await p.confirmUserAction({message:(0,N.jsx)(m.FormattedMessage,{defaultMessage:"Do you want to discard this reply?",id:"discussion.confirmDialog.discardReply.prompt"}),acceptLabel:(0,N.jsx)(m.FormattedMessage,{defaultMessage:"Discard",id:"discussion.confirmDialog.discardReplyButton.label"})})?(ve(),e.onDismiss&&e.onDismiss()):(await n.default.afterNextFlush(),h.NX({store:_.state.textStore}))}else ve(),e.onDismiss&&e.onDismiss()},onSubmit:async()=>{H(!1);const{device:t}=o,{store:i,discussionLocation:s}=e;f.createAndCommit({userAction:"Discussion.handleSubmitReply",environment:o,perform:e=>{P.Xi({environment:o,discussionStore:i,textValue:_.state.textStore.getValue()||[],transaction:e,discussionLocation:s,files:_.state.files})}}),ve(),h.ZH(o),he(),fe(),t.isMobile||(await n.default.afterNextFlush(),h.N_({store:_.state.textStore}))},onEditPreviousComment:()=>{const t=o.currentUser.id;if(!t)return;const i=y.D4(e.store).filter((e=>e.getCreatedById()===t)),n=d.Z$(i);if(!n)return;const s=b.Z.find((t=>t.commentId===n.id&&t.discussionLocation===e.discussionLocation));s&&(h.ZH(o),s.edit())},showCtaButtons:!!Y||void 0,onFileUploaded:()=>{const e=w.C.findSelectableFromStore(le);e&&g.NQ({component:e,vertical:{reveal:"bottom"},horizontal:{reveal:"closest"},animate:!0})},role:ue})]})})}const ee={marginRight:4,position:"absolute",right:16,top:14}},55541:(e,t,o)=>{o.r(t),o.d(t,{default:()=>J});var i=o(67294),n=o(1302),s=o(480),r=o(6740),l=o(86628),a=o(24405),d=o(15157),c=o(72126),u=o(9291),m=o(85344),p=o(47307),g=o(67060),h=o(993),f=o(98104),x=o(82530),v=o(53471),S=o(23063),y=o(37601),b=o(3386),C=o(45653),w=o(79954),j=o(65187),k=o(28020),M=o(43250),I=o(33929),P=o(68056),L=o(24666),R=o(65598);var T=o(34047),Z=o(59194),D=o(91315),B=o(64275),_=o(22962),V=o(83065),F=o(61519),A=o(73063),K=o(75179),E=o(26388),O=o(85893);const N=function(e){window.__c={n:"CommentActionButton"};const t=(0,s.O7)(),{icon:o,onClick:i,tooltip:n}=e;return(0,O.jsx)(K.Z,{capture:!0,render:e=>(0,O.jsx)(E.ZP,{renderTooltip:()=>n,render:s=>(0,O.jsx)(A.Z,{ariaLabel:n,icon:o,iconStyle:{width:t.device.isMobile?20:16,height:t.device.isMobile?20:16},style:{marginLeft:t.device.isMobile?16:10},onClick:i,...s,...e})})})},U=(0,u.defineMessages)({defaultPlaceholder:{defaultMessage:"Add a comment…",id:"discussionInput.defaultPlaceholder.addComment"},pasteFileIntoCommentNotAllowed:{id:"clipboardActions.pasteFileIntoCommentError.message",defaultMessage:"Sorry, you cannot paste files into a comment."},replyInputPlaceholder:{defaultMessage:"Reply...",id:"updateSidebar.placeholder.addComment"}}),z={height:{stiffness:80,damping:12,precision:.001}};const W=function(e){window.__c={n:"CommentInputActionBar"};const t=(0,u.useIntl)(),o=(0,s.O7)(),{device:i}=o,n=(0,a.yK)((e=>({icon:{background:e.mediumIconColor,borderRadius:"50%",marginLeft:o.device.isMobile?16:12,pointerEvents:"auto",height:20,width:20},iconHovered:{background:e.lightIconColor}})),[o.device.isMobile]),{canSend:r,visible:l,onSend:d,onCancel:c,isEditing:m,animated:p,onMention:g,onAttach:h,inline:f}=e,x={opacity:l?1:0};return(0,O.jsx)(S.Z,{springConfig:z,isVisible:!0,animationStyle:x,render:()=>(0,O.jsx)("div",{style:{display:"flex",...f?{flexDirection:"column-reverse",alignItems:"end",marginRight:8}:{flexDirection:"row",position:"absolute",bottom:7,right:12,alignItems:"center"},pointerEvents:l?void 0:"none",...p&&x},children:(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,O.jsx)(N,{icon:Z.s,onClick:h,tooltip:t.formatMessage({id:"discussionInput.uploadFile.button.tooltip",defaultMessage:"Attach file"})}),!i.isMobileBrowser&&(0,O.jsx)(N,{icon:_.O,onClick:g,tooltip:t.formatMessage({id:"discussionInput.insertMention.button.tooltip",defaultMessage:"Mention a person, page, or date"})}),m&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{style:{height:14,marginLeft:o.device.isMobile?10:8},children:(0,O.jsx)(F.Z,{vertical:!0,size:1})}),(0,O.jsx)(K.Z,{capture:!0,render:e=>(0,O.jsx)(A.Z,{icon:B.D,isDarkIconColor:!0,onClick:c,iconStyle:{fill:"white",height:o.device.isMobile?18:16,width:o.device.isMobile?18:16},hoveredStyle:n.iconHovered,style:n.icon,...e})})]}),m?(0,O.jsx)(K.Z,{capture:!0,render:e=>(0,O.jsx)(A.Z,{icon:D.r,onClick:d,isBlue:r,disabled:!r,iconStyle:{height:o.device.isMobile?23:21,width:o.device.isMobile?23:21},style:{marginLeft:o.device.isMobile?16:12,pointerEvents:"auto",height:20,width:20},...e})}):(0,O.jsx)(K.Z,{capture:!0,render:e=>(0,O.jsx)(A.Z,{icon:V._,onClick:d,isBlue:r,disabled:!r,iconStyle:{height:o.device.isMobile?26:24,width:o.device.isMobile?26:24},style:{marginLeft:o.device.isMobile?16:12,pointerEvents:"auto",height:20,width:20},...e})})]})})})};var H=o(20830);const $=i.forwardRef(((e,t)=>{var o;window.__c={n:"DiscussionInput"};const w=(0,s.O7)(),{device:Z,currentUser:D}=w,[B,_,V]=(0,l.AF)(e.discussionInputStore),{textStore:F,files:A}=B,K=(0,l.VK)((()=>F.getValue()),[F]),[E,N]=(0,i.useState)(!1),[$,J]=(0,i.useState)(!1),ee=(0,i.useRef)(null),{commentStore:te}=e,oe=e.discussionFormat!==T.O2.Page;(0,i.useImperativeHandle)(t,(()=>({uploadFiles:ue})));const ie=(0,l.VK)((()=>(0,k.B7)(w)),[w]),ne=(0,i.useRef)(null===(o=e.blockStore)||void 0===o?void 0:o.clone()),se=(0,l.VK)((()=>{const e=L.default.state;return"editing"===e.mode&&(0,P.qS)(e.multiSelection)&&e.multiSelection.start.store===F}),[F]),re=(0,l.VK)((()=>({isEmpty:(0,T.n9)(V),hasChanged:(0,T.hu)(V,te)})),[V,te]),le=(0,l.VK)((()=>se||!re.isEmpty),[re.isEmpty,se]),ae=(0,i.useCallback)((async()=>{const e=L.default.state;"editing"===e.mode&&(0,P.qS)(e.multiSelection)&&e.multiSelection.start.store===F||(f.NX({store:F}),await n.default.afterNextFlush())}),[F]),de=e=>{const t=V.state;V.setState({...t,files:t.files.filter((t=>t.id!==e.id))})},ce=async e=>{await ue(e.files),m.Zq(w,{type:"paste"})},ue=(0,i.useCallback)((async t=>{var o;if(await ae(),A.length+t.length>10)return void p.showErrorMessage((0,O.jsx)(u.FormattedMessage,{id:"discussionInput.uploadFile.tooManyFilesErrorMessage",defaultMessage:"You cannot upload more than {maxFiles} files per comment.",values:{maxFiles:10}}));const i=t.map(v.Xo);_({...B,files:[...A,...i]}),null===(o=e.onFileUploaded)||void 0===o||o.call(e)}),[ae,A,_,B,e]),me=e.discussionFormat===T.O2.Margin,pe=e.discussionFormat===T.O2.Sidebar,ge=e.discussionFormat===T.O2.Page;(0,i.useEffect)((()=>{e.commentStore&&function(e,t){const o=R.le(t),i=v.nQ(o);e.setState({...e.state,files:i})}(V,e.commentStore)}),[V,e.commentStore]);const he=(0,i.useRef)(!1),fe=(0,i.useCallback)((t=>{t?d.Z.set({userId:D.id,key:Q(e.parentStore.id,e.inReplyToDiscussionId),value:t??null}):d.Z.remove({userId:D.id,key:Q(e.parentStore.id,e.inReplyToDiscussionId)})}),[D.id,e.inReplyToDiscussionId,e.parentStore.id]);(0,i.useEffect)((()=>{e.shouldSaveUnsentComments&&he.current&&fe(K),he.current=!0}),[e.shouldSaveUnsentComments,fe,K]);const xe=(0,i.useRef)(F);(0,i.useEffect)((()=>{if(e.shouldSaveUnsentComments){const t=d.Z.get({userId:D.id,key:Q(e.parentStore.id,e.inReplyToDiscussionId)});t&&x.createAndCommit({userAction:"DiscussionInput.willMount",environment:w,perform:e=>{h.sO({environment:w,store:xe.current,value:t,transaction:e})}})}}),[w,D.id,e.inReplyToDiscussionId,e.parentStore.id,e.shouldSaveUnsentComments]);const ve=(0,i.useRef)(A);(0,i.useEffect)((()=>{ve.current=A}),[A]),(0,i.useEffect)((()=>()=>{ve.current&&ve.current.forEach((e=>{"local"===e.type&&e.dataURL&&URL.revokeObjectURL(e.dataURL)}))}),[]);const Se=!(!e.isEditingExistingComment&&(e.discussionFormat===T.O2.Page||e.discussionFormat===T.O2.Menu)),ye=()=>{var e;return null===(e=ee.current)||void 0===e?void 0:e.focus()},be=A&&A.length>0,Ce=!(e.discussionFormat===T.O2.Menu&&e.inReplyToDiscussionId)&&(pe||me&&!e.isNewComment),we=void 0!==e.showCtaButtons?e.showCtaButtons:e.isEditingExistingComment||le||E,je={paddingBottom:Se&&we?34:4},ke=!e.isMobileSlideUpMenu,Me=(me||pe)&&!e.isNewComment,Ie=(0,a.yK)((t=>({inputWrapper:{display:"flex",flexDirection:"column",alignItems:"bottom",minHeight:me?void 0:32,width:"100%",fontSize:14,paddingTop:me?1:4,paddingBottom:me?1:4,borderRadius:4,boxShadow:!e.isNewComment&&me?`0px 0px 0px 1px ${t.darkDividerColor}`:void 0,transition:"background 300ms ease",background:$&&!we&&t.focusDiscussionInputBackground||we&&!e.isEditingExistingComment&&(e.isNewComment&&me?t.selectedMarginDiscussionBackground:t.discussionInputActivatedBackground)||"inherit",cursor:we?"text":"pointer",alignSelf:"center",position:"relative"}})),[$,me,e.isEditingExistingComment,e.isNewComment,we]),Pe=pe?23:20,Le={fontSize:14,marginTop:pe?2:3,marginBottom:2,paddingLeft:ge?3:6,paddingRight:10,maxHeight:Z.isMobileNative?"50vh":"70vh",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",userSelect:"auto",WebkitUserSelect:"auto"},Re=(0,l.VK)((()=>0===(F.getValue()||[]).length),[F]),Te=function(e){const{isEditing:t,onEditPreviousComment:o,textRef:i}=e;if(!t)return{};const n=e=>{"key"in e&&(e.metaKey||e.ctrlKey)&&i.current&&f.N_({store:i.current.props.store})};return{onUp:o??n,onDown:e=>{"key"in e&&(e.metaKey||e.ctrlKey)&&i.current&&f.NX({store:i.current.props.store})},onRight:e=>{},onLeft:e=>{}}}({isEditing:se,shouldTrapCursorInInput:oe,onEditPreviousComment:Re?e.onEditPreviousComment:void 0,textRef:ee}),Ze=()=>{fe(void 0),e.onSubmit()},De=()=>{if(!Z.isMobile)return void Ze();const e="editing"===L.default.state.mode&&L.default.state.multiSelection;e&&x.createAndCommit({userAction:"DiscussionInput.handleEnter",environment:w,perform:t=>{h.hJ({environment:w,string:"\n",multiSelection:e,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})},Be=(0,O.jsx)(W,{visible:we,onAttach:async()=>{const{device:e}=w;e.isIOS&&e.isMobileNative&&!e.isTablet&&(f.ZH(w),await n.default.afterNextFlush());const t=await v.y({multiple:!0});await ue(t),m.Zq(w,{type:"file_picker"})},onMention:async()=>{await ae(),g.lZ(w,{page:!0,heading:!0,createPage:!1,user:!0,inviteUser:!0,bot:!0,date:!0,reminder:!1,templateVariable:!1,group:!0})},canSend:!re.isEmpty,onSend:Ze,onCancel:e.onCancel,isEditing:e.isEditingExistingComment||!1,animated:me,inline:!Se});return(0,O.jsx)(b.Z,{capture:se,onCommandEnter:c.yR,children:(0,O.jsx)(Y,{enabled:!!ne.current&&!!e.canDrop,store:ne.current,onNativeDrop:async e=>{let{files:t}=e;await ue(t),m.Zq(w,{type:"drop"})},children:(0,O.jsx)("div",{className:e.isEditingExistingComment?M.hzx:M.wFE,style:{...X,...e.containerStyle||{}},onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&N(!0)},onBlur:()=>N(!1),onMouseOver:()=>J(!0),onMouseOut:()=>J(!1),children:(0,O.jsxs)("div",{style:G,children:[e.showAvatar&&(0,O.jsx)(C.Z,{userStore:ie,size:Pe,avatarShouldShowShadow:!0,style:q}),(0,O.jsx)(S.Z,{springConfig:z,isVisible:!0,animationStyle:je,render:()=>(0,O.jsxs)("div",{className:Ce?M.Wh_:"",onClick:ye,style:{...Ie.inputWrapper,...me&&je},tabIndex:-1,children:[(0,O.jsxs)("div",{style:{flexGrow:1,display:"flex"},children:[(0,O.jsx)(j.Z,{style:Le,store:F,parentStore:e.parentStore,disabled:!1,onEnter:De,onCommandEnter:Ze,onPasteFiles:ce,onEsc:e.onCancel,...Te,placeholder:I.default.formatMessage(Me?U.replyInputPlaceholder:U.defaultPlaceholder),ref:ee,isDiscussionInput:!0,disableSlashCommands:!0,disableInsertText:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableEmbedMenu:!0,disableDateReminderMentions:!0,disableMobileActionBar:!0,disableStyleAnnotations:Z.isMobileBrowser,disableInsertedDeletedAnnotations:Z.isMobileBrowser,pasteBehavior:"inline"}),!Se&&Be]}),be&&(0,O.jsx)("div",{style:{paddingBottom:Se?8:0,paddingLeft:8,paddingRight:8},children:(0,O.jsx)(H.Z,{files:A,onRemoveFile:de})}),Se&&Be]})}),ke&&(0,O.jsx)(y.Z,{show:se,onDismiss:()=>f.ZH(w)})]})})})})})),X={display:"flex",flexDirection:"column",width:"100%",cursor:"pointer"},G={display:"flex",alignItems:"center",flexGrow:1},q={flexShrink:0,flexGrow:0,marginRight:6,alignSelf:"flex-start",marginTop:6};function Y(e){const{enabled:t,children:o,store:i,onNativeDrop:n}=e;return t&&i?(0,O.jsx)(w.Z,{store:i,analyticsName:"discussion_input",canNativeDropOnto:!0,onNativeDrop:n,keepTextSelectionOnDrop:!0,shouldShowDropZone:!0,children:o}):(0,O.jsx)(O.Fragment,{children:o})}function Q(e,t){return t?`UnsentDiscussion-${e}-${t}`:`UnsentDiscussion-${e}`}const J=$},20830:(e,t,o)=>{o.d(t,{Z:()=>A});var i=o(67294),n=o(86628),s=o(24405),r=o(31505),l=o(39301),a=o(73063),d=o(53336),c=o(73744),u=o(34859),m=o(45589),p=o(480),g=o(95538),h=o(64275),f=o(64921),x=o(54604),v=o(12981),S=o(81865),y=o(85893);function b(e){window.__c={n:"FullScreenImage"};const{url:t,imageNaturalHeight:o,imageNaturalWidth:n}=e,s=(0,i.useMemo)((()=>({display:"block",width:`min(${n}px, 100%)`,height:`min(${o}px, 100%)`,pointerEvents:"auto",objectFit:"cover"})),[n,o]);return(0,y.jsx)("div",{style:C,children:(0,y.jsx)(v.Z,{src:t,style:s,placeholderLoadedStyle:{display:"flex",justifyContent:"center",alignItems:"center"}})})}const C={alignSelf:"center",margin:"0 auto",position:"relative",height:"100%",width:"100%",overflow:"hidden"};const w=function(e){window.__c={n:"DiscussionInputImageRenderer"};const t=(0,i.useRef)(null),{file:o}=e,n=(0,p.O7)(),r=(0,s.yK)((e=>({imageThumbnail:{borderRadius:4,border:`1px solid ${e.lightDividerColor}`,objectFit:"cover",height:48,width:48,cursor:"zoom-in"}})),[]),l=(0,i.useCallback)((()=>{var e;const i=null===(e=t.current)||void 0===e?void 0:e.getImageDimensions();if(!i)return;const{naturalHeight:n,naturalWidth:s}=i;return"local"===o.type?(0,y.jsx)(b,{url:o.dataURL,imageNaturalHeight:n,imageNaturalWidth:s}):(0,y.jsx)(S.Z,{url:o.source,render:(e,t)=>(0,y.jsx)(b,{url:t,error:e,imageNaturalHeight:n,imageNaturalWidth:s}),isAuthenticated:!0,permissionRecord:o.store.pointer})}),[o]),a=(0,i.useCallback)((e=>{var o;e.stopPropagation();const i=null===(o=t.current)||void 0===o?void 0:o.getImageDimensions();i&&x.ui({environment:n,renderFullScreenNode:l,fullScreenNodeRect:i.clientRect,contentAspectRatio:i.naturalHeight/i.naturalWidth})}),[l,n]);return"local"===o.type?(0,y.jsx)(v.Z,{src:o.dataURL,style:r.imageThumbnail,placeholderStyle:r.imageThumbnail,onClick:a,ref:t}):(0,y.jsx)(S.Z,{url:o.source,isAuthenticated:!0,permissionRecord:o.store.pointer,render:(e,o)=>(0,y.jsx)(v.Z,{src:o,style:r.imageThumbnail,placeholderStyle:r.imageThumbnail,onClick:a,ref:t})})};var j=o(95477),k=o(52455),M=o(60973),I=o(82990);const P={doc:{title:"DOC"},docx:{title:"DOCX"},xls:{title:"XLS"},xlsx:{title:"XLSX"},pdf:{title:"PDF"},video:{icon:M.g}};function L(e){window.__c={n:"DiscussionInputFileRenderer"};const{file:t,type:o}=e,i=(0,s.yK)((e=>{let t;switch(o){case"doc":case"docx":t=e.msDocDiscussionInputPreview;break;case"xls":case"xlsx":t=e.msExcelDiscussionInputPreview;break;case"pdf":t=e.pdfDiscussionInputPreview;break;default:t=e.sidebarSecondaryBackground}return{wrapper:{height:48,width:220,display:"flex",background:"transparent",borderRadius:5,overflow:"hidden",border:`1px solid ${e.regularDividerColor}`},fileTypeArea:{background:t,height:48,width:48,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0},icon:{height:26,width:26,fill:e.regularIconColor},fileType:{fontSize:11,lineHeight:"16.8px",fontWeight:I.Z.fontWeight.semibold,color:e.regularInvertedTextColor},fileDescription:{padding:"6px 12px 6px 12px",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},fileTitle:{color:e.regularTextColor,textOverflow:"ellipsis",fontSize:14,lineHeight:"19.6px",whiteSpace:"nowrap",overflow:"hidden",width:"100%",paddingBottom:20},fileSize:{color:e.lightTextColor,fontSize:12,lineHeight:"16.8px",width:"100%"}}}),[o]),n=P[o];return(0,y.jsxs)("div",{style:i.wrapper,children:[(0,y.jsx)("div",{style:i.fileTypeArea,children:n?"title"in n?(0,y.jsx)("div",{style:i.fileType,children:n.title}):n.icon(i.icon):(0,k.X)(i.icon)}),(0,y.jsxs)("div",{style:i.fileDescription,children:[(0,y.jsx)("div",{style:i.fileTitle,children:t.name}),(0,y.jsx)("div",{style:i.fileSize,children:t.size})]})]})}const R={image:w,pdf:L,doc:L,xls:L,embed:L},T={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/msword":"doc","application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx",image:"image"};function Z(e){return"local"===e.type?function(e){const[t]=e.split("/");return T[e]||T[t]}(e.file.type)||(0,g.Dz)({url:e.file.name,baseUrl:j.default.domainBaseUrl,publicDomainName:j.default.publicDomainName}):(0,g.y_)(e.source,".doc")?"doc":(0,g.y_)(e.source,".docx")?"docx":(0,g.y_)(e.source,".xls")?"xls":(0,g.y_)(e.source,".xlsx")?"xlsx":(0,g.Dz)({url:e.source,baseUrl:j.default.domainBaseUrl,publicDomainName:j.default.publicDomainName})}function D(e){let{file:t,onRemoveFile:o,disableRemove:n}=e;window.__c={n:"DiscussionInputFilePreview"};const[s,r]=(0,i.useState)(!1),l=(0,i.useCallback)((()=>null==o?void 0:o(t)),[t,o]),d=(0,p.O7)(),c=!n&&(s||d.device.isMobile);(0,i.useEffect)((()=>()=>{"local"===t.type&&t.dataURL&&URL.revokeObjectURL(t.dataURL)}),[t]);const u=Z(t),m=R[u]||L;return(0,y.jsxs)(f.Z,{style:V,hoveredStyle:B,pressedStyle:_,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,y.jsx)(m,{file:t,type:u}),c&&(0,y.jsx)(a.Z,{icon:h.D,style:F,hasBackground:!0,isDarkIconColor:!0,hovered:!1,showShadow:!0,onClick:l})]})}const B={background:"none"},_={background:"none"},V={display:"flex",alignItems:"center",justifyContent:"center",position:"relative",paddingRight:"10px",cursor:"pointer"},F={position:"absolute",top:"-5px",right:"6px",height:18,width:18,borderRadius:18,padding:4};function A(e){window.__c={n:"DiscussionInputFilmStrip"};const t=(0,i.useRef)(null),o=(0,s.yK)((e=>({leftArrowStyle:{left:10,top:26,background:e.mediumIconColor,...O},rightArrowStyle:{right:10,top:26,background:e.mediumIconColor,...O},iconStyle:{height:6,fill:e.contentBackground},hoveredStyle:{background:e.regularIconColor}})),[]),[{scrollLeft:p,scrollWidth:g,clientWidth:h},,f]=(0,n.AF)(void 0,m.Z),x=(0,i.useCallback)((e=>{var o;e.stopPropagation(),null===(o=t.current)||void 0===o||o.scrollByOffset(0,-.8*h,{animate:!0})}),[h]),v=(0,i.useCallback)((e=>{var o;e.stopPropagation(),null===(o=t.current)||void 0===o||o.scrollByOffset(0,.8*h,{animate:!0})}),[h]),S=(0,i.useCallback)((()=>{var e;null===(e=t.current)||void 0===e||e.getClientRect()}),[]);(0,i.useEffect)((()=>(c.lj(window,"resize",S),()=>{c.ZV(window,"resize",S)})),[S]);const b=(0,i.useMemo)((()=>Math.floor(p)>0),[p]),C=(0,i.useMemo)((()=>Math.ceil(p+h)<g),[p,g,h]);return(0,i.useEffect)((()=>{S()}),[e.files,S]),0===e.files.length?null:(0,y.jsxs)("div",{style:E,children:[(0,y.jsx)(d.Z,{style:K,ref:t,type:u.Z.X,onScroll:S,zIndex:0,store:f,children:e.files.filter((e=>"local"===e.type||Boolean(e.source))).map((t=>(0,y.jsx)(D,{file:t,onRemoveFile:e.onRemoveFile,disableRemove:e.disableRemove},t.id)))}),b&&(0,y.jsx)(a.Z,{icon:r.Y,hovered:!1,showShadow:!0,onClick:x,style:o.leftArrowStyle,iconStyle:o.iconStyle,hoveredStyle:o.hoveredStyle}),C&&(0,y.jsx)(a.Z,{icon:l.n,hovered:!1,showShadow:!0,onClick:v,style:o.rightArrowStyle,iconStyle:o.iconStyle,hoveredStyle:o.hoveredStyle})]})}const K={overflow:"scroll",display:"flex",alignItems:"flex-start",flexDirection:"row",paddingTop:10},E={display:"flex",paddingRight:0,position:"relative"},O={position:"absolute",borderRadius:4,width:16,height:16,opacity:1,flexShrink:0,boxShadow:"none"}},82386:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});var i=o(67294),n=o(480),s=o(86628),r=o(24405),l=o(36488),a=o(56940),d=o(53437),c=o(34541),u=o(73935),m=o(83355),p=o(14568),g=o(49085);class h extends g.default{getInitialState(){return{}}}const f=h;class x extends m.Z{constructor(){super(...arguments),this.storeTypes={store:f},this.rootNode=void 0,this.observer=void 0,this.handleMutation=()=>{this.rootNode&&this.stores.store.setState({node:this.rootNode})}}get registries(){return[p.Z]}didMount(){this.props.capture&&this.startListeners()}UNSAFE_willUpdate(e){e.capture&&!this.props.capture?this.startListeners():!e.capture&&this.props.capture&&this.stopListeners()}willUnmount(){this.stopListeners()}startListeners(){const e=u.findDOMNode(this);e&&(this.rootNode=e,this.observer=new MutationObserver(this.handleMutation),this.observer.observe(this.rootNode,{attributes:!0,subtree:!0}))}stopListeners(){this.observer&&(this.observer.disconnect(),this.rootNode=void 0,this.observer=void 0)}renderComponent(){return i.Children.only(this.props.children)}}x.displayName="SlideUpInputArea";const v=x;var S=o(18821),y=o(34047),b=o(92650),C=o(48514),w=o(55541),j=o(85893);const k=function(){window.__c={n:"NewDiscussionMenu"};const e=(0,n.O7)(),{device:t,WindowSizeStore:o}=e,i=(0,s.VK)((()=>C.Z.state.rect),[]),u=(0,s.VK)((()=>{if(C.Z.state.open){const{blockStore:t,discussionInputStore:o}=C.Z.state;return{blockStore:t,discussionInputStore:o,canMarginCommentsRender:(0,b.az)(e,t)}}return null}),[e]),m=(0,s.VK)((()=>({paddingLeft:t.isMobileNative?o.getSafePaddingLeftCSS(10):10,paddingRight:t.isMobileNative?o.getSafePaddingRightCSS(10):10})),[o,t.isMobileNative]),p=(0,r.yK)((()=>({inputWrapper:{width:t.isMobileNative?"100%":470,maxWidth:t.isMobileBrowser?"90vw":"100%",paddingTop:8,paddingBottom:t.isAndroid?12:8,paddingLeft:m.paddingLeft,paddingRight:m.paddingRight}})),[t,m]),g=()=>{S.ZL(e)},h=()=>{u&&S.uK(u.discussionInputStore,e)};return null!=u&&u.canMarginCommentsRender?null:(0,j.jsx)(d.ZP,{popupType:t.isMobileNative?d.ZP.PopupType.SlideUp:d.ZP.PopupType.Popup,keepFocus:!0,open:null!==u,originRect:i,placementToOrigin:d.ZP.Placement.Bottom,alignmentToOrigin:d.ZP.Alignment.Center,originGap:4,onDismiss:h,render:()=>{if(u){const{blockStore:e,discussionInputStore:t}=u;return(0,j.jsx)(a.Z,{capture:!0,ignoreBlockSelection:!0,restoreSelection:!0,focusOffscreenInput:!1,render:()=>(0,j.jsx)(v,{capture:!0,children:(0,j.jsx)(l.Z,{capture:!0,allowOpenLinkMenu:!0,render:()=>(0,j.jsx)(c.Z,{store:e,droppable:!0,render:()=>(0,j.jsx)("div",{style:p.inputWrapper,children:(0,j.jsx)(w.default,{showAvatar:!0,parentStore:e,onCancel:h,onSubmit:g,discussionInputStore:t,isMobileSlideUpMenu:!0,shouldSaveUnsentComments:!1,discussionFormat:y.O2.Page,blockStore:e,canDrop:!0})})},e.id)})})})}}})}},90895:(e,t,o)=>{o.r(t),o.d(t,{default:()=>z,openEmojiMenuForReaction:()=>U});var i=o(67294),n=o(73935),s=o(480),r=o(86628),l=o(24405),a=o(8848),d=o(40350),c=o(97880),u=o(82990),m=o(9291),p=o(27153),g=o(4615),h=o(80396),f=o(23867),x=o(19889),v=o(94419),S=o(26136),y=o(85344),b=o(9953),C=o(82530);function w(e){const{discussionLocation:t,environment:o,transaction:i,commentStore:n,icon:s}=e,r=function(e){let{commentStore:t,icon:o}=e;const i=(0,S.Vh)(t,t.pointer,"reactions").getValue();if(void 0===i)return;return i.map((e=>{const o=S.t1.createChildStore(t,{table:h.yo,id:e,spaceId:(0,f.C)(t.pointer.spaceId)});if(o.isDefined())return o})).filter(c.$K).find((e=>e.getIcon()===o))}({commentStore:n,icon:s});if(void 0===o.currentUser.id)return;const l={table:x.KJ,id:o.currentUser.id};null!=r&&r.isDefined()?function(e){var t;let{store:o,actorPointer:i,transaction:n,environment:s,discussionLocation:r}=e;const l={store:o,actorPointer:i,transaction:n,environment:s,discussionLocation:r};(null===(t=o.getActors())||void 0===t?void 0:t.some((e=>e.id===i.id)))?function(e){const{store:t,actorPointer:o,discussionLocation:i,transaction:n,environment:s}=e;if(!t.isDefined())return;const r=t.getParentStore(),l=null==r?void 0:r.getParentStore();y.Em({environment:s,reaction_value:t.getIcon(),comment_id:t.getParentId(),discussion_id:null==l?void 0:l.id,parent_block_id:null==l?void 0:l.getParentId(),reaction_count:t.getActors().length??0,from:i});const a=t.getModel();C.applyOperation({transaction:n,store:t,operation:a.ops.removeActor(o)})}(l):function(e){const{store:t,actorPointer:o,discussionLocation:i,transaction:n,environment:s}=e;if(!t.isDefined())return;const r=t.getParentStore(),l=null==r?void 0:r.getParentStore();y.pP({environment:s,reaction_value:t.getIcon(),comment_id:t.getParentId(),discussion_id:null==l?void 0:l.id,parent_block_id:null==l?void 0:l.getParentId(),reaction_count:t.getActors().length??0,from:i});const a=t.getModel();C.applyOperation({transaction:n,store:t,operation:a.ops.appendActor(o)})}(l)}({environment:o,store:r,actorPointer:l,transaction:i,discussionLocation:t}):function(e){let{environment:t,transaction:o,commentStore:i,icon:n,currentActorPointer:s,discussionLocation:r}=e;const l=(0,g.ZP)(),a=i.getParentStore();y.pP({environment:t,reaction_value:n,comment_id:i.id,discussion_id:null==a?void 0:a.id,parent_block_id:null==a?void 0:a.getParentId(),reaction_count:0,from:r});const d=b.Ue({environment:t,table:h.yo,args:{id:l,spaceId:(0,f.C)(i.pointer.spaceId),commentId:i.id,icon:n,actorPointer:s},inMemoryRecordCache:i.inMemoryRecordCache,transaction:o}),c=(0,S.Vh)(i,i.pointer,"reactions");v.R3({parent:c,append:d,transaction:o})}({environment:o,transaction:i,commentStore:n,icon:s,currentActorPointer:l,discussionLocation:t})}var j=o(64921),k=o(73063),M=o(26388),I=o(11059),P=o(72187),L=o(31945),R=o(78140),T=o(28992),Z=o(66957),D=o(87279);var B=o(70775),_=o(85893);function V(e){let{reactionStores:t,initialIndex:o}=e;window.__c={n:"ReactionSheetContent"};const[n,s]=i.useState(o),l=(0,m.useIntl)(),a=(0,r.VK)((()=>t.map((e=>e.getIcon()))),[t]),d=(0,r.VK)((()=>t[n].getActorStores().map((e=>({id:e.id,store:e,name:e.getDisplayName(l)}))).filter(c.$K)),[t,n,l]);return(0,_.jsxs)(R.Z,{menuType:D.og.ActionSheet,children:[(0,_.jsx)(Z.Z,{tabStyle:{flex:1,justifyContent:"center",display:"flex",minWidth:60},tabs:a,selectedIndex:n,onChange:e=>s(e)}),d.map((e=>(0,_.jsx)(T.Z,{title:e.name,dontShrinkIcon:!0,icon:(0,_.jsx)(B.S,{authorStore:e.store,avatarSize:20,avatarStyle:{width:20,height:20},placeholderStyle:{width:20,height:20}})},e.id)))]})}function F(e){window.__c={n:"ReactionSheet"};const t=(0,s.Fy)(),o=(0,r.VK)((()=>e.commentStore.getUserVisibleReactions()),[e.commentStore]),n=(0,i.useRef)(null),l=function(e){const t=(0,s.O7)(),{onLongPress:o,hapticsEnabled:n=!0,timeout:r=300}=e,l=(0,i.useCallback)((()=>{var e,i,s;n&&(null!==(e=t.mobileNative)&&void 0!==e&&e.buzz?t.mobileNative.buzz():null===(i=(s=window.navigator).vibrate)||void 0===i||i.call(s,20)),o()}),[t.mobileNative,n,o]),a=(0,i.useRef)(),d=(0,i.useCallback)((()=>clearTimeout(a.current)),[]);return(0,i.useEffect)((()=>d),[d]),{onTouchStart:(0,i.useCallback)((()=>{clearTimeout(a.current),a.current=setTimeout(l,r)}),[r,l]),onTouchEnd:d,onTouchCancel:d}}({onLongPress:()=>{var e;return null===(e=n.current)||void 0===e?void 0:e.setOpen(!0)}});if(!t.isMobile)return(0,_.jsx)(_.Fragment,{children:e.children});const a=o.findIndex((t=>!e.reactionStore||t===e.reactionStore))??0;return(0,_.jsx)(L.ZP,{ref:n,renderOrigin:()=>(0,_.jsx)("div",{...l,children:e.children}),popupType:t.isTablet?L.Z4.Popup:L.Z4.SlideUp,render:()=>(0,_.jsx)(V,{initialIndex:a,reactionStores:o})},e.commentStore.id)}function A(){const{isMobile:e}=(0,s.Fy)();return(0,l.yK)((t=>({reaction:{display:"flex",margin:"1px",padding:"1px 6px 1px 6px",justifyContent:"center",gap:"4px",border:`1px solid ${t.regularDividerColor}`,borderRadius:"100px",fontSize:14,lineHeight:"20px",fontVariantNumeric:"tabular-nums",background:t.whiteButtonBackground},count:{color:t.mediumTextColor,fontSize:e?u.Z.fontSize.UISmall.mobile:u.Z.fontSize.UISmall.desktop,lineHeight:"20px"},countReacted:{color:t.blueColor},reacted:{background:a.ZP.blueWithAlpha(.08),border:`1px solid ${t.filterPillBorder}`,fontWeight:500},reactedHover:{background:a.ZP.blueWithAlpha(.18)},emojiStyle:{color:"black",display:"inline-block"}})),[e])}function K(e){let{store:t,disabled:o,onClick:i}=e;window.__c={n:"Reaction"};const n=(0,r.VK)((()=>t.getActors()),[t]),l=(0,r.VK)((()=>t.getIcon()),[t]),a=A(),{currentUser:d}=(0,s.O7)();if(!n||!l)return null;if(0===n.length)return null;const c=n.some((e=>e.id===d.id)),u={...a.reaction,...c&&a.reacted},m={...a.count,...c&&a.countReacted};return(0,_.jsx)(M.ZP,{textWrap:!0,style:{maxWidth:350,width:"max-content"},placement:M.ug.Bottom,delayThreshold:300,renderTooltip:()=>(0,_.jsx)(E,{store:t,icon:l}),render:e=>(0,_.jsxs)(j.Z,{disabled:o,style:u,hoveredStyle:c?a.reactedHover:void 0,onClick:i,...e,children:[(0,_.jsx)("span",{style:a.emojiStyle,children:(0,_.jsx)(I.Z,{size:14,char:l})}),(0,_.jsx)("span",{style:m,children:n.length})]})})}function E(e){let{store:t,icon:o}=e;window.__c={n:"ReactionTooltip"};const i=(0,l.yK)((e=>({text:{color:e.mediumInvertedTextColor}})),[]),n=(0,m.useIntl)(),s=(0,r.VK)((()=>t.getActorStores()),[t]),a=(0,r.VK)((()=>s.map((e=>e.getDisplayName(n))).filter(c.$K)),[s,n]);return a.length>5?(0,_.jsx)(m.FormattedMessage,{defaultMessage:"{additionalNames, plural, one {{names} and {additionalNames} other <medium>reacted with</medium> {icon}} other {{names} and {additionalNames} others <medium>reacted with</medium> {icon}}}",id:"ReactionBar.hoverTooltip.textAbbreviated",values:{additionalNames:a.length-5,names:a.slice(0,5).join(", "),medium:e=>(0,_.jsx)("span",{style:i.text,children:e}),icon:(0,_.jsx)(I.Z,{size:14,char:o})}}):(0,_.jsx)(m.FormattedMessage,{defaultMessage:"{numberOfNames, plural, one {{nameOrNames} <medium>reacted with</medium> {icon}} other {{nameOrNames} <medium>reacted with</medium> {icon}}}",id:"ReactionBar.hoverTooltip.text",values:{numberOfNames:a.length,nameOrNames:a.join(", "),medium:e=>(0,_.jsx)("span",{style:i.text,children:e}),icon:(0,_.jsx)(I.Z,{size:14,char:o})}})}function O(e){window.__c={n:"NewReaction"};const{commentStore:t,discussionLocation:o,onEmojiSelection:n,disableDropShadow:r}=e,a=(0,s.O7)(),c=(0,i.useRef)(null),u=(0,s.Fy)(),p=(0,l.yK)((e=>({container:{padding:2,display:"flex",boxShadow:e.lightBoxShadow,backgroundColor:e.buttonGroupBackground,borderRadius:u.isMobile?3:4,...r&&{borderWidth:1,borderStyle:"solid",borderColor:u.isMobile?"transparent":e.stroke.regular,borderRadius:6,boxShadow:void 0}},addIcon:{width:15,fill:e.mediumIconColor},iconButton:{height:22,width:22,flex:"0 0 auto"}})),[u.isMobile,r]),g=(0,m.useIntl)();return(0,_.jsx)("div",{style:p.container,children:(0,_.jsx)(k.Z,{hasBackground:!0,ariaLabel:g.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),showShadow:!1,icon:()=>(0,d.V)(p.addIcon),style:p.iconButton,ref:c,onClick:()=>U(a,g,t,null==c?void 0:c.current,o,n)})})}function N(e){let{commentStore:t,discussionLocation:o,onEmojiSelection:n}=e;window.__c={n:"NewInlineReaction"};const r=(0,l.Fg)(),a=(0,s.O7)(),c=(0,i.useRef)(null),u=A(),p=(0,m.useIntl)(),g=(0,d.V)({width:15,height:20,marginTop:.5,marginLeft:.5,fill:r.mediumIconColor});return(0,_.jsx)(j.Z,{style:{...u.reaction,minWidth:"2em"},ref:c,onClick:()=>U(a,p,t,null==c?void 0:c.current,o,n),children:g})}function U(e,t,o,i,s,r){const l=n.findDOMNode(i);if(!l)return;if(!(l instanceof Element))return;const a=l.getBoundingClientRect();p.$(e,{originGap:4,originRect:a,popupWidth:P.FZ,popupHeight:P.kX,isSmallWidth:!1,title:t.formatMessage({defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"}),currentTab:"emoji",tabs:[{type:"emoji",title:(0,_.jsx)(m.FormattedMessage,{defaultMessage:"Emojis",id:"recordIcon.emojiTab.title"}),hideRandomButton:!0,onChange:(t,i)=>{r&&r(),C.createAndCommit({environment:e,userAction:"Comment.toggleReactionFromMenu",perform:n=>{w({environment:e,transaction:n,commentStore:o,icon:t,discussionLocation:s}),i&&i.keepVisible||p.Z()}})}}]})}const z=function(e){window.__c={n:"ReactionBar"};const{parentStore:t,discussionLocation:o,onClick:i,disableDropShadow:n}=e,l=(0,r.VK)((()=>t.canComment()),[t]),a=(0,r.VK)((()=>t.getUserVisibleReactions()),[t]),d=(0,s.O7)();return(0,_.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginTop:"4px",marginBottom:"4px"},children:[a.map((e=>(0,_.jsx)(F,{reactionStore:e,commentStore:t,children:(0,_.jsx)(K,{disabled:!l,store:e,onClick:()=>{e.isDefined()&&(i&&i(),C.createAndCommit({environment:d,userAction:"Comment.toggleReaction",perform:i=>{w({environment:d,transaction:i,commentStore:t,icon:e.getIcon(),discussionLocation:o})}}))}})},e.id))),l&&a.length>0&&(0,_.jsx)(F,{commentStore:t,children:(0,_.jsx)(N,{commentStore:t,discussionLocation:o,onEmojiSelection:i})}),l&&0===a.length&&(0,_.jsx)(O,{commentStore:t,discussionLocation:o,onEmojiSelection:i,disableDropShadow:n})]})}},70418:(e,t,o)=>{o.r(t),o.d(t,{default:()=>re});var i=o(67294),n=o(480),s=o(86628),r=o(24405),l=o(23063),a=o(78316),d=o(82136),c=o(92650),u=o(14577),m=o(72126),p=o(44805),g=o(80503),h=o(51454),f=o(39500),x=o(49427),v=o(36391),S=o(24229),y=o(50628),b=o(17707),C=o(92120),w=o(48514),j=o(97880),k=o(41432),M=o(69651),I=o(37240),P=o(21202),L=o(19889),R=o(82990),T=o(9291),Z=o(76798),D=o(64369),B=o(67706),_=o(43250),V=o(65598),F=o(16402),A=o(26136),K=o(70775),E=o(85893);function O(e){let{discussionData:{groupedDiscussionsData:t,id:o},onClick:n}=e;window.__c={n:"GroupedMarginDiscussionItem"};const[l,a]=(0,i.useState)(!1),d=(0,i.useCallback)((()=>{a(!0)}),[]),u=(0,i.useCallback)((()=>{a(!1)}),[]),m=(0,i.useCallback)((async e=>{const o=t[0].discussionStore;await n(e,o)}),[n,t]),p=(0,s.VK)((()=>t.flatMap((e=>(0,V.D4)(e.discussionStore)))),[t]),g=(0,s.VK)((()=>{const e=t[0].parentBlockStore;return[...new Set(p.map((e=>e.getCreatedById())).filter(j.$K))].map((t=>A.U6.createChildStore(e,{table:L.KJ,id:t}))).slice(0,3)}),[t,p]),h=(0,s.VK)((()=>{const e=t[0].closestVisibleParentId,o=t[0].parentBlockStore;if(!e)return;const i=A.G.createChildStore(o,{table:P.iU,id:e}),n=i.getParentStore();return n&&n.table===P.iU&&n.getType()===k.Ti.tab?i:void 0}),[t]),f=(0,s.VK)((()=>{const e=p.map((e=>e.getLastEditedTime()));return Math.max(...e)}),[p]),x=(0,r.yK)((e=>({discussion:{border:`1px solid ${e.regularDividerColor}`,borderRadius:4,background:l?e.hoveredMarginDiscussionBackground:e.contentBackground,width:c.Z,display:"flex",padding:"10px 12px",cursor:"pointer"},userAvatarsContainer:{display:"flex",marginRight:6,justifyContent:"center",alignItems:"center",flexDirection:"row-reverse"},hiddenUsers:{fontSize:14,color:e.mediumTextColor,marginRight:6},commentCount:{fontSize:14,fontWeight:R.Z.fontWeight.semibold,whiteSpace:"normal",marginLeft:6},textPlaceholder:{background:e.lightDividerColor,height:14,width:81,borderRadius:4,marginLeft:4},lastEditedTime:{margin:"1px 0px 0px 6px",whiteSpace:"normal",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"21px"},commentAuthorAvatarStyle:{width:20,height:20,borderRadius:20,marginRight:-3,position:"relative",userSelect:"none",WebkitUserSelect:"none"},commentAuthorPlaceholderStyle:{width:20,height:20,borderRadius:20,marginRight:-3,position:"relative"},secondaryLabel:{fontSize:R.Z.fontSize.UISmall.desktop,marginLeft:4,color:e.lightTextColor,marginTop:1,whiteSpace:"normal",display:"flex",justifyContent:"center",alignItems:"center",lineHeight:"21px"},expandIcon:{width:R.Z.fontSize.UISmall.desktop,height:R.Z.fontSize.UISmall.desktop,fill:e.lightTextColor,marginTop:1}})),[l]);return(0,E.jsx)("div",{style:x.discussion,onMouseEnter:d,onMouseLeave:u,onClick:m,className:_.S9A,children:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:x.userAvatarsContainer,children:g.map((e=>(0,E.jsx)(K.S,{authorStore:e,avatarSize:20,avatarStyle:x.commentAuthorAvatarStyle,placeholderStyle:x.commentAuthorPlaceholderStyle},e.id)))}),p.length>0?(0,E.jsx)("div",{style:x.commentCount,children:(0,E.jsx)(T.FormattedMessage,{defaultMessage:"{numComments, plural, one {{numComments} comment} other {{numComments} comments}}",id:"marginComments.collapsed.numComments.count",values:{numComments:p.length}})}):(0,E.jsx)("div",{style:x.textPlaceholder}),l?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{style:{marginLeft:10,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,I.s)(x.expandIcon)}),(0,E.jsx)("div",{style:x.secondaryLabel,children:(0,E.jsx)(T.FormattedMessage,{defaultMessage:"Expand",id:"marginComments.collapsed.expand.label"})})]}):f&&(0,E.jsx)(D.Z,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:x.lastEditedTime,children:(0,E.jsx)(B.Z,{text:(0,F.IS)(f),tooltipText:(0,F.uy)(f),icon:M.C})}),h&&(0,E.jsx)("div",{style:x.secondaryLabel,children:(0,E.jsx)(Z.Z,{store:h,maxLength:10})})]})})}var N=o(74725),U=o(18821),z=o(34047),W=o(55541);function H(e){let{discussionData:{parentBlockStore:t,discussionInputStore:o},isVisible:s}=e;window.__c={n:"NewMarginDiscussionItem"};const l=(0,i.useRef)(null),a=(0,n.O7)(),d=(0,i.useCallback)((()=>{U.ZL(a)}),[a]),u=(0,i.useCallback)((()=>{U.uK(o,a)}),[a,o]),m=(0,i.useMemo)((()=>[`.${_.mJW}`]),[]);(0,N.O)({active:s,closeHandler:u,ref:l,excludedSelectors:m,ignoreKeydown:!0});const p=(0,r.yK)((e=>({discussion:{borderRadius:6,boxShadow:e.marginDiscussionSelectedShadow,width:c.Z,background:e.selectedMarginDiscussionBackground},discussionInputContainer:{borderRadius:6,padding:"6px 4px 4px 8px"}})),[]);return(0,E.jsx)("div",{style:p.discussion,ref:l,className:_.S9A,children:(0,E.jsx)(W.default,{parentStore:t,discussionInputStore:o,shouldSaveUnsentComments:!1,isMobileSlideUpMenu:!1,discussionFormat:z.O2.Margin,onSubmit:d,onCancel:u,isNewComment:!0,blockStore:t,canDrop:!0,showAvatar:!1,containerStyle:p.discussionInputContainer,showCtaButtons:!0})})}var $=o(22491),X=o(85344),G=o(54564),q=o(89574),Y=o(82994),Q=o(43590);function J(e){let{discussionData:{discussionStore:t,parentBlockStore:o},timeMounted:s,onClick:l,isVisible:a,isDiscussionSelected:d,isDiscussionHovered:u}=e;window.__c={n:"SingleMarginDiscussionItem"};const m=(0,i.useRef)(null),p=(0,n.O7)(),[g,h]=(0,i.useState)((()=>new Y.Z(p,t.pointer.spaceId))),f=t.id,x=(0,i.useMemo)((()=>[`.${(0,$.dk)({discussionId:f})}`,`.${_.mJW}`,`.${_.S9A}`]),[f]),v=(0,i.useCallback)((async()=>{const e=q.Z.find((e=>e.isEditing()));if(e){if(!(await e.handleCancelEdit()))return}G.LZ()}),[]);(0,N.O)({active:a&&d,closeHandler:v,ref:m,excludedSelectors:x,ignoreKeydown:!0});const S=(0,r.yK)((e=>({discussion:{border:d?void 0:`1px solid ${e.lightDividerColor}`,borderRadius:6,padding:d?"1px":void 0,background:d?e.selectedMarginDiscussionBackground:u?e.hoveredMarginDiscussionBackground:e.contentBackground,boxShadow:d?e.marginDiscussionSelectedShadow:void 0,width:c.Z,willChange:"transform",transition:"transform 200ms ease",transform:d?"translateX(-20px)":u?"translateX(-5px)":void 0,cursor:d?void 0:"pointer"}})),[u,d]),y=(0,i.useCallback)((async e=>{d||(X.Uw(p,{discussion_id:t.id,from:"margin_comments",parent_block_id:t.getParentId()}),await l(e,t))}),[l,t,d,p]);return(0,E.jsx)("div",{style:S.discussion,onClick:y,ref:m,className:_.S9A,children:(0,E.jsx)(Q.default,{store:t,blockStore:o,format:z.O2.Margin,isFirst:!1,isOnly:!1,showResolveButtonByDefaultIfPossible:!1,discussionLocation:"margin_comments",showAllRepliesAfterTimestamp:s,discussionInputStore:g,collapsed:!d})})}const ee=i.memo(J);function te(e){window.__c={n:"MarginDiscussionItem"};const{discussionData:t,isLastItem:o,isDiscussionSelected:n,discussionItemElementMap:s}=e,l=(0,r.yK)((()=>({discussionContainer:{transition:"background 300ms ease\n\t\t\t\t"+(t.hide?"":", top 200ms ease-in-out"),top:t.offsetTop,position:"absolute",paddingBottom:o?c.Vs:c.wo,zIndex:n?1:void 0,opacity:t.hide?0:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",pointerEvents:"auto"}})),[t.hide,t.offsetTop,n,o]);let a;const d=t.type;"existing"===d?a=(0,E.jsx)(ee,{...e,discussionData:t}):"new"===d?a=(0,E.jsx)(H,{...e,discussionData:t}):"grouped"===d?a=(0,E.jsx)(O,{...e,discussionData:t}):(0,j.t1)(d);const u=(0,i.useCallback)((()=>{C.Z.setState({source:"margin_comments",discussionIds:[t.id]})}),[t.id]),m=(0,i.useCallback)((()=>{C.Z.setState({discussionIds:[]})}),[]),p=(0,i.useCallback)((e=>{s.set(t.id,e)}),[t.id,s]);return(0,E.jsx)("div",{style:l.discussionContainer,onMouseEnter:u,onMouseLeave:m,ref:p,children:a})}const oe=i.memo(te),ie=`.${p.zd}, .${p.FB}`;function ne(e){let{pageBlockStore:t,timeMounted:o,isVisible:l,animating:a,pageViewBlockAccessor:d,width:p}=e;window.__c={n:"MarginCommentsContent"};const j=(0,n.O7)(),k=(0,i.useRef)(null),M=(0,i.useRef)(new Map),I=(0,i.useRef)(new Map),P=(0,s.VK)((()=>C.Z.getFirstSelectedDiscussionId()),[]),L=(0,i.useCallback)((async(e,o)=>{(0,f.X9)()||e.target instanceof Element&&e.target.closest(ie)||await b.Ri({discussionStore:o,currentBlockStore:t,environment:j,analyticsFrom:"margin_comments",currentEl:k.current})}),[t,j]),[R,T]=(0,i.useState)({data:[],hasNewDiscussion:!1,selectedDiscussion:void 0}),[Z,D]=(0,i.useState)(!1),{WindowSizeStore:B}=j,_=g.R6(j.device.isElectronMac);(0,i.useEffect)((()=>{if(!l)return;const e=new u.Z((()=>({selectableRectMap:y.Z.state.selectableRectMap,pageContentStores:t.getContentStores(),sidebarIsAnimating:v.ZP.state.isAnimating,windowHeight:B.state.height})),{debugName:"effectDataStore"}),o=new u.Z((()=>c.EM.state),{debugName:"discussionStoresStore"}),i=new u.Z((()=>{const e=w.Z.state;if(e.open&&e.rect&&x.Z.isBlockInFrame(e.blockStore))return{blockStore:e.blockStore,discussionInputStore:e.discussionInputStore}}),{debugName:"newMarginDiscussionArgsStore"}),n=new u.Z((()=>S.Z.getFramePageFirstSelectedDiscussionId()),{debugName:"selectedDiscussionIdStore"});let s=!1;const r=(0,m.Ds)((()=>{const{selectableRectMap:r,pageContentStores:l,sidebarIsAnimating:u,windowHeight:m}=e.state,p=o.state,g=i.state,h=n.state;if(a||u)return;const f=d();if(!(f&&k.current&&r&&r.size))return;(0,c.H0)({discussionStores:p,pageContentStores:l,marginDiscussionItemRefs:M.current,selectedDiscussionId:h,newMarginDiscussionArgs:g,marginContainerElement:k.current,pageViewBlockElement:f,onComputeComplete:(e,t)=>{s||(I.current=t,Z||D(!0),T(e))},computedOnce:Z,topbarHeight:_,windowHeight:m,isFullWidth:t.isFullWidth(),prevSelectedDiscussionId:R.selectedDiscussion,previousDiscussionElements:I.current})}),5);return e.addListener(r),o.addListener(r),n.addListener(r),i.addListener(r),()=>{s=!0,e.removeListener(r),o.removeListener(r),n.removeListener(r),i.removeListener(r)}}),[l,a,d,Z,t,R.selectedDiscussion,B,_]);const V=(0,r.yK)((()=>({marginCommentsContainer:{display:"flex",flexDirection:"column",paddingTop:8,paddingBottom:8,paddingLeft:c.fS,paddingRight:c.fS,width:p-2*c.fS,flexShrink:0,height:"100%",position:"relative",pointerEvents:"none",zIndex:h.p8}})),[p]);return(0,E.jsx)("div",{style:V.marginCommentsContainer,ref:k,children:R.data.map(((e,t)=>(0,E.jsx)(oe,{discussionData:e,timeMounted:o,onClick:L,isVisible:l,discussionItemElementMap:M.current,isDiscussionSelected:e.selected||"new"===e.type,isDiscussionHovered:e.id===P,isLastItem:t===R.data.length-1},`margin-discussion-${e.id}`)))})}const se=i.memo(ne);function re(e){let{pageBlockStore:t,isVisible:o,pageViewBlockAccessor:u,context:m,isCollapsedAnchor:p}=e;window.__c={n:"MarginCommentsSection"};const[g,h]=(0,i.useState)(!1),f=(0,n.O7)(),x=(0,i.useMemo)((()=>(new Date).getTime()),[]),v=(0,s.VK)((()=>t.isFullWidth()||m===d.S.CollectionPageView),[m,t]),S=(0,s.VK)((()=>p?{paddingLeft:v?96:42,height:0}:v?void 0:{position:"absolute",right:(0,c.oS)(f,(0,a.en)(t),(0,a.Ks)(t))}),[v,f,t,p]),y=(0,i.useCallback)((()=>{h(!0)}),[]),b=(0,i.useCallback)((()=>{h(!1)}),[]),C=(0,r.yK)((()=>({marginCommentsSection:{display:o||g?"flex":"none",flexShrink:0,pointerEvents:"none",width:o?c.QB:0,...S}})),[o,g,S]);return(0,E.jsx)(l.Z,{isVisible:!0,animationStyle:{opacity:o?1:0},onAnimationStart:y,onAnimationEnd:b,render:()=>(0,E.jsx)("div",{style:C.marginCommentsSection,children:(0,E.jsx)(se,{pageBlockStore:t,timeMounted:x,isVisible:o,animating:g,pageViewBlockAccessor:u,width:c.QB})})})}},67706:(e,t,o)=>{o.d(t,{Z:()=>a});o(67294);var i=o(24405),n=o(82990),s=o(53437),r=o(26388),l=o(85893);function a(e){let{text:t,tooltipText:o,icon:a}=e;window.__c={n:"InlineTextWithIconTooltip"};const d=(0,i.yK)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.lightBoxShadow},container:{display:"flex",alignItems:"center",fontWeight:n.Z.fontWeight.regular,color:e.mediumTextColor,fontSize:n.Z.fontSize.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,l.jsx)(r.ZP,{style:d.tooltip,render:e=>(0,l.jsx)("div",{style:d.text,...e,children:t}),renderTooltip:()=>(0,l.jsxs)("div",{style:d.container,children:[a(d.icon),(0,l.jsx)("div",{children:o})]}),alignment:s.ZP.Alignment.Start,placement:s.ZP.Placement.Bottom})}},12740:(e,t,o)=>{o.d(t,{Z:()=>_});o(57658);var i=o(67294),n=o(480),s=o(86628),r=o(24405),l=o(6695),a=o(72126),d=o(4615),c=o(21202),u=o(19889),m=o(82990),p=o(9291),g=(o(95477),o(66890)),h=o(80444),f=o(77556),x=o(88632),v=o(77080),S=o(19671),y=o(26136),b=o(76117),C=o(88893),w=o(88280),j=o(97039),k=o(78030),M=o(45653),I=o(29551),P=o(99036),L=(o(51365),o(33929)),R=(o(61766),o(13023),o(24118)),T=(o(53876),o(12867),o(85893));R.Ae;function Z(e){return(0,s.VK)((()=>{if(!e)return{collectionStore:void 0,schema:void 0,format:void 0};const t=e.getAssociatedCollectionStore();let o,i;return o=t?t.getSchema():P.Kc(L.default.getIntl()),t&&(i=l.iB(t.getFormat(),o,void 0,l.j5.Collection)),{collectionStore:t,schema:o,format:i}}),[e])}const D=["Title","Pronoun","Teams (via Teams DB)","Office","Manager","Languages (Fluency)","Tenure"],B={"Teams (via Teams DB)":"Teams","Languages (Fluency)":"Languages"};function _(e){let{targetUserStore:t}=e;window.__c={n:"PeopleProfilePopup"};const o=(0,r.yK)((e=>({wrapper:{minWidth:100,maxWidth:300},profile:{padding:"10px 12px 12px 10px"},content:{padding:"8px 10px 10px"},breadcrumb:{color:e.text.secondary},profileTitle:{paddingLeft:20,fontSize:18,lineHeight:1.25,fontWeight:m.Z.fontWeight.semibold,color:e.text.primary},profileSubtitle:{paddingLeft:20,paddingTop:2,fontSize:m.Z.fontSize.UISmall.desktop,color:e.icon.primary,paddingBottom:1},profileKeyRow:{minWidth:80},profileKeyText:{textTransform:"capitalize",fontWeight:500},description:{padding:"6px 8px 12px 20px",fontSize:m.Z.fontSize.UISmall.desktop,color:e.icon.primary,borderTop:`1px solid ${e.regularDividerColor}`}})),[]),a=(0,s.VK)((()=>h.default.state.currentSpaceStore),[]),u=(0,s.VK)((()=>h.default.state.currentUserStore),[]),p=(0,s.VK)((()=>!!t&&t.isDefined()),[t]),x=(0,s.VK)((()=>{if(!t)return;const e=t.getEmail();if(!e)return;const o=v.default.getConfigKey("notion_people_block_id","data")[e];if(!o)return;return y.G.createChildStore(t,{table:c.iU,id:(0,d.Mt)(o)})}),[t]),{collectionStore:b,schema:C,format:w}=Z(x),M=function(e){let{collectionStore:t,format:o,schema:i,userPeopleCollectionPage:n}=e;return(0,s.VK)((()=>{var e;if(!(t&&o&&i&&n))return;const s=l.iB(o,i,void 0,l.j5.Collection),r=null==s||null===(e=s.collection_page_properties)||void 0===e?void 0:e.filter((e=>{var t;const o=null===(t=i[e.property])||void 0===t?void 0:t.name;return void 0!==o&&D.includes(o)}));if(!r)return;const a={};return r.forEach((e=>{var o;a[(null===(o=i[e.property])||void 0===o?void 0:o.name)||""]=(0,T.jsx)(j.Z,{store:n,property:e.property,locked:!0,disabled:!0,format:k.C.Page,onTab:()=>{},onUntab:()=>{},tableWrap:!1,blockPropertyValueOverlayStore:S.Z,showRelationTooltip:!1,collectionStore:t})})),a}),[t,i,o,n])}({collectionStore:b,format:w,schema:C,userPeopleCollectionPage:x}),P=(0,n.O7)(),L=(0,i.useMemo)((()=>new f.Z(P)),[P]);(0,i.useEffect)((()=>{b&&L.setContext({type:"collectionPage",collectionStore:b})}),[L,b]);const R=(0,s.VK)((()=>!!(t&&u&&p)&&t.id===u.id),[t,u,p]);return t&&p&&a?x&&L&&M?(0,T.jsx)("div",{style:o.wrapper,children:(0,T.jsx)(g.L1,{value:L,children:(0,T.jsxs)(I.Ht,{children:[(0,T.jsx)(I.gq,{gap:3,alignItems:"center",style:o.profile,children:(0,T.jsx)(V,{userStore:t,styles:o})}),(0,T.jsxs)("div",{style:o.description,children:[(0,T.jsx)(F,{userProfile:M,styles:o}),R?(0,T.jsx)(I.gq,{gap:1,alignItems:"center",children:(0,T.jsx)(A,{spaceStore:a,limit:5,styles:o})}):void 0]})]})})}):(0,T.jsx)("div",{style:o.wrapper,children:(0,T.jsxs)(I.Ht,{children:[(0,T.jsx)(I.gq,{gap:3,alignItems:"center",style:o.profile,children:(0,T.jsx)(V,{userStore:t,styles:o})}),R?(0,T.jsx)("div",{style:o.description,children:(0,T.jsx)(I.gq,{gap:1,alignItems:"center",children:(0,T.jsx)(A,{spaceStore:a,limit:5,styles:o})})}):void 0]})}):null}function V(e){let{userStore:t,styles:o}=e;window.__c={n:"UserContactCard"};const i=(0,p.useIntl)(),{name:n,email:r}=(0,s.VK)((()=>({name:t.getFullName(i),email:t.getEmail()})),[t,i]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(M.Z,{userStore:t,size:70,borderStyle:"none"}),(0,T.jsxs)(I.Ht,{gap:1,children:[(0,T.jsx)("div",{style:o.profileTitle,children:n}),(0,T.jsx)("div",{style:o.profileSubtitle,children:r})]})]})}function F(e){let{userProfile:t,styles:o}=e;return t?(0,T.jsx)(T.Fragment,{children:D.filter((e=>t[e])).map((e=>(0,T.jsxs)(I.gq,{gap:1,alignItems:"center",children:[(0,T.jsx)(I.Ht,{children:(0,T.jsx)(I.gq,{style:o.profileKeyRow,children:(0,T.jsx)("div",{style:o.profileKeyText,children:B[e]?B[e]:e})})}),(0,T.jsx)(I.Ht,{style:{transform:"scale(0.9)",transformOrigin:"center left"},children:t[e]})]},e)))}):null}function A(e){let{spaceStore:t,limit:o,styles:i}=e;window.__c={n:"UserSimilarity"};const{userSimilarityList:n}=(0,s.VK)((()=>{const e=w.subscriptionDataStoreInstance.state,i=e?C.CM(e):[],n=b.p.state||{},s=i.map((e=>{const t=n[e.userId];return{id:e.userId,similarity:t||0}})).sort(((e,t)=>t.similarity-e.similarity)).slice(0,o),r=[],l=a.yW(s.map((e=>{const o=y.U6.createChildStore(t,{table:u.KJ,id:e.id});return r.push({id:e.id,similarity:e.similarity,userStore:o}),o.isReady()})));return{isOnline:x.Z.state.online,subscriptionDataStoreData:e,userSimilarityData:b.p.state||{},visibleUsersLoaded:l,visibleUsers:i,userSimilarityList:r}}),[t,o]);return t&&n&&0!==n.length?(0,T.jsxs)(I.gq,{gap:1,alignItems:"center",style:{paddingTop:4},children:[(0,T.jsx)(I.Ht,{children:(0,T.jsx)(I.gq,{style:i.profileKeyRow,children:(0,T.jsx)("div",{style:i.profileKeyText,children:"Coworkers"})})}),(0,T.jsx)(I.Ht,{children:(0,T.jsx)(I.gq,{gap:5,children:(0,T.jsx)("div",{children:(0,T.jsx)("div",{style:{display:"flex",position:"relative",float:"right"},children:n.map((e=>(0,T.jsx)("div",{style:{marginLeft:1.5},children:(0,T.jsx)(M.Z,{userStore:e.userStore,size:18})},e.id)))})})})})]}):null}},93963:(e,t,o)=>{o.d(t,{z:()=>r});o(67294);var i=o(24405),n=o(9291),s=o(85893);function r(e){let{color:t,size:o,style:r}=e;window.__c={n:"StatusDot"};const l=(0,n.useIntl)(),a=(0,i.yK)((e=>({dot:{height:o||8,width:o||8,background:t||e.blueColor,flexShrink:0,borderRadius:"100%",pointerEvents:"none",...r}})),[o,t,r]);return(0,s.jsx)("div",{role:"img","aria-label":l.formatMessage({id:"statusDot.ariaLabel",defaultMessage:"New"}),style:a.dot})}},66957:(e,t,o)=>{o.d(t,{Z:()=>u});var i=o(67294),n=o(480),s=o(86628),r=o(24405),l=o(87279),a=o(89728),d=o(85893);function c(e){let{tabs:t,selectedIndex:o,onChange:c,separatorIndexes:u,right:m,style:p,rightStyle:g,tabStyle:h,tabTitleStyle:f,tabBorderStyle:x,selectedTabStyle:v,readOnly:S,hideTabBorder:y}=e;window.__c={n:"TabBarMenuItem"};const b=(0,i.useContext)(l.Xp),{device:C,WindowSizeStore:w}=(0,n.O7)(),{safePaddingLeft:j,safePaddingRight:k}=(0,s.VK)((()=>({safePaddingLeft:w.getSafePaddingLeftCSS(16),safePaddingRight:w.getSafePaddingRightCSS(16)})),[w]),M=(0,r.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...h},o=`inset 0 -1px 0 ${e.regularDividerColor}`,i=b.menuType===l.og.Popup,n={fontSize:16,paddingTop:2,paddingLeft:i?16:j,paddingRight:i?16:k,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:y?void 0:o,...C.isMobile?n:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...p},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...v},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...x},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...g}}}),[b.menuType,C.isMobile,g,j,k,v,p,x,h,y]);return(0,d.jsxs)("div",{className:"hide-scrollbar",style:M.container,children:[t.map(((e,t)=>{const n=t===o;return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsxs)("div",{style:n?M.selectedTab:M.tab,children:[(0,d.jsx)(a.Z,{style:f,onClick:()=>c(t),disabled:S,mobileFeedback:C.isMobile,children:e}),n&&(0,d.jsx)("div",{style:M.border})]},`tabButton-${t}`),u&&u.includes(t)&&(0,d.jsx)("div",{style:M.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),m&&(0,d.jsx)("div",{style:M.rightContainer,children:m})]})}const u=i.memo(c)},41883:(e,t,o)=>{o.d(t,{Z:()=>Z});var i=o(67294),n=o(480),s=o(72126),r=o(9291),l=o(96802),a=o(82530),d=o(79131),c=o(87167),u=o(1302),m=o(99036),p=o(51365),g=o(66890),h=o(78030),f=o(80559),x=o(86628),v=o(24405),S=o(80951),y=o(42875),b=o(47453),C=o(33929),w=o(1018),j=o(85526),k=o(97039),M=o(52275),I=o(85893);function P(e){window.__c={n:"PagePropertiesRowValue"};const{property:t,store:o,disabled:s,canConfigureCollection:l,onTab:a,onUntab:d,schema:c,blockPropertyValueOverlayStore:u,collectionStore:m}=e,f=(0,n.O7)(),{device:P,currentUser:L}=f,R=(0,v.Fg)(),T=(0,g.Y$)(),Z=c[t],D=(0,v.yK)((()=>({propertyOuter:{display:"flex",alignItems:"left",marginLeft:4,height:"100%",flex:"auto",flexDirection:"column",minWidth:0},property:{display:"flex",alignItems:"center",marginLeft:4,height:"100%",flex:"auto",minWidth:0},addPageButton:{fontSize:14,minHeight:w.wI,color:R.lightTextColor,background:void 0,boxShadow:void 0}})),[R.lightTextColor]),B=(0,i.useCallback)((()=>{j.Z.setState({...j.Z.state,hoveredProperty:e.property})}),[e.property]),_=(0,i.useCallback)((()=>{j.Z.setState({...j.Z.state,hoveredProperty:void 0})}),[]),V=(0,i.useCallback)((()=>{p.bA({environment:f,blockPropertyValueOverlayStore:u,store:o,property:t,format:h.C.Page,collectionContextStore:T})}),[f,u,o,t,T]),F=(0,x.VK)((()=>P.isMobile&&!s&&"relation"===(null==Z?void 0:Z.type)&&o.isDefined()&&!S.wV({block:o.getModel(),property:t,schema:c,getRecordModel:o.getRecordModel,userId:L.id,userTimeZone:(0,y.r)(),intl:C.default.getIntl()})),[L.id,P.isMobile,s,t,Z,c,o]);return(0,I.jsxs)("div",{role:"cell",style:D.propertyOuter,children:[(0,I.jsx)("div",{style:D.property,onMouseMove:B,onMouseLeave:_,children:(0,I.jsx)(k.Z,{store:o,property:t,locked:!l,disabled:s,format:h.C.Page,onTab:a,onUntab:d,tableWrap:!1,blockPropertyValueOverlayStore:u,onOpenProperty:V,showRelationTooltip:!0,collectionStore:m})},t),F&&(0,I.jsx)(M.Z,{focused:!1,icon:(0,b.R)({width:14,fill:R.lightIconColor}),buttonStyle:{marginRight:0,width:"calc(100% - 4px)"},style:D.addPageButton,title:(0,I.jsx)(r.FormattedMessage,{id:"pagePropertyRowValue.addRelationButtonMessage",defaultMessage:"Add page"}),onClick:V})]})}const L=i.memo(P);function R(e){window.__c={n:"PagePropertyRow"};const{schema:t,format:o,store:r,collectionStore:l,disabled:a,locked:d,blockPropertyValueOverlayStore:m,isInPeekRenderer:x,property:v,mergedProperties:S,dragHandleStyle:y,hideDragHandle:b,disablePropertyName:C}=e,w=(0,i.useId)(),j=(0,n.O7)(),k=(0,g.Y$)(),M=(0,c.v)(l),P=(0,i.useCallback)((()=>{const e=m.state;if(!e.isOpen)return;const o=S,i=o.findIndex((t=>t.property===e.property)),n=o.find(((e,o)=>o>i&&T(t,e.property)))||o.find(((e,o)=>T(t,e.property)));n&&u.default.afterNextFlush((()=>{p.bA({environment:j,blockPropertyValueOverlayStore:m,store:r,property:n.property,format:h.C.Page,collectionContextStore:k})})),p.xv({environment:j,blockPropertyValueOverlayStore:m})}),[m,k,j,S,t,r]),R=(0,i.useCallback)((()=>{const e=m.state;if(!e.isOpen)return;const o=S,i=o.findIndex((t=>t.property===e.property)),n=s.dF(o,((e,o)=>o<i&&T(t,e.property)))||s.dF(o,((e,o)=>T(t,e.property)));n&&u.default.afterNextFlush((()=>{p.bA({environment:j,blockPropertyValueOverlayStore:m,store:r,property:n.property,format:h.C.Page,collectionContextStore:k})})),p.xv({environment:j,blockPropertyValueOverlayStore:m})}),[m,k,j,S,t,r]);return(0,I.jsxs)("div",{role:"row","aria-labelledby":w,style:{display:"flex",paddingBottom:4,width:"100%"},children:[(0,I.jsx)(f.Z,{schema:t,format:o,property:v,collectionStore:l,disabled:Boolean(a||C),locked:d,canConfigureCollection:M,isInPeekRenderer:x,dragHandleStyle:y,hideDragHandle:b,propertyNameAriaId:w,blockStore:r}),(0,I.jsx)(L,{schema:t,property:v,store:r,collectionStore:l,disabled:a||d,canConfigureCollection:M,onTab:P,onUntab:R,blockPropertyValueOverlayStore:m})]},v)}function T(e,t){const o=e[t];return Boolean(o&&!m.uk.includes(o.type))}function Z(e){window.__c={n:"PageProperties"};const{disabled:t,locked:o,collectionStore:u,format:m,mergedProperties:p,showHiddenProperties:g,hideDragHandle:h}=e,f=(0,n.O7)(),x=(0,r.useIntl)(),v=p,S=(0,c.v)(u),y=(0,i.useMemo)((()=>v.filter((e=>"section"!==e.visibility&&(!!g||"hide"!==e.visibility&&!("hide_if_empty"===e.visibility&&!e.hasValue)))).map((e=>e.property))),[v,g]),b=(0,i.useCallback)((e=>{const t=m.collection_page_properties||[],o=[...s.oA(e.map((e=>t.find((t=>t.property===e))))),...t.filter((t=>!e.includes(t.property)))];a.createAndCommit({userAction:"PageProperties.handleReorder",environment:f,perform:e=>{l.FH({stores:[u],update:{collection_page_properties:o},transaction:e})}})}),[u,f,m.collection_page_properties]),C=x.formatMessage({id:"pageProperties.tableLabel",defaultMessage:"Page properties"});return t||o||!S||h?(0,I.jsx)("div",{role:"table","aria-label":C,style:d.yA,children:y.map(((t,o)=>(0,I.jsx)("div",{children:(0,I.jsx)(R,{...e,property:t})},o)))}):(0,I.jsx)(d.ZP,{role:"table","aria-label":C,direction:"vertical",keys:y,renderKey:t=>(0,I.jsx)(R,{...e,property:t}),onDrop:b})}},12867:(e,t,o)=>{o.d(t,{Uv:()=>R,ZP:()=>T});var i=o(67294),n=o(480),s=o(86628),r=o(24405),l=o(56666),a=o(47453),d=o(9291),c=o(16956),u=o(5149),m=o(66890),p=o(68641),g=o(98742),h=o(61766),f=o(97039),x=o(78030),v=o(51774),S=o(23063),y=o(64921),b=o(31945),C=o(1743),w=o(53437),j=o(26388),k=o(80559),M=o(87167),I=o(41883),P=o(65091),L=o(85893);const R=130;function T(e){window.__c={n:"PagePropertiesCompact"};const{store:t,collectionStore:o,blockPropertyValueOverlayStore:l,compactProperties:a,disabled:d,locked:c,format:u,isInPeekRenderer:p,hiddenProperties:g,rowLength:v}=e,y=(0,s.VK)((()=>o.getSchema()),[o]),[b,C]=(0,i.useState)(!1),w=(0,M.v)(o),j=(0,n.Fy)(),I=(0,s.qz)(void 0,h.Z),P=(0,m.Y$)(),R=(0,r.yK)((()=>({PagePropertiesCompactRow:{display:a.length>v?"grid":"flex",justifyContent:"flex-start",gridTemplateColumns:`repeat(${v}, 1fr)`,columnGap:10,rowGap:4,marginTop:2,marginBottom:6}})),[a.length,v]),T=(0,i.useCallback)((()=>{C(!0)}),[]),D=(0,i.useCallback)((()=>{C(!1)}),[]);return(0,L.jsx)("div",{style:R.PagePropertiesCompactRow,onMouseEnter:T,onMouseLeave:D,children:a.map(((e,i)=>{const n=i===a.length-1;return(0,L.jsxs)("span",{style:{flexShrink:1,display:n?"flex":void 0},children:[(0,L.jsxs)("span",{style:{flex:1,overflow:"hidden"},children:[(0,L.jsx)(k.Z,{schema:y,format:u,hideIcon:!0,hideDragHandle:!0,property:e.property,blockStore:t,collectionStore:o,disabled:d,locked:c,canConfigureCollection:w,isInPeekRenderer:p,style:{height:24,width:"100%"}}),(0,L.jsx)(f.Z,{store:t,collectionStore:o,blockPropertyValueOverlayStore:l,property:e.property,format:x.C.CompactPage,disabled:d,locked:c,tableWrap:!1})]}),n&&(0,L.jsx)(S.Z,{isVisible:b||j.isMobile,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1,marginLeft:"auto"},exitAnimationStyle:{opacity:0},render:()=>(0,L.jsx)(Z,{onClose:D,hiddenProperties:g,canConfigureCollection:w,store:t,collectionStore:o,collectionContextStore:P,blockPropertyValueOverlayStore:l,disabled:d,locked:c,isInPeekRenderer:p,format:u,buttonPopupStore:I})})]},e.property)}))})}const Z=i.memo((e=>{window.__c={n:"CompactPropertyActionButton"};const{hiddenProperties:t,canConfigureCollection:o,collectionStore:m,isInPeekRenderer:h,buttonPopupStore:f,collectionContextStore:x,hideDragHandle:S,overflowButtonWrapperStyle:k,overflowButtonStyle:M}=e,R=(0,n.Fy)(),T=(0,n.O7)(),Z=(0,s.VK)((()=>m.getSchema()),[m]),D=(0,r.yK)((e=>({overflowIcon:{width:16,height:16,fill:e.mediumIconColor},pagePropertiesOverflow:{width:"100%",fontSize:14,padding:S?"10px":"10px 10px 10px 28px",maxHeight:500,overflowY:"scroll"},overflowButtonWrapper:{display:"flex",alignItems:"center",paddingBottom:8,...k},overflowButton:{display:"flex",width:32,height:32,borderRadius:4,justifyContent:"center",alignItems:"center",...M}})),[S,k,M]),B=(0,i.useCallback)((()=>{c.fH({environment:T,collectionContextStore:x,collectionStore:m,isInPeekRenderer:h,onCloseMenu:()=>{f.setState({open:!1})}})}),[T,x,m,h,f]);return t.length?(0,L.jsx)(b.ZP,{onClose:e.onClose,popupWrapStyle:{width:500},buttonPopupStore:f,popupType:R.isMobile?w.kQ.SlideUp:w.kQ.Popup,render:()=>(0,L.jsx)(C.Z,{capture:!0,children:(0,L.jsxs)("div",{style:D.pagePropertiesOverflow,children:[(0,L.jsx)(I.Z,{showHiddenProperties:!0,schema:Z,mergedProperties:t,format:e.format,store:e.store,collectionStore:e.collectionStore,disabled:e.disabled,locked:e.locked,blockPropertyValueOverlayStore:e.blockPropertyValueOverlayStore,isInPeekRenderer:e.isInPeekRenderer,hideDragHandle:S}),o&&(0,L.jsx)(P.le,{collectionStore:m,isInPeekRenderer:h})]})}),renderOrigin:e=>(0,L.jsx)("div",{style:D.overflowButtonWrapper,children:(0,L.jsx)(j.ZP,{renderTooltip:()=>(0,L.jsx)(d.FormattedMessage,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.compact.showMoreTooltip",values:{num:t.length}}),placement:j.ug.Bottom,render:t=>(0,L.jsx)(y.Z,{style:D.overflowButton,mobileFeedback:R.isMobile,...(0,g.Z)(e,t),children:(0,l.o)(D.overflowIcon)})})})}):o?(0,L.jsx)("div",{style:D.overflowButtonWrapper,children:(0,L.jsx)(j.ZP,{renderTooltip:()=>(0,L.jsx)(d.FormattedMessage,{defaultMessage:"Add a property",id:"database.pageProperties.compact.addPropertyButtonTitle"}),placement:j.ug.Bottom,render:t=>(0,L.jsx)(b.ZP,{popupType:T.device.isMobile?w.kQ.SlideUp:w.kQ.Popup,onClose:e.onClose,buttonPopupStore:f,originGap:1,alignmentToOrigin:b.vR.Start,render:()=>(0,L.jsx)(v.P,{context:p.HV.TopbarFilterPopup,collectionContextStore:x,collectionSettingsStore:x.settingsStore,hideDesktopHeader:!0}),onClick:B,onDismiss:()=>{const e=x.settingsStore;u.E3({collectionSettingsStore:e})},renderOrigin:e=>(0,L.jsx)(y.Z,{style:D.overflowButton,mobileFeedback:R.isMobile,...(0,g.Z)(e,t),children:(0,a.R)(D.overflowIcon)})})})}):null}))},65091:(e,t,o)=>{o.d(t,{ZP:()=>C,le:()=>w});o(57658);var i=o(67294),n=o(480),s=o(86628),r=o(24405),l=o(72787),a=o(47453),d=o(9291),c=o(16956),u=o(5149),m=o(66890),p=o(68641),g=o(61766),h=o(85526),f=o(51774),x=o(64921),v=o(31945),S=o(53437),y=o(87167),b=o(85893);function C(e){window.__c={n:"PagePropertyActions"};const{locked:t,disabled:o,collectionStore:i,mergedProperties:n,schema:r,isCompact:l}=e,a=(0,s.VK)((()=>h.Z.state.forceShowProperties),[]),d=I(n,r,l),c=(0,y.v)(i),u=[];return(a||0===d)&&(!t&&!o&&c)&&u.push((0,b.jsx)(w,{...e},"add-property")),d>0&&(a?u.push((0,b.jsx)(k,{mergedProperties:n,schema:r,isCompact:l},"hide-properties")):u.push((0,b.jsx)(j,{mergedProperties:n,schema:r,isCompact:l},"show-more"))),(0,b.jsx)(b.Fragment,{children:u})}function w(e){window.__c={n:"AddPropertyButton"};const{collectionStore:t,isInPeekRenderer:o}=e,r=(0,m.Y$)(),l=(0,n.O7)(),h=(0,s.qz)(void 0,g.Z),y=M(),C=(0,s.VK)((()=>r.settingsStore.state.open),[r.settingsStore]);(0,i.useEffect)((()=>{C||h.setState({...h.state,open:!1})}),[h,C]);const w=(0,i.useCallback)((()=>{c.fH({environment:l,collectionContextStore:r,collectionStore:t,isInPeekRenderer:o,onCloseMenu:()=>{h.setState({open:!1})}})}),[h,r,t,l,o]);return(0,b.jsx)("div",{style:{display:"flex"},children:(0,b.jsx)(v.ZP,{popupType:l.device.isMobile?S.kQ.SlideUp:S.kQ.Popup,buttonPopupStore:h,originGap:1,alignmentToOrigin:v.vR.Start,render:()=>(0,b.jsx)(f.P,{context:p.HV.TopbarFilterPopup,collectionContextStore:r,collectionSettingsStore:r.settingsStore,hideDesktopHeader:!0}),onClick:w,onClose:()=>{const e=r.settingsStore;u.E3({collectionSettingsStore:e})},renderOrigin:t=>(0,b.jsxs)(x.Z,{style:{...y.AddOrTogglePropertyButtonStyle,...e.style},...t,children:[(0,a.R)(y.ActionPropertyButtonIconStyle),(0,b.jsx)("div",{style:y.AddPropertyButtonTitleStyle,children:(0,b.jsx)(d.FormattedMessage,{defaultMessage:"Add a property",id:"database.pageProperties.addPropertyButtonTitle"})})]})})})}function j(e){window.__c={n:"ShowMoreButton"};const{mergedProperties:t,schema:o,isCompact:n}=e,s=M(),r=I(t,o,n),a=(0,i.useCallback)((()=>{h.Z.setState({...h.Z.state,forceShowProperties:!0})}),[]);return(0,b.jsx)("div",{style:{display:"flex"},children:(0,b.jsxs)(x.Z,{style:{...s.AddOrTogglePropertyButtonStyle,...e.style},onClick:a,children:[(0,l.Y)(s.ActionPropertyButtonIconStyle),(0,b.jsx)("div",{style:s.AddPropertyButtonTitleStyle,children:(0,b.jsx)(d.FormattedMessage,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.showMorePropertyTitle",values:{num:r}})})]},"show-more")})}function k(e){window.__c={n:"HidePropertiesButton"};const{mergedProperties:t,schema:o,isCompact:n}=e,s=I(t,o,n),r=M(e.style),a=(0,i.useCallback)((()=>{h.Z.setState({...h.Z.state,forceShowProperties:!1})}),[]);return(0,b.jsx)("div",{style:{display:"flex"},children:(0,b.jsxs)(x.Z,{style:{...r.AddOrTogglePropertyButtonStyle,...e.style},onClick:a,children:[(0,l.Y)({...r.ActionPropertyButtonIconStyle,transform:"rotate(180deg)"}),(0,b.jsx)("div",{style:r.AddPropertyButtonTitleStyle,children:(0,b.jsx)(d.FormattedMessage,{defaultMessage:"{num, plural, one {Hide 1 property} other {Hide {num} properties}}",id:"database.pageProperties.hidePropertyTitle",values:{num:s}})})]},"hide-properties")})}function M(e){const t=(0,n.O7)();return(0,r.yK)((o=>{const{device:i}=t;return{AddOrTogglePropertyButtonStyle:{display:"flex",alignItems:"center",color:o.lightTextColor,borderRadius:4,paddingLeft:6,paddingRight:6,height:34,width:i.isMobile?"100%":"auto",...e},ActionPropertyButtonIconStyle:{width:16,height:16,marginRight:9,marginTop:1,fill:o.lightIconColor},AddPropertyButtonTitleStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,lineHeight:"16px"}}}),[t,e])}function I(e,t,o){return(0,i.useMemo)((()=>e.filter((e=>"hide"===e.visibility||"hide_if_empty"===e.visibility&&!e.hasValue)).length),[e])}},87167:(e,t,o)=>{o.d(t,{v:()=>s});var i=o(86628),n=o(78316);function s(e){return(0,i.VK)((()=>n.eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}},83420:(e,t,o)=>{o.d(t,{TL:()=>u,nc:()=>c,ue:()=>d});var i=o(66897),n=o(54368),s=o(77420),r=o(19889),l=o(97880),a=o(26136);function d(e){const{parentStore:t,pointer:o}=e,n=(0,a.Kv)(t,o).getValue();if(n)return(0,i.LU)({table:o.table,value:n})}function c(e){const{parentStore:t,pointer:o}=e;return o.table===s.cZ?a.Qx.createChildStore(t,o):o.table===r.KJ?a.U6.createChildStore(t,o):o.table===n.y?a.fg.createChildStore(t,o):void(0,l.t1)(o)}function u(e){return e.table===s.cZ?(0,i.ON)(e.getValue()):e.table===r.KJ?(0,i.m3)(e.getValue()):e.table===n.y?(0,i.I4)(e.getValue()):void(0,l.t1)(e)}},14568:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(35431);class n extends i.Z{}const s=new n},63334:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(49085);class n extends i.default{getInitialState(){return{}}}const s=n},7189:(e,t,o)=>{o.d(t,{K:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},37652:(e,t,o)=>{o.d(t,{V:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("arrowLeft",{viewBox:"0 0 30 30",svg:(0,n.jsx)("polygon",{points:"29 14 4.813 14 13.406 5.406 12 4 1 15 12 26 13.406 24.594 4.813 16 29 16"})})},72787:(e,t,o)=>{o.d(t,{Y:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("chevronDownThin",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8.004 12a.72.72 0 00.54-.237l6.238-6.487A.735.735 0 0015 4.753c0-.426-.314-.753-.733-.753a.76.76 0 00-.524.213l-5.739 5.955-5.747-5.955A.73.73 0 001.733 4C1.314 4 1 4.327 1 4.753c0 .204.08.384.218.531l6.238 6.479a.751.751 0 00.548.237z"})})},91315:(e,t,o)=>{o.d(t,{r:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},64275:(e,t,o)=>{o.d(t,{D:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("closeSmall",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},31505:(e,t,o)=>{o.d(t,{Y:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("collectionTimelineArrowLeft",{viewBox:"0 0 9 7",svg:(0,n.jsx)("path",{d:"M0 3.5021C0 3.70786 0.0939831 3.93041 0.237195 4.06479L3.11934 6.76065C3.28493 6.91602 3.48633 7 3.67877 7C4.17106 7 4.48881 6.68506 4.48881 6.27774C4.48881 6.03839 4.37245 5.86203 4.22029 5.72345L3.19095 4.77025L2.56887 4.22855L3.47737 4.27055L8.13625 4.27055C8.6554 4.27055 9 3.96401 9 3.5021C9 3.04019 8.6554 2.73365 8.13625 2.73365L3.47737 2.73365L2.56887 2.77564L3.19095 2.23395L4.22029 1.27654C4.37245 1.13377 4.48881 0.961608 4.48881 0.722255C4.48881 0.314937 4.17106 0 3.67877 0C3.48633 0 3.28493 0.0839832 3.11487 0.239352L0.237195 2.93941C0.0939831 3.07378 0 3.29634 0 3.5021Z"})})},39301:(e,t,o)=>{o.d(t,{n:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("collectionTimelineArrowRight",{viewBox:"0 0 9 7",svg:(0,n.jsx)("path",{d:"M9 3.4979C9 3.29214 8.90602 3.06959 8.7628 2.93521L5.88066 0.239352C5.71507 0.0839835 5.51368 3.13148e-07 5.32123 2.96324e-07C4.82894 2.53287e-07 4.51119 0.314937 4.51119 0.722256C4.51119 0.961608 4.62755 1.13797 4.77971 1.27654L5.80905 2.22975L6.43113 2.77145L5.52263 2.72945L0.863749 2.72945C0.344604 2.72945 -6.62078e-07 3.03599 -7.02459e-07 3.4979C-7.4284e-07 3.95981 0.344604 4.26635 0.863749 4.26635L5.52263 4.26635L6.43113 4.22436L5.80905 4.76605L4.77971 5.72346C4.62755 5.86623 4.51119 6.03839 4.51119 6.27774C4.51119 6.68506 4.82894 7 5.32123 7C5.51367 7 5.71507 6.91602 5.88513 6.76065L8.7628 4.06059C8.90602 3.92622 9 3.70366 9 3.4979Z"})})},52455:(e,t,o)=>{o.d(t,{X:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("fileAttachment",{viewBox:"0 0 28 28",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{width:"28",height:"28",fill:"none"}),(0,n.jsx)("path",{d:"M7.70703 27.3799H21.2783C23.7412 27.3799 24.9854 26.1104 24.9854 23.6348V11.7266C24.9854 10.3555 24.8076 9.74609 23.9697 8.88281L16.5049 1.3418C15.6924 0.516602 15.0322 0.326172 13.8008 0.326172H7.70703C5.26953 0.326172 4 1.58301 4 4.05859V23.6348C4 26.1104 5.25684 27.3799 7.70703 27.3799ZM7.7832 25.8057C6.32324 25.8057 5.57422 25.0312 5.57422 23.5967V4.09668C5.57422 2.7002 6.32324 1.8877 7.7959 1.8877H13.7246V9.53027C13.7246 10.9775 14.4609 11.6631 15.8701 11.6631H23.4238V23.5967C23.4238 25.0312 22.6621 25.8057 21.2021 25.8057H7.7832ZM16.0352 10.1777C15.4512 10.1777 15.21 9.94922 15.21 9.36523V2.20508L23.1064 10.1777H16.0352Z"})]})})},27714:(e,t,o)=>{o.d(t,{N:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("link",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.69922 10.8945L8.73828 9.84863C7.91797 9.77344 7.34375 9.51367 6.91992 9.08984C5.76465 7.93457 5.76465 6.29395 6.91309 5.14551L9.18262 2.87598C10.3379 1.7207 11.9717 1.7207 13.127 2.87598C14.2891 4.04492 14.2822 5.67188 13.1338 6.82031L11.958 7.99609C12.1768 8.49512 12.2451 9.10352 12.1289 9.62988L14.0908 7.6748C15.7725 6 15.7793 3.62109 14.084 1.92578C12.3887 0.223633 10.0098 0.237305 8.33496 1.91211L5.95605 4.29785C4.28125 5.97266 4.26758 8.35156 5.96289 10.0469C6.36621 10.4434 6.90625 10.7441 7.69922 10.8945ZM8.30078 5.13184L7.26855 6.17773C8.08203 6.25293 8.66309 6.51953 9.08008 6.93652C10.2422 8.09863 10.2422 9.73242 9.08691 10.8809L6.81738 13.1504C5.66211 14.3057 4.03516 14.3057 2.87305 13.1504C1.71094 11.9883 1.71777 10.3545 2.87305 9.20605L4.04199 8.03027C3.83008 7.53125 3.75488 6.92969 3.87109 6.39648L1.91602 8.35156C0.234375 10.0264 0.227539 12.4121 1.92285 14.1074C3.61816 15.8027 5.99707 15.7891 7.67188 14.1143L10.0439 11.7354C11.7256 10.0537 11.7324 7.6748 10.0371 5.98633C9.64062 5.58301 9.10059 5.28223 8.30078 5.13184Z"})})},22962:(e,t,o)=>{o.d(t,{O:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("mention",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M1 9.86523C1 15.2939 4.72705 18.6807 9.98975 18.6807C11.3511 18.6807 12.4634 18.5312 13.1606 18.2905C13.6919 18.1079 13.8828 17.8174 13.8828 17.4521C13.8828 17.0537 13.6089 16.7715 13.1523 16.7715C13.0195 16.7715 12.8784 16.7881 12.6958 16.8213C11.9238 16.9873 11.2266 17.1118 10.2637 17.1118C5.74805 17.1118 2.74316 14.4058 2.74316 9.91504C2.74316 5.56543 5.61523 2.56055 9.88184 2.56055C13.7417 2.56055 16.7383 4.97607 16.7383 9.11816C16.7383 11.3511 15.9995 12.8452 14.8125 12.8452C14.0239 12.8452 13.5757 12.3472 13.5757 11.4839V6.44531C13.5757 5.84766 13.252 5.49072 12.6709 5.49072C12.0981 5.49072 11.7578 5.84766 11.7578 6.44531V7.10107H11.6333C11.21 6.09668 10.2305 5.49072 9.01855 5.49072C6.90186 5.49072 5.43262 7.28369 5.43262 9.89844C5.43262 12.5547 6.91846 14.3892 9.11816 14.3892C10.3799 14.3892 11.3013 13.7417 11.7578 12.6045H11.8823C12.1147 13.7168 13.0942 14.3809 14.4307 14.3809C16.8877 14.3809 18.3984 12.1895 18.3984 8.96045C18.3984 4.1626 14.8706 1 9.89014 1C4.66064 1 1 4.56104 1 9.86523ZM9.5415 12.7207C8.26318 12.7207 7.46631 11.6499 7.46631 9.92334C7.46631 8.21338 8.27148 7.14258 9.5498 7.14258C10.8364 7.14258 11.6582 8.20508 11.6582 9.89844C11.6582 11.625 10.8281 12.7207 9.5415 12.7207Z"})})},40350:(e,t,o)=>{o.d(t,{V:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("reactionAdd",{viewBox:"0 0 16 16",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M8.7207 12.0259C8.7207 12.4243 9.04492 12.7446 9.43945 12.7446H11.4199V14.7251C11.4199 15.1235 11.7441 15.4438 12.1426 15.4438C12.5371 15.4438 12.8613 15.1235 12.8613 14.7251V12.7446H14.8418C15.2363 12.7446 15.5605 12.4243 15.5605 12.0259C15.5605 11.6274 15.2363 11.3032 14.8418 11.3032H12.8613V9.32666C12.8613 8.92822 12.5371 8.604 12.1426 8.604C11.7441 8.604 11.4199 8.92822 11.4199 9.32666V11.3032H9.43945C9.04492 11.3032 8.7207 11.6274 8.7207 12.0259Z"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.02947 13.6952C8.43019 13.8731 7.79681 13.9688 7.14258 13.9688C3.46729 13.9688 0.439453 10.9409 0.439453 7.25928C0.439453 3.58398 3.46094 0.556152 7.14258 0.556152C10.8179 0.556152 13.8457 3.58398 13.8457 7.25928C13.8457 7.72257 13.7979 8.1755 13.7069 8.61336C13.439 8.02567 12.8508 7.61289 12.1648 7.60415C12.1724 7.49021 12.1763 7.37521 12.1763 7.25928C12.1763 4.47266 9.9292 2.22559 7.14258 2.22559C4.34961 2.22559 2.11523 4.47266 2.11523 7.25928C2.11523 10.0522 4.35596 12.2993 7.14258 12.2993C7.34385 12.2993 7.54226 12.2876 7.73717 12.2649C7.83478 12.9674 8.35636 13.53 9.02947 13.6952ZM6.02539 5.83105C6.02539 6.31982 5.67627 6.67529 5.28271 6.67529C4.88916 6.67529 4.55908 6.31982 4.55908 5.83105C4.55908 5.33594 4.88916 4.98047 5.28271 4.98047C5.67627 4.98047 6.02539 5.33594 6.02539 5.83105ZM9.73242 5.83105C9.73242 6.31982 9.3833 6.67529 8.99609 6.67529C8.60254 6.67529 8.26611 6.31982 8.26611 5.83105C8.26611 5.33594 8.59619 4.98047 8.99609 4.98047C9.38965 4.98047 9.73242 5.33594 9.73242 5.83105ZM9.37695 8.9668C9.37695 9.39844 8.48193 10.2808 7.14258 10.2808C5.79688 10.2808 4.90186 9.39844 4.90186 8.9668C4.90186 8.80811 5.06055 8.72559 5.21289 8.80176L5.22971 8.81029C5.68936 9.04333 6.22701 9.31592 7.14258 9.31592C8.01512 9.31592 8.53968 9.05921 8.99207 8.83782C9.01689 8.82568 9.04149 8.81364 9.06592 8.80176C9.21826 8.73193 9.37695 8.80811 9.37695 8.9668Z"})]})})},18101:(e,t,o)=>{o.d(t,{b:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("reopen",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M1.64844 7.88477C1.64844 10.791 3.98047 13.1289 6.88086 13.1289C9.78125 13.1289 12.1133 10.791 12.1133 7.88477C12.1133 7.53906 11.873 7.29297 11.5273 7.29297C11.1934 7.29297 10.9707 7.53906 10.9707 7.88477C10.9707 10.1582 9.14844 11.9805 6.88086 11.9805C4.61328 11.9805 2.79688 10.1582 2.79688 7.88477C2.79688 5.59961 4.60156 3.78906 6.86328 3.78906C7.25 3.78906 7.60742 3.81836 7.90625 3.88281L6.3125 5.46484C6.20703 5.57617 6.1543 5.69922 6.1543 5.85156C6.1543 6.17383 6.39453 6.41992 6.71094 6.41992C6.875 6.41992 7.00977 6.36719 7.10938 6.26172L9.51758 3.83594C9.64062 3.71289 9.69922 3.57227 9.69922 3.41406C9.69922 3.26172 9.63477 3.10938 9.51758 2.99219L7.10938 0.548828C7.00977 0.4375 6.875 0.378906 6.71094 0.378906C6.39453 0.378906 6.1543 0.636719 6.1543 0.953125C6.1543 1.10547 6.20703 1.24023 6.30664 1.3457L7.72461 2.74609C7.4668 2.69336 7.16797 2.66406 6.86328 2.66406C3.96875 2.66406 1.64844 4.98438 1.64844 7.88477Z"})})},58167:(e,t,o)=>{o.d(t,{i:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("resolve",{viewBox:"0 0 16 16",svg:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("path",{d:"M6.6123 14.2646C7.07715 14.2646 7.43945 14.0869 7.68555 13.7109L14.0566 3.96973C14.2344 3.69629 14.3096 3.44336 14.3096 3.2041C14.3096 2.56152 13.8311 2.09668 13.1748 2.09668C12.7236 2.09668 12.4434 2.26074 12.1699 2.69141L6.57812 11.5098L3.74121 7.98926C3.48828 7.68848 3.21484 7.55176 2.83203 7.55176C2.16895 7.55176 1.69043 8.02344 1.69043 8.66602C1.69043 8.95312 1.7793 9.20605 2.02539 9.48633L5.55273 13.7588C5.84668 14.1074 6.1748 14.2646 6.6123 14.2646Z"})})})},83065:(e,t,o)=>{o.d(t,{_:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("sendArrow",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79883 18.5894C14.6216 18.5894 18.5894 14.6216 18.5894 9.79883C18.5894 4.96777 14.6216 1 9.79053 1C4.95947 1 1 4.96777 1 9.79883C1 14.6216 4.96777 18.5894 9.79883 18.5894ZM9.79883 14.3062C9.20947 14.3062 8.76953 13.9077 8.76953 13.3433V9.69922L8.86914 8.00586L8.25488 8.84424L7.3916 9.81543C7.23389 10.0063 6.98486 10.1143 6.72754 10.1143C6.21289 10.1143 5.84766 9.75732 5.84766 9.25928C5.84766 8.99365 5.92236 8.79443 6.12158 8.58691L8.96045 5.61523C9.19287 5.35791 9.4585 5.2417 9.79883 5.2417C10.1309 5.2417 10.4048 5.36621 10.6372 5.61523L13.4761 8.58691C13.667 8.79443 13.75 8.99365 13.75 9.25928C13.75 9.75732 13.3848 10.1143 12.8618 10.1143C12.6128 10.1143 12.3638 10.0063 12.2061 9.81543L11.3428 8.86914L10.7202 7.99756L10.8281 9.69922V13.3433C10.8281 13.9077 10.3799 14.3062 9.79883 14.3062Z"})})},60973:(e,t,o)=>{o.d(t,{g:()=>s});o(67294);var i=o(45238),n=o(85893);const s=(0,i.I)("videoAttachment",{viewBox:"0 0 28 28",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{width:"28",height:"28",fill:"none"}),(0,n.jsx)("path",{d:"M14.1333 26.4668C21.103 26.4668 26.8667 20.7031 26.8667 13.7334C26.8667 6.75098 21.103 1 14.1206 1C7.15088 1 1.3999 6.75098 1.3999 13.7334C1.3999 20.7031 7.16357 26.4668 14.1333 26.4668ZM14.1333 24.8164C7.98877 24.8164 3.05029 19.8652 3.05029 13.7334C3.05029 7.58887 7.98877 2.6377 14.1206 2.6377C20.2651 2.6377 25.2163 7.58887 25.229 13.7334C25.229 19.8652 20.2778 24.8164 14.1333 24.8164ZM18.9702 14.3936C19.4653 14.1016 19.4526 13.4287 18.9702 13.1367L11.7212 8.79492C11.2261 8.49023 10.5786 8.73145 10.5786 9.27734V18.2275C10.5786 18.7734 11.188 19.0273 11.7212 18.71L18.9702 14.3936Z"})]})})},80503:(e,t,o)=>{o.d(t,{Aj:()=>n,R6:()=>r,TT:()=>i,br:()=>s,u3:()=>l});const i=52,n=45,s=37;function r(e){return e?s:n}function l(e){return 2*r(e)}}}]);