"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4871,5203],{73657:(e,t,i)=>{i.d(t,{Z:()=>n});i(67294);var o=i(28992),r=i(85893);const n=function(e){return(0,r.jsx)(o.Z,{...e,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}},46247:(e,t,i)=>{i.d(t,{Z:()=>c});i(67294);var o=i(480),r=i(24405),n=i(84169),s=i(25888),a=i(64921),l=i(16354),d=i(85893);const c=function(e){window.__c={n:"HelpIconButtonMobile"};const t=(0,o.O7)(),i=(0,r.Fg)();return(0,d.jsx)(l.Z,{style:{display:"flex",alignSelf:"stretch",width:36,...e.isRight?{marginRight:-8}:{marginLeft:-8}},external:!0,href:e.href,onClick:()=>s.Fs(t,{from:e.analyticsFrom}),children:(0,d.jsx)(a.Z,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,n.m)({width:18,marginTop:1,fill:i.lightIconColor})})})}},86765:(e,t,i)=>{i.d(t,{Z:()=>p});i(67294);var o=i(480),r=i(86628),n=i(24405),s=i(9291),a=i(1018),l=i(31278),d=i(76798),c=i(85893);const p=(0,s.injectIntl)((function(e){window.__c={n:"RelationCreateItemText"};const{title:t,targetCollectionStore:i}=e,p=(0,o.Fy)(),u=(0,r.VK)((()=>i.getIcon()),[i]),g=(0,n.yK)((e=>({medium:{color:e.mediumTextColor},dbName:{display:"flex",alignItems:"center",marginLeft:4},title:{marginLeft:a.Qi*(p.isRetina?.5:1)}})),[p.isRetina]),h=t?(0,c.jsxs)("span",{children:[" ",t," "]}):(0,c.jsx)("span",{children:" "}),y=(0,c.jsxs)("div",{style:g.dbName,children:[(0,c.jsx)(l.Z,{disabled:!0,icon:u,isEmptyPage:!1,size:p.isMobile?24:20}),(0,c.jsx)(d.Z,{store:i,style:g.title})]});return(0,c.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,c.jsx)(s.FormattedMessage,{id:"database.searchRelation.createNewPageFooter",defaultMessage:"<medium>New</medium> {pageName} <medium> in</medium> {databaseNameWithIcon}",values:{medium:e=>(0,c.jsx)("span",{style:g.medium,children:e}),pageName:h,databaseNameWithIcon:y}})})}))},9897:(e,t,i)=>{i.d(t,{Z:()=>p});i(67294);var o=i(480),r=i(86628),n=i(24405),s=i(47453),a=i(52275),l=i(72495),d=i(86765),c=i(85893);function p(e){window.__c={n:"RelationCreateNewRow"};const{targetCollectionStore:t,title:i,onClick:p,focused:u,isSection:g,index:h}=e,y=(0,r.VK)((()=>t.canEdit()),[t]),m=(0,r.VK)((()=>t.isSyncedCollection()),[t]),x=(0,o.Fy)(),b=(0,n.yK)((e=>({wrapper:{borderTop:`1px solid ${e.lightDividerColor}`,paddingTop:4,paddingBottom:4},icon:{width:16,fill:e.mediumIconColor,marginRight:4,marginLeft:-2},row:{fontSize:x.isMobile?16:14,minHeight:x.isMobile?44:32}})),[x]);if(!y)return null;const f=(0,c.jsx)(a.Z,{focused:u,icon:(0,s.R)(b.icon),style:b.row,onClick:()=>p(h),title:(0,c.jsx)(d.Z,{targetCollectionStore:t,title:i})});return m?(0,c.jsx)(c.Fragment,{}):g?(0,c.jsx)(l.Z,{style:b.wrapper,disableDesktopPadding:!0,disableMobilePadding:!0,children:f}):f}},75203:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Z});i(67294);var o=i(83355),r=i(39068),n=i(56666),s=i(39132),a=i(61061),l=i(72126),d=i(82990),c=i(9291),p=i(50906),u=i(31869),g=i(96802),h=i(82530),y=i(87279),m=i(29376),x=i(4023),b=i(29798),f=i(73657),v=i(52275),P=i(31945),M=i(79131),R=i(73063),j=i(78140),S=i(32163),w=i(53437),k=i(72495),C=i(26388),I=i(85893);class T extends o.Z{constructor(){super(...arguments),this.storeTypes={menuListStore:b.Z},this.renderRelationPropertyMenuPopup=e=>{const t=this.allRelatedTargetProperties.state;if(!t)return;const i=t.filter((e=>e.visible)),o=t.filter((e=>!e.visible));return(0,I.jsxs)(j.Z,{menuType:y.og.Popup,maxWidth:240,maxHeight:500,children:[0===t.length&&(0,I.jsx)(k.Z,{children:(0,I.jsx)(f.Z,{caption:(0,I.jsx)(c.FormattedMessage,{defaultMessage:"No properties",id:"database.relationMenu.noProperties"})})}),t.length>0&&(0,I.jsx)(S.Z,{type:S.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,sections:l.oA([i.length>0&&{key:"visible_and_hidden_properties",render:e=>(0,I.jsx)(k.Z,{...e,noTextOverflow:!0,isTitleUppercase:!1,title:(0,I.jsx)(c.FormattedMessage,{defaultMessage:"Shown in relation",id:"database.relationMenu.shownInRelationTitle"}),desktopTitleStyle:{height:18},children:this.renderPropertyDraggableList({visibleProperties:i,hiddenProperties:o,children:e.children})}),items:l.oA([...this.getPropertySortListItems({properties:i,visibility:!0}),o.length>0&&{key:"group-header-hidden-property",render:e=>(0,I.jsx)(F,{props:e,children:(0,I.jsx)(I.Fragment,{})}),action:()=>{}},...this.getPropertySortListItems({properties:o,visibility:!1})])},0===i.length&&o.length>0&&{key:"hidden_properties",render:e=>(0,I.jsx)(F,{props:e,children:this.renderPropertyDraggableList({visibleProperties:i,hiddenProperties:o,children:e.children})}),items:this.getPropertySortListItems({properties:o,visibility:!1})}])})]})},this.handlePropertyReorder=e=>{const{newPropertyKeys:t}=e,{collectionStore:i,property:o}=this.props,r=m.U1({collectionStore:i,property:o}),n=t.indexOf("group-header-hidden-property"),s=l.oA(t.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const i=r.find((t=>t.property===e));return i?n>0?"title"===e&&t>=n?i:{...i,visible:Boolean(t<n)}:i:{property:e,visible:!(n>0)||Boolean(t<n)}}))),a=r.filter((e=>!t.includes(e.property))),d={...m.ZI(i)};d[o]||(d[o]={}),d[o].related_properties=[...s,...a],h.createAndCommit({userAction:"RelationPropertyCustomizeLayoutMenu.handlePropertyReorder",environment:this.environment,perform:e=>{g.FH({stores:[i],update:{collection_relation_options:d},transaction:e})}}),this.stores.menuListStore.reset()},this.allRelatedTargetProperties=this.createComputedStore((()=>{const{collectionStore:e,targetCollectionStore:t,property:i}=this.props,o=m.U1({collectionStore:e,property:i}),r=Object.keys(t.getSchema()).map((e=>o.find((t=>t.property===e))??{property:e,visible:!1})),n=o.map((e=>e.property)),s=e=>{const t=n.indexOf(e);return-1!==t?t:1/0};return r.sort(((e,t)=>s(e.property)-s(t.property))),r}),!0)}renderComponent(){const{device:e}=this.environment;if(!e.isPhone||"section"===this.props.rowType)return(0,I.jsx)(C.ZP,{renderTooltip:()=>(0,I.jsx)(c.FormattedMessage,{id:"database.RelationCustomizeLayoutMenu.tooltip.button.message",defaultMessage:"Customize shown properties"}),placement:"section"===this.props.rowType?x.u.Top:x.u.Right,render:e=>(0,I.jsx)(P.ZP,{popupType:w.kQ.Popup,alignmentToOrigin:x.v.Start,...e,renderOrigin:t=>(0,I.jsx)(R.Z,{icon:n.o,iconStyle:{width:16,color:this.theme.mediumIconColor,fill:this.theme.mediumIconColor},...t,...e}),onClick:()=>{p.gP4(this.environment,{from:"section"===this.props.rowType?"relation_section":"configure_relation_modal"})},originGap:16,render:this.renderRelationPropertyMenuPopup})})}getPropertySortListItems(e){const{properties:t,visibility:i}=e;return l.oA(t.map((e=>function(e,t,i,o,n,l,c){const{propertyFormat:p,visibility:g}=e,h=!g,y=n.getSchema();if(!y)return;const m=y[p.property];if(!m)return;return{key:p.property,render:e=>(0,I.jsx)(v.Z,{...e,showDragHandle:!c,title:(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(r.ZP,{icon:m.icon,type:m.type,size:16,theme:i,style:{fill:i.regularIconColor}}),(0,I.jsx)("span",{style:{marginLeft:8,...d.Z.textOverflowStyle},children:m.name})]}),right:(0,I.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,I.jsx)(R.Z,{icon:h?a.B:s.c,iconStyle:{width:16,height:16},isDarkIconColor:!h,onClick:()=>{u.qK({propertyFormat:p,visibility:g,collectionStore:o,property:l,environment:t})},disabled:c||"title"===p.property})})}),action:()=>{}}}({propertyFormat:e,visibility:i},this.environment,this.theme,this.props.collectionStore,this.props.targetCollectionStore,this.props.property,this.props.disabled))))}renderPropertyDraggableList(e){const{visibleProperties:t,hiddenProperties:i,children:o}=e,r=l.oA([...t.map((e=>e.property)),t.length>0&&i.length>0&&{key:"group-header-hidden-property",draggable:!1},...i.map((e=>e.property))]);return(0,I.jsx)(M.ZP,{direction:"vertical",keys:r,renderKey:(e,t)=>o[t],onDrop:e=>{this.handlePropertyReorder({newPropertyKeys:e})},disabled:this.props.disabled})}}T.displayName="RelationPropertyCustomizeLayoutMenu";const Z=T;function F(e){const{props:t,children:i}=e;return(0,I.jsx)(k.Z,{...t,noTextOverflow:!0,isTitleUppercase:!1,title:(0,I.jsx)(c.FormattedMessage,{defaultMessage:"Hidden in relation",id:"database.relationMenu.hiddenInRelationTitle"}),desktopTitleStyle:{height:19},children:i,disableDesktopPadding:!0})}},49122:(e,t,i)=>{i.d(t,{Z:()=>c});i(67294);var o=i(480),r=i(24405),n=i(41892),s=i(82990),a=i(9291),l=i(32662),d=i(85893);function c(e){window.__c={n:"CollectionSettingsGithubPrTaskPreview"};const t=(0,a.useIntl)(),i=function(e){const{isMobile:t}=(0,o.Fy)(),i=t?18:14,n=1,a=6,l=20;return(0,r.yK)((t=>({githubContainer:{display:"flex",alignSelf:"center",flexDirection:"column",width:e||"90%",padding:l,border:`${n}px solid ${t.tableDividerColor}`,borderRadius:a,borderBottomRightRadius:4,cursor:"default"},githubPrTitleRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:`calc(100% + ${l}px)`,overflow:"hidden"},githubPrTitle:{display:"inline-flex",fontSize:i,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:t.whiteButtonBackground,padding:"2px 4px",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderLeft:`2px solid ${t.blueColor}`,borderTop:`2px solid ${t.blueColor}`,borderBottom:`2px solid ${t.blueColor}`,width:"100%"},githubTask:{background:"light"===t.mode?t.accentColors.blue[50]:t.accentColors.blue[400]},githubPrInfoRow:{display:"inline-flex"},githubPrInfoPill:{display:"flex",flexDirection:"row",alignItems:"center",width:"fit-content",padding:"4px 10px",borderRadius:"2em",background:"#238636",flexShrink:0,...s.Z.textOverflowStyle},githubPrInfoOpenText:{color:"white",fontSize:i-2,fontWeight:500},githubPrInfoMergeInto:{display:"inline-flex",alignItems:"center",fontSize:i-2,color:t.lightTextColor,...s.Z.textOverflowStyle},githubPrInfoMain:{padding:"0px 4px",fontFamily:s.Z.baseFontFamily.githubMono,background:t.cardPressedBackground,borderRadius:a,color:t.regularTextColor,verticalAlign:"text-bottom",...s.Z.textOverflowStyle}})),[i,e])}(e.width),c=(0,d.jsx)("div",{id:"github-preview-github-pr-title-row",style:i.githubPrTitleRow,children:(0,d.jsxs)("div",{id:"github-preview-github-pr-title-wrapper",style:i.githubPrTitle,children:[(0,d.jsx)(l.Z,{size:2}),"[",(0,d.jsxs)("div",{id:"github-preview-github-pr-task",style:i.githubTask,children:[e.uniqueIdPrefix||t.formatMessage(p.idPrefix),e.uniqueIdValue?`-${e.uniqueIdValue}`:"-1"]}),"]",(0,d.jsx)(l.Z,{size:2}),t.formatMessage(p.prTitle)]})}),u=(0,d.jsxs)("div",{id:"github-preview-github-pr-info-row",style:i.githubPrInfoRow,children:[(0,d.jsxs)("div",{id:"github-preview-github-open-pr-pill",style:i.githubPrInfoPill,children:[(0,d.jsx)("img",{src:n.Z.images.externalIntegrations.githubPullOpenIconWhitePng,style:{width:16,height:16}}),(0,d.jsx)(l.Z,{size:2}),(0,d.jsx)("div",{style:i.githubPrInfoOpenText,children:t.formatMessage(p.open)})]}),(0,d.jsx)(l.Z,{size:8}),(0,d.jsx)("div",{id:"github-preview-github-merge-into-main",style:i.githubPrInfoMergeInto,children:(0,d.jsxs)("span",{style:i.githubPrInfoMergeInto,children:[t.formatMessage(p.mergeInto),(0,d.jsx)(l.Z,{size:4}),(0,d.jsx)("span",{style:i.githubPrInfoMain,children:t.formatMessage(p.main)})]})})]});return(0,d.jsxs)("div",{id:"github-preview-github-container",style:i.githubContainer,children:[c,(0,d.jsx)(l.Z,{size:12}),u]})}const p=(0,a.defineMessages)({dismissButtonAriaLabel:{defaultMessage:"A button to dismiss the user education preview.",id:"database.viewSettings.githubConfigTab.preview.dismissButtonAriaLabel"},idPrefix:{defaultMessage:"TASK",id:"database.viewSettings.githubConfigTab.preview.idPrefix"},prTitle:{defaultMessage:"GitHub PR Title",id:"database.viewSettings.githubConfigTab.preview.prTitle"},open:{defaultMessage:"Open",id:"database.viewSettings.githubConfigTab.preview.open"},mergeInto:{defaultMessage:"Merge into",id:"database.viewSettings.githubConfigTab.preview.mergeInto"},main:{defaultMessage:"main",id:"database.viewSettings.githubConfigTab.preview.main"}})},54780:(e,t,i)=>{i.d(t,{Z:()=>ze});i(57658),i(30541);var o=i(67294),r=i(83355),n=i(86628),s=i(92996),a=i(99036),l=i(77657),d=i(72126),c=i(9291),p=i(60971),u=i(14473),g=i(79131),h=i(68785),y=i(32163),m=i(53336),x=i(43145),b=i(72495),f=i(26388),v=i(9897),P=i(68139),M=i(480),R=i(24405),j=i(89767),S=i(82990),w=i(52275),k=i(85893);function C(e){window.__c={n:"RelationMoveToBacklog"};const{targetCollectionStore:t,onClick:i,focused:r,isSection:s,index:a,onMouseEnter:l,blockPropertyValueOverlayStore:d}=e,p=(0,n.VK)((()=>t.canEdit()),[t]),u=(0,n.VK)((()=>t.isSyncedCollection()),[t]),g=(0,M.Fy)(),h=(0,R.yK)((e=>({medium:{fontWeight:S.Z.fontWeight.medium},wrapper:{borderTop:`1px solid ${e.lightDividerColor}`},icon:{width:14,fill:"#A6A299",marginRight:-2,marginLeft:0},row:{fontSize:g.isMobile?16:14,minHeight:g.isMobile?44:32}})),[g]),y=(0,k.jsx)(w.Z,{focused:r,onMouseEnter:l,icon:(0,j.R)(h.icon),style:h.row,onClick:(0,o.useCallback)((()=>{i(a),d.setState({isOpen:!1})}),[a,i,d]),title:(0,k.jsx)(c.FormattedMessage,{id:"database.searchRelation.MoveToBacklogFooter",defaultMessage:"<medium>Move to backlog</medium>",values:{medium:e=>(0,k.jsx)("span",{style:h.medium,children:e})}})}),m=s?(0,k.jsx)(b.Z,{style:h.wrapper,disableDesktopPadding:!0,disableMobilePadding:!0,children:y}):y;return p?u?null:m:null}var I=i(75203),T=i(73744),Z=i(33929),F=i(98742),D=i(34859),_=i(45452),L=i(29798),B=i(26136),A=i(51741),V=i(30120),O=i(80951),K=i(8848),U=i(7057),z=i(53877),E=i(84795),H=i(42875),G=i(59054),N=i(20270),W=i(75071),q=i(59753),$=i(4615),Q=i(21202),Y=i(44805),X=i(44876),J=i(63143),ee=i(54642),te=i(89475),ie=i(12981),oe=i(95477),re=i(24990),ne=i(70764),se=i(6398),ae=i(12534),le=i(65598),de=i(29376),ce=i(80444),pe=i(30874),ue=i(1634);function ge(){window.__c={n:"FigmaRelationPropertyMenuResults"};const e=(0,M.O7)(),t=function(){const e=(0,M.Fy)().isMobile;return(0,R.yK)((t=>({figmaResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4},figmaResultsCopyWrapper:{marginTop:0,color:t.lightTextColor}})),[e])}();return e.device.isMobile?(0,k.jsx)(k.Fragment,{}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{style:t.figmaResults,children:(0,k.jsx)("p",{style:t.figmaResultsCopyWrapper,children:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"To link, paste the Figma File URL above",id:"connectedRelationPropertyMenuResults.figmaRelationUserEducationPasteUrl.description"})})})})}var he=i(90559),ye=i(75553),me=i(84169),xe=i(47453),be=i(8406),fe=i(893),ve=i(74882),Pe=i(16956),Me=i(12714),Re=i(82530),je=i(51592),Se=i(49122),we=i(64921),ke=i(61519),Ce=i(32662),Ie=i(66890),Te=i(18514);const Ze=(0,c.defineMessages)({githubCopyIdAria:{defaultMessage:"Copy the ID value.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.copyIdAria"},githubAddIdAria:{defaultMessage:"Add a unique id property to the database.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.addIdAria"},githubLearnMoreAria:{defaultMessage:"Learn more about the GitHub Pull Requests feature.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.learnMoreAria"}});function Fe(e){window.__c={n:"GithubRelationPropertyMenuResults"};const{pageBlockStore:t,blockPropertyValueOverlayStore:i}=e,o=(0,M.O7)(),r=(0,c.useIntl)(),s=De(),a=(0,Ie.Y$)(),d=(0,n.VK)((()=>a.collectionStore()),[a]),p=(0,n.VK)((()=>a.databaseType),[a]),u=(0,n.VK)((()=>{var e;return d&&(null===(e=d.getRecordKeyStore())||void 0===e?void 0:e.getRecordKey())}),[d]),{uniqueIdPropertyId:g,uniqueIdValue:h}=(0,n.VK)((()=>{const e=t.getSchema(),i=(0,he.$z)(e);if(1!==i.length)return{uniqueIdPropertyId:void 0,uniqueIdValue:void 0};const o=t.getPropertyValue(i[0]);return{uniqueIdPropertyId:i[0],uniqueIdValue:(0,O.ah)(o)}}),[t]),y=(0,n.VK)((()=>(0,he.wf)(u,h)),[u,h]),m=(0,n.VK)((()=>!Boolean(u)||!Boolean(h)),[u,h]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{style:s.githubResults,children:[(0,k.jsx)(_e,{}),(0,k.jsx)("p",{style:s.githubResultsCopyWrapper,children:m?(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Create a prefixed ID property to paste in the GitHub PR title.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.badIdError"}):(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Copy the {singleItemName} ID and paste it into the title of your PR in GitHub.",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducationLinkPastingOn.description",values:{singleItemName:(0,je.sN)(p)}})}),(0,k.jsx)(Se.Z,{width:"100%",uniqueIdPrefix:u,uniqueIdValue:h})]}),(0,k.jsxs)("div",{style:s.githubResultsButtonsWrapper,children:[(0,k.jsxs)(we.Z,{style:s.githubResultsLearnMore,ariaLabel:r.formatMessage(Ze.githubLearnMoreAria),onClick:e=>{e.preventDefault(),Me.D({environment:o,url:(0,Te.UY)("guides.githubRelation"),targetSelf:!1})},children:[(0,me.m)({width:o.device.isMobile?16:12}),(0,k.jsx)(Ce.Z,{size:4}),(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Learn more",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.learnMore"})]}),m?(0,k.jsxs)(we.Z,{style:s.githubResultsCTAButton,ariaLabel:r.formatMessage(Ze.githubAddIdAria),onClick:async e=>{e.preventDefault(),d&&(await ve.K({environment:o,collectionStore:d}),Re.createAndCommit({userAction:"CollectionSettingsAutoIncrementIdPropertyCreateNewIdProperty",environment:o,perform:e=>{Pe.G3({environment:o,collectionStore:d,collectionViewArgs:void 0,propertyType:"auto_increment_id",transaction:e})}}),be._H({environment:o,collectionContextStore:a,from:"github_relation_menu",property_type:"auto_increment_id",integration_id:l.U9}))},children:[(0,xe.R)({width:o.device.isMobile?16:12}),(0,k.jsx)(Ce.Z,{size:4}),(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Add ID property",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.addId"})]}):(0,k.jsxs)(we.Z,{style:s.githubResultsCTAButton,ariaLabel:r.formatMessage(Ze.githubCopyIdAria),onClick:async e=>{e.preventDefault(),await fe.RD({stringValue:y,environment:o,copiedMessage:fe.tq.copiedPropertyToClipboard}),g&&be.S$(o,a,{block_id:t.id,property:g,property_type:"auto_increment_id",github_relation_menu:!0}),i.setState({isOpen:!1})},children:[(0,ye.U)({width:o.device.isMobile?16:12}),(0,k.jsx)(Ce.Z,{size:4}),(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Copy {singleItemName} ID",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducation.copyId",values:{singleItemName:(0,je.sN)(p)}})]})]})]})}function De(){const e=(0,M.Fy)().isMobile;return(0,R.yK)((t=>({githubResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4},githubResultsCopyWrapper:{marginTop:0,color:t.lightTextColor},githubResultsErrorWrapper:{marginTop:0,color:K.ZP.red},githubResultsButtonsWrapper:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",fontSize:e?16:12,padding:"10px"},githubResultsLearnMore:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5,color:t.lightTextColor},githubResultsCTAButton:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5,color:t.blueColor},githubLinkPastingSeparator:{border:t.tableDividerColor,width:"100%"},githubLinkPastingContainer:{width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",margin:"8px 0px"},githubLinkPastingSeparatorText:{position:"absolute",backgroundColor:t.popoverBackground,color:t.lightTextColor,padding:"0px 8px"}})),[e])}function _e(){window.__c={n:"GithubPropertyLinkPastingUserEducation"};const e=De();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{style:e.githubResultsCopyWrapper,children:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"To link, paste the GitHub PR URL above",id:"connectedRelationPropertyMenuResults.githubPrRelationUserEducationPasteUrl.description"})}),(0,k.jsxs)("div",{style:e.githubLinkPastingContainer,children:[(0,k.jsx)(ke.Z,{size:1,style:e.githubLinkPastingSeparator}),(0,k.jsx)("div",{style:e.githubLinkPastingSeparatorText,children:"or"})]}),(0,k.jsx)(Ce.Z,{size:8})]})}var Le=i(12170),Be=i(28415);function Ae(e){window.__c={n:"GoogleDriveRelationPropertyMenuResults"};const t=(0,M.O7)(),i=function(){const e=(0,M.Fy)().isMobile;return(0,R.yK)((t=>({googleDriveResults:{display:"flex",flexDirection:"column",alignItems:"flex-start",fontSize:e?16:12,padding:16,paddingBottom:4,paddingTop:4},googleDriveResultsCopyWrapper:{marginTop:0,color:t.lightTextColor,marginBottom:0},googleDriveResultsLearnMore:{display:"flex",flexDirection:"row",alignItems:"center",padding:4,borderRadius:5},googleDriveResultsAccount:{fontSize:12,margin:0},googleDriveLinkPastingSeparator:{border:t.tableDividerColor,width:"100%"},googleDriveLinkPastingContainer:{width:"100%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",margin:"8px 0px"},googleDriveLinkPastingSeparatorText:{position:"absolute",backgroundColor:t.cardContentBackground,color:t.lightTextColor,padding:"0px 8px"}})),[e])}(),o=(0,n.VK)((()=>pe.Z.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===l.f3}))),[]);return t.device.isMobile?(0,k.jsx)(k.Fragment,{}):(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{style:i.googleDriveResults,children:[(0,k.jsx)("p",{style:i.googleDriveResultsCopyWrapper,children:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"To link, paste the Google Drive File URL above",id:"connectedRelationPropertyMenuResults.googleDriveRelationUserEducationPasteUrl.description"})}),(0,k.jsxs)("div",{style:i.googleDriveLinkPastingContainer,children:[(0,k.jsx)(ke.Z,{size:1,style:i.googleDriveLinkPastingSeparator}),(0,k.jsx)("div",{style:i.googleDriveLinkPastingSeparatorText,children:"or"})]}),(0,k.jsx)(Ce.Z,{size:2}),(0,k.jsx)("p",{style:i.googleDriveResultsCopyWrapper,children:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Select an account below to browse files on your Google Drive",id:"connectedRelationPropertyMenuResults.googleDriveRelationUserEducationSourcePicker.description"})}),(0,k.jsx)(Ce.Z,{size:2}),o.map(((o,r)=>(0,k.jsx)(we.Z,{style:i.googleDriveResultsLearnMore,onClick:async i=>{i.preventDefault(),await(async(i,o)=>{const r=await Le.jh({environment:t,externalAuthenticationValue:o}),n=pe.Z.integrations.state.find((e=>e.id===o.integration_id));if(!n)return;const{id:s,name:a,info:l}=n,{icon:d,dark_icon:c,accent_color:p,accent_icon:u}=l,g="dark"===t.ThemeStore.state.mode&&c?c:d;g&&p&&u&&r&&"failed"!==r.type&&await(0,Be.vE)({environment:t,accessToken:r.data.access_token,callback:(t,o)=>{e.onFileSelect(i,o)},integration:{id:s,name:a,icon:g,accentColor:p,accentIcon:u},from:"connected_relation_property_value"})})(i,o)},children:(0,k.jsx)("p",{style:i.googleDriveResultsAccount,children:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"{account}",id:"connectedRelationPropertyMenuResults.googleDriveRelation.googleDriveAccount.description",values:{account:o.account_name}})})},r)))]})})}function Ve(e){var t;window.__c={n:"ConnectedRelationPropertyMenuResults"};const{sections:i,collectionStore:o,targetCollectionStore:r,search:s,property:a,propertySchema:p,pageRecordStore:u,blockPropertyValueOverlayStore:g}=e,m=(0,R.yK)((e=>({settingsMenu:{display:"flex",flexGrow:1,flexDirection:"column",padding:"8px 16px 16px 8px"},settingsMenuSearchBox:{background:e.contentBackground,marginBottom:10},addPageButton:{width:"100%",display:"flex",justifyContent:"center"},suggestionBox:{display:"flex",alignItems:"center",fontSize:12,color:K.ZP.white,background:K.ZP.blue,borderRadius:6,padding:10,boxShadow:e.largeLightBoxShadow,alignSelf:"center",maxWidth:"80%"},errorMessage:{alignSelf:"center",padding:10,fontSize:14,color:e.errorText},addingPage:{width:"100%",padding:10,display:"flex",justifyContent:"flex-start",fontSize:14,color:e.mediumTextColor}})),[]),x=O.Kp(p),v=O.gg(p),P=O.ic(p),j=(0,n.VK)((()=>{if(!r)return;const e=r.getFormat().integration_id;return pe.Z.integrations.state.find((t=>t.id===e))}),[r]),S=(0,n.VK)((()=>j?(0,ne.NP)(j.id):[]),[j]),C=(0,M.O7)(),I=(0,c.useIntl)(),T=(0,R.Fg)(),Z=(0,n.VK)((()=>{const e=pe.Z.state;return e.loaded?e.integrations:[]}),[]),D=(0,n.VK)((()=>{var e;return Boolean(null===(e=ce.default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin())}),[]),_=(0,n.VK)((()=>{var e;return!(!(null===(e=ce.default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit())||!(0,ne.sw)(C))}),[C]),L=(0,n.VK)((()=>{const e=pe.Z.state;return e.loaded&&j?e.externalAuthentications.filter((e=>e.integration_id===j.id)):[]}),[j]),A=(0,n.VK)((()=>L.length?L[0]:null),[L]),[{value:he,status:ye}]=(0,G.r5)((async()=>{if(!A||!j||!(0,l.ok)(j.id))return;const e=A.parent_id;return ee.listExternalObjects(C,{bot_id:e,query:s})}),[C,A,s,j],{debounce:1e3}),me=(0,n.VK)((()=>r.getFormat().pattern_name),[r]),xe=(0,n.VK)((()=>{if(j&&s)return(0,de.DB)({integration:j,patternName:me,url:s})}),[me,j,s]),be=(0,le.OY)(u)?u:void 0,fe=(0,n.VK)((()=>(0,le.OY)(u)?u.getPropertyStore(a):void 0),[u,a]),ve=(0,n.VK)((()=>null==r?void 0:r.getIcon()),[r]),Pe=(0,n.VK)((()=>{var e;return null===(e=ce.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),Me=(0,n.VK)((()=>re.Z.state),[]),Re={key:"githubPrRelationUserEducation",render:e=>void 0!==be&&(0,k.jsx)(Fe,{pageBlockStore:be,blockPropertyValueOverlayStore:g}),items:[]},je={key:"googleDriveRelation",render:t=>(0,k.jsx)(Ae,{onFileSelect:(t,i)=>{(0,ae.ZP)({context:ae.Af.ButtonMouseDown,callback:()=>{e.addPage(i)},event:t})}}),items:[]},Se={key:"figmaRelation",render:e=>(0,k.jsx)(ge,{}),items:[]};if(!o||!fe||!j)return(0,k.jsx)(y.Z,{type:y.i.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:i});if(!((null==j?void 0:j.id)===l.U9?null===(t=S[0])||void 0===t?void 0:t.id:null==A?void 0:A.parent_id)){const e=function(e){const{collectionIcon:t,integration:i,environment:o,spaceId:r,isAdmin:n,userAllowedToAuth:s}=e,a=i.id===l.U9,d=()=>{r&&(te.hM({environment:o,integration:i,spaceId:r,from:"connected_relation_property_menu"}),ue.Z.reset())};if(!a&&i.id!==l.Dv){if(e.environment.device.isMobile)return{key:"askUseBrowserOrDesktopForAuth",render:e=>(0,k.jsx)(b.Z,{...e,disableMobilePadding:!0,title:(0,k.jsx)("div",{style:{whiteSpace:"normal",paddingTop:8},children:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Please authorize this integration in the browser or a desktop app.",id:"connectedRelationProperty.mobile.guide.title"})})}),items:[]};if(!s)return{key:"askGuestToGetMemberAccess",render:e=>(0,k.jsx)(b.Z,{...e,disableMobilePadding:!0,title:(0,k.jsx)("div",{style:{whiteSpace:"normal",paddingTop:8},children:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"To use {integration} integration, request the workspace admin to add you as a member",id:"connectedRelationProperty.guest.auth.guide",values:{integration:i.name}})})}),items:[]}}return{key:"authenticateIntegration",render:e=>(0,k.jsx)(b.Z,{...e,disableMobilePadding:!0,title:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Connect to {integration}",id:"connectedRelationPropertyMenuResults.authenticateHeader.title",values:{integration:i.name}})}),items:[!a||n&&s?{key:"authenticateButton",render:e=>(0,k.jsx)(w.Z,{...e,title:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Connect to {integration}",id:"connectedRelationPropertyMenuResults.authenticateButton.title",values:{integration:i.name}}),icon:(0,k.jsx)(ie.Z,{src:null==t?void 0:t.icon,style:{width:14}})}),action:()=>d()}:{key:"askAdminToAuthenticateButton",render:e=>(0,k.jsx)(w.Z,{...e,title:(0,k.jsx)("div",{style:{whiteSpace:"normal"},children:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) connection.",id:"connectedRelationPropertyMenuResults.askAdminToAuthenticateButton.title"})}),icon:(0,k.jsx)(ie.Z,{src:null==t?void 0:t.icon,style:{width:14}}),hoveredStyle:{cursor:"default",background:void 0},pressedStyle:{background:void 0}}),action:()=>{}}]}}({environment:C,collectionStore:o,integration:j,collectionIcon:ve,spaceId:Pe,isAdmin:D,userAllowedToAuth:_});return(0,k.jsx)(y.Z,{type:y.i.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:[...i,e]})}const we=("success"===(null==he?void 0:he.type)&&"data"in he.data?he.data.data:[]).map((e=>{const t=e.attributes.flatMap((e=>{const t=(0,X.GY)(e);return(0,N.nj)(t)?[t]:(console.error(t),[])})),i=(0,J.m8)(t.flatMap((e=>[[e.id,e]])));return{uri:e.uri,attributes:t,attributesById:i}}));function ke(){let e=(0,k.jsx)(c.FormattedMessage,{id:"connectedRelationPropertyMenuResults.addPageButton.label",defaultMessage:"Link Page"});return(null==j?void 0:j.id)===l.f3||(null==j?void 0:j.id)===l.mQ?e=(0,k.jsx)(c.FormattedMessage,{id:"connectedRelationPropertyMenuResults.addFileButton.label",defaultMessage:"Link File"}):(null==j?void 0:j.id)===l.Nw?e=(0,k.jsx)(c.FormattedMessage,{id:"connectedRelationPropertyMenuResults.addTicketButton.label",defaultMessage:"Link Ticket"}):(null==j?void 0:j.id)===l.U9&&(e=(0,k.jsx)(c.FormattedMessage,{id:"connectedRelationPropertyMenuResults.addPRButton.label",defaultMessage:"Link PR"})),e}const Ce={key:"thirdPartySearchResults",render:e=>(0,k.jsx)(b.Z,{...e,disableMobilePadding:!0}),items:[{key:"addPage",render:e=>(0,k.jsx)(w.Z,{...e,title:ke(),icon:(0,W.f)({width:14})}),action:t=>{(0,ae.ZP)({event:t,context:ae.Af.ButtonMouseDown,callback:()=>{e.addPage()}})}}]},Ie={key:"noResultsFoundInThirdParty",render:e=>(0,k.jsx)(b.Z,{...e,disableMobilePadding:!0,title:(0,k.jsx)(c.FormattedMessage,{defaultMessage:"No results found in {integration}.",id:"connectedRelationPropertyMenuResults.notMatched.help",values:{integration:j.name}})}),items:[]},Te=[];j&&(0,l.ok)(j.id)&&Te.push(...function(e){const{environment:t,intl:i,theme:o,externalIntegrations:r,emojiData:n}=e,s=e.results.flatMap((e=>{const t=e.attributesById.start;if(t&&(0,X.Gc)(t)){const o=(0,z.NK)(t.values[0],(0,H.r)(),i.locale);return[{...e,dateTime:o.start}]}return[]})),a=d.vM(s,(e=>e.dateTime.toFormat(z.Iq))),l=d.MR(Object.keys(a),(e=>V.ou.fromFormat(e,z.Iq).valueOf()));return l.flatMap((s=>{const l=a[s],c=d.MR(l,(e=>e.dateTime.valueOf())),p=(0,E.parseDateTimeRangeString)(s);if(!p)return[];let u;(d.Xy(p,(0,z.Lg)((0,H.r)()))||d.Xy(p,(0,z.Ro)((0,H.r)())))&&(u="relative");const g=(0,U.ZV)({value:p,intl:i,allowRelativeDates:Boolean(u),date_format:u});return[{key:g,items:c.flatMap((s=>{const a=new B.G(t,{table:Q.iU,id:(0,$.ZP)(),spaceId:(0,$.ZP)()}),l={id:a.id,type:"external_object_instance",alive:!0,format:{bot_id:"",external_object_id:"",uri:s.uri,attributes:s.attributes},version:0,space_id:"",parent_id:"",parent_table:"block"};let d=null,c=null;const p=s.attributesById.title,u=s.attributesById.start,g=s.attributesById.end;return u&&g&&(0,X.Gc)(u)&&(0,X.Gc)(g)&&(d=(0,k.jsx)("div",{children:(0,k.jsxs)("span",{children:[(0,k.jsx)(se.r4,{style:{color:void 0,display:"inline"},attribute:u,dateStyle:"exact_time"})," - ",(0,k.jsx)(se.r4,{attribute:g,dateStyle:"exact_time",style:{color:void 0,display:"inline"}})]})}),c=(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{children:(0,k.jsx)(se.ox,{style:{color:void 0,display:"inline"},store:a,attribute:p})}),d]})),{key:s.uri,render:e=>(0,k.jsx)(f.ZP,{renderTooltip:()=>c,placement:f.ug.Left,textWrap:!0,render:s=>(0,k.jsx)(w.Z,{...(0,F.Z)(s||{},e),title:(0,Y.dD)({blockModel:q.kk.fromBlock(l),intl:i,index:0,style:{},disableHover:!0,disableLinks:!0,isAndroid:!1,theme:o,baseUrl:oe.default.domainBaseUrl,emojiType:"raw",currentUserId:t.currentUser.id,getRecordModel:a.getRecordModel,externalIntegrations:r,emojiData:n}),caption:d})}),action:t=>{(0,ae.ZP)({event:t.event,context:ae.Af.ButtonMouseDown,callback:()=>{e.addPage(s.uri)}})}}})),render:e=>(0,k.jsx)(b.Z,{...e,disableMobilePadding:!0,title:g})}]}))}({environment:C,intl:I,theme:T,externalIntegrations:Z,results:we,addPage:e.addPage,emojiData:Me}));const Ze={key:"loadingSpinner",render:t=>(0,k.jsx)(b.Z,{...t,disableMobilePadding:!0,title:(0,k.jsxs)("div",{style:{...m.addingPage,justifyContent:e.addingPage?"center":"flex-start"},children:[(0,k.jsx)(h.Z,{}),(0,k.jsx)("span",{style:{marginLeft:10},children:(0,k.jsx)(c.FormattedMessage,{id:"connectedRelationPropertyMenuResults.fetchingData",defaultMessage:"Fetching data..."})})]})}),items:[]},De=[];return"pending"===ye||e.addingPage?De.push(Ze):xe?De.push(Ce):Te.length>0?De.push(...Te):v?De.push(je):P?De.push(Se):x&&0===i.length?De.push(Re):x&&i.length>0||De.push(Ie),(0,k.jsx)(y.Z,{type:y.i.Vertical,style:{padding:"4px 0px"},initialFocus:0,sections:[...i,...De]})}class Oe extends r.Z{constructor(){super(...arguments),this.storeTypes={menuListStore:L.Z,draggableListStore:_.Z},this.handleDraggableListDrop=(e,t)=>{const{onDrag:i}=this.props,{menuListStore:o}=this.stores;i&&i(e),p.sv({store:o,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition}})}}didUpdate(e){const{menuListStore:t}=this.stores,{device:i}=this.environment;!this.props.searchQuery||d.Xy(e.searchQuery,this.props.searchQuery)||i.isMobile||t.setState({...t.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}renderComponent(){const{device:e}=this.environment;return e.isMobile?this.renderMobileResults():this.renderDesktopResults()}renderDesktopResults(){const{results:e,loading:t,onScrollOffsetChange:i}=this.props,r=0===e.length;return(0,k.jsx)(o.Fragment,{children:(0,k.jsxs)(m.Z,{style:{width:"100%",maxHeight:300,position:"relative",...r&&{marginTop:0}},type:D.Z.Y,children:[this.renderRowsMenuList(e),t&&(0,k.jsx)(Ke,{}),i&&(0,k.jsx)(x.Z,{onChange:i})]})})}renderMobileResults(){const{results:e,loading:t,resultsType:i}=this.props,r=0===e.length,n=this.props.schema[this.props.property];return Boolean("relation"===(null==n?void 0:n.type)&&n.connectedRelation)&&r?(0,k.jsx)("div",{style:{marginTop:20},children:(0,k.jsx)(Ve,{blockPropertyValueOverlayStore:this.props.blockPropertyValueOverlayStore,collectionStore:this.props.collectionStore,targetCollectionStore:this.props.targetCollectionStore,sections:[],propertySchema:n,property:this.props.property,pageRecordStore:this.props.parentStore,search:this.props.searchQuery,relationPropertyMenuStore:this.props.relationPropertyMenuStore,addPage:this.props.addPage,addingPage:this.props.addingPage})}):(0,k.jsxs)(o.Fragment,{children:[r&&!t&&"existing"===i?void 0:this.renderRowsMenuList(e),t&&(0,k.jsx)(Ke,{})]})}renderRowsMenuList(e){const{parentStore:t,collectionStore:i,targetCollectionStore:o,property:r,canDrag:n,canConfigureCollection:a,loading:d,onCreatePage:p,handleClearProperty:u,overlayMode:h,disabled:m}=this.props,{device:x}=this.environment,b=this.props.schema[r],f=Boolean("relation"===(null==b?void 0:b.type)&&b.connectedRelation),P=o.getFormat().integration_id,M=e=>{let t=(0,k.jsx)(c.FormattedMessage,{id:"database.relationProperty.relatedPages.subHeader",defaultMessage:"{count, plural, one {{count} linked page} other {{count} linked pages}}",values:{count:e}});return P&&([l.f3,l.mQ].includes(P)?t=(0,k.jsx)(c.FormattedMessage,{id:"database.relationProperty.relatedGoogleDriveOrFigmaFiles.subHeader",defaultMessage:"{count, plural, one {{count} linked file} other {{count} linked files}}",values:{count:e}}):P===l.U9&&(t=(0,k.jsx)(c.FormattedMessage,{id:"database.relationProperty.relatedGithubPages.subHeader",defaultMessage:"{count, plural, one {{count} linked PR} other {{count} linked PRs}}",values:{count:e}}))),t},R=o.getFormatStore().getKeyStore("app_config_uri").getValue()===s.p$,j=[],S=[],w=e.filter((e=>{let{pageResult:t}=e;return t.type===A.Rt.SelectedPage})).length;e.map((e=>{if(e.pageResult.type===A.Rt.SearchPage){B.G.createChildStore(t,e.pageResult.pointer).isTemplate()||S.push(He(e,e.pageResult.pointer,this.environment,this.props,w))}else e.pageResult.type===A.Rt.SelectedPage&&j.push(He(e,e.pageResult.pointer,this.environment,this.props,w))}));const I=[];if(j.length>0){const e=j.map((e=>e.key.toString()));I.push({key:"results",render:t=>(0,k.jsx)(Ue,{...t,title:R?void 0:Ee(this.props.property,this.props.schema)?(0,k.jsx)(c.FormattedMessage,{id:"database.relationProperty.relatedPages.limit.subHeader",defaultMessage:"Linked page"}):M(j.length),collectionStore:i,targetCollectionStore:o,property:r,showRight:"add"!==(null==h?void 0:h.type),disabled:!a,style:{paddingBottom:R?0:4},children:n&&!Ee(this.props.property,this.props.schema)&&e.length>1?(0,k.jsx)(g.ZP,{direction:"vertical",keys:e,renderKey:i=>t.children[e.indexOf(i)],onDrop:this.handleDraggableListDrop,store:this.stores.draggableListStore}):t.children}),items:j})}if(!f&&(0===S.length&&0===j.length||S.length>0)){const e=R||d?void 0:S.length>0?j.length>0?(0,k.jsx)(c.FormattedMessage,{id:"database.relationProperty.unrelatedPages.anotherPage.subHeader",defaultMessage:"Link another page"}):(0,k.jsx)(c.FormattedMessage,{id:"database.relationProperty.unrelatedPages.subHeader",defaultMessage:"Link a page"}):(0,k.jsx)(c.FormattedMessage,{id:"database.relationProperty.noResults.subHeader",defaultMessage:"No results"});let t;d||0!==S.length||x.isMobile||f||!this.props.searchQuery||!(R&&S.length<1)&&R||(S.push({key:"empty",render:e=>(0,k.jsx)(v.Z,{targetCollectionStore:o,title:this.props.searchQuery||"",focused:e.focused,onClick:p,isSection:!1,index:this.props.index}),action:()=>{p&&p()}}),t={paddingBottom:0}),R&&(t={paddingBottom:0});const n={key:"unrelated",render:n=>(0,k.jsx)(Ue,{...n,title:e,collectionStore:i,targetCollectionStore:o,property:r,showRight:0===j.length||"add"===(null==h?void 0:h.type),disabled:!a,style:t}),items:S};"add"===(null==h?void 0:h.type)?I.unshift(n):I.push(n)}const T=[];let Z;if(R&&!x.isMobile&&j.length>0&&!m){T.push({key:"sprints_backlog",render:e=>(0,k.jsx)(C,{focused:e.focused,onMouseEnter:e.onMouseEnter,targetCollectionStore:o,onClick:u,isSection:!1,index:this.props.index,blockPropertyValueOverlayStore:this.props.blockPropertyValueOverlayStore}),action:()=>{u&&u()}}),Z={paddingBottom:0,paddingTop:0};const e={key:"backlog",render:e=>(0,k.jsx)(Ue,{...e,collectionStore:i,targetCollectionStore:o,property:r,showRight:0===j.length||"add"===(null==h?void 0:h.type),disabled:!a,style:Z}),items:T};I.push(e)}return f?(0,k.jsx)(Ve,{blockPropertyValueOverlayStore:this.props.blockPropertyValueOverlayStore,collectionStore:i,targetCollectionStore:o,sections:I,propertySchema:b,property:r,pageRecordStore:this.props.parentStore,search:this.props.searchQuery,relationPropertyMenuStore:this.props.relationPropertyMenuStore,addPage:this.props.addPage,addingPage:this.props.addingPage}):(0,k.jsx)(y.Z,{type:y.i.Vertical,store:this.stores.menuListStore,style:{padding:"4px 0px"},initialFocus:this.environment.device.isMobile?void 0:0,sections:I})}}function Ke(){return(0,k.jsx)("div",{style:{height:"100%",padding:A.wI,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,k.jsx)(h.Z,{style:{margin:"0 auto"}})})}function Ue(e){window.__c={n:"RelationSectionHeader"};const{collectionStore:t,targetCollectionStore:i,property:o,showRight:r,disabled:s,style:l}=e,d=(0,n.VK)((()=>i.isSyncedCollection()),[i]),c=(0,n.VK)((()=>{const e=t.getSchema()[o];return Boolean(e&&a.NK(e))}),[t,o]);return(0,k.jsx)(b.Z,{...e,noTextOverflow:!0,isTitleUppercase:!1,right:r&&!d&&!c&&(0,k.jsx)(I.default,{collectionStore:t,targetCollectionStore:i,property:o,disabled:s}),style:{paddingTop:0,paddingBottom:4,...l},desktopTitleStyle:{height:19,alignItems:"center",marginTop:6,marginBottom:6,paddingLeft:12,paddingRight:9}})}Oe.displayName="RelationPropertyMenuResults",Oe.messages=(0,c.defineMessages)({noEditAccessForUnselectedRelation:{id:"collectionsRelationsPicker.noEditAccessForUnselectedRelation",defaultMessage:"Edit access required to add."},noEditAccessForSelectedRelation:{id:"collectionsRelationsPicker.noEditAccessForSelectedRelation",defaultMessage:"Edit access required to remove."}});const ze=Oe;function Ee(e,t){const i=t[e];return Boolean(i&&"relation"===i.type&&1===i.limit)}function He(e,t,i,o,r){const{disabled:n,canDrag:a,parentStore:l,collectionStore:d,targetCollectionStore:c,onAccept:p,property:g,schema:h,blockPropertyValueOverlayStore:y,onClickActionButton:m,handleClearProperty:x}=o,b=B.G.createChildStore(l,t),v=c.getFormatStore().getKeyStore("app_config_uri").getValue()===s.p$;let M=a&&!Ee(g,h)&&!v;r&&(M=M&&r>1);return{key:b.id,render:o=>{const r=e.pageResult.type===A.Rt.SelectedPage;return(0,k.jsx)(f.ZP,{disableTooltip:e.canEdit,renderTooltip:()=>{const e=r?Oe.messages.noEditAccessForSelectedRelation:Oe.messages.noEditAccessForUnselectedRelation;return Z.default.formatMessage(e)},render:s=>(0,k.jsx)(P.Z,{...o,canDrag:M&&r,collectionStore:d,targetCollectionStore:c,relatedPageStore:b,disabled:n||!e.canEdit,isSelected:r,pageStore:l,property:g,rowType:"popup",onActionButtonClick:()=>m(e.pageResult),blockPropertyValueOverlayStore:y,propertyLimit:Ee(g,h)?1:void 0,onOpenPageButtonClick:()=>{u.O([t],b,i,"relation_property")},handleClearProperty:()=>x(),...(0,F.Z)(o,s)}),textWrap:!0})},action:t=>{p(e.pageResult,T.DJ(t.event))}}}},30926:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(49085);class r extends o.default{getInitialState(){return{searchQuery:"",searchLimit:r.limitIncrement,searchPopupOpen:!1,addingPage:!1}}}r.limitIncrement=20,r.incrementScrollOffset=200;const n=r},64275:(e,t,i)=>{i.d(t,{D:()=>n});i(67294);var o=i(45238),r=i(85893);const n=(0,o.I)("closeSmall",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},39132:(e,t,i)=>{i.d(t,{c:()=>n});i(67294);var o=i(45238),r=i(85893);const n=(0,o.I)("eye",{viewBox:"0 0 32 32",svg:(0,r.jsx)("path",{d:"M16.006 25.812c8.863 0 14.994-7.17 14.994-9.406C31 14.16 24.858 7 16.006 7 7.252 7 1 14.16 1 16.406c0 2.236 6.252 9.406 15.006 9.406zm0-3.242a6.194 6.194 0 01-6.197-6.164c-.012-3.452 2.744-6.164 6.197-6.164 3.419 0 6.185 2.711 6.185 6.164 0 3.364-2.766 6.164-6.185 6.164zm0-3.94c1.228 0 2.246-1.007 2.246-2.224 0-1.228-1.018-2.235-2.246-2.235-1.24 0-2.258 1.007-2.258 2.235 0 1.217 1.018 2.224 2.258 2.224z"})})},75071:(e,t,i)=>{i.d(t,{f:()=>n});i(67294);var o=i(45238),r=i(85893);const n=(0,o.I)("plusThick",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})}}]);