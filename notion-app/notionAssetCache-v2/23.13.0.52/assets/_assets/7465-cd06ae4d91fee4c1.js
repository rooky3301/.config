"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7465],{68973:(e,t,s)=>{s.d(t,{TA:()=>g,Zg:()=>f,eT:()=>S,mk:()=>b});s(21703),s(57658),s(67294);var i=s(29477),a=s(45953),r=s(21202),o=s(9291),n=s(54642),l=s(47307),c=s(57345),d=s(28578),u=s(26136),p=s(54801),m=s(67181),h=s(85893);function f(e){m.Z.resetSitesForSpace(e.id)}async function b(e,t){const{spaceStore:s,currentUserId:o,limit:l}=t;if(!s.id)return;const[c]=await Promise.all([n.getPublishedPagesForUser(e,{spaceId:s.id,limit:l||50}),(0,i.Vs)(1500)]);if("failed"===c.type)throw new Error("Failed to fetch published pages.");if(c.data.recordMap){const e=[],t=a.PF.create(c.data.recordMap);for(const{model:a}of t)if(a&&a.table===r.iU){const t=u.G.createChildStore(s,{table:r.iU,id:a.id});e.push(t)}let i=e;return o&&(i=p.S(e,o)),m.Z.initializeSiteResultsForSpace(s.id,i),e}}function g(e){c.lG(e),d.ZP.setState({...d.ZP.state,display:d.wV.Publish,tab:d.XF.Publish})}async function S(e){return new Promise(((t,s)=>{l.showDialog({message:(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,h.jsx)(o.FormattedMessage,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}},67181:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(49085),a=s(72126),r=s(70203);class o extends i.default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t.map((e=>({store:e,publishedMetadata:{publishedTime:this.getPublishedTime(e)}}))),this.emit()}getPublishedTime(e){const t=e.getPermissionItems().find((e=>"public_permission"===e.type));return"public_permission"===(null==t?void 0:t.type)?t.added_timestamp:void 0}getSortedSitesForSpace(e,t){const{sortAscending:s,sortColumn:i}=this.state,o=this.state.sites[e];if(o)switch(i){case"page":return a.Xo(o,(e=>r.QaF(e.store.getTitleValue()).toLowerCase()),s?"asc":"desc");case"created-by":return a.Xo(o,(e=>{var s;return null===(s=e.store.getCreatedByStore())||void 0===s?void 0:s.getDisplayName(t).toLowerCase()}),s?"asc":"desc");case"published-date":return a.Xo(o,(e=>e.publishedMetadata.publishedTime),s?"asc":"desc");default:return o}}removeSiteFromSpace(e,t){const s=this.state.sites[e];s&&(this.state.sites[e]=s.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const n=new o},36060:(e,t,s)=>{s.d(t,{lA:()=>l});s(40902),s(92996),s(41432),s(99036),s(80951);var i=s(59753),a=(s(86517),s(97880));s(42613),s(4615),s(71644),s(6287),s(15047),s(70475),s(68955),s(46227),s(89789),s(72126);var r=s(74446);s(21202),s(19889),s(70203),s(21703),s(18844),s(70279),s(91644),s(29369);var o=s(45953);s(58129),s(70921),s(30842),s(39050),s(54368),s(51650),s(88179),s(80926),s(8542),s(10188),s(98963),s(7470),s(77420),s(60014),s(13493),s(75908),s(6359),s(7678),s(73409),s(60897),s(69549),s(33709),s(44312),s(4986),s(52719),s(58912),s(19639),s(36077),s(97715),s(32161),s(82447),s(9713),s(57398),s(49953),s(14710),s(9508),s(62643),s(57883),s(66726),s(30754),s(6946),s(9844),s(25753),s(84683),s(38429),s(89488),s(65311),s(16427),s(61220),s(96683),s(70017),s(89470),s(49126),s(94578),s(4137),s(80396),s(24836),s(86135),s(78929),s(84323),s(83200),s(67627),s(65963),s(14130),s(34406),s(42314),s(16663),s(19221),s(93646),s(63787),s(38952),s(40837),s(65635),s(96740),s(63921),s(75990),s(57829),s(63188),s(56877),s(76413),s(47969),s(47238),s(35623),s(77858),s(37202),s(26195),s(60113),s(14718),s(14327),s(71495),s(53412),s(65836),s(5505),s(24494),s(66295),s(10354),s(19716),s(76244),s(98897),s(46769),s(66079),s(58161),s(28182),s(35794),s(11045);s(2607);(0,a.AO)((e=>"title"===e||"text"===e||"url"===e||"email"===e||"phone_number"===e||"checkbox"===e||"person"===e||"file"===e||"select"===e||"multi_select"===e||"status"===e||"number"===e||"date"===e||"relation"===e||"button"===e||"auto_increment_id"===e||"verification"===e?{true:e}:{false:e}));s(38297),s(606);const n=o.Ak.create();o.PF.create();Date.now();r.mF.fromRecordMap(n),r.zF.fromRecordMap(n);const l=i.om.fromRecordMap(n);i.s8.fromRecordMap(n)}}]);