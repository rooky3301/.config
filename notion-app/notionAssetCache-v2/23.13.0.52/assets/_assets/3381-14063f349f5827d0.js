"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3381],{63381:(e,t,r)=>{r.d(t,{Z:()=>ie});var i=r(67294),o=r(83355),a=r(13991),s=r(480),n=r(86628),d=r(24405),l=r(49085),c=r(40902),p=r(66897),h=r(17215),u=r(41432),m=r(15070),g=r(99036),f=r(80951),b=r(8848),y=r(63144),v=r(25501),x=r(14215),k=r(6695),_=r(38297),j=r(42875),S=r(13530),C=r(72126),B=r(59753),T=r(86517),w=r(72141),V=r(21202),M=r(77420),P=r(70279),E=r(23867),I=r(15047),D=r(29369),F=r(19889),R=r(44805),Z=r(97880),L=r(82990),U=r(7928),H=r(9291),O=r(42130),K=r(77907),A=r(41662),N=r(30874),W=r(26136),q=r(2456),z=r(44295),G=r(31278),$=r(85893);const J=function(e){let{edit:t,formatProperty:r}=e;return(0,$.jsx)(Q,{edit:t,formatProperty:r})||null};function X(e){let{beforeValue:t,afterValue:r,edit:i}=e;window.__c={n:"PageIconUpdatedEditComponent"};const o=(0,d.Fg)();return t||r?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center",color:o.lightTextColor,fontSize:12,lineHeight:1,marginBottom:8},children:[(0,z.I)({width:12,height:12,marginRight:6}),(0,$.jsx)(H.FormattedMessage,{id:"editFormatDiff.pageIcon.label",defaultMessage:"Page Icon"})]}),(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,$.jsx)(G.Z,{disabled:!0,isEmptyPage:!1,size:20,icon:t?{pointer:{table:V.iU,id:i.block_data.before.block_value.id},icon:t}:void 0}),(0,$.jsx)("div",{style:{padding:"0px 8px"},children:(0,S.s)({width:14,height:14,fill:o.mediumIconColor})}),(0,$.jsx)(G.Z,{disabled:!0,isEmptyPage:!1,size:20,icon:r?{pointer:{table:V.iU,id:i.block_data.after.block_value.id},icon:r}:void 0})]})]}):null}function Q(e){let{edit:t,formatProperty:r}=e;if("page_icon"===r){const e=t.block_data.before.block_value.format&&t.block_data.before.block_value.format[r],i=t.block_data.after.block_value.format&&t.block_data.after.block_value.format[r];return(0,$.jsx)(X,{edit:t,beforeValue:e,afterValue:i})}return"is_placeholder"===r||(0,Z.t1)(r),null}var Y=r(14200),ee=r(75561),te=r(11335);class re extends o.Z{constructor(){super(...arguments),this.storeTypes={isEditHovered:l.default.createClass(!1)},this.renderBlockEditPropertyDiff=(e,t,r)=>{const i=le(e,this.props.intl),o=i[t];if(!o)return;const a=(0,q.SX)(e.block_data.before.block_value,t),s=f.wV({property:t,schema:i,block:B.kk.fromBlock(e.block_data.before.block_value),getRecordModel:this.getRecordModel,userId:this.environment.currentUser.id,userTimeZone:(0,j.r)(),intl:this.props.intl}),n=(0,q.SX)(e.block_data.after.block_value,t),d=o.type;return s&&"text"!==d&&"title"!==d?(0,$.jsx)(ge,{rootStore:this.props.rootStore,value:{value:n,spaceId:(0,E.C)(e.block_data.after.block_value.space_id)},propertySchema:o,labeled:r}):(0,$.jsx)(q.Hq,{labeled:r,name:o.name,type:o.type,icon:o.icon,children:(0,$.jsx)(te.Z,{propertySchema:o,beforeValue:{value:a,spaceId:(0,E.C)(e.block_data.before.block_value.space_id)},afterValue:{value:n,spaceId:(0,E.C)(e.block_data.after.block_value.space_id)},rootStore:this.props.rootStore})})},this.getRecordValue=this.props.rootStore.getRecordValue,this.getRecordModel=this.props.rootStore.getRecordModel}renderComponent(){return this.renderEdit()||null}renderEdit(){var e,t;if("comment-edit"===this.props.type){const{edit:e,discussionLocation:t,hideAuthorName:r,lineClamp:i}=this.props;switch(e.type){case"comment-created":return this.renderCommentCreatedEdit({edit:e,discussionLocation:t,hideAuthorName:r,lineClamp:i});case"comment-changed":return this.renderCommentChangedEdit(e);case"comment-deleted":return this.renderCommentDeletedEdit(e,t);default:(0,Z.t1)(e)}}const{edit:r}=this.props;switch(r.type){case"block-created":return(0,$.jsx)(ce,{rootStore:this.props.rootStore,blockValue:r.block_data.block_value});case"block-deleted":return(0,$.jsx)(ke,{rootStore:this.props.rootStore,blockValue:r.block_data.block_value});case"block-changed":return this.renderBlockChangedEdit(r);case"block-property-changed":return(0,$.jsx)(ye,{rootStore:this.props.rootStore,edit:r});case"collection-property-changed":return(0,$.jsx)(we,{edit:r});case"collection-changed":return(0,$.jsx)("div",{style:O.v.wrapStyle,children:(0,$.jsx)(pe,{rootStore:this.props.rootStore,spaceId:r.space_id,args:r.collection_data})});case"collection-created":return(0,$.jsx)("div",{style:O.v.wrapStyle,children:(0,$.jsx)(he,{rootStore:this.props.rootStore,description:(null===(e=r.collection_data)||void 0===e?void 0:e.description)&&{value:null===(t=r.collection_data)||void 0===t?void 0:t.description,spaceId:r.space_id}})});case"mention-created":return this.renderMentionCreated(r);case"permission-created":return this.renderPermissionCreated(r);case"permission-changed":return this.renderPermissionChanged(r);case"permission-deleted":return this.renderPermissionDeleted(r);case"permission-restriction-created":case"permission-restriction-deleted":return this.renderPermissionInheritanceChanged(r);case"permission-group-created":return this.renderPermissionGroupCreated(r);case"permission-group-changed":return this.renderPermissionGroupChanged(r);case"permission-group-deleted":return this.renderPermissionGroupDeleted(r);case"reminder-created":return this.renderReminderCreated(r);case"permission-group-mention-created":return this.renderPermissionGroupMentionCreated(r);case"permission-group-mention-deleted":case"mention-deleted":return null;default:(0,Z.t1)(r)}}renderBlockChanged(e){switch(e.block_data.after.block_value.type){case u.Ti.text:return this.renderTextBlockChanged(e);case u.Ti.header:return this.renderHeaderBlockChanged(e);case u.Ti.subHeader:return this.renderSubHeaderBlockChanged(e);case u.Ti.subSubHeader:return this.renderSubSubHeaderBlockChanged(e);case u.Ti.toggle:return this.renderToggleBlockChanged(e);case u.Ti.bulletedList:return this.renderBulletedListBlockChanged(e);case u.Ti.numberedList:return this.renderNumberedListBlockChanged(e);case u.Ti.quote:return this.renderQuoteBlockChanged(e);case u.Ti.factory:return this.renderFactoryBlockChanged(e);case u.Ti.equation:return this.renderEquationBlockChanged(e);case u.Ti.toDo:return this.renderTodoBlockChanged(e);case u.Ti.code:return this.renderCodeBlockChanged(e);case u.Ti.bookmark:return this.renderBookmarkBlockChanged(e);case u.Ti.page:return this.renderPageBlockChanged(e);case u.Ti.collectionView:case u.Ti.collectionViewPage:return(0,$.jsx)(ne,{edit:e});case u.Ti.image:return this.renderImageBlockChanged(e);case u.Ti.embed:return this.renderEmbedBlockChanged(e,"embed");case u.Ti.framer:return this.renderEmbedBlockChanged(e,"framer");case u.Ti.tweet:return this.renderEmbedBlockChanged(e,"tweet");case u.Ti.gist:return this.renderEmbedBlockChanged(e,"gist");case u.Ti.drive:return(0,$.jsx)(ue,{rootStore:this.props.rootStore,edit:e});case u.Ti.maps:return this.renderEmbedBlockChanged(e,"maps");case u.Ti.invision:return this.renderEmbedBlockChanged(e,"invision");case u.Ti.video:return this.renderEmbedBlockChanged(e,"video");case u.Ti.audio:return this.renderEmbedBlockChanged(e,"audio");case u.Ti.file:return this.renderEmbedBlockChanged(e,"file");case u.Ti.callout:return this.renderCalloutBlockChanged(e);case u.Ti.whimsical:return this.renderEmbedBlockChanged(e,"whimsical");case u.Ti.miro:return this.renderEmbedBlockChanged(e,"miro");case u.Ti.abstract:return this.renderEmbedBlockChanged(e,"abstract");case u.Ti.mixpanel:return this.renderEmbedBlockChanged(e,"mixpanel");case u.Ti.sketch:return this.renderEmbedBlockChanged(e,"sketch");case u.Ti.replit:return this.renderEmbedBlockChanged(e,"replit");case u.Ti.excalidraw:return this.renderEmbedBlockChanged(e,"excalidraw");case u.Ti.tableRow:return(0,$.jsx)(Te,{rootStore:this.props.rootStore,edit:e});case u.Ti.hex:return this.renderEmbedBlockChanged(e,"hex");case u.Ti.hex:return this.renderEmbedBlockChanged(e,"deepnote");case u.Ti.externalObjectInstance:return(0,$.jsx)(Se,{edit:e})}}renderBlockChangedEdit(e){const t=this.renderBlockChanged(e);if(t)return(0,$.jsx)("div",{style:O.v.wrapStyle,children:t})}renderEditTitleDiff(e){return this.renderBlockEditPropertyDiff(e,"title",!1)}renderTextBlockChanged(e){return this.renderEditTitleDiff(e)}renderCalloutBlockChanged(e){return(0,$.jsx)(v.Z,{title:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Callout",id:"edit.calloutBlockChanged.label"}),theme:this.theme,children:this.renderEditTitleDiff(e)})}renderHeaderBlockChanged(e){return(0,$.jsx)("div",{style:O.v.headerStyle,children:this.renderEditTitleDiff(e)})}renderSubHeaderBlockChanged(e){return(0,$.jsx)("div",{style:O.v.subHeaderStyle,children:this.renderEditTitleDiff(e)})}renderSubSubHeaderBlockChanged(e){return(0,$.jsx)("div",{style:O.v.subSubHeaderStyle,children:this.renderEditTitleDiff(e)})}renderToggleBlockChanged(e){return(0,$.jsx)(q.ZD,{children:this.renderEditTitleDiff(e)})}renderBulletedListBlockChanged(e){return(0,$.jsx)("ul",{style:{margin:0,paddingLeft:28},children:(0,$.jsx)("li",{children:this.renderEditTitleDiff(e)})})}renderNumberedListBlockChanged(e){return(0,$.jsx)("ol",{style:{margin:0,paddingLeft:28},children:(0,$.jsx)("li",{children:this.renderEditTitleDiff(e)})})}renderQuoteBlockChanged(e){return(0,$.jsx)(v.Z,{title:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Quote",id:"edit.quoteBlockChanged.label"}),theme:this.theme,children:this.renderEditTitleDiff(e)})}renderFactoryBlockChanged(e){return(0,$.jsx)(v.Z,{title:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Template Button",id:"edit.templateButtonBlockChanged.label"}),theme:this.theme,children:this.renderEditTitleDiff(e)})}renderEquationBlockChanged(e){return(0,$.jsx)(v.Z,{title:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Equation",id:"edit.equationBlockChanged.label"}),theme:this.theme,children:this.renderEditTitleDiff(e)})}renderTodoBlockChanged(e){return c.j4({before:e.block_data.before.block_value,after:e.block_data.after.block_value,property:"checked"})?(0,$.jsxs)("div",{style:{display:"inline-flex"},children:[(0,$.jsx)("div",{style:{marginRight:6,marginTop:3,lineHeight:1},children:this.renderBlockEditPropertyDiff(e,"checked",!1)}),this.renderEditTitleDiff(e)]}):(0,$.jsxs)("div",{style:{display:"inline-flex"},children:[(0,$.jsx)(ve,{rootStore:this.props.rootStore,blockValue:e.block_data.after.block_value}),this.renderEditTitleDiff(e)]})}renderCodeBlockChanged(e){return c.j4({before:e.block_data.before.block_value,after:e.block_data.after.block_value,property:"language"})?(0,$.jsxs)(v.Z,{title:oe(e.block_data.after.block_value),theme:this.theme,children:[(0,$.jsx)("span",{style:{fontFamily:L.Z.getCompositeFontFamily(a.SP).mono,fontSize:12,tabSize:2},children:(0,$.jsx)(_e,{intl:this.props.intl,rootStore:this.props.rootStore,edit:e})}),this.renderBlockEditPropertyDiff(e,"language",!0)]}):(0,$.jsx)(v.Z,{title:oe(e.block_data.after.block_value),theme:this.theme,children:(0,$.jsx)("span",{style:{fontFamily:L.Z.getCompositeFontFamily(a.SP).mono,fontSize:12,tabSize:2},children:(0,$.jsx)(_e,{intl:this.props.intl,rootStore:this.props.rootStore,edit:e})})})}renderCaptionChanged(e){return se(e,"caption")&&this.renderBlockEditPropertyDiff(e,"caption",!1)}renderEmbedBlockChanged(e,t){const{intl:r}=this.props,o=se(e,"source")&&(0,$.jsxs)(v.Z,{title:h.xg(r,t),theme:this.theme,children:[(0,$.jsx)(de,{blockValue:e.block_data.after.block_value}),this.renderBlockEditPropertyDiff(e,"source",!1)]});return(0,$.jsxs)(i.Fragment,{children:[o,(0,$.jsx)("div",{style:{marginBottom:o?4:0},children:this.renderCaptionChanged(e)})]})}renderImageBlockChanged(e){const t=ae(e.block_data.before.block_value),r=ae(e.block_data.after.block_value),o=t!==r&&(0,$.jsxs)("div",{style:{marginTop:4,marginBottom:4},children:[(0,$.jsx)("div",{style:{...O.v.getLabelStyle(this.theme),marginBottom:4},children:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Updated",id:"edit.imageBlockChanged.updatedTitle"})}),r&&(0,$.jsx)(q.xP,{src:r,permissionRecord:{table:V.iU,id:e.block_id}})]});return(0,$.jsxs)(i.Fragment,{children:[o,(0,$.jsx)("div",{style:{marginBottom:o?4:0},children:this.renderCaptionChanged(e)})]})}renderComment(e){let{commentValue:t,discussionLocation:r,showEditedBadge:i,hideAuthorName:o,lineClamp:a}=e;if(!t.created_by_table||!t.created_by_id)return;if("comment-edit"!==this.props.type)return;const s=this.getRecordValue({table:t.created_by_table,id:t.created_by_id,spaceId:t.space_id}),n=s&&(0,p.LU)({table:t.created_by_table,value:s}),d=n?(0,p.$4)(this.props.intl,n):(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Unknown author",id:"edit.unknownAuthor.label"}),l=t.text&&(0,$.jsx)(Y.Z,{propertySchema:{type:"text",name:""},value:{spaceId:t.space_id,value:this.props.highlightCurrentUser?(0,R.H4)({textValue:t.text,highlightStyle:this.props.highlightCurrentUserStyle??"background_only",currentUserId:this.environment.currentUser.id,getRecordModel:this.getRecordModel}):t.text},rootStore:this.props.rootStore}),c=t.content&&t.content.length>0&&t.content.map((e=>{const r=this.getRecordValue({table:"block",id:e,spaceId:t.space_id});return r&&(0,$.jsx)(q.ZP,{blockValue:r,rootStore:this.props.rootStore})})).filter(Z.$K),h=W.t1.createChildStore(this.props.rootStore,{table:P.x_,id:t.id,spaceId:(0,E.C)(this.props.rootStore.pointer.spaceId)}),u=h.getUserVisibleReactions().length>0,m=!u,g=this.stores.isEditHovered;return(0,$.jsxs)("div",{style:{...m&&{position:"relative"}},onMouseEnter:()=>g.setState(!0),onMouseLeave:()=>g.setState(!1),children:[!o&&(0,$.jsx)("div",{style:{...O.v.getLabelStyle(this.theme),marginBottom:2},children:d}),(0,$.jsx)("span",{style:{...L.Z.textOverflowStyle,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:a||6},children:l}),c,(0,$.jsx)("div",{style:{...m&&{position:"absolute",top:-3,right:3}},children:(g.state||u)&&(0,$.jsx)(K.LazyReactionBar,{parentStore:h,discussionLocation:r,onClick:this.props.onReactionClick})}),i&&(0,$.jsx)("span",{style:{color:this.theme.mediumTextColor,paddingLeft:4},children:(0,$.jsx)(H.FormattedMessage,{id:"edit.editedBadge",defaultMessage:"(edited)"})})]})}renderCommentDiff(e){var t,r;const{before:o,after:a}=e;if(!a.created_by_table||!a.created_by_id)return;const s=this.getRecordValue({table:a.created_by_table,id:a.created_by_id,spaceId:a.space_id}),n=s&&(0,p.LU)({table:a.created_by_table,value:s}),d=n?(0,p.$4)(this.props.intl,n):(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Unknown author",id:"edit.unknownAuthorCommentDiff.label"}),l=o.text&&a.text&&(0,$.jsx)(te.Z,{propertySchema:{type:"text",name:""},beforeValue:{value:o.text||[],spaceId:o.space_id},afterValue:{value:a.text||[],spaceId:a.space_id},rootStore:this.props.rootStore}),c=null===(t=a.content)||void 0===t?void 0:t.filter((e=>{var t;return!(null!==(t=o.content)&&void 0!==t&&t.includes(e))})),h=null===(r=o.content)||void 0===r?void 0:r.filter((e=>{var t;return!(null!==(t=a.content)&&void 0!==t&&t.includes(e))})),u=(0,$.jsxs)(i.Fragment,{children:[null==h?void 0:h.map((e=>{const t=this.getRecordValue({table:V.iU,id:e,spaceId:a.space_id});return t&&(0,$.jsx)(ke,{rootStore:this.props.rootStore,blockValue:t})})),null==c?void 0:c.map((e=>{const t=this.getRecordValue({table:V.iU,id:e,spaceId:a.space_id});return t&&(0,$.jsx)(q.ZP,{blockValue:t,rootStore:this.props.rootStore})}))]});return(0,$.jsxs)("div",{children:[(0,$.jsx)("div",{style:{...O.v.getLabelStyle(this.theme),marginBottom:2},children:d}),l,u]})}renderBookmarkBlockChanged(e){const t=(se(e,"title")||se(e,"source"))&&(0,$.jsxs)(v.Z,{title:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Bookmark",id:"edit.bookmarkBlockPropertyChanged.label"}),theme:this.theme,children:[this.renderEditTitleDiff(e),this.renderBlockEditPropertyDiff(e,"link",!0)]});return(0,$.jsxs)(i.Fragment,{children:[t,se(e,"caption")&&(0,$.jsx)("div",{style:{marginBottom:t?4:0},children:this.renderCaptionChanged(e)})]})}renderPageBlockChanged(e){const t=c.OS({before:e.block_data.before.block_value,after:e.block_data.after.block_value,schema:e.block_schema}),r=c.B9({before:e.block_data.before.block_value,after:e.block_data.after.block_value});return(0,$.jsxs)("div",{children:[t.map(((t,r,i)=>(0,$.jsx)("div",{children:this.renderBlockEditPropertyDiff(e,t,!0)},t))),r.map(((r,i,o)=>{const a=0===t.length&&0===i,s=i===o.length-1;return(0,$.jsx)("div",{style:{marginTop:a?6:10,marginBottom:s?0:6},children:(0,$.jsx)(J,{formatProperty:r,edit:e})},r)}))]})}renderPermissionCreated(e){return(0,$.jsxs)("div",{style:{...O.v.permissionStyle,...O.v.addedStyle,marginTop:3,marginBottom:3},children:[(0,$.jsx)("div",{children:this.renderPermissionTarget(e)}),(0,$.jsx)("div",{children:(0,$.jsx)(me,{item:e.permission_data})})]})}renderPermissionDeleted(e){return(0,$.jsxs)("div",{style:{...O.v.permissionStyle,...O.v.deletedStyle},children:[(0,$.jsx)("div",{children:this.renderPermissionTarget(e)}),(0,$.jsx)("div",{children:(0,$.jsx)(me,{item:e.permission_data})})]})}renderPermissionChanged(e){return(0,$.jsxs)("div",{style:O.v.permissionStyle,children:[(0,$.jsx)("div",{children:this.renderPermissionTarget(e)}),(0,$.jsx)("div",{children:(0,$.jsxs)("div",{style:O.v.diffWrapStyle,children:[(0,$.jsx)(me,{item:e.permission_data.before}),(0,$.jsx)("div",{style:{padding:"0px 8px"},children:(0,S.s)({width:14,height:14})}),(0,$.jsx)(me,{item:e.permission_data.after})]})})]})}renderPermissionInheritanceChanged(e){var t;return((null===(t=e.permission_data)||void 0===t?void 0:t.calculated_changes)||[]).map(((t,r)=>{let[o,a]=t;const s={timestamp:e.timestamp,space_id:e.space_id,type:"permission-changed",permission_data:{before:o,after:a}};return(0,$.jsx)(i.Fragment,{children:this.renderPermissionChanged(s)},`inheritance-change-${r}`)}))}renderPermissionGroupCreated(e){const t=e.permission_group_data.user_ids||[],r=C.oA(t.map((e=>this.getRecordValue({table:F.KJ,id:e}))));if(0!==r.length)return(0,$.jsx)("div",{children:r.map((e=>(0,$.jsx)("div",{style:{...O.v.groupStyle,...O.v.addedStyle,marginTop:3,marginBottom:3},children:(0,U.Nz)(this.props.intl,e)},e.id)))})}renderPermissionGroupDeleted(e){const t=e.permission_group_data.user_ids||[],r=C.oA(t.map((e=>this.getRecordValue({table:F.KJ,id:e}))));if(0!==r.length)return(0,$.jsx)("div",{children:r.map((e=>(0,$.jsx)("div",{style:{...O.v.groupStyle,...O.v.deletedStyle},children:(0,U.Nz)(this.props.intl,e)},e.id)))})}renderPermissionGroupChanged(e){const t=e.permission_group_data.before.user_ids||[],r=e.permission_group_data.after.user_ids||[],i=(0,x.E)(t,r),o=C.oA(i.created.map((e=>this.getRecordValue({table:F.KJ,id:e})))),a=C.oA(i.deleted.map((e=>this.getRecordValue({table:F.KJ,id:e}))));if(0!==o.length||0!==a.length)return(0,$.jsxs)("div",{children:[o.map((e=>(0,$.jsx)("div",{style:{...O.v.groupStyle,...O.v.addedStyle,marginTop:3,marginBottom:3},children:(0,U.Nz)(this.props.intl,e)},e.id))),a.map((e=>(0,$.jsx)("div",{style:{...O.v.groupStyle,...O.v.deletedStyle},children:(0,U.Nz)(this.props.intl,e)},e.id)))]})}renderPermissionTarget(e){const t="permission-changed"===e.type?e.permission_data.after:e.permission_data;if((0,w.jg)(t)){const e=this.getRecordValue({table:F.KJ,id:t.user_id}),r=(0,U.Nz)(this.props.intl,e);return(0,$.jsx)("div",{style:O.v.permissionTypeWrapStyle,children:(0,$.jsx)("div",{style:O.v.getUserHeaderStyle(this.theme),children:r})})}if((0,w.ix)(t)){const t=this.getRecordValue({table:I.bx,id:e.space_id}),r=t?t.name:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Unknown",id:"edit.unknownSpacePermissionTarget.label"});return(0,$.jsx)("div",{style:O.v.permissionTypeWrapStyle,children:(0,$.jsx)("div",{style:O.v.getUserHeaderStyle(this.theme),children:r})})}if((0,w.$D)(t))return(0,$.jsx)("div",{style:O.v.permissionTypeWrapStyle,children:(0,$.jsx)("div",{style:O.v.getUserHeaderStyle(this.theme),children:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Published link",id:"edit.publishToWebPermissionTarget.label"})})});if((0,w.hV)(t)){const r=this.getRecordValue({table:I.bx,id:e.space_id}),i=(r&&r.permission_groups||[]).find((e=>e.id===t.group_id)),o=i&&i.name||(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Deleted group",id:"edit.deletedPermissionGroup.label"});return(0,$.jsx)("div",{style:O.v.permissionTypeWrapStyle,children:(0,$.jsx)("div",{style:O.v.getUserHeaderStyle(this.theme),children:o})})}if((0,w.FB)(t)){const r=this.getRecordValue({table:M.cZ,id:t.bot_id,spaceId:e.space_id}),i=(0,m.Mh)(r);return(0,$.jsx)("div",{style:O.v.permissionTypeWrapStyle,children:(0,$.jsx)("div",{style:O.v.getUserHeaderStyle(this.theme),children:i})})}if((0,w.zU)(t)){const r=this.getRecordValue({table:D.e0,id:t.team_id,spaceId:e.space_id});let i=(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Members of an unknown teamspace",id:"edit.teamMemberPermissionChanged.unknownTeam"});return null!=r&&r.name&&(i=(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Members of {teamName}",id:"edit.teamMemberPermissionChanged.knownTeam",values:{teamName:r.name}})),(0,$.jsx)("div",{style:O.v.permissionTypeWrapStyle,children:(0,$.jsx)("div",{style:O.v.getUserHeaderStyle(this.theme),children:i})})}if((0,w.LW)(t)){const r=this.getRecordValue({table:D.e0,id:t.team_id,spaceId:e.space_id});let i=(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Owners of an unknown teamspace",id:"edit.teamOwnerPermissionChanged.unknownTeam"});return null!=r&&r.name&&(i=(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Owners of {teamName}",id:"edit.teamOwnerPermissionChanged.knownTeam",values:{teamName:r.name}})),(0,$.jsx)("div",{style:O.v.permissionTypeWrapStyle,children:(0,$.jsx)("div",{style:O.v.getUserHeaderStyle(this.theme),children:i})})}}renderCommentCreatedEdit(e){const{edit:t,discussionLocation:r,hideAuthorName:i,lineClamp:o}=e,a=this.getRecordValue({table:P.x_,id:t.comment_id,spaceId:t.space_id}),s=Boolean(t.comment_data&&a&&(0,y.P)(B.kk.fromValue(P.x_,t.comment_data),B.kk.fromValue(P.x_,a)));if(a)return(0,$.jsx)("div",{style:O.v.wrapStyle,children:this.renderComment({commentValue:a,discussionLocation:r,showEditedBadge:s,hideAuthorName:i,lineClamp:o})})}renderCommentChangedEdit(e){return(0,$.jsx)("div",{style:O.v.wrapStyle,children:this.renderCommentDiff(e.comment_data)})}renderCommentDeletedEdit(e,t){const r=this.getRecordValue({table:P.x_,id:e.comment_id,spaceId:e.space_id}),i=e.comment_data||r;if(i)return(0,$.jsx)("div",{style:{...O.v.wrapStyle,...O.v.deletedStyle},children:this.renderComment({commentValue:i,discussionLocation:t,showEditedBadge:!1,hideAuthorName:!1})})}renderMentionCreated(e){return this.renderBlockOrProperty({blockId:e.mentioned_block_id,property:e.mentioned_property})}renderPermissionGroupMentionCreated(e){return this.renderBlockOrProperty({blockId:e.mentioned_block_id,property:e.mentioned_property})}renderReminderCreated(e){return this.renderBlockOrProperty({blockId:e.reminder_block_id,property:e.reminder_property})}renderBlockOrProperty(e){const t=this.getRecordValue({table:V.iU,id:e.blockId});if(t){const i=(0,_.ky)({block:t,getRecordValue:this.getRecordValue});if(i){const r=g.oC(i),o=(0,$.jsx)(fe,{rootStore:this.props.rootStore,blockValue:t,prop:e.property,labeled:!0,schema:r});if(o)return(0,$.jsx)("div",{style:{...O.v.wrapStyle},children:o})}else{var r;const e=null===(r=t.properties)||void 0===r?void 0:r.title,i={...t,properties:{...t.properties,title:this.props.highlightCurrentUser&&e?(0,R.H4)({textValue:e,highlightStyle:this.props.highlightCurrentUserStyle??"background_only",currentUserId:this.environment.currentUser.id,getRecordModel:this.getRecordModel}):e}},o=(0,$.jsx)(q.ZP,{blockValue:i,rootStore:this.props.rootStore});if(o)return(0,$.jsx)("div",{style:O.v.wrapStyle,children:o})}}}}re.displayName="Edit";const ie=(0,H.injectIntl)(re);function oe(e){const t=e&&e.properties&&e.properties.language;if(!t)return(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Code",id:"edit.codeBlockChanged.label"});const r=f.Sj(t,g.fG);return(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Code - {codeLanguage}",values:{codeLanguage:r},id:"edit.codeBlockWithLanguageChanged.label"})}function ae(e){const t=e&&e.properties&&e.properties.source;return f.zB(t)}function se(e,t){return!C.Xy(e.block_data.before.block_value&&e.block_data.before.block_value.properties&&e.block_data.before.block_value.properties[t],e.block_data.after.block_value&&e.block_data.after.block_value.properties&&e.block_data.after.block_value.properties[t])}function ne(e){let{edit:t}=e;return null}function de(e){let{blockValue:t}=e;const r=ae(t);return(0,$.jsx)("span",{style:{wordBreak:"break-word"},children:r})}function le(e,t){return e.block_schema?g.a5(e):g.Kc(t)}function ce(e){let{blockValue:t,rootStore:r}=e;const i=(0,$.jsx)(q.ZP,{blockValue:t,rootStore:r,created:!0});if(i)switch(t.type){case u.Ti.quote:case u.Ti.video:case u.Ti.code:case u.Ti.equation:case u.Ti.file:case u.Ti.bookmark:case u.Ti.factory:return(0,$.jsx)("div",{style:O.v.wrapStyle,children:i});case u.Ti.table:return null;case u.Ti.tableRow:return t.properties&&(0,Z.Yd)(t.properties).length>0?(0,$.jsx)("div",{style:{...O.v.wrapStyle,...O.v.addedStyle},children:i}):null;default:return(0,$.jsx)("div",{style:{...O.v.wrapStyle,...O.v.addedStyle},children:i})}return null}function pe(e){let{spaceId:t,args:r,rootStore:i}=e;if(!r||!r.before&&!r.after)return null;const o=r.before&&r.before.description||[],a=r.after&&r.after.description||[];return(0,$.jsx)(q.Hq,{labeled:!0,name:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Description",id:"edit.descriptionPropertyChanged.label"}),icon:void 0,type:"text",children:(0,$.jsx)(te.Z,{propertySchema:{type:"text",name:""},beforeValue:{value:o,spaceId:t},afterValue:{value:a,spaceId:t},rootStore:i})})}function he(e){let{description:t,rootStore:r}=e;return t?(0,$.jsx)(q.Hq,{labeled:!0,name:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Description",id:"edit.descriptionPropertyCreated.label"}),type:"text",icon:void 0,children:(0,$.jsx)(te.Z,{propertySchema:{type:"text",name:""},beforeValue:{value:[],spaceId:t.spaceId},afterValue:t,rootStore:r})}):null}function ue(e){let{edit:t,rootStore:r}=e;const o=(0,k.v0)(t.block_data.before.block_value),a=t.block_data.after.block_value,s=o!==(0,k.v0)(a);return(0,$.jsx)(i.Fragment,{children:s&&"drive"===a.type&&(0,$.jsx)(q.ZP,{blockValue:a,rootStore:r})})}function me(e){let{item:t}=e;window.__c={n:"PermissionRole"};const r=(0,H.useIntl)(),i=t.role??"none",o=(0,T.kD)(i,void 0);return o?(0,$.jsx)("div",{style:O.v.getRoleStyle(),children:r.formatMessage(o)}):null}function ge(e){let{value:t,propertySchema:r,labeled:i,rootStore:o}=e;return(0,$.jsx)(q.KX,{value:t,propertySchema:r,labeled:i,rootStore:o})}function fe(e){let{blockValue:t,prop:r,labeled:i,schema:o,rootStore:a}=e;return(0,$.jsx)(q.Tl,{blockValue:t,prop:r,labeled:i,schema:o,rootStore:a})}function be(e){const{labeled:t,propertySchema:r,beforeValue:i,afterValue:o,rootStore:a,spaceId:s}=e,n=(0,E.C)(s);return(0,$.jsx)(q.Hq,{labeled:t,name:r.name,type:r.type,icon:r.icon,children:(0,$.jsx)(te.Z,{propertySchema:r,beforeValue:{value:i,spaceId:n},afterValue:{value:o,spaceId:n},rootStore:a})})}function ye(e){let{edit:t,rootStore:r}=e;return(0,$.jsx)("div",{children:Object.entries(t.property_updates).map((e=>{let[i,o]=e;const a=t.filtered_block_schema[i];if(!a)return null;const s=o.before?o.before.value:[],n=o.after?o.after.value:[],d=(0,$.jsx)(be,{rootStore:r,labeled:!0,propertySchema:a,beforeValue:s,afterValue:n,spaceId:t.space_id});return d?(0,$.jsx)("div",{style:O.v.wrapStyle,children:d},i):void 0})).filter(Z.$K)})}function ve(e){let{blockValue:t,rootStore:r}=e;return(0,$.jsx)("div",{style:{marginRight:6,marginTop:3},children:(0,$.jsx)(fe,{rootStore:r,blockValue:t,prop:"checked",labeled:!1})})}function xe(e){let{edit:t,prop:r,labeled:i,intl:o,rootStore:a}=e;const s=le(t,o)[r],n="block-changed"===t.type?t.block_data.after.block_value:t.block_data.block_value,d=(0,q.SX)(n,r);return s?(0,$.jsx)(ge,{rootStore:a,value:{value:d,spaceId:(0,E.C)(n.space_id)},propertySchema:s,labeled:i}):null}function ke(e){let{blockValue:t,rootStore:r}=e;window.__c={n:"BlockDeletedEditComponent"};const i=(0,d.Fg)(),o=(0,$.jsx)(q.ZP,{rootStore:r,blockValue:t,deleted:!0});if(o)switch(t.type){case u.Ti.quote:case u.Ti.video:case u.Ti.code:case u.Ti.equation:case u.Ti.file:case u.Ti.bookmark:case u.Ti.factory:return(0,$.jsxs)("div",{children:[(0,$.jsx)("div",{style:O.v.getLabelStyle(i),children:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Deleted",id:"edit.blockDeletedEditStyles.factoryLabel"})}),(0,$.jsx)("div",{style:{...O.v.wrapStyle},children:o})]});case u.Ti.table:return null;case u.Ti.tableRow:return t.properties&&(0,Z.Yd)(t.properties).length>0?(0,$.jsx)("div",{style:{...O.v.wrapStyle,...O.v.deletedStyle},children:o}):null;default:return(0,$.jsxs)("div",{children:[(0,$.jsx)("div",{style:O.v.getLabelStyle(i),children:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Deleted",id:"edit.blockDeletedEditStyles.defaultLabel"})}),(0,$.jsx)("div",{style:{...O.v.wrapStyle,...O.v.deletedStyle},children:o})]})}return null}function _e(e){let{edit:t,intl:r,rootStore:i}=e;return(0,$.jsx)(xe,{intl:r,rootStore:i,edit:t,prop:"title",labeled:!1})}function je(e){let{edit:t,diffKey:r}=e;window.__c={n:"ExternalObjectInstanceBlockChangedBody"};const i=t.block_data[r].block_value,o=(0,n.VK)((()=>B.kk.fromBlock(i)),[i]),a=(0,H.useIntl)(),s=(0,n.VK)((()=>o.isType("external_object_instance")?h.$F(a,o,B.om.fromRecordMap(N.Z.getIntegrationsAsRecordMap())):null),[o,a]);return(0,$.jsx)($.Fragment,{children:s})}function Se(e){let{edit:t}=e;window.__c={n:"ExternalObjectInstanceBlockChangedComponent"};const r=(0,d.Fg)();return(0,$.jsxs)(v.Z,{title:(0,$.jsx)(H.FormattedMessage,{...h.V1.editLabel}),theme:r,children:[(0,$.jsx)("div",{style:O.v.deletedStyle,children:(0,$.jsx)(je,{edit:t,diffKey:"before"})}),(0,$.jsx)("div",{children:(0,$.jsx)(je,{edit:t,diffKey:"after"})})]})}function Ce(e){let{after:t,newOptions:r,modifiedOptions:i,removedOptions:o}=e;window.__c={n:"CollectionPropertyChangedDiffComponent"};const a=(0,d.Fg)(),s=e=>{let{option:t,strikethrough:r=!1}=e;const i=(0,b.KR)(a,null==t?void 0:t.color);return(0,$.jsx)(ee.Z,{...i,strikethrough:r,children:t.value})};return(0,$.jsx)(q.Hq,{labeled:!0,name:t.name,icon:t.icon,type:t.type,children:(0,$.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:4},children:[r.length>0&&(0,$.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",columnGap:4},children:[(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Added",id:"Edit.renderCollectionPropertyChangedDiff.addedProperty"}),r.map((e=>(0,$.jsx)("span",{children:s({option:e})},e.id)))]}),o.length>0&&(0,$.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",columnGap:4},children:[(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Removed",id:"Edit.renderCollectionPropertyChangedDiff.removedProperty"}),o.map((e=>(0,$.jsx)("span",{children:s({option:e,strikethrough:!0})},e.id)))]}),i.length>0&&(0,$.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"row"},children:[(0,$.jsx)("span",{children:(0,$.jsx)(H.FormattedMessage,{defaultMessage:"Edited",id:"Edit.renderCollectionPropertyChangedDiff.editedProperty"})}),(0,$.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:i.map((e=>(0,$.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[(0,$.jsx)("span",{style:{marginLeft:4},children:s({option:e.before,strikethrough:!0})}),(0,$.jsx)("span",{style:{padding:"0px 8px"},children:(0,S.s)({width:10,height:10,fill:a.mediumIconColor})}),s({option:e.after})]},e.before.id)))})]})]})})}function Be(e){let{before:t,after:r,property:i,rootStore:o}=e;window.__c={n:"SimpleTableRowBlockChangedProperty"};const a=(0,s.O7)(),l=(0,d.Fg)(),c=t.properties&&i in t.properties?t.properties[i]:void 0,p=r.properties&&i in r.properties?r.properties[i]:void 0,h=(0,n.VK)((()=>A.g$.renderCellValueForActivity({environment:a,cellValue:c,spaceId:t.space_id,parentStore:o,theme:l})),[a,c,t,o,l]),u=(0,n.VK)((()=>A.g$.renderCellValueForActivity({environment:a,cellValue:p,spaceId:r.space_id,parentStore:o,theme:l})),[a,p,r,o,l]);return(0,$.jsxs)("div",{style:{display:"flex",border:`1px solid ${l.tableDividerColor}`,overflowWrap:"anywhere",width:"max-content",maxWidth:"100%",verticalAlign:"top",lineHeight:L.Z.lineHeight.UIRegular.desktop,padding:4,marginBottom:4},children:[(0,$.jsx)("span",{style:{...O.v.deletedStyle,marginBottom:void 0},children:h}),c&&p&&(0,S.s)({width:12,height:12,fill:l.mediumIconColor,alignSelf:"center",margin:4}),(0,$.jsx)("span",{style:{...O.v.addedStyle},children:u})]})}function Te(e){let{edit:t,rootStore:r}=e;const i=t.block_data.before.block_value,o=t.block_data.after.block_value,a=c.Yr({before:i,after:o});return(0,$.jsx)("div",{style:{display:"flex",alignItems:"stretch",flexDirection:"column"},children:a.map(((e,t)=>(0,$.jsx)(Be,{before:i,after:o,property:e,rootStore:r},t)))})}function we(e){let{edit:t}=e;const{before:r,after:i}=t.collection_property_data||{};if(!r||!i)return null;const o=f.IQ({before:r,after:i});if(!o)return null;const{newOptions:a,modifiedOptions:s,removedOptions:n}=o;return[a,s,n].every((e=>0===e.length))?null:(0,$.jsx)("div",{style:{...O.v.wrapStyle,paddingTop:6,paddingBottom:4},children:(0,$.jsx)(Ce,{after:i,newOptions:a,modifiedOptions:s,removedOptions:n})})}},11335:(e,t,r)=>{r.d(t,{Z:()=>u});r(67294);var i=r(86628),o=r(24405),a=r(80951),s=r(19255),n=r(32566),d=r(21202),l=r(97880),c=r(26136),p=r(14200),h=r(85893);function u(e){const t=e.propertySchema.type;switch(t){case"title":case"text":return(0,h.jsx)(m,{...e});case"relation":return(0,h.jsx)(g,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"checkbox":case"number":case"person":case"file":case"url":case"email":case"phone_number":case"created_time":case"created_by":case"last_edited_time":case"last_edited_by":case"last_visited_time":case"formula":case"rollup":case"select":case"multi_select":case"date":case"button":case"status":case"auto_increment_id":case"location":case"verification":return(0,h.jsx)(f,{...e});default:(0,l.t1)(t)}}function m(e){const t={value:s.Mg({before:e.beforeValue.value,after:e.afterValue.value}),spaceId:e.beforeValue.spaceId};return(0,h.jsx)(p.Z,{value:t,propertySchema:e.propertySchema,rootStore:e.rootStore})}function g(e){window.__c={n:"RelationPropertyDiff"};const{beforeValue:t,afterValue:r,propertySchema:o,rootStore:s}=e,n=(0,i.VK)((()=>a.NT({beforeValue:t.value,afterValue:r.value,propertySchema:o,getRecordModel:s.getRecordModel,getBlockTitle:e=>c.G.createChildStore(s,{table:d.iU,id:e.id}).getPropertyValue("title")})),[t,r,o,s]);return(0,h.jsx)(p.Z,{value:{value:n,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:s})}function f(e){window.__c={n:"ArrowPropertyDiff"};const t=(0,o.yK)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center"}})),[]);return(0,h.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,h.jsx)(p.Z,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),(0,h.jsx)(b,{}),(0,h.jsx)(p.Z,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function b(){window.__c={n:"Arrow"};const e=(0,o.yK)((e=>({container:{padding:"0px 8px"},icon:{width:15,height:15,fill:e.mediumIconColor}})),[]);return(0,h.jsx)("div",{style:e.container,children:(0,n.k)(e.icon)})}}}]);