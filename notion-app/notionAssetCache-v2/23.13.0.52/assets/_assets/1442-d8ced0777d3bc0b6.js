"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[1442],{96323:(e,t,i)=>{i.d(t,{F0:()=>D,Hh:()=>q,LK:()=>A,NZ:()=>L,Rr:()=>j,cK:()=>F,cx:()=>z,lA:()=>W,sH:()=>G,sY:()=>Z,xI:()=>H,xj:()=>R,yY:()=>Y});i(57658),i(67294);var n=i(480),o=i(86628),a=i(24405),r=i(41432),s=i(8848),l=i(12970),c=i(91856),d=i(56666),m=i(75e3),p=i(25651),u=i(11751),g=i(54434),f=i(97880),y=i(9291),b=i(42858),k=i(82530),h=i(83919),v=i(72495),w=i(19037),T=i(78663),C=i(99417),S=i(19124),x=i(40959),P=i(16772),M=i(27724),I=i(89941),V=i(62967),B=i(85893);const Z=(0,y.defineMessages)({notionAI:{defaultMessage:"Notion AI",id:"completions.completionActions.AIAssist"},more:{defaultMessage:"See more",id:"completions.completionActions.more"},alternativeUiString:{defaultMessage:"{text}",id:"completions.completionActions.alternativeUiString"},aiSummaryBlockDisplayName:{defaultMessage:"Summary",id:"completions.completionActions.aiSummaryBlockDisplayName"},aiActionItemsBlockDisplayName:{defaultMessage:"Action items",id:"completions.completionActions.aiActionItemsBlockDisplayName"},aiFreePromptBlockDisplayName:{defaultMessage:"Custom AI block",id:"completions.completionActions.aiFreePromptBlockDisplayName"},aiSectionBlockDisplayName:{defaultMessage:"Custom AI section",id:"completions.completionActions.aiSectionBlockDisplayName"}});function Y(e){return function(t){return(0,B.jsx)(v.Z,{...t,title:(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,u.t)({width:16,height:16,marginRight:4}),(0,B.jsx)("div",{children:t.title})]}),right:e})}}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const i=[];if(i.push(...e.slice(0,t)),e.length>t){const n=(0,V.$J)({key:"more actions",render:e=>(0,B.jsx)(v.Z,{...e}),actions:e.slice(t)});i.push((0,V.MV)({key:"more",displayName:Z.more,analyticsName:"Completions - more",validators:I.vE,svg:()=>(0,B.jsx)(J,{}),subActions:()=>[n],collapseSubActionsIntoParent:!0,width:350}))}return i}function N(){return(0,B.jsx)(W,{svg:p.R,svgFill:s.FN.light.purple[500]})}function F(e){const{key:t,name:i,analyticsName:n,textToInsert:o,onUpdatePromptState:a,right:r,renderTooltip:s,showEllipsis:l,userProvidedSearchName:c,executeImmediately:d,gtmFavoriteId:m}=e,p=i.length>1e3?`${i.slice(0,1e3)}…`:i;return(0,V.cN)({key:t,analyticsName:`Completions - insert text into prompt - ${n}`,...(u=l?`${p}…`:p,{displayName:Z.alternativeUiString,displayNameInterpolatedValues:{text:u}}),validators:[],closeParentMenu:!1,svg:N,action(){a({insertText:o??i,analyticsName:n,gtmFavoriteId:m,executeImmediately:d})},right:r??z("updatePrompt"),renderTooltip:s,userProvidedSearchName:c});var u}function A(e){const{from:t,type:i,onUpdatePromptState:n}=e;function o(e){return F({key:`completions.${e.key}`,name:(0,C.t8)(e),analyticsName:e.key,textToInsert:(0,T.$W)(e),onUpdatePromptState:n,showEllipsis:!0})}const a="cursor"===i?{selectionType:i,isPageEmpty:!w.IC()}:{selectionType:i},r=(0,C.up)(a),s=(0,C.pv)(r,a),l=[];for(const[c,d]of s){const e=[];for(const a of d)"helpMeDraft"!==a.key&&"helpMeEdit"!==a.key&&"helpMeWrite"!==a.key&&("translate"===a.key?e.push(O(a,I.vE,i,t)):"changeTone"===a.key?e.push(E(a,I.vE,i,t)):a.steps?e.push(o(a)):e.push(L({prompt:a,validators:I.vE,type:i,from:t})));const n=(0,V.$J)({key:`completions.${c}`,title:(0,C.Mh)(c,"cursor"===i?"page":"selection"),render:e=>(0,B.jsx)(v.Z,{...e}),actions:j(e.filter(f.$K),7)});l.push(n)}return"cursor"===i&&l.push((0,V.$J)({key:"completions.aiBlocks",title:C.Dr.aiBlocks,render:e=>(0,B.jsx)(v.Z,{...e}),actions:x.O5.map((e=>function(e){const t=x.Hc[e.aiBlockType],{displayName:i,svg:n}=_[e.aiBlockType],o=e=>!t.shouldShow||t.shouldShow(e);return(0,V.cN)({key:`completions.aiBlocks.${t.key}`,analyticsName:`Completions - ${t.key}`,closeParentMenu:!0,svg:n,displayName:i,validators:[...I.vE,o],action:e=>{let{environment:i}=e;k.createAndCommit({userAction:"completionActions.createAiBlockAction",environment:i,perform:e=>{b.at({environment:i,selection:M.default.state.stores,createBlockItem:t,analyticsFrom:"ai_prompt",transaction:e})}})}})}({aiBlockType:e})))})),l}const _={[r.MF.aiSummaryBlock]:{displayName:Z.aiSummaryBlockDisplayName,svg:()=>(0,B.jsx)(Q,{svg:c.Y})},[r.MF.aiActionItemsBlock]:{displayName:Z.aiActionItemsBlockDisplayName,svg:()=>(0,B.jsx)(Q,{svg:l.O})},[r.MF.aiFreePromptBlock]:{displayName:Z.aiFreePromptBlockDisplayName,svg:()=>(0,B.jsx)(Q,{svg:u.t})},[r.MF.aiSectionBlock]:{displayName:Z.aiSectionBlockDisplayName,svg:()=>(0,B.jsx)(Q,{svg:u.t})}};function H(e){return(0,V.$J)({key:"completions",title:Z.notionAI,render:Y(),actions:K(e)})}function K(e){const{store:t,from:i}=e,n=[];for(const o of(0,S.G9)()){if("helpMeWrite"===o.key)continue;const e=L({prompt:o,validators:I.vE,type:"aiBlock",from:i,store:t});e&&n.push(e)}return n}function D(e){const{environment:t,inputValue:i,store:n}=e,o=(0,S.qB)({customPrompt:i,isPageEmpty:!1});h.triggerCompletionForAiBlock({environment:t,store:n,prompt:o,additionalContext:{prompt:i}})}function O(e,t,i,n){const{key:o,name:a,svg:r,svgFill:s,steps:l}=e;if("translate"!==o||!l||1!==l.length||"language"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((o=>{let{key:a,name:r}=o;return(0,V.cN)({key:`completions.translate.${a}`,analyticsName:`Completions - translate - ${a}`,displayName:r,validators:t,closeParentMenu:!0,right:z("submitPrompt"),action:t=>{let{environment:o}=t;U({environment:o,prompt:e,from:n,type:i,additionalContext:{language:a}})}})})),d=(0,V.$J)({key:"translate language actions",render:e=>(0,B.jsx)(v.Z,{...e}),actions:c}),m=r?()=>(0,B.jsx)(W,{svg:r,svgFill:s}):void 0;return(0,V.MV)({key:"translate",displayName:a,analyticsName:`Completions - ${o}`,validators:t,svg:m,subActions:()=>[d]})}function E(e,t,i,n){const{key:o,name:a,svg:r,svgFill:s,steps:l}=e;if("changeTone"!==o||!l||1!==l.length||"tone"!==l[0].key||"dropdown"!==l[0].type)return;const c=l[0].dropdownOptions.map((o=>{let{key:a,name:r}=o;return(0,V.cN)({key:`completions.changeTone.${a}`,analyticsName:`Completions - changeTone - ${a}`,displayName:r,validators:t,closeParentMenu:!0,right:z("submitPrompt"),action:t=>{let{environment:o}=t;U({environment:o,prompt:e,from:n,type:i,additionalContext:{tone:a}})}})})),d=(0,V.$J)({key:"changeTone tone actions",render:e=>(0,B.jsx)(v.Z,{...e}),actions:c}),m=r?()=>(0,B.jsx)(W,{svg:r,svgFill:s}):void 0;return(0,V.MV)({key:"changeTone",displayName:a,analyticsName:`Completions - ${o}`,validators:t,svg:m,subActions:()=>[d]})}function R(e){window.__c={n:"ActionHintIcon"};const{focused:t,type:i}=e,r=(0,n.O7)(),s=(0,o.VK)((()=>r.device.isPhone),[r]),l=(0,a.yK)((e=>({iconStyle:{width:14,height:14,fill:e.mediumIconColor,opacity:!s&&t?1:0},containerStyle:{width:18,height:18,display:"flex",alignItems:"center",justifyContent:"center"}})),[t,s]);switch(i){case"submitPrompt":return(0,B.jsx)("div",{style:l.containerStyle,children:(0,m.U)(l.iconStyle)});case"updatePrompt":return(0,B.jsx)("div",{style:l.containerStyle,children:(0,g.F)(l.iconStyle)});default:(0,f.t1)(i)}}function z(e){return t=>(0,B.jsx)(R,{type:e,focused:t.focused})}function G(e){const{customPrompt:t,execute:i}=e;return(0,V.cN)({analyticsName:"Completions - execute current prompt input",key:"explicitFreeFormAction",displayName:C.Dr.genericHelpMeWrite,displayNameInterpolatedValues:{filter:t},svg:N,right:z("submitPrompt"),validators:[],closeParentMenu:!1,renderTooltip:V.zz,action(){i()}})}const $=()=>(0,C.Nh)();function L(e){const{prompt:t,validators:i,type:n,from:o,store:a,sortScoreMultiplier:r}=e,{key:s,name:l}=t;if("translate"===s&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return O(t,i,n,o);if("changeTone"===s&&("textSelection"===n||"blockSelection"===n||"cursor"===n))return E(t,i,n,o);const c=function(e){const{svg:t,svgFill:i}=e;return t?()=>(0,B.jsx)(W,{svg:t,svgFill:i}):void 0}(t),d=[...i];return t.requiresContent?d.push(w.IC):t.requiresNoContent&&d.push(w.ff(w.IC)),t.isNewModel&&d.push($),(0,V.cN)({key:`completions.${s}`,analyticsName:`Completions - ${s}`,displayName:l,fuzzySearchKeywords:t.fuzzySearchKeywords,validators:d,closeParentMenu:!0,svg:c,right:z("submitPrompt"),sortScoreMultiplier:r,action:e=>{let{environment:i}=e;U({environment:i,prompt:t,type:n,from:o,store:a})}})}function U(e){const{environment:t,prompt:i,type:n,from:o,store:a,additionalContext:r}=e;if("textSelection"===n)h.openCompletionPopupForSavedContext({environment:t,prompt:i,from:o,additionalContext:r});else if("blockSelection"===n)h.openCompletionPopupForBlockSelectionContext({environment:t,prompt:i,from:o,additionalContext:r});else if("cursor"===n){if(i.preferToNeverInsertTextAtCursor)return void h.selectPageAndOpenCompletionPopupForBlockSelectionContext({environment:t,prompt:i,from:o,additionalContext:r});h.openCompletionPopupForCursorContext({environment:t,prompt:i,from:o,additionalContext:r})}else"aiBlock"===n?a&&h.triggerCompletionForAiBlock({environment:t,store:a,prompt:i,additionalContext:r}):(0,f.t1)(n)}function q(e){const{inputValue:t,from:i,mode:n,environment:o}=e;switch(n){case"edit":return void function(e){const{customPrompt:t,from:i,environment:n}=e,o=(0,C.sB)(t);"closedWithContext"===P.default.state.type&&P.default.state.context&&h.openCompletionPopupForPrefilledContext({environment:n,context:P.default.state.context,prompt:o,additionalContext:{prompt:t},from:i,skipInitialForm:!0})}({environment:o,customPrompt:t,from:i});case"write":const e=(0,C.wq)(t);if(e){const{prompt:t,additionalContext:n}=e,a=(0,T.FD)();if(!a)return;return void h.openCompletionPopupForPrefilledContext({environment:o,context:a,prompt:t,additionalContext:n,from:i,skipInitialForm:!0})}return void function(e){const{environment:t,customPrompt:i,from:n}=e,o=(0,S.qB)({customPrompt:i,isPageEmpty:!w.IC()}),a=(0,T.FD)();a&&h.openCompletionPopupForPrefilledContext({environment:t,context:a,prompt:o,additionalContext:{prompt:i},from:n,skipInitialForm:!0})}({environment:o,customPrompt:t,from:i})}(0,f.t1)(n)}function J(){window.__c={n:"MoreIcon"};const e=(0,a.Fg)();return(0,d.o)({width:12,marginLeft:2,marginRight:2,fill:e.mediumIconColor})}function W(e){window.__c={n:"BoxedIcon"};const t=(0,a.yK)((t=>({box:{height:e.fixedWidth?22:void 0,width:e.fixedWidth?22:void 0,display:"flex",alignItems:"center",justifyContent:"center",...e.boxStyles},icon:{height:16,width:16,fill:e.svgFill??(0,s.gh)({theme:"light"}).regularIconColor}})),[e]);return(0,B.jsx)("div",{style:t.box,children:e.svg(t.icon)})}function Q(e){window.__c={n:"AiBlockIcon"};const t=(0,a.yK)((e=>({box:{background:e.fill.purple,width:24,height:24,borderRadius:4},icon:{fill:e.icon.purple}})),[]);return(0,B.jsx)(W,{svg:e.svg,svgFill:t.icon.fill,boxStyles:t.box})}},46225:(e,t,i)=>{i.d(t,{v:()=>ee,w:()=>X});i(57658),i(67294);var n=i(14577),o=i(41892),a=i(41432),r=i(77657),s=i(74181),l=i(72126),c=i(45953),d=i(21202),m=i(9844),p=i(97880),u=i(9291),g=i(4727),f=i(36280),y=i(67060),b=i(42858),k=i(82530),h=i(63594),v=i(47099),w=i(72495),T=i(68204),C=i(19037),S=i(42),x=i(99417),P=i(40959),M=i(33929),I=i(89014),V=i(30874),B=i(27724),Z=i(41363),Y=i(21797),j=i(89941),N=i(96323),F=i(62967),A=i(11732),_=i(85893);const H=(0,u.defineMessages)({basicBlocksSection:{id:"action.section.basicBlocks",defaultMessage:"Basic blocks"},tableViewTitle:{id:"newBlock.tableView.title",defaultMessage:"Table view"},tableViewDescription:{id:"newBlock.tableView.description",defaultMessage:"Add a table view for a new or existing database."},boardViewTitle:{id:"newBlock.boardView.title",defaultMessage:"Board view"},boardViewDescription:{id:"newBlock.boardView.description",defaultMessage:"Create a kanban board database view."},galleryViewTitle:{id:"newBlock.galleryView.title",defaultMessage:"Gallery view"},galleryViewDescription:{id:"newBlock.galleryView.description",defaultMessage:"Create a gallery database view."},listViewTitle:{id:"newBlock.listView.title",defaultMessage:"List view"},listViewDescription:{id:"newBlock.listView.description",defaultMessage:"Create a list database view."},calendarViewTitle:{id:"newBlock.calendarView.title",defaultMessage:"Calendar view"},calendarViewDescription:{id:"newBlock.calendarView.description",defaultMessage:"Create a calendar database view."},timelineViewTitle:{id:"newBlock.timelineView.title",defaultMessage:"Timeline view"},timelineViewDescription:{id:"newBlock.timelineView.description",defaultMessage:"Create a timeline database view."},databaseInlineTitle:{id:"newBlock.databaseInline.title",defaultMessage:"Database - Inline"},databaseInlineDescription:{id:"newBlock.databaseInline.description",defaultMessage:"Add a new inline database to this page."},databaseInlineKeywords:{id:"newBlock.databaseInline.fuzzySearchKeywords",defaultMessage:"Database Inline db"},databaseFullPageTitle:{id:"newBlock.databaseFullPage.title",defaultMessage:"Database - Full page"},databaseFullPageDescription:{id:"newBlock.databaseFullPage.description",defaultMessage:"Add a new database as a sub-page."},databaseFullPageKeywords:{id:"newBlock.databaseFullPage.fuzzySearchKeywords",defaultMessage:"Database Full page db"},linkedViewOfCollectionTitle:{id:"newBlock.linkedViewOfCollection.title",defaultMessage:"Linked view of database"},linkedViewOfCollectionMobileTitle:{id:"newBlock.linkedViewOfCollectionMobile.title",defaultMessage:"Linked view"},linkedViewOfCollectionKeywords:{id:"newBlock.linkedViewOfCollection.fuzzySearchKeywords",defaultMessage:"Create linked view of database db"},linkedViewOfCollectionDescription:{id:"newBlock.linkedViewOfCollection.description",defaultMessage:"Add an existing database to this page."},mentionPersonTitle:{id:"action.mentionPerson.title",defaultMessage:"Mention a person"},mentionPersonDescription:{id:"action.mentionPerson.description",defaultMessage:"Ping someone so they get a notification."},mentionPageTitle:{id:"action.mentionPage.title",defaultMessage:"Mention a page"},mentionPageDescription:{id:"action.mentionPage.description",defaultMessage:"Mention a page and place in text."},dateOrReminderTitle:{id:"action.dateOrReminder.title",defaultMessage:"Date or reminder"},dateOrReminderDescription:{id:"action.dateOrReminder.description",defaultMessage:"Insert a date or reminder in text."},insertEmojiTitle:{id:"action.insertEmoji.title",defaultMessage:"Emoji"},insertEmojiDescription:{id:"action.insertEmoji.description",defaultMessage:"Search for an emoji to place in text."},insertInlineEquationTitle:{id:"action.insertInlineEquation.title",defaultMessage:"Inline equation"},insertInlineEquationKeywords:{id:"action.insertInlineEquation.fuzzySearchKeyword",defaultMessage:"LaTeX Math Inline Equation $"},insertInlineEquationDescription:{id:"action.insertInlineEquation.description",defaultMessage:"Insert mathematical symbols in text."},databaseSection:{id:"action.section.database",defaultMessage:"Database"},mediaSection:{id:"action.section.media",defaultMessage:"Media"},aiBlocksSection:{id:"action.section.aiBlocks",defaultMessage:"AI blocks"},advancedBlocksSection:{id:"action.section.advancedBlocks",defaultMessage:"Advanced blocks"},inlineSection:{id:"action.section.inline",defaultMessage:"Inline"},embedsSection:{id:"action.section.embeds",defaultMessage:"Embeds"},syncedDatabasesSection:{id:"action.section.syncedDatabases",defaultMessage:"Synced Databases"},actionsSection:{id:"action.section.actions",defaultMessage:"Actions"}}),K=[P.Hc[a.Ti.text],P.Hc[a.Ti.page],P.Hc[a.Ti.toDo],P.Hc[a.Ti.header],P.Hc[a.Ti.subHeader],P.Hc[a.Ti.subSubHeader],P.Hc[a.Ti.table],P.Hc[a.Ti.bulletedList],P.Hc[a.Ti.numberedList],P.Hc[a.Ti.toggle],P.Hc[a.Ti.quote],P.Hc[a.Ti.divider],P.Hc[a.Ti.linkToPage],P.Hc[a.Ti.callout]],D=[P.Hc[a.Ti.image],P.Hc[a.Ti.bookmark],P.Hc[a.Ti.video],P.Hc[a.Ti.audio],P.Hc[a.Ti.code],P.Hc[a.Ti.file],P.Hc[a.Ti.drawing]],O=[(0,P.MU)({key:"table view",blockType:a.Ti.collectionView,displayName:H.tableViewTitle,thumbnail:o.Z.images.blocks.tableViewInlinePng,description:H.tableViewDescription,fuzzySearchKeywords:H.tableViewTitle,tooltipPhoto:o.Z.images.tooltips.blocks.tablePng,createTemplate:()=>S.iC({isInline:!0,viewType:"table"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,I.u)(t.id,{viewType:"table"})},collectionViewType:"table"}),(0,P.MU)({key:"board view",blockType:a.Ti.collectionView,displayName:H.boardViewTitle,thumbnail:o.Z.images.blocks.boardInlinePng,description:H.boardViewDescription,fuzzySearchKeywords:H.boardViewTitle,tooltipPhoto:o.Z.images.tooltips.blocks.boardPng,createTemplate:()=>S.iC({isInline:!0,viewType:"board"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,I.u)(t.id,{viewType:"board"})},collectionViewType:"board"}),(0,P.MU)({key:"gallery view",blockType:a.Ti.collectionView,displayName:H.galleryViewTitle,thumbnail:o.Z.images.blocks.galleryInlinePng,description:H.galleryViewDescription,fuzzySearchKeywords:H.galleryViewTitle,tooltipPhoto:o.Z.images.tooltips.blocks.galleryPng,createTemplate:()=>S.iC({isInline:!0,viewType:"gallery"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,I.u)(t.id,{viewType:"gallery"})},collectionViewType:"gallery"}),(0,P.MU)({key:"list view",blockType:a.Ti.collectionView,displayName:H.listViewTitle,thumbnail:o.Z.images.blocks.listInlinePng,description:H.listViewDescription,fuzzySearchKeywords:H.listViewTitle,tooltipPhoto:o.Z.images.tooltips.blocks.listPng,createTemplate:()=>S.iC({isInline:!0,viewType:"list"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,I.u)(t.id,{viewType:"list"})},collectionViewType:"list"}),(0,P.MU)({key:"calendar view",blockType:a.Ti.collectionView,displayName:H.calendarViewTitle,thumbnail:o.Z.images.blocks.calendarInlinePng,description:H.calendarViewDescription,fuzzySearchKeywords:H.calendarViewTitle,tooltipPhoto:o.Z.images.tooltips.blocks.calendarPng,createTemplate:()=>S.iC({isInline:!0,viewType:"calendar"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,I.u)(t.id,{viewType:"calendar"})},collectionViewType:"calendar"}),(0,P.MU)({key:"timeline view",blockType:a.Ti.collectionView,displayName:H.timelineViewTitle,thumbnail:o.Z.images.blocks.timelineInlinePng,description:H.timelineViewDescription,fuzzySearchKeywords:H.timelineViewTitle,tooltipPhoto:o.Z.images.tooltips.blocks.timelinePng,createTemplate:()=>S.iC({isInline:!0,viewType:"timeline"}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,I.u)(t.id,{viewType:"timeline"})},collectionViewType:"timeline"}),(0,P.MU)({key:"database inline",blockType:a.Ti.collectionView,displayName:H.databaseInlineTitle,thumbnail:o.Z.images.blocks.tableViewInlinePng,description:H.databaseInlineDescription,fuzzySearchKeywords:H.databaseInlineKeywords,tooltipPhoto:o.Z.images.tooltips.blocks.tableViewPng,createTemplate:e=>S.W_({environment:e,isInline:!0}),collectionViewType:"inline"}),(0,P.MU)({key:"database full page",blockType:a.Ti.collectionViewPage,displayName:H.databaseFullPageTitle,thumbnail:o.Z.images.blocks.tableViewPng,description:H.databaseFullPageDescription,fuzzySearchKeywords:H.databaseFullPageKeywords,tooltipPhoto:o.Z.images.tooltips.blocks.tableViewPng,createTemplate:e=>S.W_({environment:e,isInline:!1}),collectionViewType:"full_page"}),(0,P.MU)({key:"linked database",blockType:a.Ti.collectionView,displayName:H.linkedViewOfCollectionTitle,fuzzySearchKeywords:H.linkedViewOfCollectionKeywords,thumbnail:o.Z.images.blocks.linkPng,description:H.linkedViewOfCollectionDescription,tooltipPhoto:o.Z.images.tooltips.blocks.tablePng,createTemplate:()=>S.iC({isInline:!0,viewType:"table"}),shouldShow:e=>!e.environment.device.isMobile}),(0,P.MU)({key:"linked database mobile",blockType:a.Ti.collectionView,displayName:H.linkedViewOfCollectionMobileTitle,fuzzySearchKeywords:H.linkedViewOfCollectionKeywords,thumbnail:o.Z.images.blocks.linkPng,description:H.linkedViewOfCollectionDescription,tooltipPhoto:o.Z.images.tooltips.blocks.tablePng,createTemplate:()=>S.iC({isInline:!0,viewType:"table"}),shouldShow:e=>e.environment.device.isMobile})],E=P.O5.map((e=>P.Hc[e])),R=[P.Hc[a.Ti.tableOfContents],P.Hc[a.Ti.equation],P.Hc[a.Ti.button],P.Hc[a.Ti.factory],P.Hc[a.Ti.breadcrumb],P.Hc[a.Ti.tab],P.Hc[a.Ti.transclusionContainer],P.Hc[a.MF.toggleFormatHeaderBlock],P.Hc[a.MF.toggleFormatSubHeaderBlock],P.Hc[a.MF.toggleFormatSubSubHeaderBlock],P.Hc[a.MF.column2Block],P.Hc[a.MF.column3Block],P.Hc[a.MF.column4Block],P.Hc[a.MF.column5Block],P.Hc[a.MF.mermaidCodeBlock]],z=[...[{key:"mentionPerson",title:H.mentionPersonTitle,thumbnail:o.Z.images.blocks.mentionPersonPng,description:H.mentionPersonDescription,tooltipPhoto:o.Z.images.tooltips.blocks.mentionPersonPng,action:e=>{let{environment:t}=e;y.lZ(t,{user:!0,inviteUser:!0,bot:!1,date:!1,page:!1,heading:!1,createPage:!1,reminder:!1,templateVariable:!0,group:!1})}},{key:"mentionPage",title:H.mentionPageTitle,thumbnail:o.Z.images.blocks.mentionPagePng,description:H.mentionPageDescription,tooltipPhoto:o.Z.images.tooltips.blocks.mentionPagePng,action:e=>{let{environment:t}=e;y.lZ(t,{user:!1,inviteUser:!1,bot:!1,date:!1,reminder:!1,page:!0,heading:!1,createPage:!1,templateVariable:!1,group:!1})}},{key:"dateOrReminder",title:H.dateOrReminderTitle,thumbnail:o.Z.images.blocks.mentionDatePng,description:H.dateOrReminderDescription,tooltipPhoto:o.Z.images.tooltips.blocks.mentionTimePng,action:e=>{let{environment:t}=e;y.lZ(t,{user:!1,inviteUser:!1,bot:!1,date:!0,reminder:!0,page:!1,heading:!1,createPage:!1,templateVariable:!0,group:!1})}}].map((e=>(0,F.cN)({key:`insert ${e.key}`,displayName:e.title,analyticsName:"Insert mention",render:t=>(0,_.jsx)(v.Z,{...t,title:M.default.formatMessage(e.title),thumbnail:e.thumbnail,tooltipPhoto:e.tooltipPhoto,description:M.default.formatMessage(e.description),format:v.Q.Insert}),validators:[C.YZ],closeParentMenu:!0,action:t=>{let{environment:i}=t;return e.action({environment:i})},nativeRender:t=>({thumbnail:e.thumbnail})}))),(0,F.cN)({key:"insert emoji",displayName:H.insertEmojiTitle,analyticsName:H.insertEmojiTitle.defaultMessage,validators:[C.YZ],closeParentMenu:!0,render:e=>(0,_.jsx)(v.Z,{...e,title:M.default.formatMessage(H.insertEmojiTitle),description:M.default.formatMessage(H.insertEmojiDescription),thumbnail:o.Z.images.blocks.inlineEmojiPng,tooltipPhoto:o.Z.images.tooltips.blocks.inlineEmojiPng,format:v.Q.Insert}),action:e=>{let{environment:t}=e;return g.jZ(t)},nativeRender:e=>({thumbnail:o.Z.images.blocks.inlineEmojiPng})}),(0,F.cN)({key:"insert inline equation",displayName:H.insertInlineEquationTitle,analyticsName:H.insertInlineEquationTitle.defaultMessage,fuzzySearchKeywords:H.insertInlineEquationKeywords,validators:[C.YZ],closeParentMenu:!0,render:e=>(0,_.jsx)(v.Z,{...e,title:M.default.formatMessage(H.insertInlineEquationTitle),description:M.default.formatMessage(H.insertInlineEquationDescription),thumbnail:o.Z.images.blocks.inlineEquationPng,tooltipPhoto:o.Z.images.tooltips.blocks.inlineEquationPng,format:v.Q.Insert}),action:e=>{let{environment:t}=e;return f.qn({environment:t,analyticsFrom:"slash_menu"})},nativeRender:e=>({thumbnail:o.Z.images.blocks.inlineEquationPng})})];function G(){let e,t,i,n;const o=[];for(const a of $.state)"Figma"===a.displayName?e=a:"Hex"===a.displayName?t=a:"Google Drive"===a.displayName?i=a:"Whimsical"===a.displayName?n=a:o.push(a);return[P.Hc[a.Ti.embed],i??P.Hc[a.Ti.drive],P.Hc[a.Ti.tweet],P.Hc[a.Ti.gist],P.Hc[a.Ti.maps],e??P.Hc[a.Ti.figma],P.Hc[a.Ti.abstract],P.Hc[a.Ti.invision],P.Hc[a.Ti.mixpanel],P.Hc[a.Ti.framer],n??P.Hc[a.Ti.whimsical],P.Hc[a.Ti.miro],P.Hc[a.Ti.sketch],P.Hc[a.Ti.excalidraw],P.Hc[a.Ti.pdf],P.Hc[a.Ti.loom],P.Hc[a.Ti.typeform],P.Hc[a.Ti.codepen],P.Hc[a.Ti.replit],t??P.Hc[a.Ti.hex],P.Hc[a.Ti.deepnote],...o]}const $=new n.Z((()=>V.Z.integrations.state.filter((e=>e.id!==r.U9&&e.id!==r.Dv)).map((e=>{if((0,s.mo)(e)||(0,s.zc)(e)){const t=(0,s.mo)(e)?"link preview":"data sync";return{key:e.id,displayName:e.name,analyticsName:e.name,searchName:`${t} ${e.name}`,thumbnail:e.info.icon??o.Z.images.blocks.embedPng,description:e.info.tagline,templateRootBlockId:"root",blockType:a.Ti.externalObjectInstance,shouldShow:e=>!C.nJ(e),createTemplate:()=>{const t={is_placeholder:!0,integration_id:e.id};return c.Ao.create({[d.iU]:{root:{id:"root",type:a.Ti.externalObjectInstance,format:t}}})}}}})).filter(p.$K)),{debugName:"getExternalIntegrationCreateBlockItems"});function L(e){return new n.Z((()=>{const t=e.isMobileNative?[]:[U()];var i;return{insertActions:J(t,"add_menu"),slashActions:(i=J(t,"slash_menu"),[...i,A.g,(0,F.$J)({key:"slash actions",title:H.actionsSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:Q((0,T.RP)(Z.Qi,(e=>!e.subActions&&!e.hideFromSlashActionMenu)))}),Y.rz,Y.Vm])}}),{debugName:"insertAndSlashActionsStore"})}function U(){const{maxActionsBeforeMore:e,actions:t}=function(){const e={selectionType:"cursor",isPageEmpty:!C.IC()},t=(0,x.up)(e),i=l.xH((0,x.pv)(t,e).map((e=>{let[t,i]=e;return i}))),n=h.Z.state,o=i.map((e=>(0,N.NZ)({prompt:e,validators:j.vE,type:"cursor",from:"slash_menu",sortScoreMultiplier:.75}))).filter(p.$K);return{maxActionsBeforeMore:n?3:1,actions:o}}();return(0,F.$J)({key:"completions",title:N.sY.notionAI,render:(0,N.yY)(),actions:(0,N.Rr)(t,e)})}const q=new n.Z((()=>V.Z.integrations.state.filter(m.l).map((e=>({key:`synced database ${e.id}`,displayName:`${e.name}`,analyticsName:`synced database ${e.name}`,searchName:`synced database ${e.name}`,thumbnail:e.info.icon??o.Z.images.blocks.embedPng,description:e.info.tagline,templateRootBlockId:"root",blockType:a.Ti.collectionView,shouldShow:e=>!C.nJ(e),createTemplate:()=>S.sU({isInline:!0,viewType:"table",integrationId:e.id}),postCreateCallback:e=>{const t=e.getCollectionViewStores()[0];t&&(0,I.u)(t.id,{viewType:"table"})}})))),{debugName:"getExternalIntegrationCreateCollectionViewBlockItems"});function J(e,t){return[(0,F.$J)({key:"Insert Basic Blocks",title:H.basicBlocksSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:K.map((e=>W(e,t)))}),...e,(0,F.$J)({key:"Insert Media",title:H.mediaSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:D.map((e=>W(e,t)))}),(0,F.$J)({key:"Insert Database New",title:H.databaseSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:O.map((e=>W(e,t)))}),(0,F.$J)({key:"Insert AI Blocks",title:H.aiBlocksSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:E.map((e=>W(e,t,void 0,.5)))}),(0,F.$J)({key:"Insert Advanced Blocks",title:H.advancedBlocksSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:R.map((e=>W(e,t)))}),(0,F.$J)({key:"Insert Inline",title:H.inlineSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:z}),(0,F.$J)({key:"Insert Embeds",title:H.embedsSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:G().map((e=>W(e,t)))}),(0,F.$J)({key:"Insert Synced Databases",title:H.syncedDatabasesSection,render:e=>(0,_.jsx)(w.Z,{...e}),actions:q.state.map((e=>W(e,t)))})]}function W(e,t,i,n){return{key:`insert ${e.key}`,displayName:e.displayName,analyticsName:e.analyticsName,searchName:e.searchName,render:t=>(0,_.jsx)(v.Z,{...t,...e,title:e.displayName,format:v.Q.Insert,...i}),closeParentMenu:!0,validators:[t=>!e.shouldShow||e.shouldShow(t)],action:i=>{let{environment:n}=i;k.createAndCommit({userAction:"actionRegistry.createInsertAction",environment:n,perform:i=>{b.at({environment:n,selection:B.default.state.stores,createBlockItem:e,analyticsFrom:t,transaction:i})}})},nativeRender:t=>({thumbnail:e.thumbnail}),sortScoreMultiplier:n}}function Q(e){return e.reduce(((e,t)=>[...e,...t.actions]),[])}const X=L({isMobileNative:!1}),ee=L({isMobileNative:!0})},86282:(e,t,i)=>{i.d(t,{RL:()=>A,xv:()=>F,rC:()=>H,Hp:()=>D,Lf:()=>_,$7:()=>N,GF:()=>O});i(21703);var n=i(15145),o=i(68626),a=i(59730),r=i(15157),s=i(45953),l=i(21202),c=i(23867),d=i(9291),m=i(75754),p=(i(95477),i(33929)),u=i(98165),g=i(94660),f=i(74948),y=i(80444),b=i(77080),k=i(56638),h=i(81193),v=i(54642),w=i(54532),T=i(89858),C=i(9953),S=i(4408),x=i(24677),P=i(28014),M=i(42875),I=i(29477),V=i(33954);var B=i(82530),Z=i(39865);const Y="LastViewedTemplateId",j=(0,d.defineMessages)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function N(e){const{environment:t,item:i,createNewPage:n,isPrivate:o}=e;x.ZH(t),k.Z.setState({open:!0,item:i,createNewPage:n,isPrivate:o,isLoading:!1}),r.Z.set({userId:t.currentUser.id,key:Y,value:i.rootId}),h.jW(t,{template_name:i.name,template_id:(0,g.gA)(i),from:n?"sidebar":"newPage"})}function F(e){k.Z.setState({item:k.Z.state.item,open:!1}),x.ZH(e)}async function A(e){const{item:t,environment:i,spaceStore:o}=e;k.Z.state.open&&k.Z.setState({...k.Z.state,isLoading:!0});const a=e.initializeStore?{...e,initializeStore:e.initializeStore,isPrivate:!1,type:"inExistingStore",useMinimalTemplates:!1}:{...e,type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let r=!1;const s=Date.now();let l;try{l=await H(a),r=!0,m._({environment:i,store:l,pageVisitSource:n.tY.Create}),F(i),i.device.isMobile&&f.close()}finally{var c;const n=Date.now()-s,a=e.initializeStore?u.VP(e.initializeStore):void 0,d=e.initializeStore?!Boolean(a):e.isPrivate;h.en(i,{template_name:t.name,destination:d?"private":"team",template_block_id:t.rootId,template_duplication_duration_ms:n,team_id:null==a?void 0:a.id,created_page_id:null===(c=l)||void 0===c?void 0:c.id}),h.Xy(i,{from:"inApp",success:r,context:e.from,template_name:t.name,template_block_id:t.rootId,target_space_id:o.id,template_duplication_duration_ms:n})}}async function _(e){const{environment:t,initializeStore:i,item:n,isPrivate:o,useMinimalTemplates:a,spaceStore:r,spaceViewStore:l}=e,c=a?n.rootId:n.previewRootId,d=await v.loadBlockSubtree(t,{block:{id:c,spaceId:n.spaceId},shallow:!1});let m;"success"===d.type&&(m=s.PF.create(d.data.subtreeRecordMap));const u="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:g}=B.createAndCommit({userAction:u,environment:t,perform:e=>{const n=i||P.KE({environment:t,spaceStore:r,spaceViewStore:l,isPrivate:o,loading:!0,transaction:e});S.fL({environment:t,inMemoryRecordCache:n.inMemoryRecordCache,recordMap:m,debugSource:u});const a=w.K8(t,{blockId:c,inMemoryRecordCache:n.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0});if(!a)throw new Error(p.default.getIntl().formatMessage(j.clientCopyError));return w.E9({environment:t,sourceBlockId:c,targetBlockPointer:n.pointer,sourceBlockSubtree:a,targetInMemoryRecordCache:n.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:n.useCrdt()}),n}});return g}async function H(e){const{environment:t,item:i,useRecordCache:n,isPrivate:o,useMinimalTemplates:a,spaceStore:r,spaceViewStore:s,isOnboarding:c}=e,{serverCommitResult:d,performResult:{pageStore:m,copyBlock:p}}=B.createAndCommit({userAction:"pageTemplateModalActions.createTemplateInstance",environment:t,perform:c=>{let d;d="inExistingStore"===e.type&&e.initializeStore?e.initializeStore:"inTeam"===e.type&&e.teamStore?T.pq({environment:t,spaceStore:r,spaceViewStore:s,teamStore:e.teamStore,from:e.from,loading:!0,appendOrPrepend:e.appendOrPrepend?e.appendOrPrepend:"append",transaction:c}):P.KE({environment:t,spaceStore:r,spaceViewStore:s,isPrivate:o,loading:!0,transaction:c});const m={id:n&&!a?i.previewRootId:i.rootId,table:l.iU,spaceId:i.spaceId};return O({item:i,spaceViewStore:s,transaction:c}),function(e){const{item:t,transaction:i,spaceViewStore:n}=e;if(n){const e=n.getSidebarHiddenTemplateIds();if(e.indexOf(t.rootId)<0){const o=e.concat([t.rootId]);C.sW({store:n,data:{sidebar_hidden_templates:o},transaction:i})}}}({item:i,spaceViewStore:s,transaction:c}),{pageStore:d,copyBlock:m}}});return await d,await D({environment:t,pageStore:m,copyBlock:p,useRecordCache:n,item:i,isOnboarding:Boolean(c)}),m}const K={block:!0,collection:!0,collection_view:!0,discussion:!0,comment:!0};async function D(e){const{environment:t,pageStore:i,copyBlock:n,item:r,useRecordCache:l,isOnboarding:d}=e,m=s.Ak.create();l&&l.forEachRecord(t.currentUser.id,(e=>{let{model:t}=e;K[t.table]&&m.setModel(t.pointer,t)}));const{currentSpaceStore:u}=y.default.state;if(!u)throw new a.p8("Could not get currentSpaceStore.");const g=()=>{B.createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplate.deletePageWhenError",environment:t,perform:e=>{Z.y8({environment:t,blocks:[i],transaction:e})}}),d&&h.Xy(t,{success:!1,template_name:r.name,template_id:r.id,template_block_id:r.rootId,target_space_id:u.id,from:"onboarding"}),o.log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{template_name:r.name,template_id:r.id,template_block_id:r.rootId,is_onboarding:d}}})},f=b.default.getConfigKey("template_ids_to_use_duplicate_block","data");if(null!=f&&f.includes(n.id))await async function(e){const{environment:t,templateBlock:i,targetBlock:n}=e,o=I.UZ(),a=v.duplicateBlock(t,{sourceBlocks:[i],targetBlocks:[n],snapshotData:void 0,addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:{currentUserId:t.currentUser.id,currentTimeZone:(0,M.r)()},convertExternalObjectInstancesToPlaceholders:i.spaceId!==n.spaceId,useCrdt:!1});let r;for await(const s of a)r=s;if(r)if(r.error){const e=(0,V.HV)(p.default.getIntl(),r.error);o.reject(e)}else o.resolve(r);else o.reject(void 0);return o.promise}({environment:t,templateBlock:n,targetBlock:{id:i.pointer.id,spaceId:(0,c.C)(i.pointer.spaceId)}}).catch(g);else{"failed"===(await v.initializePageTemplate(t,{recordMap:m.toJson({allowVersionDowngrade:!1}),sourceBlock:n,targetBlock:{id:i.pointer.id,table:i.pointer.table,spaceId:(0,c.C)(i.pointer.spaceId)},isOnboarding:d})).type&&g()}return i}function O(e){const{item:t,transaction:i,spaceViewStore:n}=e;if(n){const e=n.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const o=e.concat([t.rootId]);C.sW({store:n,data:{visited_templates:o},transaction:i})}}}},64131:(e,t,i)=>{i.d(t,{Z:()=>Y});var n=i(67294),o=i(480),a=i(86628),r=i(24405),s=i(8848),l=i(42853),c=i(70203),d=i(82990),m=i(9291),p=i(50906),u=i(98724),g=i(87279),f=i(98742),y=i(89086),b=i(52689),k=i(63334),h=i(24666),v=i(41216),w=i(64921),T=i(31945),C=i(56940),S=i(58261),x=i(78140),P=i(32163),M=i(40721),I=i(72495),V=i(26388),B=i(85893);const Z=n.Fragment;const Y=function(e){window.__c={n:"HighlightSelectionButton"};const{disabled:t,style:i}=e,Y=(0,a.qz)(e.ignoreSelectionAreaStore,k.Z),j=(0,o.O7)(),N=(0,m.useIntl)(),F=(0,r.Fg)(),A=(0,n.useCallback)((()=>{u.aS({environment:j,annotation:["h",b.Z.state.color]}),p.mt_(j,{action:"h",color:b.Z.state.color})}),[j]),_=(0,n.useCallback)((e=>{p.mt_(j,{action:"h"})}),[j]),H=(0,n.useCallback)((()=>{h.default.emit()}),[]),K=(0,n.useCallback)((e=>{u.mX({environment:j,annotationType:"h"}),b.Z.setHighlightColor(e),A()}),[j,A]),D=(0,n.useCallback)(((e,t,i,n)=>({key:t||e,action:()=>{i(),K(e),n.close()},render:i=>(0,B.jsx)(v.Z,{...i,color:e,overrideDisplayName:t})})),[K]),O=(0,a.VK)((()=>{const e=(0,y.Ld)("h");return e?c.zIN(e):"default"}),[]),E=(0,r.yK)((e=>({colorIcon:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2,...!j.device.isMobile&&{width:18,fontWeight:d.Z.fontWeight.medium,marginBottom:2},...(0,s.A_)(O,e)}})),[j.device.isMobile,O]);return(0,B.jsx)(T.ZP,{popupType:j.device.isMobile?T.Z4.SlideUp:T.Z4.Popup,originGap:4,onClose:H,onClick:_,renderOrigin:e=>(0,B.jsx)(V.ZP,{renderTooltip:()=>(0,B.jsxs)(Z,{children:[(0,B.jsx)("div",{children:(0,B.jsx)(m.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})}),(0,B.jsx)("div",{children:(0,B.jsx)(S.Z,{style:{color:F.mediumInvertedTextColor},name:"toggleHighlight"})})]}),render:n=>(0,B.jsxs)(w.Z,{style:{display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap",...i},disabled:t,disabledFeedback:t,...(0,f.Z)(e,n),children:[(0,B.jsx)("div",{style:E.colorIcon,children:j.device.isMobile?(0,B.jsx)(m.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"}):"A"}),(0,l.i)({width:10,marginLeft:j.device.isMobile?4:3,fill:"dark"===F.mode?s.ZP.white:F.lightIconColor})]})}),render:e=>{let t;return t=j.device.isMobile?{menuType:g.og.Modal,title:(0,B.jsx)(m.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:(0,B.jsx)(M.CancelMenuText,{}),onClickRight:()=>{e.close()}}:{menuType:g.og.Popup},(0,B.jsx)(x.Z,{...t,children:(0,B.jsx)(C.Z,{capture:j.device.isMobile,store:Y,ignoreBlockSelection:!1,restoreSelection:!0,focusOffscreenInput:!1,render:t=>{const i=s.CY.map((i=>D(i,void 0,t,e))),n=[D("default",N.formatMessage({defaultMessage:"Default background",id:"highlightSelectionButton.defaultBackground.label"}),t,e),...s._K.map((i=>D(i,void 0,t,e)))],o=b.Z.state.color;return(0,B.jsx)(P.Z,{type:P.i.Vertical,sections:[{key:0,items:[{key:0,action:()=>{t(),K(o),e.close()},render:e=>(0,B.jsx)(v.Z,{...e,color:o,shortcuts:["toggleHighlight"]})}],render:e=>(0,B.jsx)(I.Z,{...e,title:(0,B.jsx)(m.FormattedMessage,{defaultMessage:"Last used",id:"highlightSelectionButton.lastUsedSection.label"}),isTitleUppercase:!0})},{key:1,items:i,render:e=>(0,B.jsx)(I.Z,{...e,title:(0,B.jsx)(m.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.colorSection.label"}),isTitleUppercase:!0})},{key:2,items:n,render:e=>(0,B.jsx)(I.Z,{...e,title:(0,B.jsx)(m.FormattedMessage,{defaultMessage:"Background",id:"highlightSelectionButton.backgroundSection.label"}),isTitleUppercase:!0})}],initialFocus:void 0})}})})}})}},82945:(e,t,i)=>{i.d(t,{Z:()=>y});var n=i(67294),o=i(480),a=i(24405),r=i(45137),s=i(9291),l=i(50906),c=i(18821),d=i(41662),m=i(24666),p=i(64921),u=i(58261),g=i(26388),f=i(85893);function y(e){window.__c={n:"InlineCommentButton"};const t=(0,o.O7)(),i=t.device.isMobile,y=(0,a.yK)((e=>({keyboardShorcut:{color:e.mediumInvertedTextColor}})),[]),b=()=>{let i;const n=m.default.state;"empty"!==n.mode&&(i=d.g$.getSimpleTableCellFromTextSelection(),c.WD({environment:t,blockStore:e.blockStore,multiSelection:n.multiSelection})),l.mt_(t,{action:"comment",from:i?"simple_table_cell":void 0})};return(0,f.jsx)(g.ZP,{renderTooltip:()=>(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)("div",{children:(0,f.jsx)(s.FormattedMessage,{defaultMessage:"Comment on selected text",id:"inlineCommentButton.tooltip"})}),(0,f.jsx)("div",{children:(0,f.jsx)(u.Z,{style:y.keyboardShorcut,name:"comment"})})]}),render:t=>(0,f.jsxs)(p.Z,{style:{display:"flex",alignItems:"center",padding:"0 10px",whiteSpace:"nowrap",...e.style},disabled:e.disabled,disabledFeedback:e.disabled,onClick:b,...t,children:[(0,r.o)({width:i?18:16,height:i?18:16,marginTop:i?0:1,marginRight:4}),!i&&(0,f.jsx)(s.FormattedMessage,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"})]})})}},40464:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(67294),o=i(480),a=i(86628),r=i(24405),s=i(8848),l=i(50906),c=i(98724),d=i(89086),m=i(24666),p=i(64921),u=i(26388),g=i(85893);const f=function(e){window.__c={n:"SelectionAnnotationButton"};const{disabled:t,type:i,tooltipLabel:f,children:y,style:b,onClick:k}=e,h=(0,o.O7)(),v=(0,n.useCallback)((e=>{c.aS({environment:h,annotation:[i]}),k&&k(),l.mt_(h,{action:i})}),[h,i,k]),w=(0,a.VK)((()=>t||"editing"!==m.default.state.mode),[t]),T=(0,a.VK)((()=>Boolean((0,d.Ld)(i))),[i]),C=(0,r.yK)((e=>({button:{display:"flex",alignItems:"center",padding:"0 8px",color:T?s.ZP.blue:e.regularTextColor,...b}})),[T,b]);return(0,g.jsx)(u.ZP,{renderTooltip:()=>f,render:e=>(0,g.jsx)(p.Z,{style:C.button,disabled:w,disabledFeedback:w,onClick:v,...e,children:y})})}},32404:(e,t,i)=>{i.d(t,{Z:()=>k});var n=i(67294),o=i(480),a=i(86628),r=i(24405),s=i(70203),l=i(9291),c=i(36280),d=i(89086),m=i(66949),p=i(24666),u=i(64921),g=i(58261),f=i(26388),y=i(85893);const b={display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8};const k=function(e){let{style:t,children:i,disabled:n,onClick:l}=e;window.__c={n:"SelectionEquationButton"};const g=(0,r.Fg)(),k=(0,o.O7)(),w=(0,a.VK)((()=>h(g)),[g]),T=(0,a.VK)((()=>function(e){if(e)return!0;if("editing"!==p.default.state.mode&&!m.Z.isOpen())return!0;const t={[s.GKr.User]:s.GKr.User,[s.GKr.Page]:s.GKr.Page,[s.GKr.Comment]:s.GKr.Comment,[s.GKr.Bot]:s.GKr.Bot,[s.GKr.Date]:s.GKr.Date,[s.GKr.ExternalObjectInstance]:s.GKr.ExternalObjectInstance,[s.GKr.TemporaryPage]:s.GKr.TemporaryPage,[s.GKr.TemplateVariable]:s.GKr.TemplateVariable,[s.GKr.FormulaPageProperty]:s.GKr.FormulaPageProperty,[s.GKr.FormulaContextValue]:s.GKr.FormulaContextValue,[s.GKr.Group]:s.GKr.Group,[s.GKr.Citation]:s.GKr.Citation};for(const i of Object.values(t))if((0,d.J6)(i))return!0;return!1}(n)),[n]);return(0,y.jsx)(f.ZP,{renderTooltip:()=>(0,y.jsx)(v,{}),render:e=>(0,y.jsx)(u.Z,{style:{...b,...w.equationButton,...t},disabled:T,disabledFeedback:T,onClick:e=>function(e,t,i){c.qn({environment:t,analyticsFrom:"rich_text_menu"}),i&&i(e)}(e,k,l),...e,children:i})})};function h(e){return{equationButton:{color:(0,d.Ld)(s.GKr.Equation)?e.blueColor:e.regularTextColor},keyboardShortcut:{color:e.mediumInvertedTextColor}}}function v(){window.__c={n:"MenuTooltipComponent"};const e=h((0,r.Fg)());return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(l.FormattedMessage,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Create equation"})}),(0,y.jsx)("div",{children:(0,y.jsx)(g.Z,{style:e.keyboardShortcut,name:"openEquationMenu"})})]})}},73383:(e,t,i)=>{i.d(t,{Z:()=>k});var n=i(67294),o=i(480),a=i(86628),r=i(24405),s=i(70203),l=i(9291),c=i(50906),d=i(45990),m=i(89086),p=i(23178),u=i(24666),g=i(64921),f=i(58261),y=i(26388),b=i(85893);function k(e){window.__c={n:"SelectionLinkButton"};const t=(0,r.Fg)(),i=(0,o.O7)(),k=(0,a.VK)((()=>(0,m.Ld)(s.GKr.Link)),[]),h=(0,a.VK)((()=>function(e){if(e)return!0;if("editing"!==u.default.state.mode&&!p.Z.state.open)return!0;if((0,m.J6)(s.GKr.User)||(0,m.J6)(s.GKr.Bot)||(0,m.J6)(s.GKr.Date)||(0,m.J6)(s.GKr.Page))return!0;return!1}(e.disabled)),[e.disabled]);return(0,b.jsx)(y.ZP,{renderTooltip:()=>(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)("div",{children:(0,b.jsx)(l.FormattedMessage,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip"})}),(0,b.jsx)("div",{children:(0,b.jsx)(f.Z,{style:{color:t.mediumInvertedTextColor},name:"openLinkMenuOrOpenSearch"})})]}),render:n=>(0,b.jsx)(g.Z,{style:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8,...k&&{color:t.blueColor},whiteSpace:"nowrap",...e.style},disabled:h,disabledFeedback:h,...n,onClick:()=>function(e){d.dz({type:"focusOnly",focus:!0}),c.mt_(e,{action:s.GKr.Link})}(i),children:e.children})})}},27249:(e,t,i)=>{i.d(t,{CN:()=>d,H_:()=>s,OJ:()=>m,ay:()=>c,gh:()=>l});var n=i(11002),o=i(84465),a=i(94952),r=i(73314);function s(e){let{persona:t,defaultToLife:i}=e;if(!t)return;if(t in o._5)return t;const n={customer_support:"support",designer:"design",educator:"student",entrepreneur:"hr",freelancer:"design",hr_recruiting:"hr",it:"eng",marketing_sales:"marketing",media:"marketing",operations:"hr",operations_hr:"hr",personal:"life",product_manager:"product",programmer:"eng",other:i?"life":void 0,unfilled:i?"life":void 0,undefined:i?"life":void 0,creative:"design",founderCeo:"hr",internalCommunication:"hr",productDesign:"design",projectProgramMgmt:"product",finance:void 0,itAdmin:"eng",knowledgeManagement:"hr"};return(null==n?void 0:n[t])??void 0}function l(e,t){const i=s({persona:e,defaultToLife:!1});return(i?null===o.J9||void 0===o.J9?void 0:o.J9[i]:[]).filter((e=>(0,a.G)(e,t)))}function c(e,t){const i=s({persona:t,defaultToLife:!0});return(i?null==u?void 0:u[i]:[]).filter((t=>(0,a.G)(t,e)))}function d(e,t,i){return l(e,t).map((e=>(0,r.G)(e,i)))}function m(e,t,i){return function(e,t){const i=s({persona:e,defaultToLife:!1});return(i?null==p?void 0:p[i]:[]).filter((e=>(0,a.G)(e,t)))}(e,t).map((e=>(0,r.G)(e,i)))}const p={product:[n.Y.productWiki,n.Y.productSpec,n.Y.productLaunchBrief],marketing:[n.Y.blogEditorialCalendar,n.Y.brandAssets,n.Y.moodBoard],sales:[n.Y.salesWikiV2,n.Y.salesAssets,n.Y.salesCRM],eng:[n.Y.engineeringTechSpec,n.Y.engineeringWiki]},u={...o.J9,design:[n.Y.designSprint,n.Y.designPortfolio],product:[n.Y.productSpec,n.Y.productWiki,n.Y.visionAndStrategy],marketing:[n.Y.blogEditorialCalendar,n.Y.socialMediaCalendar,n.Y.presentation],hr:[n.Y.companyHome,n.Y.employeeBenefits,n.Y.peopleDirectory],sales:[n.Y.salesWiki,n.Y.presentation,n.Y.oneOnOneNotes],support:[],life:[n.Y.habitTrackerV2,n.Y.simpleBudgetV2,n.Y.weeklyTodoV2]}},94660:(e,t,i)=>{i.d(t,{IJ:()=>c,PL:()=>l,W4:()=>d,gA:()=>p,p8:()=>m});var n=i(62992),o=i(97880),a=i(64002),r=i(34517),s=i(26136);function l(e,t){return e.filter((e=>{const i=e.getCopiedFromPointer();return Boolean(i&&(0,n.J)(i)&&Boolean(t&&t(i.id)))}))}const c=5;function d(e){const t=window.location.href;return a.SK(t,{tg:e.templateGalleryItem})}function m(){const e=window.location.href;let t;return t=a.iO(e,"tg"),t=a.iO(t,"np"),t=a.iO(t,"pjm"),t}function p(e){let t,i;return e instanceof s.j$?(t=e.getAppTemplateURI(),i=e.getBlockId()):"type"in e?"preset"===e.type?(t=e.uri,i=void 0):"pageTemplate"===e.type?(t=void 0,i=e.template.rootId):(0,o.t1)(e):(t=void 0,i=e.rootId),t&&r.presetUriToHumanReadableName[t]?r.presetUriToHumanReadableName[t]:i}},30496:(e,t,i)=>{i.d(t,{Z:()=>n});const n=new(i(61766).Z)},65435:(e,t,i)=>{i.d(t,{D2:()=>v,Io:()=>y,JL:()=>k,cY:()=>u,it:()=>b,oO:()=>g,vY:()=>h});var n=i(84465),o=i(94952),a=i(73314),r=i(97880),s=i(9291),l=i(95477),c=i(33929),d=i(27249),m=i(77080),p=i(59307);const u=(0,s.defineMessages)({addToTeamspace:{id:"templateGalleryHelpers.addToTeamspace",defaultMessage:"Add to a teamspace"},addToPrivate:{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}});function g(e){var t;const{data:i}=p.Z.state;if(i&&null!==(t=i.topCategories)&&void 0!==t&&t.length)return i.topCategories.find((t=>t.id===e))}const f=Object.keys(n.J9);function y(e){let{userPersona:t,subscriptionTier:i}=e;return[...f].sort(((e,n)=>function(e,t,i,n){const o=void 0!==n&&["free","personal_free","student","personal"].includes(n),a=(0,d.H_)({persona:i,defaultToLife:o});if("suggested"===e||"suggested"===t)return"suggested"===e?-1:1;if(a===e||a===t)return a===e?-1:1;if(("life"===e||"life"===t)&&o)return"life"===e?-1:1;if(("student"===e||"student"===t)&&function(e){let{persona:t,isPersonalishPlan:i}=e;return(i?["other","unfilled","personal","undefined"]:["personal"]).includes(t??"undefined")}({persona:i,isPersonalishPlan:o}))return"student"===e?-1:1;return 0}(e,n,t,i)))}function b(e){let{userPersona:t,subscriptionTier:i}=e;const r=c.default.getIntl();return Object.fromEntries(y({userPersona:t,subscriptionTier:i}).map((e=>[e,[...n.J9[e].filter((e=>(0,o.G)(e,m.default))).map((e=>(0,a.G)(e,r)))]])).filter((e=>{let[t,i]=e;return(null==i?void 0:i.length)>0})))}function k(e){const t=(0,r.Yd)(e).map((e=>[e,!0]));return Object.fromEntries(t)}function h(e){var t;const{data:i}=p.Z.state;if(!i||null===(t=i.topCategories)||void 0===t||!t.length)return;const n=i.topCategories.find((t=>{var i;return null===(i=t.subcategories)||void 0===i?void 0:i.find((t=>{var i;return null===(i=t.templates)||void 0===i?void 0:i.find((t=>"pageTemplate"===t.type&&t.template.rootId===e||"preset"===t.type&&t.uri===e))}))}));return null==n?void 0:n.id}function v(e){return`${l.default.domainBaseUrl}/@${e}`}},59307:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(49085);class o extends n.default{getInitialState(){return{}}getTopTemplateCategories(){var e;const{data:t}=this.state;return t&&null!==(e=t.topCategories)&&void 0!==e&&e.length?Array.from(t.topCategories).filter((e=>{const t=e.subcategories||[];for(const n of t){var i;if(null!==(i=n.templates)&&void 0!==i&&i.length)return!0}return!1})):[]}}const a=new o},84465:(e,t,i)=>{i.d(t,{J9:()=>l,_5:()=>r,gh:()=>s});var n=i(92996),o=i(11002),a=i(98251);const r={suggested:a.sY.suggestedCategory,design:a.sY.designer,eng:a.sY.engineering,product:a.sY.productManagement,marketing:a.sY.marketing,sales:a.sY.sales,support:a.sY.support,hr:a.sY.hr,life:a.sY.life,student:a.sY.student},s={suggested:[n.Ll,n.Yb,n.tt,n.KW,n.r],product:[n.tt],design:[n.Yb],eng:[n.tt],marketing:[n.Yb],hr:[n.Yb],sales:[n.Yb],support:[n.Yb],life:[],student:[]},l={suggested:[o.Y.defaultWiki],product:[o.Y.oneOnOneNotes,o.Y.productWiki,o.Y.productSpec,o.Y.visionAndStrategy,o.Y.presentation,o.Y.investorUpdate,o.Y.userResearch,o.Y.experimentResults,o.Y.brainstorm,o.Y.productLaunchBrief],design:[o.Y.designSprint,o.Y.designSystem,o.Y.designPortfolio,o.Y.userResearch,o.Y.brainstorm],eng:[o.Y.engineeringWiki,o.Y.engineeringTechSpec,o.Y.experimentResults,o.Y.brainstorm],marketing:[o.Y.presentation,o.Y.brandAssets,o.Y.brainstorm,o.Y.contentCalendar,o.Y.blogEditorialCalendar,o.Y.socialMediaCalendar,o.Y.campaignBrief,o.Y.moodBoard,o.Y.mediaList],hr:[o.Y.companyHome,o.Y.newHireOnboarding,o.Y.employeeBenefits,o.Y.interviewGuide,o.Y.recruitingTracker,o.Y.jobBoard,o.Y.applicantTracker,o.Y.peopleDirectory],sales:[o.Y.salesWiki,o.Y.salesCRM,o.Y.salesAssets,o.Y.competitiveAnalysis],support:[o.Y.productFAQs,o.Y.helpCenter],life:[o.Y.readingListV2,o.Y.habitTrackerV2,o.Y.simpleBudgetV2,o.Y.weeklyTodoV2,o.Y.travelPlannerV2,o.Y.journalV2,o.Y.resumeV2,o.Y.personalHomeV3,o.Y.quickNoteV2,o.Y.jobApplicationsV2,o.Y.lifeWikiV2,o.Y.moodBoardV2,o.Y.blogPostV2,o.Y.personalCRMV2],student:[o.Y.studentDashboardV2,o.Y.classNotesV2,o.Y.courseScheduleV2,o.Y.gradeCalculatorV2,o.Y.cornellNotesSystemV2,o.Y.syllabusV2,o.Y.lessonPlansV2,o.Y.classDirectoryV2,o.Y.classroomHomeV2,o.Y.clubHomepageV2]}}}]);