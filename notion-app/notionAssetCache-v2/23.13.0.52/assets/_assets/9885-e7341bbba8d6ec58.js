"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9885],{83726:(e,t,a)=>{a.d(t,{D2:()=>d,Pr:()=>m,Uk:()=>g});var s=a(59730),n=a(19889),o=a(33954),i=a(26136),r=a(54642);const d="last_90_days",l={field:"last_active",direction:"desc"};async function u(e){var t,a;const{environment:s,filter:n,spaceId:o,spaceAnalyticsStore:i}=e,d=null===(t=i.usersTabData)||void 0===t?void 0:t.dailyUsersData;if(!d||n!==(null===(a=i.usersTabData)||void 0===a?void 0:a.graphFilter)||i.currentSpaceId!==o){const e=await r.getDailyUsersAnalytics(s,{spaceId:o,activeWindow:"all_time"===n?"last_90_days":n});return"failed"===e.type?e.body:e.data}return d}async function c(e){var t,a,s;const{environment:o,filter:d,sort:l,spaceStore:u,spaceAnalyticsStore:c}=e,m=null===(t=c.usersTabData)||void 0===t?void 0:t.tableFilter,g=null===(a=c.usersTabData)||void 0===a?void 0:a.userTableSort;if(null===(s=c.usersTabData)||void 0===s||!s.usersAndStats||m!==d||!g||g.direction!==l.direction||g.field!==l.field||c.currentSpaceId!==u.id){const e=await r.loadWorkspaceAnalyticsUsers(o,{spaceId:u.id,filters:{timeRange:d},sort:l});return"failed"===e.type?e.body:e.data.users.map((e=>({stats:e,userStore:i.U6.createChildStore(u,{table:n.KJ,id:e.userId})}))).filter((e=>{let{userStore:t}=e;return t.isDefined()}))}return c.usersTabData.usersAndStats}async function m(e){var t,a,n;const{environment:o,spaceStore:i,spaceAnalyticsStore:r,setState:m,graphFilter:g,tableFilter:p}=e,h=g||(null===(t=r.usersTabData)||void 0===t?void 0:t.graphFilter)||d,f=p||(null===(a=r.usersTabData)||void 0===a?void 0:a.tableFilter)||d,v=(null===(n=r.usersTabData)||void 0===n?void 0:n.userTableSort)||l,[_,x]=await Promise.all([u({environment:o,filter:h,spaceId:i.id,spaceAnalyticsStore:r}),c({environment:o,filter:f,sort:v,spaceStore:i,spaceAnalyticsStore:r})]),M=(0,s.Rp)(_)||!_?[]:_,y=(0,s.Rp)(x)||!x?[]:x;m({currentSpaceId:i.id,currentTab:r.currentTab,usersTabData:{graphFilter:h,tableFilter:f,userTableSort:v,dailyUsersError:(0,s.Rp)(_)?_:void 0,dailyUsersData:M,usersAndStatsError:(0,s.Rp)(x)?x:void 0,usersAndStats:y}})}function g(e,t){if((0,s.qC)(e)){const a=(0,o.nX)(t,e);if(a)return a}return t.formatMessage({defaultMessage:"Failed to retrieve analytics. Try refreshing and reopening the settings.",id:"workspaceAnalytics.usersTab.refershUserAnalytics.defaultFailed"})}},27330:(e,t,a)=>{a.d(t,{Z:()=>M});var s=a(67294),n=a(83355),o=a(49085),i=a(66897),r=a(22686),d=a(77420),l=a(19889),u=a(9291),c=a(74136),m=a(8319),g=a(97680),p=a(77907),h=a(26136),f=a(27617),v=a(85893);class _ extends o.default{getInitialState(){return{tempSelections:new Set([])}}setTempSelections(e){this.setState({tempSelections:new Set(e)})}}class x extends n.Z{constructor(){super(...arguments),this.storeTypes={localStore:_},this.renderResultMenuItem=(e,t)=>{var a;const{intl:n,auditLogHistoricalUserStore:o}=this.props,{localStore:r}=this.stores,m=function(e,t){const a=(0,f.Ij)(e);if(!a)return(0,i.m3)(void 0);if("notion_user"===a.actorType)return(0,i.m3)(function(e,t){return h.U6.createChildStore(t,{table:l.KJ,id:e}).getValue()}(a.actorId,t));return(0,i.ON)(function(e,t){return(0,h.Kv)(t,{table:d.cZ,id:e}).getValue()}(a.actorId,t))}(e,this.props.parentStore);return(0,s.createElement)(g.Z,{...t,key:e,actor:m,useEmailAsTooltip:!0,checkState:r.state.tempSelections.has(e),userTitle:(0,v.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,i.$4)(n,m),o.isUserOrBotRemoved(null===(a=m.asActor)||void 0===a?void 0:a.id)&&(0,v.jsx)(c.Z,{children:(0,v.jsx)(u.FormattedMessage,{id:"auditlogActorFilter.removed_user",defaultMessage:"Removed"})})]})})}}didMount(){this.updateTempSelectionFromProps()}renderComponent(){const{selectedActors:e,intl:t}=this.props,{localStore:a}=this.stores,s=(0,v.jsx)(u.FormattedMessage,{id:"auditlogActorFilter.title",defaultMessage:"User"});return(0,v.jsx)(m.Z,{mode:m.z.Pill,title:s,icon:r.f,iconStyles:{marginRight:2},items:Array.from(a.state.tempSelections),hasItemsSelected:(null==e?void 0:e.length)>0,onChange:e=>{a.setTempSelections(e)},renderFooter:!0,allowApplyBatchSelection:!0,keepInputOnItemConfirm:!0,onMenuDismiss:e=>{"applyButton"!==e?this.updateTempSelectionFromProps():this.updateOnChangeToParent()},labelText:{title:s,tokenInputPlaceholder:t.formatMessage({defaultMessage:"Search user...",id:"auditlogActorFilter.searchActor.placeholder"}),resultSectionTitle:t.formatMessage({defaultMessage:"Select users",id:"auditlogActorFilter.searchActor.resultsTitle"}),componentDebugName:"SearchActorFilter"},performRequest:e=>async function(e,t,a,s){let{query:n,current:o}=e;const{allUserIds:i,allBotIds:r}=t.getState(),d=100,l=await p.deps.searchActions.loader(),u=await l.searchActorsById({environment:s,query:n,userIds:[...i],botIds:[...r]}),c=[...u.users.map((e=>`notion_user:${e.id}`)),...u.bots.map((e=>`bot:${e.id}`))];if(n.length>0)return c.slice(0,d);const m=a.map(f.eW),g=new Set(m),h=c.filter((e=>!g.has(e)));return[...m,...h].slice(0,Math.max(m.length,d))}(e,this.props.auditLogHistoricalUserStore,this.props.selectedActors,this.environment),renderResultMenuItem:this.renderResultMenuItem,renderToken:()=>null,renderFilter:()=>null,renderItemForSummary:()=>null,addItemLabel:null,focused:!1})}updateOnChangeToParent(){const{onChange:e}=this.props,{localStore:t}=this.stores;e(Array.from(t.state.tempSelections).map(f.Ij).filter((e=>Boolean(e))))}updateTempSelectionFromProps(){const{selectedActors:e}=this.props,{localStore:t}=this.stores,a=e.map(f.eW);t.setTempSelections(a)}}x.displayName="AuditLogActorFilter";const M=(0,u.injectIntl)(x)},23399:(e,t,a)=>{a.d(t,{Z:()=>C});a(67294);var s=a(480),n=a(86628),o=a(9291),i=a(47307),r=a(61652),d=a(42922),l=a(52275),u=a(78140),c=a(32163),m=a(53437),g=a(72495),p=a(26388),h=a(33929),f=a(87279),v=a(80444),_=a(49085);class x extends _.default{getInitialState(){return{open:!1}}}const M=new x;var y=a(85893);const b=(0,o.defineMessages)({30:{id:"auditLogCSV.menu.30days",defaultMessage:"Last 30 days"},60:{id:"auditLogCSV.menu.60days",defaultMessage:"Last 60 days"},90:{id:"auditLogCSV.menu.90days",defaultMessage:"Last 90 days"},365:{id:"auditLogCSV.menu.365days",defaultMessage:"Last 1 year"},Export:{id:"auditLogCSV.menu.export",defaultMessage:"Export"}});const w=(e,t)=>{const{currentSpaceStore:a}=v.default.state;a&&r.PN(e,{spaceId:a.id,exportOptions:{duration:t}})},C=(0,o.injectIntl)((function(){window.__c={n:"AuditLogCSV"};const e=(0,o.useIntl)(),t=(0,n.VK)((()=>M.state),[]);return(0,y.jsx)(m.ZP,{popupType:m.ZP.PopupType.Popup,open:t.open,placementToOrigin:m.ZP.Placement.Bottom,alignmentToOrigin:m.ZP.Alignment.End,originGap:4,disableMouseCapture:!0,disableContentScroll:!0,keepFocus:!1,render:()=>(0,y.jsx)(T,{}),onDismiss:S,enableOutsideClickDismiss:!0,origin:(0,y.jsx)(p.ZP,{renderTooltip:()=>(0,y.jsx)(o.FormattedMessage,{id:"auditLogCSV.popup.tooltip",defaultMessage:"Click for options to export the Audit Log in CSV form"}),render:a=>(0,y.jsx)(d.Z,{isLarge:!0,onClick:()=>{return e=!t.open,void M.setState({open:e});var e},...a,children:e.formatMessage(b.Export)})})})}));function S(){M.setState({open:!1})}function j(e,t){return{key:e,render:()=>(0,y.jsx)(l.Z,{focused:!1,title:h.default.formatMessage(b[e]),onClick:()=>{S(),w(t,e)}}),action:()=>{}}}function N(e,t){return{key:e,render:()=>(0,y.jsx)(l.Z,{focused:!1,title:h.default.formatMessage(b[e]),onClick:()=>{i.showDialog({message:(0,y.jsx)(o.FormattedMessage,{id:"auditLogCSV.menu.365days.prompt",defaultMessage:"Are you sure you want to export a one year CSV? You can't repeat this action while this is processing in the background."}),showCancel:!0,keepFocus:!0,items:[{label:(0,y.jsx)(o.FormattedMessage,{id:"AuditLogCSV.exportConfirmationDialog.label",defaultMessage:"Export"}),color:"blue",onAccept:()=>{S(),w(t,e)}}]})}}),action:()=>{}}}function T(){window.__c={n:"CSVMenuComponent"};const e=(0,s.O7)(),t=[j(30,e),j(60,e),j(90,e),N(365,e)];return(0,y.jsx)(u.Z,{menuType:f.og.Popup,children:(0,y.jsx)(c.Z,{type:c.i.Vertical,sections:[{key:"results",render:e=>(0,y.jsx)(g.Z,{...e}),items:t}],initialFocus:0})})}},19044:(e,t,a)=>{a.d(t,{t:()=>c});a(67294);var s=a(13991),n=a(24405),o=a(7057),i=a(9291),r=a(26388),d=a(64369),l=a(4023),u=a(85893);function c(e){window.__c={n:"AuditLogColumnDateTime"};const{auditLogEntry:t,id:a}=e,c=(0,n.yK)((()=>({container:{display:"block",width:"100%"}})),[]);return(0,u.jsx)(r.ZP,{renderTooltip:()=>(0,u.jsx)("div",{style:{display:"flex",flexDirection:"column",fontVariantNumeric:"tabular-nums"},children:(0,u.jsx)("div",{children:(0,u.jsx)(i.FormattedMessage,{id:"auditLogSettings.timeTooltip.utcTime",defaultMessage:"UTC: {time}",values:{time:(0,o.$I)(t.serverTimestamp)}})})}),render:e=>(0,u.jsx)("div",{id:a,style:c.container,children:(0,u.jsx)(d.Z,{isSecondaryColor:!0,...e,children:(0,o.Yx)(t.serverTimestamp,"medium_with_time",s.SP)})}),placement:l.u.Bottom})}},33581:(e,t,a)=>{a.d(t,{p:()=>oe});var s=a(67294),n=a(9291),o=a(44317),i=a(68626),r=a(72126),d=a(86517),l=a(80085),u=a(21202),c=a(19639),m=a(15047),g=a(29369),p=a(97880),h=a(73123),f=a(61275),v=a(85893);function _(e){return"workspace"!==e}const x=(0,n.defineMessages)({password_cleared:{id:"auditlog.actionNames.eventColumn.password_cleared",defaultMessage:"Cleared login password"},password_set:{id:"auditlog.actionNames.eventColumn.password_set",defaultMessage:"Created a login password"},password_changed:{id:"auditlog.actionNames.eventColumn.password_changed",defaultMessage:"Changed login password"},logout:{id:"auditlog.actionNames.eventColumn.logout",defaultMessage:"Logged out"},user_deleted:{id:"auditlog.actionNames.eventColumn.user_deleted",defaultMessage:"User was deleted"},member_joined:{id:"auditlog.actionNames.eventColumn.member_joined",defaultMessage:"Joined the workspace"},file_uploaded:{id:"auditlog.actionNames.eventColumn.file_uploaded",defaultMessage:"Uploaded a file"},invite_link_reset:{id:"auditlog.actionNames.eventColumn.invite_link_reset",defaultMessage:"Reset invite link"},workspace_exported:{id:"auditlog.actionNames.eventColumn.workspace_exported",defaultMessage:"Exported all workspace content"},audit_log_exported:{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days"},user_analytics_exported:{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}"},content_analytics_exported:{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}"},workspace_icon_changed:{id:"auditlog.actionNames.eventColumn.workspace_icon_changed",defaultMessage:"Changed workspace icon"},public_page_cleared:{id:"auditlogEventFilter.actionNames.public_page_cleared",defaultMessage:"Public home page link cleared"},scim_token_generated:{id:"auditlog.actionNames.scim_token_generated",defaultMessage:"Generated API SCIM token"},scim_token_revoked:{id:"auditlog.actionNames.scim_token_revoked",defaultMessage:"Revoked API SCIM token"},"workspace.members_exported":{id:"auditlog.actionName.eventColumn.workspace.members_exported",defaultMessage:"Exported workspace members CSV"},page_access_requests_toggled:{id:"auditlog.actionNames.eventColumn.page_access_requests_toggled",defaultMessage:"page access requests from non-members"},public_page_sharing_toggled:{id:"auditlog.actionNames.eventColumn.public_page_sharing_toggled",defaultMessage:"members sharing pages publicly"},workspace_sidebar_editing_toggled:{id:"auditlog.actionNames.eventColumn.workspace_sidebar_editing_toggled",defaultMessage:"members changing the Workspace section"},disable_team_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_team_guests_toggled",defaultMessage:"teamspace guests"},disable_guests_toggled:{id:"auditlog.actionNames.eventColumn.disable_guests_toggled",defaultMessage:"guests"},pages_to_other_workspaces_toggled:{id:"auditlog.actionNames.eventColumn.pages_to_other_workspaces_toggled",defaultMessage:"moving or duplicating pages to other workspaces"},export_toggled:{id:"auditlog.actionNames.eventColumn.export_toggled",defaultMessage:"export"},idp_metadata_xml_updated:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_updated",defaultMessage:"Updated IDP metadata XML"},idp_metadata_xml_removed:{id:"auditlog.actionNames.eventColumn.idp_metadata_xml_removed",defaultMessage:"Removed IDP metadata XML"},saml_enabled:{id:"auditlog.actionNames.saml_enabled",defaultMessage:"Enabled SAML"},saml_disabled:{id:"auditlog.actionNames.saml_disabled",defaultMessage:"Disabled SAML"},saml_enforced:{id:"auditlog.actionNames.saml_enforced",defaultMessage:"Enabled enforcing SAML"},saml_unenforced:{id:"auditlog.actionNames.saml_unenforced",defaultMessage:"Disabled enforcing SAML"},automatic_account_creation_enabled:{id:"auditlog.actionNames.automatic_account_creation_enabled",defaultMessage:"Enabled automatically creating accounts on sign-in"},automatic_account_creation_disabled:{id:"auditlog.actionNames.automatic_account_creation_disabled",defaultMessage:"Disabled automatically creating accounts on sign-in"},workspace_analytics_enabled:{id:"auditlog.actionNames.workspace_analytics_enabled",defaultMessage:"Enabled page view tracking for workspace analytics"},workspace_analytics_disabled:{id:"auditlog.actionNames.workspace_analytics_disabled",defaultMessage:"Disabled page view tracking for workspace analytics"},enabled:{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumnPrefix.enabled"},disabled:{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"},a_private_page:{defaultMessage:"a private page",id:"auditlog.actionNames.eventColumn.private_page"},an_untitled_page:{defaultMessage:"an untitled page",id:"auditlog.actionNames.eventColumn.untitled_page"},thisWorkspace:{defaultMessage:"this workspace",id:"auditlog.actionNames.eventColumn.thisWorkspace"},otherWorkspace:{defaultMessage:"another workspace",id:"auditlog.actionNames.eventColumn.otherWorkspace"},workspaceLevel:{defaultMessage:"the workspace level",id:"auditlog.actionNames.eventColumn.workspaceLevel"},private:{defaultMessage:"private",id:"auditlog.actionNames.eventColumn.private"},a_file:{defaultMessage:"a file",id:"auditlog.actionNames.eventColumn.a_file"},a_file_with_extension:{defaultMessage:"a {extension} file",id:"auditlog.actionNames.eventColumn.a_file_with_extension"},team:{defaultMessage:"teamspace",id:"auditlog.actionNames.eventColumn.team"},for_a_private_team:{defaultMessage:"for a private teamspace",id:"auditlog.actionNames.eventColumn.for_private_team"},a_private_team:{defaultMessage:"a private teamspace",id:"auditlog.actionNames.eventColumn.private_team"},a_team_and_page:{defaultMessage:"a teamspace and page",id:"auditlog.actionNames.eventColumn.team_and_page"},team_member:{defaultMessage:"teamspace member",id:"auditlog.actionNames.eventColumn.team_member"},team_owner:{defaultMessage:"teamspace owner",id:"auditlog.actionNames.eventColumn.team_owner"},team_level_guest:{defaultMessage:"teamspace guest",id:"auditlog.actionNames.eventColumn.team_level_guest"},group:{defaultMessage:"group",id:"auditlog.actionNames.eventColumn.group"},user:{defaultMessage:"user",id:"auditLogEntry.user.noName"},bot:{defaultMessage:"integration",id:"auditLogEntry.bot.noName"},externalIntegration:{defaultMessage:"connection",id:"auditLogEntry.externalIntegration.noName"},guestIntegration:{defaultMessage:"integration",id:"auditLogEntry.guestIntegration.noName"},adminContentSearchQuery:{defaultMessage:"query=“{query}“",id:"auditLogEntry.adminContentSearch.query"},adminContentSearchAudience:{defaultMessage:"audience=“{audience}“",id:"auditLogEntry.adminContentSearch.audience"},adminContentSearchCreatedBy:{defaultMessage:"created by=“{createdBy}“",id:"auditLogEntry.adminContentSearch.createdBy"},adminContentSearchSharedWith:{defaultMessage:"shared with=“{sharedWith}“",id:"auditLogEntry.adminContentSearch.sharedWith"},adminContentSearchTeamspaces:{defaultMessage:"{teamspaceCount, plural, one {teamspace=“{teamspaces}“} other {teamspaces=“{teamspaces}“}}",id:"auditLogEntry.adminContentSearch.teamspace"},adminContentSearchCreatedTime:{defaultMessage:"created time=“{createdTime}“",id:"auditLogEntry.adminContentSearch.createdTime"},adminContentSearchLastEditedTime:{defaultMessage:"last edited time=“{lastEditedTime}“",id:"auditLogEntry.adminContentSearch.lastEditedTime"},adminContentSearchPredicateSplit:{defaultMessage:", ",id:"auditLogEntry.adminContentSearch.predicateSplit"},from:{defaultMessage:"from",id:"auditLogEntry.spaceContentDuplication.from"},into:{defaultMessage:"into",id:"auditLogEntry.spaceContentDuplication.into"}});function M(e,t){if(t.target)return"user"in t.target&&t.target.user?y(e,t.target.user):"bot"in t.target&&t.target.bot?b(e,t.target.bot):"group"in t.target&&t.target.group?t.target.group.name?`“${t.target.group.name}“`:"group":void 0}function y(e,t){return t?t.name&&t.email?`“${t.name}“ (${t.email})`:t.name?`“${t.name}“`:t.email?`“${t.email}“`:e.formatMessage(x.user):e.formatMessage(x.user)}function b(e,t){return t.name?`“${t.name}“`:e.formatMessage(x.bot)}const w=(0,n.defineMessages)({started:{id:"space.spaceContentDuplicationStatus.started",defaultMessage:"Started"},completed:{id:"space.spaceContentDuplicationStatus.completed",defaultMessage:"Completed"},failed:{id:"space.spaceContentDuplicationStatus.failed",defaultMessage:"Failed"}}),C=(0,n.defineMessages)({equallyRestrictive:{defaultMessage:". This is the same as the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_equal"},moreRestrictive:{defaultMessage:". This is more restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_more_restrictive"},lessRestrictive:{defaultMessage:". This is less restrictive than the current workspace setting",id:"auditlog.actionNames.eventColumn.team_guests_toggled.team_space_less_restrictive"}});function S(e,t){if(void 0!==e&&void 0!==t)return e===t?(0,v.jsx)(n.FormattedMessage,{...C.equallyRestrictive}):!e&&t?(0,v.jsx)(n.FormattedMessage,{...C.moreRestrictive}):e&&!t?(0,v.jsx)(n.FormattedMessage,{...C.lessRestrictive}):void 0}function j(e){return e.name?`“${e.name}“ group`:(0,v.jsx)(n.FormattedMessage,{...x.group})}function N(e){return e.changes.name.oldValue&&e.changes.name.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from “{oldTeamName}“ to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_old_team_name_to_new_team_name",values:{oldTeamName:e.changes.name.oldValue,newTeamName:e.changes.name.newValue}}):!e.changes.name.oldValue&&e.changes.name.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from some teamspace name to “{newTeamName}“",id:"auditlog.actionNames.eventColumn.from_unknown_team_name_to_new_team_name",values:{newTeamName:e.changes.name.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"for {teamName}",id:"auditlog.actionNames.eventColumn.for_team_name",values:{teamName:T(e)}})}function T(e){return"team"in e.target?F(e.target.team):(0,v.jsx)(n.FormattedMessage,{...x.team})}function F(e){return e.name?`“${e.name}“ teamspace`:(0,v.jsx)(n.FormattedMessage,{...x.team})}function k(e){if(e)switch(e){case"owner":return(0,v.jsx)(n.FormattedMessage,{...x.team_owner});case"member":return(0,v.jsx)(n.FormattedMessage,{...x.team_member});case"team_level_guest":return(0,v.jsx)(n.FormattedMessage,{...x.team_level_guest})}return(0,v.jsx)(n.FormattedMessage,{...x.team_member})}function E(e){return(0,v.jsx)(n.FormattedMessage,{...A(e)})}function A(e){if(!e)return d.mq.noAccessLabel;switch(e){case"editor":return d.mq.fullAccessLabel;case"membership_admin":case"read_and_write":return d.mq.canEditLabel;case"content_only_editor":return d.mq.canEditContentLabel;case"reader":return d.mq.canReadLabel;case"comment_only":return d.mq.canCommentLabel;case"none":return d.mq.noAccessLabel;default:(0,p.t1)(e)}}function R(e){var t,a;return{oldRole:(0,v.jsx)(n.FormattedMessage,{...V(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.oldValue)}),newRole:(0,v.jsx)(n.FormattedMessage,{...V(null===(a=e.changes)||void 0===a||null===(a=a.permission)||void 0===a?void 0:a.newValue)})}}const V=e=>{if(!e)return d.mq.noAccessLabel;switch(e){case"editor":return d.mq.workspaceOwnerLabel;case"membership_admin":return d.mq.membershipAdminLabel;case"read_and_write":return d.mq.memberLabel;default:return d.mq.noAccessLabel}};function D(e){return I(e.target.page)}function I(e){return e.title?`“${e.title}“`:(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page})}function P(e){var t,a;return null!==(t=e.target)&&void 0!==t&&null!==(t=t.page)&&void 0!==t&&null!==(t=t.meta)&&void 0!==t&&t.parent&&"title"in(null===(a=e.target)||void 0===a||null===(a=a.page)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.parent)?`“${e.target.page.meta.parent.title}“`:(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page})}function Z(e){var t;return null!==(t=e.actor.meta)&&void 0!==t&&t.platform?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"on {platform}",id:"auditlog.actionNames.eventColumn.logged_in_platform",values:{platform:e.actor.meta.platform}}):""}function L(e){switch(e){case"google":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Google",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.google"});case"email":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"temporary passcode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.email"});case"admin":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"admin mode",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.admin"});case"saml":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"SAML SSO",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.saml"});case"apple":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Apple ID",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.apple"});case"password":case"password-no-mfa":case"password-sms":case"password-totp":case"password-backup-code":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"password",id:"auditlog.actionNames.eventColumn.logged_in_auth_type.password"});default:(0,p.t1)(e)}}function B(e){return e.changes.name.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"from “{oldDomain}“",id:"auditlog.actionNames.eventColumn.old_domain",values:{oldDomain:e.changes.name.oldValue}}):""}function O(e,t){return"block"===e.table?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{teamName} page {parentPage}",id:"auditlog.actionNames.eventColumn.team_parent_page",values:{teamName:F(t),parentPage:q(e)}}):"team"===e.table?F(t):void 0}function q(e){return"title"in e?`“${e.title}“`:(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page})}function U(e,t){if(!t)return(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page});const a=t.table;return"space"===a?t.id!==e?(0,v.jsx)(n.FormattedMessage,{...x.otherWorkspace}):_(t.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...x.private}):(0,v.jsx)(n.FormattedMessage,{...x.thisWorkspace}):"team"===a?F(t):"block"===a?t.title?`“${t.title}“`:(0,v.jsx)(n.FormattedMessage,{...x.an_untitled_page}):void 0}const W=(0,n.defineMessages)({open:{defaultMessage:"Open",id:"auditlog.actionNames.eventColumn.team_privacy_types.open"},closed:{defaultMessage:"Closed",id:"auditlog.actionNames.eventColumn.team_privacy_types.closed"},private:{defaultMessage:"Private",id:"auditlog.actionNames.eventColumn.team_privacy_types.private"},default:{defaultMessage:"Default",id:"auditlog.actionNames.eventColumn.team_privacy_types.default"},unknown:{defaultMessage:"an unknown privacy state",id:"auditlog.actionNames.eventColumn.team_privacy_types.unknown"}});function z(e){return e?(0,v.jsx)(n.FormattedMessage,{...W[e]}):(0,v.jsx)(n.FormattedMessage,{...W.unknown})}function K(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.membership_requests_toggled.enabled"})}function H(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled.enabled"})}function G(e){return"approved"===e.changes.requestStatus.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Approved",id:"auditlog.actionNames.eventColumn.membership_request_resolved.approved"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Declined",id:"auditlog.actionNames.eventColumn.membership_request_resolved.declined"})}function Q(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled.enabled"})}function $(e){return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.disabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled.enabled"})}function J(e,t){return t?e.formatMessage(x.enabled):e.formatMessage(x.disabled)}const Y=(0,n.defineMessages)({team_members:{defaultMessage:"any teamspace member",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_members"},team_owners:{defaultMessage:"only teamspace owners",id:"auditlog.actionNames.eventColumn.team_access_level_types.team_owners"},unknown:{defaultMessage:"unknown",id:"auditlog.actionNames.eventColumn.team_access_level_types.unknown"}});function X(e){return"recurrence"===e?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_type.recurrence",defaultMessage:"a repeating automation"}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_type.automation",defaultMessage:"an automation"})}function ee(e){return!!e.meta&&("inSudoMode"in e.meta&&e.meta.inSudoMode)}function te(e,t,a){var s,d,C,A,V,q,W,te,se,ne,oe,ie,re,de,le,ue,ce,me,ge,pe,he,fe,ve,_e,xe,Me;switch(e.actionName){case"page.properties_edited":{const t=e.meta.propertiesUpdated,a=e.meta.propertiesUpdated.map((e=>`“${e.propertyName}“`)).join(", ");return 1===t.length?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited property {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.single_property",values:{properties:a,pageName:D(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited properties {properties} on {pageName}",id:"auditlog.actionNames.eventColumn.page_properties_edited.multiple_properties",values:{properties:a,pageName:D(e)}})}case"page.discussion.comment.created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Commented on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.created",values:{pageName:D(e)}});case"page.discussion.comment.deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.deleted",values:{pageName:D(e)}});case"page.discussion.comment.updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited comment on {pageName}",id:"auditlog.actionNames.eventColumn.page.discussion.comment.updated",values:{pageName:D(e)}});case"page_edited":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Edited {pageName}",id:"auditlog.actionNames.eventColumn.page_edited",values:{pageName:D(e)}});case"page_viewed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Viewed {pageName}",id:"auditlog.actionNames.eventColumn.page_viewed_under",values:{pageName:D(e)}});case"page_deleted":return e.target.page.meta.permanentDeletion?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_permanently_deleted",values:{pageName:D(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {pageName}",id:"auditlog.actionNames.eventColumn.page_deleted",values:{pageName:D(e)}});case"page.permanently_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Permanently deleted {pageName}",id:"auditlog.actionNames.eventColumn.page.permanently_deleted",values:{pageName:D(e)}});case"page_restored":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Restored {pageName}",id:"auditlog.actionNames.eventColumn.page_restored",values:{pageName:D(e)}});case"page_exported":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Exported {pageName}",id:"auditlog.actionNames.eventColumn.page_exported",values:{pageName:D(e)}});case"page_moved":{var ye,be,we;const t=null===(ye=e.changes)||void 0===ye?void 0:ye.team,s=e.changes.parent.oldValue,o=e.changes.parent.newValue;let i=U(e.spaceId,e.changes.parent.oldValue),r=U(e.spaceId,e.changes.parent.newValue);null!=t&&t.oldValue&&null!=t&&t.newValue&&s&&o&&("block"===s.table||"block"===o.table)?(i=O(s,null==t?void 0:t.oldValue),r=O(o,null==t?void 0:t.newValue)):"space"===(null===(be=e.changes.parent.oldValue)||void 0===be?void 0:be.table)&&"space"===(null===(we=e.changes.parent.newValue)||void 0===we?void 0:we.table)&&e.changes.parent.oldValue.id===e.changes.parent.newValue.id&&(_(e.changes.parent.oldValue.permissionLevel)||_(e.changes.parent.newValue.permissionLevel))&&(i=_(e.changes.parent.oldValue.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...x.private}):(0,v.jsx)(n.FormattedMessage,{...x.workspaceLevel}),r=_(e.changes.parent.newValue.permissionLevel)?(0,v.jsx)(n.FormattedMessage,{...x.private}):(0,v.jsx)(n.FormattedMessage,{...x.workspaceLevel}));const d=i?a.formatMessage({id:"auditLogEntry.changes.page_moved.old_parent",defaultMessage:" from {oldParentName}"},{oldParentName:i}):"",l=r?a.formatMessage({id:"auditLogEntry.changes.page_moved.new_parent",defaultMessage:" to {newParentName}"},{newParentName:r}):"";return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Moved {pageName}{oldParentMessage}{newParentMessage}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_moved",values:{pageName:D(e),oldParentMessage:d,newParentMessage:l,inSudoMode:ee(e)}})}case"page_permission_updated":return function(e,t){var a,s,o;const i="bot"in t.target,r="space"in t.target,d="team"in t.target,l="group"in t.target,u="user"in t.target&&"guest"===(null===(a=t.target.user.meta)||void 0===a?void 0:a.spaceRole);var c,m;if(i)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for bot {botName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_bot",values:{botName:M(e,t),oldRole:E(null===(c=t.changes)||void 0===c||null===(c=c.permission)||void 0===c?void 0:c.oldValue),newRole:E(null===(m=t.changes)||void 0===m||null===(m=m.permission)||void 0===m?void 0:m.newValue),pageName:D(t),inSudoMode:ee(t)}});var g,p,h,f,_,x;if(r)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for everyone in the workspace from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_space",values:{oldRole:E(null===(g=t.changes)||void 0===g||null===(g=g.permission)||void 0===g?void 0:g.oldValue),newRole:E(null===(p=t.changes)||void 0===p||null===(p=p.permission)||void 0===p?void 0:p.newValue),pageName:D(t),inSudoMode:ee(t)}});if(d)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {teamName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_team",values:{oldRole:E(null===(h=t.changes)||void 0===h||null===(h=h.permission)||void 0===h?void 0:h.oldValue),newRole:E(null===(f=t.changes)||void 0===f||null===(f=f.permission)||void 0===f?void 0:f.newValue),pageName:D(t),teamName:T(t),inSudoMode:ee(t)}});if(u)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for guest {guestNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_guest",values:{guestNameAndEmail:M(e,t),oldRole:E(null===(_=t.changes)||void 0===_||null===(_=_.permission)||void 0===_?void 0:_.oldValue),newRole:E(null===(x=t.changes)||void 0===x||null===(x=x.permission)||void 0===x?void 0:x.newValue),pageName:D(t),inSudoMode:ee(t)}});if(l){var y,b;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for group {groupName} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_group",values:{groupName:M(e,t),oldRole:E(null===(y=t.changes)||void 0===y||null===(y=y.permission)||void 0===y?void 0:y.oldValue),newRole:E(null===(b=t.changes)||void 0===b||null===(b=b.permission)||void 0===b?void 0:b.newValue),pageName:D(t),inSudoMode:ee(t)}})}return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated permissions of {pageName} for {memberNameAndEmail} from {oldRole} to {newRole}{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_permissions_updated_workspace_default",values:{memberNameAndEmail:M(e,t),oldRole:E(null===(s=t.changes)||void 0===s||null===(s=s.permission)||void 0===s?void 0:s.oldValue),newRole:E(null===(o=t.changes)||void 0===o||null===(o=o.permission)||void 0===o?void 0:o.newValue),pageName:D(t),inSudoMode:ee(t)}})}(a,e);case"page_created":const Te=(0,l.zV)(e);if(null!=Te&&null!==(s=Te.meta)&&void 0!==s&&s.parent){var Ce,Se,je,Ne;if(Te.meta.parent.table===m.bx)return"private"===(null===(je=Te.meta)||void 0===je?void 0:je.permissionLevel)||"private"===(null===(Ne=Te.meta)||void 0===Ne?void 0:Ne.pageAudience)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a private page",id:"auditlog.actionNames.eventColumn.page_created_private"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page in the workspace",id:"auditlog.actionNames.eventColumn.page_created_workspace"});if((null===(Ce=Te.meta)||void 0===Ce?void 0:Ce.parent.table)===g.e0)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page under {teamName}",id:"auditlog.actionNames.eventColumn.page_created_team",values:{teamName:F(Te.meta.parent)}});if((null===(Se=Te.meta)||void 0===Se?void 0:Se.parent.table)===u.iU)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page under {parentPageName}",id:"auditlog.actionNames.eventColumn.page_created_under",values:{parentPageName:P(e)}})}return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created a page",id:"auditlog.actionNames.eventColumn.page_created_general"});case"page_shared_to_web":return function(e){var t;if(void 0===e.changes.permission.newValue||"none"===e.changes.permission.newValue)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.disabled",values:{pageName:D(e),inSudoMode:ee(e)}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled sharing {pageName} to web{inSudoMode, select, true { using administrator privileges} other {}} with permissions {newRole}",id:"auditlog.actionNames.eventColumn.page_shared_to_web.enabled",values:{pageName:D(e),inSudoMode:ee(e),newRole:E(null===(t=e.changes)||void 0===t||null===(t=t.permission)||void 0===t?void 0:t.newValue)}})}(e);case"login":return function(e,t){var a,s,o;const i=null===(a=e.meta)||void 0===a?void 0:a.authType;return null!==(s=e.actor.meta)&&void 0!==s&&s.countryCode&&i?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod} in {geolocation}",values:{platform:Z(e),geolocation:(0,f.xk)(e,t),loginMethod:L(i)}}):null!==(o=e.actor.meta)&&void 0!==o&&o.countryCode&&!i?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithCityStateAndCountry",defaultMessage:"Logged in {platform} in {geolocation}",values:{platform:Z(e),geolocation:(0,f.xk)(e,t)}}):i?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithPlatform.withAuthType",defaultMessage:"Logged in {platform} via {loginMethod}",values:{platform:Z(e),loginMethod:L(i)}}):(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.loginWithPlatform",defaultMessage:"Logged in {platform}",values:{platform:Z(e)}})}(e,a);case"allowed_support_access":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Granted support access for {name} until {date}",id:"auditlog.actionNames.allowed_support_access",values:{date:a.formatDate(e.changes.expiresAt),name:e.target.user.name}});case"revoked_support_access":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Revoked support access for {name}",id:"auditlog.actionNames.revoked_support_access",values:{name:e.target.user.name}});case"preferred_name_changed":return function(e,t){var a;const s=!!e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id),o=e.changes.name.oldValue,i=e.changes.name.newValue;if(s){if(o&&i)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed",values:{memberNameAndEmail:M(t,e),oldValue:o,newValue:i}});if(!o&&i)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set {memberNameAndEmail} name to “{newValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_to_value",values:{memberNameAndEmail:M(t,e),newValue:i}});if(o&&!i)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} name “{oldValue}“",id:"auditlog.actionNames.eventColumn.external_preferred_name_changed_from_value",values:{memberNameAndEmail:M(t,e),oldValue:o}})}if(o&&i)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed",values:{oldValue:o,newValue:i}});if(!o&&i)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set name to “{newValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_to_value",values:{newValue:i}});if(o&&!i)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed name “{oldValue}“",id:"auditlog.actionNames.eventColumn.preferred_name_changed_from_value",values:{oldValue:o}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Name was changed",id:"auditlog.actionNames.eventColumn.preferred_name_changed_generic"})}(e,a);case"email_changed":return function(e,t){var a;return e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.external_email_changed",values:{memberNameAndEmail:M(t,e),oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed email from {oldEmail} to {newEmail}",id:"auditlog.actionNames.eventColumn.email_changed",values:{oldEmail:e.changes.email.oldValue,newEmail:e.changes.email.newValue}})}(e,a);case"picture_changed":return function(e,t){var a;return e.target&&e.actor.actorId!==(null===(a=e.target)||void 0===a?void 0:a.user.id)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed {memberNameAndEmail} profile picture",id:"auditlog.actionNames.eventColumn.external_picture_changed",values:{memberNameAndEmail:M(t,e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed profile picture",id:"auditlog.actionNames.eventColumn.picture_changed"})}(e,a);case"member_invited":{const t=R(e);return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to the workspace as {newRole}",id:"auditlog.actionNames.eventColumn.member_invited",values:{memberNameAndEmail:M(a,e),newRole:t.newRole}})}case"member_role_updated":{const t=R(e);return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.member_role_updated",values:{memberNameAndEmail:M(a,e),oldRole:t.oldRole,newRole:t.newRole}})}case"member_removed":return e.actor.actorId===e.target.user.id?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Left the workspace",id:"auditlog.actionNames.eventColumn.member_left"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.member_removed",values:{memberNameAndEmail:M(a,e)}});case"guest_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed guest {guestNameAndEmail} from the workspace",id:"auditlog.actionNames.eventColumn.guest_removed",values:{guestNameAndEmail:M(a,e)}});case"file_uploaded":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Uploaded a file to {pageName}",id:"auditlog.actionNames.eventColumn.file_uploaded_public",values:{pageName:D(e)}});case"file_downloaded":return function(e){return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Downloaded {fileName} from {pageName}",id:"auditlog.actionNames.eventColumn.file_downloaded",values:{fileName:ae(e),pageName:D(e)}})}(e);case"invite_link_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.enabled",defaultMessage:"Enabled invite link"}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.inviteLink.disabled",defaultMessage:"Disabled invite link"});case"public_page_sharing_toggled":case"workspace_sidebar_editing_toggled":case"disable_team_guests_toggled":case"disable_guests_toggled":case"pages_to_other_workspaces_toggled":case"export_toggled":case"page_access_requests_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.disabled",defaultMessage:"Disabled {workspaceSetting}",values:{workspaceSetting:a.formatMessage(x[e.actionName])}}):(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.toggleEvent.enabled",defaultMessage:"Enabled {workspaceSetting}",values:{workspaceSetting:a.formatMessage(x[e.actionName])}});case"workspace_name_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace name from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_name_changed",values:{oldValue:e.changes.name.oldValue,newValue:e.changes.name.newValue}});case"workspace_domain_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace domain {oldValue} to “{newValue}“",id:"auditlog.actionNames.eventColumn.workspace_domain_changed",values:{oldValue:B(e),newValue:e.changes.name.newValue}});case"workspace_integration_restriction_changed":return function(e){const t=void 0,{oldValue:a,newValue:s}=e.changes.integration_restrictions;if(s===t)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.no_restrictions"});if(a===t&&"approved_only"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members installing integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.approved_only"});if("approved_or_built_by_notion"===a&&"approved_only"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.disabled_built_by_notion.from_approved_or_built_by_notion"});if("approved_only"===a&&"approved_or_built_by_notion"===s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled auto approval for built-by-Notion integrations",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.enabled_built_by_notion"});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace integration restriction",id:"auditlog.actionNames.eventColumn.workspace_integration_restriction_changed.fallback_message"})}(e);case"allowed_email_domain_added":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added “{addedValue}“ into allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_added",values:{addedValue:e.changes.domain}});case"allowed_email_domain_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed “{removedValue}“ from allowable email domains",id:"auditlog.actionNames.eventColumn.allowed_email_domain_removed",values:{removedValue:e.changes.domain}});case"public_page_set":return e.changes.name.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed public home page from “{oldPage}“ to “{newPage}“",id:"auditlog.actionNames.eventColumn.public_page_changed",values:{oldPage:e.changes.name.oldValue,newPage:e.changes.name.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set “{newPage}“ as public home page",id:"auditlog.actionNames.eventColumn.public_page_set",values:{newPage:e.changes.name.newValue}});case"idp_metadata_url_updated":return e.changes.url.oldValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed IDP metadata URL from “{oldValue}“ to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_updated",values:{oldValue:e.changes.url.oldValue,newValue:e.changes.url.newValue}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Set IDP metadata URL to “{newValue}“",id:"auditlog.actionNames.eventColumn.idp_metadata_url_set",values:{newValue:e.changes.url.newValue}});case"saml_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...x.saml_enabled}):(0,v.jsx)(n.FormattedMessage,{...x.saml_disabled});case"saml_enforce_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...x.saml_enforced}):(0,v.jsx)(n.FormattedMessage,{...x.saml_unenforced});case"automatic_account_creation_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...x.automatic_account_creation_enabled}):(0,v.jsx)(n.FormattedMessage,{...x.automatic_account_creation_disabled});case"workspace_analytics_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{...x.workspace_analytics_enabled}):(0,v.jsx)(n.FormattedMessage,{...x.workspace_analytics_disabled});case"workspace_creation_set_for_email_domain":return function(e,t){const{oldValue:a,newValue:s}=e.changes.workspace_creation;if(!a&&!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace creation setting",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain.fallback_message"});const o=e.changes.workspace_creation.oldValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.beforeSetting",defaultMessage:" from {prevWorkspaceCreationSetting}"},{prevWorkspaceCreationSetting:(0,c.nJ)(e.changes.workspace_creation.oldValue,t)}):"",i=e.changes.workspace_creation.newValue?t.formatMessage({id:"auditLogEntry.changes.workspaceCreation.afterSetting",defaultMessage:" to {afterWorkspaceCreationSetting}"},{afterWorkspaceCreationSetting:(0,c.nJ)(e.changes.workspace_creation.newValue,t)}):"";return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed workspace creation setting{before}{after}.",id:"auditlog.actionNames.eventColumn.workspace_creation_set_for_email_domain",values:{before:o,after:i}})}(e,a);case"member_added_to_group":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {memberNameAndEmail} to {groupName}",id:"auditlog.actionNames.eventColumn.member_added_to_group",values:{memberNameAndEmail:M(a,e),groupName:j(e.target.group)}});case"member_removed_from_group":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {groupName}",id:"auditlog.actionNames.eventColumn.member_removed_from_group",values:{memberNameAndEmail:M(a,e),groupName:j(e.target.group)}});case"space_transfer_status_changed":return function(e,t){const{oldValue:a,newValue:s}=e.changes.spaceTransferStatus,o=e.target.space.name?t.formatMessage({id:"auditLogEntry.changes.space_transfer_status_changed.space_name",defaultMessage:" for {spaceName}"},{spaceName:e.target.space.name}):"";if(!a&&!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Workspace transfer status changed{spaceNameMessage}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.fallback_message",values:{spaceNameMessage:o}});if(!s)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Workspace transfer request cleared{spaceNameMessage} from prior status of {oldStatus}",id:"auditlog.actionNames.eventColumn.space_transfer_status_cleared",values:{spaceNameMessage:o,oldStatus:a}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{newStatus, select, requested {Workspace transfer request initiated{spaceNameMessage}.} started {Workspace transfer started{spaceNameMessage}} completed {Workspace transfer completed{spaceNameMessage}} other {Workspace transfer status change to {newStatus}{spaceNameMessage}}}",id:"auditlog.actionNames.eventColumn.space_transfer_status_changed.newStatus",values:{spaceNameMessage:o,newStatus:s}})}(e,a);case"space_claim_and_upgrade_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimAndUpgradeStatus,s=(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Status changed for workspace claim of {workspaceName}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_changed.fallback_message",values:{workspaceName:e.target.space.name}});if(!t&&!a)return s;if(!a&&"completed"!==t)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Pending workspace claim for {workspaceName} has been cleared from {oldStatus}",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_cleared",values:{workspaceName:e.target.space.name,oldStatus:t}});if("completed"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{workspaceName} has been claimed and upgraded to the Enterprise plan",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_status_completed",values:{workspaceName:e.target.space.name}});if("requested"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Request to claim and upgrade {workspaceName} has been sent.",id:"auditlog.actionNames.eventColumn.space_claim_upgrade_requested",values:{workspaceName:e.target.space.name}});return s}(e);case"space_claim_deletion_status_changed":return function(e){const{oldValue:t,newValue:a}=e.changes.claimDeletionStatus,s=(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Claimable workspace deletion status change for {spaceName}",id:"auditlog.actionNames.eventColumn.space_claim_deletion_status_changed.fallback_message",values:{spaceName:e.target.space.name}});if(!t&&!a)return s;if(!a||"canceled"===a)return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Recovered workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.status_cleared",values:{spaceName:e.target.space.name}});return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted workspace {spaceName} using Domain Management",id:"auditlog.actionNames.eventColumn.space_claim_deletion.deleted",values:{spaceName:e.target.space.name}})}(e);case"membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing members to request adding new members",id:"auditlog.actionNames.eventColumn.membership_requests_toggled",values:{enabled:K(e)}});case"external_membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing external users to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.external_membership_requests_toggled",values:{enabled:H(e)}});case"membership_request_resolved":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{status} request to add {email} to the workspace as a member",id:"auditlog.actionNames.eventColumn.membership_request_resolved",values:{status:G(e),email:M(a,e)}});case"guest_membership_requests_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} allowing page guests to request to be added to the workspace as members",id:"auditlog.actionNames.eventColumn.guest_membership_requests_toggled",values:{enabled:Q(e)}});case"team_created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Created {teamName}",id:"auditlog.actionNames.eventColumn.team_created",values:{teamName:T(e)}});case"team_archived":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Archived {teamName}",id:"auditlog.actionNames.eventColumn.team_archived",values:{teamName:T(e)}});case"team_restored":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Restored {teamName}",id:"auditlog.actionNames.eventColumn.team_restored",values:{teamName:T(e)}});case"team_default_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {teamName} to the default teamspace list. Workspace members will automatically be added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_enabled",values:{teamName:T(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {teamName} from the default teamspace list. Workspace members will no longer be automatically added to the teamspace",id:"auditlog.actionNames.eventColumn.team_default_disabled",values:{teamName:T(e)}});case"team_public_page_sharing_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_disabled",values:{teamName:T(e)}}),S((null===(d=e.meta)||void 0===d?void 0:d.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members sharing pages under {teamName} publicly",id:"auditlog.actionNames.eventColumn.team_public_page_sharing_enabled",values:{teamName:T(e)}}),S((null===(C=e.meta)||void 0===C?void 0:C.spacePublicPageSharingDisabled)??(null==e?void 0:e.spacePublicPageSharingDisabled),e.changes.enabled.newValue)]});case"team_export_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_disabled",values:{teamName:T(e)}}),S((null===(A=e.meta)||void 0===A?void 0:A.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled export for {teamName}",id:"auditlog.actionNames.eventColumn.team_export_enabled",values:{teamName:T(e)}}),S((null===(V=e.meta)||void 0===V?void 0:V.spaceExportDisabled)??(null==e?void 0:e.spaceExportDisabled),e.changes.enabled.newValue)]});case"team_sidebar_editing_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_disabled",values:{teamName:T(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members changing the sidebar section for {teamName}",id:"auditlog.actionNames.eventColumn.team_sidebar_editing_enabled",values:{teamName:T(e)}});case"team_creation_admins_setting_toggled":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_disabled",values:{teamName:T(e)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled members creating teamspaces",id:"auditlog.actionNames.eventColumn.team_creation_admins_setting_enabled",values:{teamName:T(e)}});case"team_guests_toggled":return e.changes.enabled.newValue?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_disabled",values:{teamName:T(e)}}),S((null===(q=e.meta)||void 0===q?void 0:q.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled guests for {teamName}",id:"auditlog.actionNames.eventColumn.team_guests_toggled_enabled",values:{teamName:T(e)}}),S((null===(W=e.meta)||void 0===W?void 0:W.spaceDisableGuests)??e.spaceDisableGuests,e.changes.enabled.newValue)]});case"team_name_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed teamspace name {oldTeamNameToNewTeamName}",id:"auditlog.actionNames.eventColumn.team_name_changed",values:{oldTeamNameToNewTeamName:N(e)}});case"team_description_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed description of {teamName}",id:"auditlog.actionNames.eventColumn.team_description_changed",values:{teamName:T(e)}});case"team_icon_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed icon of {teamName}",id:"auditlog.actionNames.eventColumn.team_icon_changed",values:{teamName:T(e)}});case"member_added_to_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {memberNameAndEmail} to {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_added_to_team",values:{memberNameAndEmail:M(a,e),teamName:T(e),teamRole:k(e.changes.teamRole.newValue)}});case"group_added_to_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Invited {groupName} to {teamName} as teamspace member",id:"auditlog.actionNames.eventColumn.group_added_to_team",values:{groupName:j(e.target.group),teamName:T(e)}});case"member_removed_from_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {memberNameAndEmail} from {teamName}",id:"auditlog.actionNames.eventColumn.member_removed_from_team",values:{memberNameAndEmail:M(a,e),teamName:T(e)}});case"group_removed_from_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {groupName} from {teamName}",id:"auditlog.actionNames.eventColumn.group_removed_from_team",values:{groupName:j(e.target.group),teamName:T(e)}});case"member_joined_team":const Fe=T(e),ke=k(e.changes.teamRole.newValue);return ee(e)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_joined_team_privileged",values:{teamName:Fe,teamRole:ke}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Joined {teamName} as {teamRole}",id:"auditlog.actionNames.eventColumn.member_joined_team",values:{teamName:Fe,teamRole:ke}});case"member_left_team":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Left {teamName}",id:"auditlog.actionNames.eventColumn.member_left_team",values:{teamName:T(e)}});case"member_team_role_updated":const Ee=M(a,e),Ae=k(e.changes.teamRole.oldValue),Re=k(e.changes.teamRole.newValue),Ve=T(e);return ee(e)?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName} using administrator privileges",id:"auditlog.actionNames.eventColumn.member_team_role_updated_privileged",values:{memberNameAndEmail:Ee,oldTeamRole:Ae,newTeamRole:Re,teamName:Ve}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {memberNameAndEmail} from {oldTeamRole} to {newTeamRole} in {teamName}",id:"auditlog.actionNames.eventColumn.member_team_role_updated",values:{memberNameAndEmail:Ee,oldTeamRole:Ae,newTeamRole:Re,teamName:Ve}});case"team_user_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {userNameOrEmail}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_user_permission_updated",values:{userNameOrEmail:M(a,e),oldPermission:E(e.changes.permission.oldValue),newPermission:E(e.changes.permission.newValue),teamName:T(e)}});case"team_group_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated {groupName}’s custom permissions in {teamName} from {oldPermission} to {newPermission}.",id:"auditlog.actionNames.eventColumn.team_group_permission_updated",values:{groupName:j(e.target.group),oldPermission:E(e.changes.permission.oldValue),newPermission:E(e.changes.permission.newValue),teamName:T(e)}});case"team_member_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace members in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_member_default_permission_updated",values:{teamName:T(e),oldRole:E(null===(te=e.changes)||void 0===te||null===(te=te.permission)||void 0===te?void 0:te.oldValue),newRole:E(null===(se=e.changes)||void 0===se||null===(se=se.permission)||void 0===se?void 0:se.newValue)}});case"team_guest_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for teamspace guests in {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_guest_default_permission_updated",values:{teamName:T(e),oldRole:E(null===(ne=e.changes)||void 0===ne||null===(ne=ne.permission)||void 0===ne?void 0:ne.oldValue),newRole:E(null===(oe=e.changes)||void 0===oe||null===(oe=oe.permission)||void 0===oe?void 0:oe.newValue)}});case"team_workspace_default_permission_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Updated default page permissions for everyone else in the workspace for {teamName} from {oldRole} to {newRole}",id:"auditlog.actionNames.eventColumn.team_workspace_default_permission_updated",values:{teamName:T(e),oldRole:E(null===(ie=e.changes)||void 0===ie||null===(ie=ie.permission)||void 0===ie?void 0:ie.oldValue),newRole:E(null===(re=e.changes)||void 0===re||null===(re=re.permission)||void 0===re?void 0:re.newValue)}});case"team_privacy_type_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the teamspace privacy type for {teamName} from {oldType} to {newType}",id:"auditlog.actionNames.eventColumn.team_privacy_type_changed",values:{teamName:T(e),oldType:z(null===(de=e.changes)||void 0===de?void 0:de.teamAccessLevel.oldValue),newType:z(null===(le=e.changes)||void 0===le?void 0:le.teamAccessLevel.newValue)}});case"team_invite_access_changed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed who can invite teamspace members to {newType} for {teamName}",id:"auditlog.actionNames.eventColumn.team_invite_access_changed",values:{teamName:T(e),newType:(Me=null===(ue=e.changes)||void 0===ue||null===(ue=ue.teamInviteAccess)||void 0===ue?void 0:ue.newValue,Me?(0,v.jsx)(n.FormattedMessage,{...Y[Me]}):(0,v.jsx)(n.FormattedMessage,{...Y.unknown}))}});case"teams_enabled_for_space":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled teamspaces for {workspaceName}",id:"auditlog.actionNames.eventColumn.teams_enabled_for_space",values:{workspaceName:e.target.space.name}});case"private_content_transferred":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Transferred private content from {fromUserName} to {toUserName}",id:"auditLog.actionNames.eventColumn.private_content_transferred",values:{fromUserName:y(a,e.changes.userPermission.oldValue),toUserName:y(a,e.changes.userPermission.newValue)}});case"audit_log_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.audit_log_exported",defaultMessage:"Exported audit log for last {duration} days",values:{duration:e.meta.duration}});case"user_analytics_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.user_analytics_exported",defaultMessage:"Exported user analytics for {daysFilterString}",values:{daysFilterString:a.formatMessage(h.Rh[(null===(ce=e.meta)||void 0===ce?void 0:ce.daysFilter)||"last_90_days"]).toLowerCase()}});case"content_analytics_exported":return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.content_analytics_exported",defaultMessage:"Exported content analytics for {daysFilterString}",values:{daysFilterString:a.formatMessage(h.Rh[(null===(me=e.meta)||void 0===me?void 0:me.daysFilter)||"last_90_days"]).toLowerCase()}});case"admin_content_search_queried":case"admin_content_search_exported":function De(e){return e.join(a.formatMessage(x.adminContentSearchPredicateSplit))}function Ie(e){return"starting"in e&&"ending"in e?`${e.starting} - ${e.ending}`:"starting"in e?`${e.starting} - `:"ending"in e?` - ${e.ending}`:void 0}const Pe=e.searchParameters.query&&a.formatMessage(x.adminContentSearchQuery,{query:e.searchParameters.query}),Ze=e.searchParameters.teamspaces&&e.searchParameters.teamspaces.length>0&&a.formatMessage(x.adminContentSearchTeamspaces,{teamspaceCount:e.searchParameters.teamspaces.length,teamspaces:De(e.searchParameters.teamspaces)}),Le=e.searchParameters.createdBy&&e.searchParameters.createdBy.length>0&&a.formatMessage(x.adminContentSearchCreatedBy,{createdBy:De(e.searchParameters.createdBy)}),Be=e.searchParameters.sharedWith&&e.searchParameters.sharedWith.length>0&&a.formatMessage(x.adminContentSearchSharedWith,{sharedWith:De(e.searchParameters.sharedWith)}),Oe=e.searchParameters.audience&&e.searchParameters.audience.length>0&&a.formatMessage(x.adminContentSearchAudience,{audience:De(e.searchParameters.audience)}),qe=e.searchParameters.createdTime&&a.formatMessage(x.adminContentSearchCreatedTime,{createdTime:Ie(e.searchParameters.createdTime)}),Ue=e.searchParameters.lastEditedTime&&a.formatMessage(x.adminContentSearchLastEditedTime,{lastEditedTime:Ie(e.searchParameters.lastEditedTime)}),We=r.oA([Pe,Ze,Le,Be,Oe,qe,Ue]);if("admin_content_search_queried"===e.actionName){if(0===We.length)return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried.no_filters",defaultMessage:"Ran a content search with no filters"});{const e=De(We);return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_queried",defaultMessage:"Ran a content search with the following criteria: {searchCriteria}",values:{searchCriteria:e}})}}if(0===We.length)return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported.no_filters",defaultMessage:"Exported a content search result with no filters"});{const e=De(We);return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_content_search_exported",defaultMessage:"Exported a content search result with the following criteria: {searchCriteria}",values:{searchCriteria:e}})}case"admin_managed_users_log_out_all":{const t=a.formatList(e.meta.emailDomains,{type:"conjunction"});return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_log_out_all",defaultMessage:"Logged out all managed users with the email domains {emailDomains}",values:{emailDomains:t}})}case"admin_managed_users_log_out_one":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Logged out {guestNameAndEmail} from all of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_log_out_one",values:{guestNameAndEmail:M(a,e)}});case"admin_managed_users_password_cleared_one":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reset the password and MFA settings for {guestNameAndEmail} and logged them out of their active sessions",id:"auditlog.actionNames.eventColumn.admin_managed_users_password_cleared_one",values:{guestNameAndEmail:M(a,e)}});case"admin_managed_users_password_cleared":{const t=a.formatList(e.meta.emailDomains,{type:"conjunction"});return(0,v.jsx)(n.FormattedMessage,{id:"auditlogEventFilter.eventColumn.admin_managed_users_password_cleared",defaultMessage:"Cleared passwords for all users with the email domains {emailDomains}",values:{emailDomains:t}})}case"automation_created":return(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_created",defaultMessage:"Created {automationType} on {pageTitle}",values:{automationType:X(e.meta.automationType),pageTitle:D(e)}});case"automation_edited":return(0,v.jsx)(n.FormattedMessage,{id:"auditlog.actionNames.eventColumn.automation_edited",defaultMessage:"Edited {automationType} on {pageTitle}",values:{automationType:X(e.meta.automationType),pageTitle:D(e)}});case"ai_admin_legal_acceptance_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} Notion AI for the workspace.",id:"auditlog.actionNames.eventColumn.ai_admin_legal_acceptance_toggled",values:{enabled:$(e)}});case"space_consolidation_started":case"space_consolidation_completed":case"space_consolidation_failed":const ze=e.spaceId===e.meta.spaceConsolidationMetadata.source_space_id,Ke=e.meta.spaceConsolidationMetadata.source_space_name??e.meta.spaceConsolidationMetadata.source_space_id,He=e.meta.spaceConsolidationMetadata.target_space_name??e.meta.spaceConsolidationMetadata.target_space_id,Ge=e.changes.spaceContentDuplicationStatus.newValue;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{status} workspace consolidation {direction} {spaceName}.",id:"auditlog.actionNames.eventColumn.space_consolidation_status_changed",values:{status:Ge?(0,v.jsx)(n.FormattedMessage,{...w[Ge]}):"",spaceName:ze?He:Ke,direction:(0,v.jsx)(n.FormattedMessage,{...ze?x.into:x.from})}});case"mfa_sms_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} SMS MFA on “{value}“",id:"auditlog.actionNames.eventColumn.mfa_sms_toggled",values:{value:null!==(ge=e.changes)&&void 0!==ge&&ge.maskedPhoneNumber.oldValue?null===(pe=e.changes)||void 0===pe?void 0:pe.maskedPhoneNumber.oldValue:null===(he=e.changes)||void 0===he?void 0:he.maskedPhoneNumber.newValue,enabled:null!==(fe=e.changes)&&void 0!==fe&&fe.enabled.newValue?"Enabled":"Disabled"}});case"mfa_totp_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} TOTP MFA",id:"auditlog.actionNames.eventColumn.mfa_totp_toggled",values:{enabled:null!==(ve=e.changes)&&void 0!==ve&&ve.enabled.newValue?"Enabled":"Disabled"}});case"mfa_backup_code_toggled":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabled} backup codes for MFA",id:"auditlog.actionNames.eventColumn.mfa_backup_code_toggled",values:{enabled:null!==(_e=e.changes)&&void 0!==_e&&_e.enabled.newValue?"Enabled":"Disabled"}});case"user_suspended":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Suspended {userNameAndEmail}",id:"auditLogEntry.user_suspended",values:{userNameAndEmail:M(a,e)}});case"user_unsuspended":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reactivated {userNameAndEmail}",id:"auditLogEntry.user_unsuspended",values:{userNameAndEmail:M(a,e)}});case"user_deleted":return e.target?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted {userNameAndEmail}",id:"auditLogEntry.user_deleted",values:{userNameAndEmail:y(a,e.target.user)}}):(0,v.jsx)(n.FormattedMessage,{...x.user_deleted});case"workspace.settings.prevent_granting_support_access_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to grant support access for their account.",id:"auditLogEntry.workspace_domain_settings_prevent_granting_support_access_updated.disabled"});case"workspace.settings.prevent_profile_edits_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to edit their profile information.",id:"auditLogEntry.workspace_domain_settings_prevent_profile_edits_updated.disabled"});case"workspace.settings.external_workspace_access_updated":return e.changes.enabled.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.enabled"}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Enabled managed user members' ability to join external workspaces.",id:"auditLogEntry.workspace_domain_settings_external_workspace_access_updated.disabled"});case"workspace.settings.custom_session_duration_updated":return void 0!==e.changes.valueMs.oldValue&&void 0!==e.changes.valueMs.newValue?(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users from {oldDuration} to {newDuration}.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated",values:{oldDuration:(0,o.Ct)(e.changes.valueMs.oldValue,a),newDuration:(0,o.Ct)(e.changes.valueMs.newValue,a)}}):(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Changed the session duration for all managed users.",id:"auditLogEntry.workspace_domain_settings_session_duration_updated.disabled"});case"integration.created":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {botName} to the workspace",id:"auditLogEntry.integration.created",values:{botName:b(a,e.meta.bot)}});case"integration.deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {botName} from workspace",id:"auditLogEntry.integration.deleted",values:{botName:b(a,e.meta.bot)}});case"page.automation_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted automation {automationType} from {pageTitle}",id:"auditLogEntry.page.automation_deleted",values:{automationType:X(e.meta.automationType),pageTitle:D(e)}});case"page.file_deleted":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Deleted file {fileName} from {pageTitle}",id:"auditLogEntry.page.file_deleted",values:{fileName:ae(e),pageTitle:D(e)}});case"integration.secret_reset":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Reset authentication secret of {botName}",id:"auditLogEntry.integration.secret_reset",values:{botName:b(a,e.meta.bot)}});case"workspace.external_account_connected":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Connected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_connected",values:{integrationName:b(a,e.meta.bot)}});case"workspace.external_account_disconnected":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Disconnected external/public integration {integrationName}",id:"auditLogEntry.workspace.external_account_disconnected",values:{integrationName:b(a,e.meta.bot)}});case"workspace.integration_added":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Added {integrationName} to the workspace",id:"auditLogEntry.workspace.workspace.integration_added",values:{integrationName:b(a,e.meta.bot)}});case"workspace.integration_removed":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"Removed {integrationName} from workspace",id:"auditLogEntry.workspace.workspace.integration_removed",values:{integrationName:b(a,e.meta.bot)}});case"user.settings.analytics_tracking_setting_updated":return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} page view tracking on their user account",id:"auditLogEntry.user.settings.analytics_tracking_setting_updated",values:{enabledOrDisabled:J(a,Boolean(null===(xe=e.changes)||void 0===xe||null===(xe=xe.enabled)||void 0===xe?void 0:xe.newValue))}});case"workspace.settings.guest_invite_request_setting_updated":return function(e,t){var a;return(0,v.jsx)(n.FormattedMessage,{defaultMessage:"{enabledOrDisabled} allowing members to request inviting guests",id:"auditLogEntry.workspace.settings.guest_invite_request_setting_updated",values:{enabledOrDisabled:J(t,Boolean(null===(a=e.changes)||void 0===a||null===(a=a.enabled)||void 0===a?void 0:a.newValue))}})}(e,a);case"workspace.guest_invite_request_resolved":return function(e,t){const a=e.changes.requestStatus.newValue;return"approved"===a?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.approved",defaultMessage:"Approved {requestorNameAndEmail}'s request to add guest {guestNameAndEmail} to {pageTitle}",values:{requestorNameAndEmail:y(t,e.target.user),guestNameAndEmail:y(t,e.meta.targetGuest),pageTitle:I(e.meta.pagesAndRoles[0].page)}}):"rejected"===a?(0,v.jsx)(n.FormattedMessage,{id:"auditLog.actionNames.eventColumn.workspace.guest_invite_request_resolved.rejected",defaultMessage:"Declined request to add guest {guestNameAndEmail} to {pageTitle}",values:{guestNameAndEmail:y(t,e.meta.targetGuest),pageTitle:I(e.meta.pagesAndRoles[0].page)}}):(0,v.jsx)(v.Fragment,{})}(e,a);case"workspace_exported":case"workspace_icon_changed":case"public_page_cleared":case"logout":case"password_changed":case"password_cleared":case"password_set":case"revoked_support_access":case"user_suspended":case"user_unsuspended":case"member_joined":case"invite_link_toggled":case"scim_token_generated":case"scim_token_revoked":case"invite_link_reset":case"idp_metadata_xml_removed":case"idp_metadata_xml_updated":case"workspace.members_exported":return(0,v.jsx)(n.FormattedMessage,{...x[e.actionName]});case"organization.created":return(0,v.jsx)(v.Fragment,{});default:if("local"!==t)return i.log({level:"error",from:"auditLogEvent",type:"AuditLogEvent",data:{miscDataToConvertToString:{data:e}}}),(0,v.jsx)(v.Fragment,{});(0,p.t1)(e)}}function ae(e){const{name:t,extension:a}=e.target.file;return t?`“${t}“`:a?(0,v.jsx)(n.FormattedMessage,{...x.a_file_with_extension,values:{extension:a}}):(0,v.jsx)(n.FormattedMessage,{...x.a_file})}var se=a(82990),ne=a(26388);a(95477);function oe(e){window.__c={n:"AuditLogColumnEvent"};const{auditLogEntry:t,id:a}=e,[o,i]=(0,s.useState)(""),r=(0,n.useIntl)();return(0,s.useEffect)((()=>{const e=document.getElementById(a);i((null==e?void 0:e.textContent)||"")}),[a]),(0,v.jsx)(ne.ZP,{style:{whiteSpace:"normal"},delayThreshold:80,renderTooltip:()=>(0,v.jsx)(re,{text:o,auditLogEntry:t}),placement:ne.ug.Bottom,render:e=>(0,v.jsx)("div",{...e,style:{fontSize:14,...se.Z.textOverflowStyle},id:a,children:(0,v.jsx)(ie,{auditLogEntry:t,env:"production",intl:r})})})}function ie(e){const{auditLogEntry:t,env:a,intl:s}=e;return te(t,a,s)}function re(e){var t,a;window.__c={n:"AuditLogEventTooltip"};const{auditLogEntry:s,text:o}=e,i=(0,n.useIntl)(),r=(0,f.q6)({auditLogEntry:s,intl:i});return(0,v.jsxs)("div",{children:[o,(null===(t=s.actor.meta)||void 0===t?void 0:t.ipAddress)&&(0,v.jsx)("div",{children:(0,v.jsx)(n.FormattedMessage,{defaultMessage:"IP address: {ip}",values:{ip:null===(a=s.actor.meta)||void 0===a?void 0:a.ipAddress},id:"auditLogSettings.metadata.ipAddress"})}),(0,v.jsx)("div",{children:(0,f.xk)(s,i)}),r&&(0,v.jsx)(n.FormattedMessage,{id:"auditLogColumnEvent.tooltip.audienceMessage",defaultMessage:"Page audience: {audience}",values:{audience:r}})]})}},86100:(e,t,a)=>{a.d(t,{Z:()=>L});a(57658),a(67294);var s=a(83355),n=a(24405),o=a(11378),i=a(8848),r=a(61275),d=a(58573),l=a(67220),u=a(72126),c=a(97880),m=a(9291),g=a(33338),p=a(42922),h=a(52275),f=a(60458),v=a(74194),_=a(78140),x=a(32163),M=a(89728),y=a(53437),b=a(72495),w=a(64369),C=a(91642),S=a(4708),j=a(87279),N=a(95697),T=a(77080),F=a(29798),k=a(49085),E=a(80085);let A=function(e){return e.All="All",e.Partial="Partial",e.None="None",e}({});class R extends k.default{getInitialState(){return{categorySelections:{page:A.All,space:A.All,team:A.All,account:A.All},categoryToggleOpen:{page:!0,space:!0,team:!0,account:!0},searchQuery:void 0,actionSelections:(0,c.Xc)(E.yv,(()=>!0)),isMenuOpen:!1,renderOrder:[{category:"page",orderedActions:E.dq.page},{category:"space",orderedActions:E.dq.space},{category:"account",orderedActions:E.dq.account},{category:"team",orderedActions:E.dq.team}]}}getAllActionNames(){return(0,c.Yd)(this.state.actionSelections)}getSelectedActionNames(){return this.getAllActionNames().filter((e=>this.state.actionSelections[e]))}hasActionNameSelected(){const e=this.getAllActionNames(),t=this.getSelectedActionNames();return t.length>0&&t.length!==e.length}updateSearchQuery(e){this.setState({...this.state,searchQuery:e})}toggleCategorySelection(e){const t=e.category;this.setState({...this.state,categoryToggleOpen:{...this.state.categoryToggleOpen,[t]:!this.state.categoryToggleOpen[t]}})}selectCategorySelection(e){const t=e.category,a=this.state.categorySelections[t],s=a===A.None||a===A.Partial?A.All:A.None,n=s===A.All,o={...this.state.actionSelections},i=this.state.renderOrder.find((e=>e.category===t));i&&(i.orderedActions.forEach((e=>{o[e]=n})),this.setState({...this.state,actionSelections:o,categorySelections:{...this.state.categorySelections,[i.category]:s}}))}selectActionName(e,t){const a=this.state.actionSelections[e],s={...this.state.actionSelections,[e]:!a},n=t.orderedActions.filter((e=>s[e])).length,o=0===n?A.None:n===t.orderedActions.length?A.All:A.Partial;this.setState({...this.state,actionSelections:s,categorySelections:{...this.state.categorySelections,[t.category]:o}})}clearAllSelections(){const e=this.getBulkUpdateNextActionSelectionState((0,c.Yd)(this.state.actionSelections),!1),t=this.getBulkUpdateNextCategorySelectionState((0,c.Yd)(this.state.categorySelections),A.None);this.setState({...this.state,actionSelections:e,categorySelections:t})}getBulkUpdateNextCategorySelectionState(e,t){const a={...this.state.categorySelections};return e.forEach((e=>{a[e]=t})),a}getBulkUpdateNextActionSelectionState(e,t){const a={...this.state.actionSelections};return e.forEach((e=>{a[e]=t})),a}}var V=a(5210),D=a(85893);const I={page:(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.categoryName.page",defaultMessage:"Page"}),space:(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.categoryName.workspace",defaultMessage:"Workspace"}),team:(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.categoryName.team",defaultMessage:"Teamspace"}),account:(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.categoryName.account",defaultMessage:"Account"})};function P(e){let{totalNumEventsForCategory:t,numSelectedForCategory:a,category:s,categoryOpen:o,shouldShowCount:i,onCategoryClick:r,onCategoryToggleClick:d,...l}=e;window.__c={n:"AuditLogCategoryMenuItem"};const u=(0,n.yK)((e=>({textWrapperStyle:{margin:0},title:{margin:0,display:"flex",alignItems:"center"},categoryText:{marginLeft:8,fontWeight:600},categorySubHeader:{marginLeft:6},toggleButton:{marginLeft:2,marginRight:2}})),[]);let c,g;return c=i?t===a?(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.allEventsSelected",defaultMessage:"({totalNum} events)",values:{totalNum:t}}):(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.numEventsSelected",defaultMessage:"({numSelected} of {totalNum} events selected)",values:{numSelected:a,totalNum:t}}):null,g=t===a||0!==a&&"partial",(0,D.jsx)(h.Z,{...l,className:"notranslate",textWrapperStyle:u.textWrapperStyle,focused:!1,title:(0,D.jsxs)("div",{style:u.title,children:[(0,D.jsx)(V.Z,{style:u.toggleButton,open:o,onClick:d,isSidebar:!1,fill:!1,icon:"chevron"}),(0,D.jsx)(f.Z,{checked:g,size:14,checkSize:8,onClick:r}),(0,D.jsx)(w.Z,{style:u.categoryText,children:I[s]}),(0,D.jsx)(w.Z,{isSecondaryColor:!0,style:u.categorySubHeader,children:c})]})})}class Z extends s.Z{constructor(){super(...arguments),this.storeTypes={componentStore:R,lastSelectionStore:R,menuListStore:F.Z},this.renderMenu=()=>{const{componentStore:e,menuListStore:t}=this.stores,a=q(this.theme),s=[];let n=0,o=0;const i=e.state.searchQuery;for(const l of e.state.renderOrder){const t=l.category;if("team"===t&&!(0,N.bq)())continue;const a=[];let r=0;for(const s of l.orderedActions)this.eventsToFilterOut.includes(s)||(a.push(this.renderActionNameMenu(s,l)),e.state.actionSelections[s]&&r++);if(n+=r,o+=a.length,s.push(this.renderCategoryMenu({renderGroup:l,shouldShowCount:!Boolean(i),totalNumEventsForCategory:a.length,numSelectedForCategory:r})),e.state.categoryToggleOpen[t])if(i){const e=(0,d.ZP)(i,a,B);s.push(...e)}else s.push(...a)}const r={key:"results",items:s,render:e=>(0,D.jsx)(b.Z,{...e,title:null,loading:!1})};return(0,D.jsxs)("div",{style:a.container,children:[(0,D.jsx)(v.Z,{style:a.searchInput,placeholder:this.props.intl.formatMessage({id:"auditlogEventFilter.searchPlaceholder",defaultMessage:"Search for an event"}),onChange:this.handleUpdateSearchQuery,value:e.state.searchQuery,showClearButton:!0}),i&&(0,D.jsx)(O,{totalNumSelected:n,totalNumEvents:o}),(0,D.jsx)(_.Z,{menuType:j.og.Popup,header:null,maxHeight:356,children:(0,D.jsx)(x.Z,{type:x.i.Vertical,store:t,initialFocus:0,sections:[r]})}),(0,D.jsxs)(b.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},children:[(0,D.jsx)(M.Z,{onClick:()=>{this.handleClear()},children:(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.clearButton",defaultMessage:"Clear"})}),(0,D.jsx)(p.Z,{onClick:()=>{this.handleApply()},children:(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.applyButton",defaultMessage:"Apply"})})]})]})},this.renderPillButtonOrigin=e=>{const{componentStore:t}=this.stores,a=t.hasActionNameSelected();return(0,D.jsx)(g.Z,{on:a,icon:(0,l.S)({width:16,marginRight:6,fill:"currentColor"}),title:(0,D.jsx)("span",{children:e}),onClick:()=>{this.setMenuOpen(!0)}})},this.featureGatedEventsToFilterOut=(0,c.qP)(o.lo).reduce(((e,t)=>{let[a,s]=t;return T.default.checkGate(a)?e:[...e,...s]}),[]),this.teamspaceGuestEventsToFilterOut=(0,S.F$)()?[]:["team_guest_default_permission_updated"],this.guestMembershipEventsToFilterOut=(0,S.Ye)()?[]:["guest_membership_requests_toggled"],this.eventsToFilterOut=[...this.featureGatedEventsToFilterOut,...this.teamspaceGuestEventsToFilterOut,...this.guestMembershipEventsToFilterOut],this.setMenuOpen=e=>{const{componentStore:t}=this.stores;t.setState({...t.state,isMenuOpen:e})},this.handleUpdateSearchQuery=e=>{this.stores.componentStore.updateSearchQuery(e.target.value)}}renderComponent(){const{componentStore:e}=this.stores,t=q(this.theme),a=(0,D.jsx)(m.FormattedMessage,{id:"auditlogEventFilter.title",defaultMessage:"Event"}),s=this.renderPillButtonOrigin(a);return(0,D.jsx)(C.Z,{marginAfter:!1,children:(0,D.jsx)(y.ZP,{popupType:y.ZP.PopupType.Popup,placementToOrigin:y.ZP.Placement.Bottom,alignmentToOrigin:y.ZP.Alignment.Start,open:e.state.isMenuOpen,render:this.renderMenu,onDismiss:()=>{this.handleMenuCloseFromOutside()},keepFocus:!0,origin:s,preventScaleTransition:!0,style:t.popup})})}renderCategoryMenu(e){const{renderGroup:t,shouldShowCount:a,totalNumEventsForCategory:s,numSelectedForCategory:n}=e,{componentStore:o}=this.stores,i=t.category,r=()=>{o.toggleCategorySelection(t)},d=()=>{o.selectCategorySelection(t)};return{key:i,action:r,render:e=>(0,D.jsx)(P,{totalNumEventsForCategory:s,numSelectedForCategory:n,category:i,categoryOpen:o.state.categoryToggleOpen[i],shouldShowCount:a,onCategoryToggleClick:r,onCategoryClick:d,...e}),localizedActionName:null,actionName:null}}renderActionNameMenu(e,t){const{intl:a}=this.props,{componentStore:s}=this.stores,n=()=>{s.selectActionName(e,t)},o=a.formatMessage(r.TE[e]);return{key:e,action:n,render:t=>(0,D.jsx)(h.Z,{...t,icon:(0,D.jsx)(f.Z,{checked:s.state.actionSelections[e],size:14,checkSize:8,onClick:n}),focused:!1,title:o,className:"notranslate",style:{paddingLeft:32},textWrapperStyle:{marginLeft:4}}),actionName:e,localizedActionName:o}}handleMenuCloseFromOutside(){const{componentStore:e,lastSelectionStore:t}=this.stores;e.setState({...e.state,actionSelections:{...t.state.actionSelections}}),this.setMenuOpen(!1)}handleClear(){const{componentStore:e}=this.stores;e.clearAllSelections()}handleApply(){const{onChange:e}=this.props,{componentStore:t,lastSelectionStore:a}=this.stores,s=t.getAllActionNames(),n=t.getSelectedActionNames();e(s.length===n.length?[]:n),0===n.length&&t.reset(),a.setState({...a.state,actionSelections:{...t.state.actionSelections}}),this.setMenuOpen(!1)}}Z.displayName="AuditLogEventFilter";const L=(0,m.injectIntl)(Z);function B(e){var t;return u.oA([e.key,null===(t=e.localizedActionName)||void 0===t?void 0:t.toLowerCase()]).join(" ")}function O(e){let{totalNumSelected:t,totalNumEvents:a}=e;window.__c={n:"SelectedEventsPill"};const s=(0,n.yK)((e=>({container:{background:i.ZP.diffBackground,color:i.ZP.diffTextColor,paddingInline:6,margin:8,marginBottom:0,borderRadius:4,fontWeight:510,width:"fit-content"},textWrapperStyle:{marginLeft:8}})),[]);return(0,D.jsx)(w.Z,{style:s.container,children:(0,D.jsx)(m.FormattedMessage,{id:"auditLogEventFilter.selectedPill",defaultMessage:"{totalNumSelected} of {totalNumEvents} selected",values:{totalNumSelected:t,totalNumEvents:a}})})}function q(e){return{container:{minWidth:460},searchInput:{padding:8,borderBottomLeftRadius:0,borderBottomRightRadius:0,boxShadow:"none",borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.lightDividerColor},popup:{paddingBottom:8}}}},84665:(e,t,a)=>{a.d(t,{e:()=>r});a(67294);var s=a(82990),n=a(9291),o=a(23189),i=a(85893);function r(){return(0,i.jsx)(o.Z,{large:!0,style:{marginBottom:0,paddingBottom:0,fontSize:16,fontWeight:s.Z.fontWeight.medium,display:"flex",justifyContent:"space-between"},children:(0,i.jsx)("div",{style:{gap:8,display:"flex"},children:(0,i.jsx)(n.FormattedMessage,{id:"auditlog.title",defaultMessage:"Audit log"})})})}},81549:(e,t,a)=>{a.d(t,{Z:()=>o});a(67294);var s=a(43568),n=a(85893);const o=function(){return(0,n.jsx)("div",{style:{},children:(0,n.jsx)(s.Z,{paragraphs:[{lineHeight:45,lineMargin:20,sectionWidths:[100],repeat:1,sectionMargin:15},{lineHeight:40,lineMargin:5,sectionWidths:[100],repeat:8,sectionMargin:10}]})})}},58015:(e,t,a)=>{a.d(t,{v:()=>o});a(67294);var s=a(89728),n=a(85893);function o(e){const{children:t,disabled:a,onClick:o}=e;return(0,n.jsx)(s.Z,{onClick:o,disabled:a,style:{justifyContent:"center",marginLeft:6},isBlue:!a,isLightGray:a,children:t})}},22326:(e,t,a)=>{a.d(t,{Z:()=>d,r:()=>l});var s=a(49085),n=a(53877),o=a(80085),i=a(27617);class r extends s.default{getInitialState(){return{pageNum:1,pageSize:10,timeRange:{},actors:[],actions:[],sortOrder:o.NQ.CreatedNewest}}}const d=new r,l=e=>{const{timeRange:t,actors:a,actions:s,sortOrder:r}=e,d=new URLSearchParams;return t.starting&&d.append("starting",`${n.OQ.toUnixMs(t.starting)}`),t.ending&&d.append("ending",`${n.OQ.toUnixMs(t.ending)}`),(null==a?void 0:a.length)>0&&d.append("actors",a.map(i.eW).join(",")),(null==s?void 0:s.length)>0&&d.append("actions",s.join(",")),d.append("sort",`${r||o.NQ.CreatedNewest}`),d.toString()}},40396:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(49085);class n extends s.default{getInitialState(){return{spaceId:void 0,allUserIds:new Set,allBotIds:new Set,removedUserIds:new Set,removedBotIds:new Set}}isUserOrBotRemoved(e){return Boolean(e&&(this.state.removedUserIds.has(e)||this.state.removedBotIds.has(e)))}}const o=new n},23096:(e,t,a)=>{a.d(t,{Z:()=>J});a(67294);var s=a(83355),n=a(69651),o=a(97880),i=a(9291),r=a(27617),d=a(97638),l=a(76150),u=a(13854),c=a(41558),m=a(33338),g=a(42922),p=a(52275),h=a(3386),f=a(89728),v=a(53437),_=a(72495),x=a(53877),M=a(42875),y=a(33929),b=a(87279),w=a(67950),C=a(78140),S=a(40721),j=a(86825),N=a(46945),T=a(84795),F=a(72126),k=a(49085);const E="Invalid date",A="Invalid range";class R extends k.default{getInitialState(){return{dateEdited:!1,timeEdited:!1,temporaryValue:{date:void 0,time:void 0},error:void 0}}}const V=R;var D=a(74194),I=a(26388),P=a(85893);class Z extends s.Z{constructor(){super(...arguments),this.storeTypes={store:V},this.renderInput=()=>{const{device:e}=this.environment,{store:t,hideClearButton:a,focus:s,showTime:n,placeholder:o,...i}=this.props,r=e.isMobile?"date":"text",d=e.isMobile?"time":"text",l=D.B.Transparent,u=e.isMobile?void 0:s,c={display:"flex",alignItems:"center",lineHeight:2,background:this.theme.inputBackground,paddingLeft:8,flexBasis:"50%",...this.getInputStyles().inputOuterStyle};return(0,P.jsxs)("div",{style:c,children:[(0,P.jsx)(D.Z,{...i,type:r,format:l,placeholder:o,focus:"date"===u,onFocus:this.handleDateFocus,onChange:this.handleDateChange,onSubmit:e=>this.handleSubmit(e,"date"),onBlur:this.handleBlur,value:this.getDateInputValue(),size:1,style:{fontSize:e.isMobile?16:14},showClearButton:!n&&B(this.environment,this.props.hideClearButton),onClearButtonClick:this.handleClear}),n&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{style:{height:14,width:1,background:this.theme.regularDividerColor,marginLeft:6,marginRight:12,flexShrink:0}}),(0,P.jsx)(D.Z,{...i,placeholder:y.default.formatMessage(O.timePlaceholder),type:d,format:l,focus:"time"===u,onFocus:this.handleTimeFocus,onChange:this.handleTimeChange,onSubmit:e=>this.handleSubmit(e,"time"),onBlur:this.handleBlur,value:this.getTimeInputValue(),size:1,style:{fontSize:e.isMobile?16:14},showClearButton:B(this.environment,this.props.hideClearButton),onClearButtonClick:this.handleClear})]})]})},this.handleDateFocus=e=>{const{onDateFocus:t}=this.props,{store:a}=this.stores;a.setState({...a.state,dateEdited:!1}),t&&t(e)},this.handleTimeFocus=e=>{const{onTimeFocus:t}=this.props,{store:a}=this.stores;a.setState({...a.state,timeEdited:!1}),t&&t(e)},this.handleClear=()=>{const{onClear:e,onUpdate:t}=this.props,{store:a}=this.stores;a.setState({...a.state,dateEdited:!0,timeEdited:!0,temporaryValue:{date:void 0,time:void 0},error:void 0});const s=this.validateCurrent();s&&t(s),a.setState({...a.state,dateEdited:!1,timeEdited:!1}),e&&e()},this.handleDateChange=e=>{const{device:t}=this.environment,{store:a}=this.stores;a.setState({...a.state,dateEdited:!0,temporaryValue:{...a.state.temporaryValue,date:e.target.value||""}}),t.isAndroid&&this.handleBlur()},this.handleTimeChange=e=>{const{device:t}=this.environment,{store:a}=this.stores;a.setState({...a.state,timeEdited:!0,temporaryValue:{...a.state.temporaryValue,time:e.target.value||""}}),t.isAndroid&&this.handleBlur()},this.handleSubmit=(e,t)=>{var a,s;const{onUpdate:n,onSubmit:o,showTime:i}=this.props,{store:r}=this.stores;let d;(!i||"date"===t&&null!==(a=this.props.value)&&void 0!==a&&a.start_time||"time"===t&&null!==(s=this.props.value)&&void 0!==s&&s.start_date)&&(d=this.validateCurrent(),d&&(n(d),d.error?r.setState({...r.state,dateEdited:!1,error:d.error}):r.reset())),o&&o(e,d)},this.handleBlur=e=>{const{onUpdate:t,onBlur:a}=this.props,{store:s}=this.stores,n=this.validateCurrent();n?(t(n),n.error?s.setState({...s.state,dateEdited:!1,timeEdited:!1,error:n.error}):s.reset()):s.setState({...s.state,dateEdited:!1,timeEdited:!1}),e&&a&&a(e)}}didUpdate(e){const{store:t}=this.stores;F.Xy(e.value,this.props.value)||t.reset()}renderComponent(){const e=this.getError();return e?(0,P.jsx)(I.ZP,{renderTooltip:()=>e,forceVisibleState:!0,placement:I.ug.Left,render:this.renderInput,originGap:-8}):this.renderInput()}getDateInputValue(){const{device:e}=this.environment,{value:t,intl:a}=this.props,{store:s}=this.stores;return e.isMobile?t?r.dd(t,a):"":s.state.temporaryValue.date?s.state.temporaryValue.date:s.state.dateEdited?s.state.temporaryValue.date||"":t?r.dd(t,a):""}getTimeInputValue(){const{device:e}=this.environment,{value:t,intl:a}=this.props,{store:s}=this.stores;return e.isMobile?t?r.KN(t,a):"":s.state.temporaryValue.time?s.state.temporaryValue.time:s.state.timeEdited?s.state.temporaryValue.time||"":t?r.KN(t,a):""}getError(){const{store:e}=this.stores,{intl:t}=this.props;if(e.state.error)switch(e.state.error){case E:return t.formatMessage({id:"dateInputError.invalidDateError.tooltip",defaultMessage:"Invalid date"});case A:return t.formatMessage({id:"dateInputError.invalidDateRangeError.tooltip",defaultMessage:"Invalid range"});default:(0,o.t1)(e.state.error)}}validateCurrent(){const{validate:e}=this.props,t=this.parseCurrentDateTimeValue();if(t)return e?e(t):t}parseCurrentDateTimeValue(){const{store:e}=this.stores,{value:t,showTime:a,isEndingDate:s}=this.props;if(!e.state.dateEdited&&!e.state.timeEdited)return;if(!e.state.temporaryValue.date&&!e.state.temporaryValue.time)return{value:void 0};const n=(0,T.parseDateValue)(e.state.temporaryValue.date||"",this.props.intl);if(n){let e="";return e=a?(null==t?void 0:t.start_time)||"00:00":s?"23:59":"00:00",{value:{type:"datetime",start_date:n,time_zone:(null==t?void 0:t.time_zone)||(0,M.r)(),start_time:e}}}const o=(0,T.parseTimeValue)(e.state.temporaryValue.time||"",this.props.intl);return(null!=t&&t.start_date||n)&&o?{value:{type:"datetime",start_date:(null==t?void 0:t.start_date)||n,start_time:o,time_zone:(null==t?void 0:t.time_zone)||(0,M.r)()}}:{error:E}}getInputStyles(){const{device:e}=this.environment,{inputStyle:t,inputOuterStyle:a,style:s}=this.props,n=(o=this.environment,i=this.props.hideClearButton,{menuItem:{marginBottom:o.device.isMobile?1:12},inputWrapper:{borderRadius:4,height:28,paddingRight:B(o,i)?6:0,position:"relative"},inputEditRegion:{width:B(o,i)?"calc(100% - 14px)":"100%"},inputEditRegionMobile:{padding:"2px 6px",position:"relative"}});var o,i;return{style:{...n.menuItem,...s},inputOuterStyle:{...n.inputWrapper,...a,...this.getInputBorders()},inputStyle:{...n.inputEditRegion,...e.isMobile&&n.inputEditRegionMobile,...t}}}getInputBorders(){const{disabled:e,focus:t}=this.props,a={inputDefault:{background:(s=this.theme).inputBackground,boxShadow:s.inputBoxShadow},inputFocused:{boxShadow:s.outlineBlueInputBoxShadow},inputError:{boxShadow:s.outlineRedInputBoxShadow},placeholder:{color:s.lightTextColor}};var s;const n=this.getError();if(!e)return n?a.inputError:t?a.inputFocused:a.inputDefault}}Z.displayName="DateTimeInputMenuItem";const L=(0,i.injectIntl)(Z);function B(e,t){const{device:a}=e;return!!a.isMobile||!t}const O=(0,i.defineMessages)({startingDateMessage:{defaultMessage:"Starting",id:"auditLog.dateTimeRangeMenu.startingDatePlaceholder"},endingDateMessage:{defaultMessage:"Ending",id:"auditLog.dateTimeRangeMenu.endingDatePlaceholder"},timePlaceholder:{defaultMessage:"12:00 AM",id:"auditLog.dateTimeRangeMenu.timePlaceholderInNumber"}});class q extends s.Z{constructor(){super(...arguments),this.storeTypes={store:u.ZP,dayRangeStore:c.Z},this.renderInputs=()=>{const{device:e,WindowSizeStore:t}=this.environment,{value:a,disabled:s}=this.props,{store:n}=this.stores,o=n.getFocus();let i="date";o!==l.Hv.StartTime&&o!==l.Hv.EndTime||(i="time");const d=function(e,t){const a=e.starting&&r.o0(e.starting,t),s=e.ending&&r.o0(e.ending,t);return{earliestValidEnding:a,latestValidStarting:s}}(this.props.value,this.props.intl);return(0,P.jsxs)("div",{style:{paddingTop:e.isMobile?16:12,paddingBottom:e.isMobile?16:8,paddingLeft:e.isMobile?t.getSafePaddingLeftCSS(16):14,paddingRight:e.isMobile?t.getSafePaddingRightCSS(16):14,display:n.state.showTime?"block":"flex",...e.isMobile&&{boxShadow:`\n\t\t\t\t\t\t\t0 1px 0 ${this.theme.regularDividerColor}\n\t\t\t\t\t\t`,position:"relative",zIndex:2},background:e.isMobile?this.theme.popoverBackground:void 0},children:[(0,P.jsx)(L,{disabled:s,placeholder:y.default.formatMessage(O.startingDateMessage),focus:o===l.Hv.StartDate||o===l.Hv.StartTime?i:void 0,value:a.starting,validate:e=>function(e,t){const a=W("starting",e,t);return a.error?a:{value:a.value.starting}}(e,this.props.value),onUpdate:e=>function(e,t,a){e.error||t({value:{...a,starting:e.value}})}(e,this.props.onUpdate,this.props.value),onDateFocus:()=>this.handleDateFocus(l.Hv.StartDate),onTimeFocus:()=>this.handleTimeFocus(l.Hv.StartTime),onSubmit:(e,t)=>this.handleStartSubmit(e,t,o),inputElementAttributes:{max:d.latestValidStarting},showTime:n.state.showTime}),(0,P.jsx)("div",{style:{width:12,height:8}}),(0,P.jsx)(L,{disabled:s,placeholder:y.default.formatMessage(O.endingDateMessage),focus:o===l.Hv.EndDate||o===l.Hv.EndTime?i:void 0,value:a.ending,validate:e=>function(e,t){const a=W("ending",e,t);return a.error?a:{value:a.value.ending}}(e,this.props.value),onUpdate:e=>function(e,t,a){e.error||t({value:{...a,ending:e.value}})}(e,this.props.onUpdate,this.props.value),onDateFocus:()=>this.handleDateFocus(l.Hv.EndDate),onTimeFocus:()=>this.handleTimeFocus(l.Hv.EndTime),onSubmit:(e,t)=>this.handleEndSubmit(e,t,o),inputElementAttributes:{min:d.earliestValidEnding},showTime:n.state.showTime})]})},this.renderCalendar=()=>{const{device:e}=this.environment,{value:t,onUpdate:a}=this.props,{store:s,dayRangeStore:n}=this.stores,o=z(this.environment,this.theme),i={pickerSectionMobile:{background:(d=this.theme).popoverBackground,boxShadow:`0 1px 0 ${d.regularDividerColor}`,marginBottom:1}};var d;const l={...o.pickerSection,...e.isMobile&&o.pickerSectionMobile,...e.isMobile&&i.pickerSectionMobile};return(0,P.jsx)(_.Z,{children:(0,P.jsx)("div",{style:l,children:(0,P.jsx)(N.Z,{value:r.Zy(t),dateTimeStore:s,store:n,onUpdate:e=>{if(e.error)return;const s=r.PM(t,e.value);return a({error:e.error,value:s})},validate:(e,t)=>function(e,t,a){if(t.error)return t;return function(e){if(e.starting&&e.ending){const t=x.OQ.notionDateToLuxon(e.starting);return x.OQ.notionDateToLuxon(e.ending)>=t?{value:e}:{error:w.B.INVALID_RANGE}}return{value:e}}({...r.Zy(a),[e]:t.value})}(e,t,this.props.value)})})})},this.handleDateFocus=e=>{const{store:t,dayRangeStore:a}=this.stores;t.setState({...t.state,focus:e});const s=u.QJ[e];a.setState({...a.state,focus:s})},this.handleTimeFocus=e=>{const{store:t}=this.stores;t.setState({...t.state,focus:e})},this.handleStartSubmit=(e,t,a)=>{const{store:s,dayRangeStore:n}=this.stores;t&&t.error||(a===l.Hv.StartDate&&s.state.showTime?s.setState({...s.state,focus:l.Hv.StartTime}):(s.setState({...s.state,focus:l.Hv.EndDate}),n.setState({...n.state,focus:"ending"})))},this.handleEndSubmit=(e,t,a)=>{const{store:s}=this.stores;t&&t.error||a===l.Hv.EndDate&&s.state.showTime&&s.setState({...s.state,focus:l.Hv.EndTime})},this.getMenuProps=()=>{const{device:e}=this.environment,{onDismiss:t,title:a}=this.props;if(e.isMobile){return{menuType:b.og.Modal,title:a,right:(0,P.jsx)(S.DoneMenuText,{}),onClickRight:t,header:this.renderInputs()}}return{menuType:b.og.Popup,onClickOutside:t,footer:this.props.footer}}}didMount(){const{store:e}=this.stores;void 0!==this.props.showTime&&e.setState({...e.state,showTime:this.props.showTime})}renderComponent(){const{device:e}=this.environment;return(0,P.jsx)(C.Z,{...this.getMenuProps(),children:(0,P.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,P.jsxs)("div",{children:[this.props.header,!e.isMobile&&this.renderInputs(),this.renderCalendar()]}),this.renderSidebar()]})})}renderSidebar(){const{store:e}=this.stores,{onUpdate:t,value:a,hideTime:s}=this.props;return(0,P.jsxs)("aside",{style:z(this.environment,this.theme).sidebar,children:[s?null:(0,P.jsx)(j.Z,{title:(0,P.jsx)(i.FormattedMessage,{id:"auditlogDateFilter.timeToggle",defaultMessage:"Use time"}),on:e.state.showTime,onClick:()=>{if(e.toggleShowTime(),e.state.showTime){const e=a;e.starting&&(e.starting.start_time="00:00"),e.ending&&(e.ending.start_time="23:59"),t({value:e})}},focused:!1}),(0,P.jsx)(p.Z,{focused:!1,title:(0,P.jsx)(i.FormattedMessage,{id:"auditlogDateFilter.quickFilters.today",defaultMessage:"Today"}),onClick:()=>{const e=Date.now(),t=x.CQ(e,(0,M.r)());this.setStoresTemporaryValue({starting:{...t,start_time:"00:00"},ending:t})},style:z(this.environment,this.theme).menuItem}),(0,P.jsx)(p.Z,{focused:!1,title:(0,P.jsx)(i.FormattedMessage,{id:"auditlogDateFilter.quickFilters.yesterday",defaultMessage:"Yesterday"}),onClick:()=>{const e=x.Cv((0,M.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M.r)()},ending:{type:"datetime",start_date:e.start_date,start_time:"23:59",time_zone:(0,M.r)()}})},style:z(this.environment,this.theme).menuItem}),(0,P.jsx)(p.Z,{focused:!1,title:(0,P.jsx)(i.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastWeek",defaultMessage:"Last 7 days"}),onClick:()=>{const e=x.Oo((0,M.r)()),t=x.CQ(Date.now(),(0,M.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M.r)()},ending:t})},style:z(this.environment,this.theme).menuItem}),(0,P.jsx)(p.Z,{focused:!1,title:(0,P.jsx)(i.FormattedMessage,{id:"auditlogDateFilter.quickFilters.lastMonth",defaultMessage:"Last 30 days"}),onClick:()=>{const e=x.dj((0,M.r)()),t=x.CQ(Date.now(),(0,M.r)());this.setStoresTemporaryValue({starting:{type:"datetime",start_date:e.start_date,start_time:"00:00",time_zone:(0,M.r)()},ending:t})},style:z(this.environment,this.theme).menuItem})]})}setStoresTemporaryValue(e){const{store:t,dayRangeStore:a}=this.stores;e.ending&&this.handleDateFocus(l.Hv.EndDate),t.setState({...t.state,temporaryDateRange:e}),a.setState({...a.state,displayMonth:e.starting||e.ending?x.Sy(e.starting||e.ending):void 0,temporaryDateRange:{starting:r.Qb(e.starting),ending:r.Qb(e.ending)}})}}q.displayName="DateTimeRangeMenu";const U=(0,i.injectIntl)(q);function W(e,t,a){return t.error?t:function(e){if(e.starting&&e.ending){const t=x.OQ.notionDateTimeToLuxon(e.starting);return x.OQ.notionDateTimeToLuxon(e.ending)>=t?{value:e}:{error:w.B.INVALID_RANGE}}return{value:e}}({...a,[e]:t.value})}function z(e,t){return{pickerSection:{paddingLeft:16,paddingRight:16},pickerSectionMobile:{paddingTop:16,paddingBottom:8},sidebar:{paddingTop:12,paddingBottom:24,overflowY:"auto",overflowX:"hidden",flex:"0 0 220px",backgroundColor:t.sidebarSecondaryBackground,borderLeft:`1px solid ${t.regularDividerColor}`,maxWidth:"fit-content"},menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4,color:t.mediumTextColor}}}var K=a(255),H=a(8319),G=a(75689),Q=a(91642);class $ extends s.Z{constructor(){super(...arguments),this.storeTypes={store:u.ZP,dayRangeStore:c.Z},this.renderActiveButtonOrigin=()=>{const{value:e,disabled:t,focused:a,intl:s}=this.props,o=ae(this.environment),i=X(this.theme),r={...o.menuItem,...i.activeMenuItem},l=d._Q(e,s),u=(0,P.jsx)(K.Z,{onClick:()=>te(this.props.onChange),disabled:t});return(0,P.jsx)(p.Z,{focused:a,disabled:t,icon:(0,n.C)(o.iconActiveDesktop),title:l,right:u,isTokenTitle:!0,alignIconTop:!0,onClick:this.handleOriginActivate,desktopTitleStyle:o.menuItemTitleDesktop,desktopIconStyle:o.iconActiveDesktopWrapper,style:r})},this.renderInactiveButtonOrigin=()=>{const{title:e,icon:t,disabled:a,focused:s,mode:n}=this.props,o=ae(this.environment),i=X(this.theme),r={...o.menuItem,...i.buttonMenuItem,...n===H.z.Pill?{width:"fit-content",border:"solid 1px",paddingLeft:0,paddingRight:0,borderRadius:20,fontSize:12}:{}};return(0,P.jsx)(p.Z,{focused:s,disabled:a,icon:t(o.icon),title:e,onClick:this.handleOriginActivate,style:r})},this.renderPillButtonOrigin=()=>{const{value:e,pillTitle:t}=this.props,a=(0,P.jsx)(i.FormattedMessage,{id:"searchDateFilter.shortTitle",defaultMessage:"Date"});return(0,P.jsx)(m.Z,{on:Boolean(e.starting||e.ending),icon:(0,n.C)({width:16,marginRight:6,fill:"currentColor"}),title:(0,P.jsx)("span",{children:t||a}),onClick:this.handleOriginActivate})},this.renderPopupContents=()=>{const{title:e,header:t,showButtons:a,sidebar:s,hideTime:n}=this.props,{store:o,dayRangeStore:r}=this.stores;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(U,{title:e,value:this.getCurrentValue(),onUpdate:this.updateTemporary,store:o,dayRangeStore:r,onDismiss:this.handleMenuClose,footer:"footer"===a&&this.renderFooter(),sidebar:s,hideTime:n,header:t}),"side"===a&&(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",padding:"0px 10px"},children:[(0,P.jsx)(f.Z,{isGray:!0,style:{marginLeft:"auto",marginRight:8},onClick:this.handleMenuClose,children:(0,P.jsx)(i.FormattedMessage,{defaultMessage:"Cancel",id:"searchDateFilter.cancelButton.label"})}),(0,P.jsx)(g.Z,{onClick:()=>this.props.onChange(this.stores.store.state.temporaryDateRange),children:(0,P.jsx)(i.FormattedMessage,{defaultMessage:"Accept",id:"searchDateFilter.acceptButton.label"})})]})]})},this.renderFooter=()=>{const{store:e,dayRangeStore:t}=this.stores;return(0,P.jsxs)(_.Z,{topBorder:!0,style:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},children:[(0,P.jsx)(f.Z,{onClick:()=>{e.clearTemporaryDateRange(),t.clearTemporaryDateRange(),this.props.onChange({starting:void 0,ending:void 0})},children:(0,P.jsx)(i.FormattedMessage,{id:"searchDateFilter.clearButton",defaultMessage:"Clear"})}),(0,P.jsx)(g.Z,{onClick:e=>{this.props.onChange(this.stores.store.state.temporaryDateRange),this.handleMenuClose(e)},children:(0,P.jsx)(i.FormattedMessage,{id:"searchDateFilter.applyButton",defaultMessage:"Apply"})})]})},this.handleOriginActivate=()=>{const{disabled:e}=this.props,{store:t,dayRangeStore:a}=this.stores;e||(t.setState({...t.state,isOpen:!0,focus:l.Hv.StartDate}),a.setState({...a.state,isOpen:!0,focus:"starting"}))},this.handleMenuClose=e=>{const{onChange:t,onMenuDismiss:a,showButtons:s}=this.props,{store:n,dayRangeStore:o}=this.stores,{temporaryDateRange:i}=n.state;d.zD(e)||(s||t(i),n.setState({...n.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),o.setState({...o.state,isOpen:!1,temporaryDateRange:{starting:void 0,ending:void 0}}),a&&a())},this.updateTemporary=e=>{const{store:t,dayRangeStore:a}=this.stores;if(e.error)return;const s={starting:(0,r.Qb)(e.value.starting),ending:(0,r.Qb)(e.value.ending)};return a.setState({...a.state,temporaryDateRange:{...a.state.temporaryDateRange,...s}}),t.setState({...t.state,temporaryDateRange:{...t.state.temporaryDateRange,...e.value}})}}didMount(){this.updateTemporary({value:this.props.value})}renderComponent(){const{device:e}=this.environment,{mode:t}=this.props;return e.isMobile?this.renderMobile(t):this.renderDesktop(t)}renderDesktop(e){const{title:t,sidebar:a}=this.props,{store:s}=this.stores,n=ae(this.environment),i=e===H.z.Section,r=i?t:void 0,d=(()=>e===H.z.Section?this.renderActiveButtonOrigin():e===H.z.Button?this.renderInactiveButtonOrigin():e===H.z.Pill?this.renderPillButtonOrigin():void(0,o.t1)(e))();return(0,P.jsx)(Q.Z,{title:r,marginAfter:i,children:(0,P.jsx)(h.Z,{capture:s.state.isOpen,onUp:ee,onDown:ee,onEnter:ee,children:(0,P.jsx)(v.ZP,{popupType:Y(this.environment),open:s.state.isOpen,origin:d,render:this.renderPopupContents,onDismiss:this.handleMenuClose,placementToOrigin:v.ZP.Placement.Bottom,alignmentToOrigin:v.ZP.Alignment.Start,style:a?n.popupWithSidebar:n.popup})})})}renderMobile(e){const{store:t}=this.stores,a=e===H.z.Section?this.renderMobileFilterSummary():this.renderMobileButtonOrigin();return(0,P.jsx)(v.ZP,{popupType:v.ZP.PopupType.SlideUp,open:t.state.isOpen,origin:a,render:this.renderPopupContents,onDismiss:this.handleMenuClose,preventScaleTransition:!0})}renderMobileButtonOrigin(){const{icon:e,title:t,disabled:a}=this.props,s=ae(this.environment);return(0,P.jsx)(p.Z,{disabled:a,focused:!1,icon:e(s.icon),title:t,onClick:this.handleOriginActivate})}renderMobileFilterSummary(){const{title:e,value:t,disabled:a,intl:s}=this.props,o=ae(this.environment),i=(0,P.jsxs)("div",{style:o.summary,children:[(0,n.C)(o.iconActiveMobile),d._Q(t,s)]});return(0,P.jsx)(G.Z,{disabled:a,onClick:this.handleOriginActivate,onClickClear:()=>te(this.props.onChange),label:e,title:i})}getCurrentValue(){const{value:e}=this.props,{store:t}=this.stores,{temporaryDateRange:a}=t.state;return{...e,...a}}}$.displayName="DateTimeFilter";const J=(0,i.injectIntl)($);function Y(e){const{device:t}=e;return t.isMobile?v.ZP.PopupType.SlideUp:v.ZP.PopupType.Popup}function X(e){return{buttonMenuItem:{color:e.mediumTextColor},activeMenuItem:{color:e.regularTextColor}}}function ee(e){e.preventDefault&&e.preventDefault()}function te(e){e({starting:void 0,ending:void 0})}function ae(e){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},icon:{height:16,width:16,marginRight:6},iconActiveDesktop:{height:14,width:14,fill:"currentColor",alignSelf:"flex-start",marginTop:2,marginRight:2},iconActiveDesktopWrapper:{marginTop:0},iconActiveMobile:{height:14,width:14,fill:"currentColor",marginTop:1,marginRight:6},popup:{paddingTop:0,paddingBottom:8},popupWithSidebar:{display:"flex"},menuItemTitleDesktop:{width:"100%"},summary:{display:"inline-flex"}}}},66661:(e,t,a)=>{a.d(t,{e:()=>r});a(67294);var s=a(24211),n=a(9291),o=a(26388),i=a(85893);function r(e){let{num:t,abbreviateNumber:a}=e;window.__c={n:"NumberDisplay"};const r=(0,n.useIntl)(),d=(0,s.E2)(r),l=t.toLocaleString(d),u=Intl.NumberFormat(d,{notation:"compact",maximumFractionDigits:1}).format(t);return a?(0,i.jsx)(o.ZP,{placement:o.ug.Bottom,render:e=>(0,i.jsx)("span",{...e,children:u}),renderTooltip:()=>l}):(0,i.jsx)("span",{children:l})}},46978:(e,t,a)=>{a.d(t,{Z:()=>r});var s=a(67294),n=a(24405),o=a(85893);function i(e,t){let{isSelected:a}=e;window.__c={n:"RadioButtonIcon"};const{radioButtonStyle:s,dotStyle:i}=(0,n.yK)((e=>({radioButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,borderRadius:16,marginRight:8,background:a?e.blueColor:e.whiteButtonBackground,border:a?"none":`1px solid ${e.radioButtonBorder}`,transition:"background 100ms ease-out"},dotStyle:{width:6,height:6,borderRadius:6,background:e.regularInvertedTextColor,transition:"opacity 100ms ease-out",opacity:a?1:0}})),[a]);return(0,o.jsx)("div",{ref:t,style:s,children:(0,o.jsx)("div",{style:i})})}const r=s.forwardRef(i)},719:(e,t,a)=>{a.d(t,{Z:()=>l});a(67294);var s=a(480),n=a(24405),o=a(98742),i=a(74194),r=a(85893);const d={flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"};const l=function(e){let{readOnly:t,onClick:a,style:o,tokens:i,value:d,onRemoveLastToken:l,onChange:g,onSubmit:p,onBlur:h,focus:f,type:v,placeholder:_}=e;window.__c={n:"TokenInput"};const x=(0,n.Fg)(),M=(0,s.O7)(),{device:y}=M;return(0,r.jsxs)("div",{className:t?void 0:"notion-focusable-within",onClick:a,style:y.isMobile?c(x,o):u(x,o),children:[i,(0,r.jsx)(m,{tokens:i,value:d,onRemoveLastToken:l,onChange:g,onSubmit:p,onBlur:h,focus:f,readOnly:t,type:v,placeholder:_})]})};function u(e,t){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:e.inputBoxShadow,background:e.inputBackground,borderRadius:4,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...t}}function c(e,t){return{...u(e,t),fontSize:14,padding:"7px 10px 0"}}function m(e){let{tokens:t,value:a,onRemoveLastToken:n,onChange:l,onSubmit:u,onBlur:c,focus:m,readOnly:g,type:p,placeholder:h}=e;window.__c={n:"InputComponent"};const f=(0,s.O7)(),{device:v}=f,_=0===t.length;return(0,r.jsx)(i.Z,{format:i.B.Transparent,...(0,o.Z)({onKeyDown:e=>function(e,t,a){"Backspace"===e.key&&0===t.length&&a()}(e,a,n)},{onChange:l}),value:a,onSubmit:u,onBlur:c,focus:m,style:{...d,margin:v.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:g,inputStyle:{height:18},size:1,type:p,placeholder:_?h:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})}},73075:(e,t,a)=>{a.d(t,{q:()=>l});a(67294);var s=a(24405),n=a(80750),o=a(82990),i=a(9291),r=(a(95477),a(63296)),d=a(85893);function l(e){let{runNewSearch:t,error:a}=e;window.__c={n:"AdminContentSearchError"};const l=(0,s.yK)((e=>({container:{marginTop:48,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},headerIcon:{width:28,height:28,color:e.redBadgeBackground,fill:"currentColor"},title:{margin:"8px auto",fontWeight:o.Z.fontWeight.medium,fontSize:16},description:{fontWeight:o.Z.fontWeight.regular,fontSize:14,lineHeight:1.3,color:e.lightTextColor,textAlign:"center",width:328,margin:"0 auto 16px"},errorMessage:{borderRadius:4,background:e.cardBackground,fontFamily:o.Z.baseFontFamily.mono,fontSize:12,color:e.lightTextColor,padding:"18px 24px",margin:"0 auto 12px"},errorButton:{width:195,margin:"8px auto 0",textAlign:"center"}})),[]);return(0,d.jsxs)("div",{style:l.container,children:[(0,n.l)(l.headerIcon),(0,d.jsx)("h1",{style:l.title,children:(0,d.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.title",defaultMessage:"Something went wrong"})}),(0,d.jsx)("p",{style:l.description,children:(0,d.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.description",defaultMessage:"Something went wrong when we were loading the results. Try to run your search again."})}),null,(0,d.jsx)(r.Z,{style:l.errorButton,onClick:()=>t(!0),children:(0,d.jsx)(i.FormattedMessage,{id:"adminContentSearchTab.pagesTable.error.confirm",defaultMessage:"Retry"})})]})}},53855:(e,t,a)=>{a.d(t,{A:()=>p,e:()=>h});var s=a(67294),n=a(86517),o=a(72141),i=a(29369),r=a(97880),d=a(9291),l=a(98165),u=a(80444),c=a(26136),m=a(69219),g=a(85893);function p(e){let{blockStore:t}=e;window.__c={n:"AudienceCell"};const[a,r]=(0,s.useState)();(0,s.useEffect)((()=>{!async function(){const{currentSpaceStore:e}=u.default.state,a=l.fJ(t),s=n.Wo(a),d=null==e?void 0:e.getPermissionItems().filter(o.jg),m=await n.uq({permissionItems:s,hasTeamLevelGuests:function(t){return!!e&&c.zX.createChildStore(e,{table:i.e0,id:t}).getMembers().some((e=>"team_level_guest"===e.type))},spaceUserPermissions:d});r(m)}()}),[t]);const d=(0,s.useMemo)((()=>{if(a)return h(a)}),[a]);return(0,g.jsx)(m.i,{useThinTitle:!0,title:d})}function h(e){switch(e){case"private":return(0,g.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.private",defaultMessage:"Private"});case"shared_internally":return(0,g.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedInternally",defaultMessage:"Shared internally"});case"shared_externally":return(0,g.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.sharedExternally",defaultMessage:"Shared externally"});case"shared_to_web":return(0,g.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.audienceCell.publishedToWeb",defaultMessage:"Published to web"});default:(0,r.t1)(e)}}},36550:(e,t,a)=>{a.d(t,{y:()=>d});var s=a(67294),n=a(9291),o=a(89665),i=a(57702),r=a(85893);function d(e){let{spaceStore:t,createdByFilterIds:a,setCreatedByFilter:d,runNewSearch:l,includeGuests:u}=e;window.__c={n:"CreatedByFilter"};const c=(0,o.R)({spaceStore:t}),m=(0,s.useMemo)((()=>c.loading?[]:u?[...c.members,...c.guests]:c.members),[c,u]),g=(0,s.useMemo)((()=>c.loading?new Set:new Set(c.guests.map((e=>e.id)))),[c]);const p=(0,s.useMemo)((()=>a.map((e=>({id:e,type:"user"})))),[a]);return(0,r.jsx)(i.B,{userStores:m,title:(0,r.jsx)(n.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdBy.title",defaultMessage:"Created by"}),selectedItems:p,setSelectedItems:function(e){const t=e.map((e=>{let{id:t}=e;return t}));d(t)},onMenuClose:l,guestUserIdSet:g})}},79782:(e,t,a)=>{a.d(t,{f:()=>x});var s=a(67294),n=a(86628),o=a(24405),i=a(40506),r=a(69651),d=a(42853),l=a(97880),u=a(9291),c=a(27617),m=a(97638),g=a(64921),p=a(52275),h=a(14871),f=a(23096),v=a(8319),_=a(85893);function x(e){let{lastEditedTime:t,createdTime:a,setLastEditedTime:o,setCreatedOnTime:d}=e;window.__c={n:"DateFilter"};const g=(0,u.useIntl)(),[p,h]=(0,s.useState)("createdTime"),x=(0,s.useMemo)((()=>{switch(p){case"createdTime":return a;case"lastEditedTime":return t;default:(0,l.t1)(p)}}),[t,a,p]),y=(0,s.useMemo)((()=>{switch(p){case"createdTime":return d;case"lastEditedTime":return o;default:(0,l.t1)(p)}}),[o,d,p]);const b=(0,n.VK)((()=>{if((0,c.mK)(x))switch(p){case"createdTime":return(0,_.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.title",defaultMessage:"Created on"});case"lastEditedTime":return(0,_.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.title",defaultMessage:"Last edited on"});default:(0,l.t1)(p)}const e=(0,c.Hq)(x),t=m._Q(e,g,i.sF);switch(p){case"createdTime":return(0,_.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.titleWithDateRange",defaultMessage:"Created on: {dateRangeString}",values:{dateRangeString:t}});case"lastEditedTime":return(0,_.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.titleWithDateRange",defaultMessage:"Last edited on: {dateRangeString}",values:{dateRangeString:t}});default:(0,l.t1)(p)}}),[x,p,g]);return(0,_.jsx)(f.Z,{header:(0,_.jsx)(M,{selectedItem:p,setSelectedItem:function(e){h(e)}}),mode:v.z.Pill,focused:!1,hideTime:!0,pillTitle:b,title:b,icon:r.C,value:x,showButtons:"footer",onChange:e=>{y(e)}})}function M(e){let{selectedItem:t,setSelectedItem:a}=e;window.__c={n:"DateTimeFilterSelector"};const s=(0,o.yK)((e=>({button:{margin:"14px 12px 4px",padding:"2px 8px",width:"fit-content",borderRadius:4},text:{display:"flex",alignItems:"center",color:e.mediumTextColor,fill:e.lightIconColor,fontWeight:500,fontSize:13},icon:{height:10,width:10,marginLeft:4}})),[]),n={width:190,items:["createdTime","lastEditedTime"],selectedItem:t,getKey:e=>e,onSelect:e=>a(e),renderItem:e=>(0,_.jsx)(p.Z,{title:y(e.value),...e}),renderOrigin:e=>(0,_.jsx)(g.Z,{...e,style:s.button,children:(0,_.jsxs)("div",{style:s.text,children:[y(t),(0,d.i)(s.icon)]})})};return(0,_.jsx)(h.Z,{...n,mobileActionSheet:!0})}function y(e){return{lastEditedTime:(0,_.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.lastEditedOn.option",defaultMessage:"Last edited on"}),createdTime:(0,_.jsx)(u.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.createdOn.option",defaultMessage:"Created on"})}[e]}},66994:(e,t,a)=>{a.d(t,{O:()=>p,p:()=>m});var s=a(67294),n=a(24405),o=a(49019),i=a(72126),r=a(9291),d=a(33929),l=a(42922),u=a(74194),c=a(85893);let m=function(e){return e.OnChange="on-change",e.Button="button",e}({});const g=(0,r.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.query.placeholder",defaultMessage:"Search by page ID, title or content"}});function p(e){let{mode:t,query:a,setQueryFilter:p,placeholderText:h,disabled:f}=e;window.__c={n:"QuerySearchInput"};const[v,_]=(0,s.useState)(a??""),x=function(e){return(0,n.yK)((t=>({searchIcon:{color:t.lightIconColor,width:14},input:{padding:"4px 4px 4px 10px",margin:"0 auto 8px",width:"100%",background:t.modalBackground,opacity:e?.5:1},button:{opacity:e?.5:1}})),[e])}(f),M=(0,s.useMemo)((()=>(0,i.Ds)(p,500)),[p]),y=(0,s.useCallback)((e=>{_(e.target.value),t===m.OnChange&&M(e.target.value)}),[M,t]);return(0,c.jsx)(u.Z,{value:v,style:x.input,left:(0,o.e)(x.searchIcon),placeholder:h||d.default.formatMessage(g.placeholder),focus:!f&&void 0,onChange:y,onSubmit:()=>p(v),disabled:f,right:t===m.Button?(0,c.jsx)(l.Z,{onClick:()=>p(v),disabled:f,style:x.button,children:(0,c.jsx)(r.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.query.searchButton",defaultMessage:"Search"})}):null})}},35389:(e,t,a)=>{a.d(t,{p:()=>k});a(57658);var s=a(67294),n=a(86628),o=a(24405),i=a(84619),r=a(26774),d=a(97880),l=a(9291),u=a(33929),c=a(87279),m=a(95697),g=a(29798),p=a(74016),h=a(33338),f=a(42922),v=a(52275),_=a(78140),x=a(32163),M=a(89728),y=a(53437),b=a(72495),w=a(64369),C=a(46978),S=a(91642),j=a(85567),N=a(719),T=a(85893);const F=(0,l.defineMessages)({placeholder:{id:"adminContentSearchTab.pagesTable.filters.teams.placeholder",defaultMessage:"Search for teamspaces..."}});function k(e){let{selectedTeamIds:t,setSelectedTeamIds:a,onMenuClose:k,teamStores:A}=e;window.__c={n:"TeamsFilter"};const R=(0,n.qz)(void 0,g.Z),V=(0,o.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:4},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:4},pillText:{marginLeft:4},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},teamIcon:{marginRight:8},optionTitle:{display:"block"},noResultsMessage:{width:"100%",margin:"8px 12px"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[D,I]=(0,s.useState)(!1),[P,Z]=(0,s.useState)(""),L=(0,n.VK)((()=>[...A].sort(m.KP)),[A]),B=(0,n.VK)((()=>t.map((e=>A.find((t=>t.id===e)))).filter(d.$K)),[A,t]);function O(){I(!1),Z(""),k()}function q(){Z(""),a([])}function U(e){const s=t.includes(e)?[]:[e];a(s),Z("")}const W=(0,s.useCallback)((e=>{Z(e.target.value)}),[]),z=(0,n.VK)((()=>B.map((e=>{const s=e.getName();return(0,T.jsx)(j.Z,{isSingle:!0,format:i.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const s=t.filter((t=>t!==e.id));a(s)},style:V.pillContainer,value:(0,T.jsxs)("div",{style:V.pillContents,children:[(0,T.jsx)(p.p,{disabled:!0,store:e,size:16}),(0,T.jsx)(w.Z,{style:V.pillText,children:s})]})},e.id)}))),[B,t,a,V]);const K=(0,T.jsx)(h.Z,{on:t.length>0,icon:(0,r.O)(V.icon),title:(0,T.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.title",defaultMessage:"Teamspace"}),onClick:()=>I(!0)});return(0,T.jsx)(S.Z,{children:(0,T.jsx)(y.ZP,{popupType:y.ZP.PopupType.Popup,placementToOrigin:y.ZP.Placement.Bottom,alignmentToOrigin:y.ZP.Alignment.Start,open:D,render:function(){const e=[];for(const n of L){const a=n.getName(),s=n.getTeamAccessLevel(),o=n.isDefault();a&&a.toLocaleLowerCase().includes(P)&&e.push({key:n.id,action:()=>U(n.id),render:e=>(0,T.jsx)(v.Z,{...e,icon:(0,T.jsx)(C.Z,{isSelected:t.includes(n.id)}),focused:!1,title:(0,T.jsxs)("div",{style:V.optionContainer,children:[(0,T.jsx)(p.p,{disabled:!0,store:n,size:24,style:V.teamIcon}),(0,T.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,T.jsx)(w.Z,{style:V.optionTitle,children:a}),(0,T.jsx)(w.Z,{style:V.optionCaption,children:E(s,o)})]})]})})})}const a={key:"no-results",action:()=>{},render:e=>(0,T.jsx)(w.Z,{isSecondaryColor:!0,style:V.noResultsMessage,...e,children:(0,T.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.noResultsMessage",defaultMessage:"No results found."})})},s={key:"teamOptions",items:e.length>0?e:[a],render:e=>(0,T.jsx)(b.Z,{...e,title:null,loading:!1})};return(0,T.jsxs)("div",{style:V.container,children:[(0,T.jsx)(N.Z,{focus:!0,value:P,style:V.input,placeholder:u.default.formatMessage(F.placeholder),onChange:W,onRemoveLastToken:q,tokens:z}),(0,T.jsx)(_.Z,{menuType:c.og.Popup,header:null,maxHeight:250,width:300,children:(0,T.jsx)(x.Z,{type:x.i.Vertical,store:R,initialFocus:0,sections:[s]})}),(0,T.jsxs)(b.Z,{topBorder:!0,style:V.footer,children:[(0,T.jsx)(M.Z,{onClick:q,children:(0,T.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.clearButton",defaultMessage:"Clear"})}),(0,T.jsx)(f.Z,{onClick:O,children:(0,T.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:O,keepFocus:!0,origin:K,preventScaleTransition:!0})})}function E(e,t){if(t)return(0,T.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.default",defaultMessage:"Default"});switch(e){case"private":return(0,T.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.private",defaultMessage:"Private"});case"closed":return(0,T.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.closed",defaultMessage:"Closed"});case"open":return(0,T.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.teams.caption.open",defaultMessage:"Open"});default:(0,d.t1)(e)}}},57702:(e,t,a)=>{a.d(t,{B:()=>P});a(57658);var s=a(67294),n=a(86628),o=a(24405),i=a(84619),r=a(40462),d=a(22686),l=a(26774),u=a(97880),c=a(7928),m=a(9291),g=a(33929),p=a(87279),h=a(16639),f=a(80444),v=a(29798),_=a(33338),x=a(42922),M=a(52275),y=a(60458),b=a(78140),w=a(32163),C=a(89728),S=a(53437),j=a(31278),N=a(43145),T=a(72495),F=a(64369),k=a(45653),E=a(46978),A=a(91642),R=a(85567),V=a(719),D=a(85893);const I=(0,m.defineMessages)({usersPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersPlaceholder",defaultMessage:"Search for users..."},usersAndGroupsPlaceholder:{id:"adminContentSearchTab.pagesTable.filters.users.usersAndGroupsPlaceholder",defaultMessage:"Search for users and groups..."}});function P(e){let{userStores:t,title:a,selectedItems:P,setSelectedItems:Z,onMenuClose:L,isMultiSelect:B,includePermissionGroups:O,guestUserIdSet:q}=e;window.__c={n:"UsersFilter"};const U=(0,m.useIntl)(),W=(0,n.qz)(void 0,v.Z),z=(0,o.yK)((e=>({optionContainer:{display:"flex",flexDirection:"row",alignItems:"center"},optionAvatar:{marginRight:8},container:{padding:"6px 0 6px"},input:{margin:"4px auto",width:"95%",maxHeight:200,overflowY:"auto"},footer:{padding:"8px 8px 2px 8px",justifyContent:"space-between",display:"flex"},icon:{width:16,marginRight:4,fill:"currentColor"},defaultGroupIcon:{height:22,width:22,color:e.mediumTextColor,fill:"currentColor"},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},groupIconSpacing:{marginRight:8},pillContainer:{margin:"0px 6px 6px 0px",background:e.legacyDefaultSelectColor,height:20},guestPillContainer:{margin:"0px 6px 6px 0px",background:e.guestTokenBackground,height:20},guestIcon:{height:16,width:16,color:e.guestIconColor},pillContents:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:4},noResultsMessage:{width:"100%",margin:"8px 12px"},optionTitle:{display:"block"},optionCaption:{display:"block",color:e.mediumTextColor,fontSize:12,lineHeight:"15px"}})),[]),[K,H]=(0,s.useState)(10),[G,Q]=(0,s.useState)(!1),[$,J]=(0,s.useState)(""),Y=t.length,X=(0,n.VK)((()=>f.default.state.currentSpaceStore),[]),ee=(0,s.useMemo)((()=>P.map((e=>{let{id:t}=e;return t}))),[P]),te=(0,n.VK)((()=>{const e=f.default.state.currentSpaceStore;return O&&e?e.getPermissionGroups():[]}),[O]),ae=(0,n.VK)((()=>ee.map((e=>t.find((t=>t.id===e)))).filter(u.$K)),[ee,t]),se=(0,n.VK)((()=>ee.map((e=>te.find((t=>t.id===e)))).filter(u.$K)),[ee,te]);function ne(){H(10),Q(!1),J(""),L()}function oe(){J(""),Z([])}function ie(e){e<5&&K<Y&&H(K+10)}function re(e){if(B){return ee.includes(e.id)?[...P.filter((t=>{let{id:a}=t;return a!==e.id}))]:[...P,e]}return ee.includes(e.id)?[]:[e]}function de(e){const t=re({id:e,type:"user"});Z(t),J("")}function le(e){const t=re({id:e,type:"permission_group"});Z(t),J("")}const ue=(0,s.useCallback)((e=>{J(e.target.value)}),[]),ce=(0,n.VK)((()=>ae.map((e=>{const t=(0,c.Nz)(U,e.getModel()),a=!!q&&q.has(e.id);return(0,D.jsx)(R.Z,{isSingle:!0,format:i.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ee.filter((t=>t!==e.id)).map((e=>({id:e,type:"user"})));Z(t)},style:a?z.guestPillContainer:z.pillContainer,value:(0,D.jsxs)("div",{style:z.pillContents,children:[a?(0,r.o)(z.guestIcon):(0,D.jsx)(k.Z,{userStore:e,size:16}),(0,D.jsx)(F.Z,{style:z.pillText,children:t})]})},e.id)}))),[ee,ae,Z,q,z,U]),me=(0,n.VK)((()=>se.map((e=>{const t=h.kF({intl:U,group:e});return(0,D.jsx)(R.Z,{isSingle:!0,format:i.lo.Inline,showRemoveButton:!0,onClickRemove:()=>{const t=ee.filter((t=>t!==e.id)).map((e=>({id:e,type:"permission_group"})));Z(t)},style:z.pillContainer,value:(0,D.jsxs)("div",{style:z.pillContents,children:[(0,D.jsx)(j.Z,{disabled:!0,icon:e.icon&&X?{pointer:X.pointer,icon:e.icon}:void 0,size:14,isEmptyPage:!1,title:t,defaultIcon:(0,l.O)(z.defaultGroupIconPill),style:z.groupIconSpacing}),(0,D.jsx)(F.Z,{style:z.pillText,children:t})]})},e.id)}))),[ee,se,Z,z,X,U]);const ge=(0,D.jsx)(_.Z,{on:ee.length>0,icon:(0,d.f)(z.icon),title:a,onClick:()=>Q(!0)});return(0,D.jsx)(A.Z,{children:(0,D.jsx)(S.ZP,{popupType:S.ZP.PopupType.Popup,placementToOrigin:S.ZP.Placement.Bottom,alignmentToOrigin:S.ZP.Alignment.Start,open:G,render:function(){const e=[];for(const r of t){var a;const t=(0,c.Nz)(U,r.getModel()),s=!!q&&q.has(r.id);(t.toLocaleLowerCase().includes($)||null!==(a=r.getEmail())&&void 0!==a&&a.toLocaleLowerCase().includes($))&&e.push({key:r.id,action:()=>de(r.id),render:e=>(0,D.jsx)(M.Z,{...e,icon:B?(0,D.jsx)(y.Z,{checked:ee.includes(r.id),onClick:()=>de(r.id),size:16}):(0,D.jsx)(E.Z,{isSelected:ee.includes(r.id)}),focused:!1,title:(0,D.jsxs)("div",{style:z.optionContainer,children:[(0,D.jsx)(k.Z,{userStore:r,size:24,style:z.optionAvatar}),(0,D.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,D.jsx)(F.Z,{style:z.optionTitle,children:t}),(0,D.jsx)(F.Z,{style:z.optionCaption,children:s?(0,D.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.guestCaption",defaultMessage:"Guest"}):(0,D.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.memberCaption",defaultMessage:"Member"})})]})]})})})}const s=[];for(const t of te){const e=h.kF({intl:U,group:t});e.toLocaleLowerCase().includes($)&&s.push({key:t.id,action:()=>le(t.id),render:a=>(0,D.jsx)(M.Z,{...a,icon:B?(0,D.jsx)(y.Z,{checked:ee.includes(t.id),onClick:()=>le(t.id),size:16}):(0,D.jsx)(E.Z,{isSelected:ee.includes(t.id)}),focused:!1,title:(0,D.jsxs)("div",{style:z.optionContainer,children:[(0,D.jsx)(j.Z,{disabled:!0,icon:t.icon&&X?{pointer:X.pointer,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:e,defaultIcon:(0,l.O)(z.defaultGroupIcon),style:z.groupIconSpacing}),(0,D.jsxs)("div",{style:{paddingTop:4,paddingBottom:4},children:[(0,D.jsx)(F.Z,{style:z.optionTitle,children:e}),(0,D.jsx)(F.Z,{style:z.optionCaption,children:(0,D.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.groupCaption",defaultMessage:"Group"})})]})]})})})}const n={key:"no-results",action:()=>{},render:e=>(0,D.jsx)(F.Z,{isSecondaryColor:!0,style:z.noResultsMessage,...e,children:(0,D.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.noResultsMessage",defaultMessage:"No results found."})})},o=[...e,...s],i={key:"userOptions",items:o.length>0?o.slice(0,K):[n],render:e=>(0,D.jsx)(T.Z,{...e,title:null,loading:!1})};return(0,D.jsxs)("div",{style:z.container,children:[(0,D.jsx)(V.Z,{focus:!0,value:$,style:z.input,placeholder:g.default.formatMessage(O?I.usersAndGroupsPlaceholder:I.usersPlaceholder),onChange:ue,onRemoveLastToken:()=>{const e=P.slice(0,-1);Z(e)},tokens:[...ce,...me]}),(0,D.jsxs)(b.Z,{menuType:p.og.Popup,header:null,maxHeight:250,width:300,children:[(0,D.jsx)(w.Z,{type:w.i.Vertical,store:W,initialFocus:0,sections:[i]}),(0,D.jsx)(N.Z,{onChange:ie})]}),(0,D.jsxs)(T.Z,{topBorder:!0,style:z.footer,children:[(0,D.jsx)(C.Z,{onClick:oe,children:(0,D.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.clearButton",defaultMessage:"Clear"})}),(0,D.jsx)(x.Z,{onClick:ne,children:(0,D.jsx)(m.FormattedMessage,{id:"adminContentSearchTab.pagesTable.filters.users.doneButton",defaultMessage:"Done"})})]})]})},onDismiss:ne,keepFocus:!0,origin:ge,preventScaleTransition:!0})})}},34690:(e,t,a)=>{a.d(t,{N:()=>h});a(67294);var s=a(86628),n=a(24405),o=a(16184),i=a(26774),r=a(86517),d=a(72141),l=a(9291),u=a(98165),c=a(69219),m=a(36409),g=a(85893),p=function(e){return e.Shared="shared",e.Private="private",e.Hidden="hidden",e}(p||{});function h(e){let{blockStore:t,teamStore:a}=e;window.__c={n:"LocationCell"};const h=(0,n.yK)((e=>({icon:{height:18,width:18,color:e.lightIconColor,fill:"currentColor"}})),[]),f=(0,s.VK)((()=>{const e=(0,u.fJ)(t),a=(0,r.Wo)(e),s=a.filter((e=>!(0,d.Le)(e)));return 1===s.length&&(0,d.jg)(s[0])?p.Private:a.length>0?p.Shared:p.Hidden}),[t]);return a?(0,g.jsx)(m.r,{useThinTitle:!0,teamStore:a}):function(){switch(f){case p.Shared:return(0,g.jsx)(c.i,{useThinTitle:!0,icon:(0,i.O)(h.icon),title:(0,g.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.shared",defaultMessage:"Shared"})});case p.Hidden:case p.Private:return(0,g.jsx)(c.i,{useThinTitle:!0,icon:(0,o.Q)(h.icon),title:(0,g.jsx)(l.FormattedMessage,{id:"adminContentSearchTab.pagesTable.locationCell.private",defaultMessage:"Private"})})}}()}},77883:(e,t,a)=>{a.d(t,{t:()=>d});a(67294);var s=a(86628),n=a(19889),o=a(26136),i=a(17290),r=a(85893);function d(e){let{blockStore:t,userIds:a,isClickable:d}=e;window.__c={n:"UsersFromIdsCell"};const l=(0,s.VK)((()=>a.map((e=>o.U6.createChildStore(t,{table:n.KJ,id:e})))),[t,a]);return(0,r.jsx)(i.G,{userStores:l,isClickable:d})}},21697:(e,t,a)=>{a.d(t,{x:()=>d});var s=a(67294),n=a(480),o=a(86628),i=a(95697),r=a(80444);function d(e){const[t,a]=(0,s.useState)([]),d=(0,n.O7)(),l=(0,o.VK)((()=>(null==e?void 0:e.spaceStore)??r.default.state.currentSpaceStore),[null==e?void 0:e.spaceStore]),u=(0,o.VK)((()=>{var e;return null===(e=r.default.state.currentUserStore)||void 0===e?void 0:e.id}),[]);return(0,s.useEffect)((()=>{!async function(){const e=await(0,i.sj)({spaceStore:l,currentUserId:u,includeArchived:!1,minRoleOnTeamStores:"editor",environment:d});a(e)}()}),[l,u,d]),t}},35238:(e,t,a)=>{a.d(t,{Z:()=>Ae});var s=a(67294),n=a(86628),o=a(24405),i=a(82990),r=a(73123),d=a(9291),l=a(33929),u=a(18514),c=a(24026),m=a(26388),g=a(64369),p=a(74523),h=a(8840),f=a(42485),v=a(480),_=a(55964),x=a(90028),M=a(50906),y=a(35314),b=a(4023),w=a(23124),C=a(66661),S=a(97706),j=a(67579),N=a(85893);const T=640;function F(e){let{data:t,loading:a,error:n,daysFilter:c,setDaysFilter:h}=e;window.__c={n:"ContentAnalyticsSummaries"};const[f,F]=(0,y.e)(),k=(0,o.yK)((e=>({title:{fontWeight:i.Z.fontWeight.medium,fontSize:16,marginBlock:"8px 4px",display:"flex",alignItems:"center",justifyContent:"center"},infoIcon:{marginLeft:4},container:{display:"flex",flexDirection:"column",gap:16},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:16},cardContainer:{justifyContent:"flex-start",gap:18},cardTextContainer:{alignItems:"flex-start"}})),[]),{pageViews:E,uniquePageViews:A,pagesCreated:R,pageEdits:V}=t,D=(0,v.O7)(),I=(0,s.useCallback)((e=>{M.kyK(D,{daysFilter:e}),h(e)}),[D,h]);return(0,N.jsxs)("div",{style:k.container,ref:f,children:[(0,N.jsxs)("div",{style:k.titleContainer,children:[(0,N.jsxs)(g.Z,{style:k.title,children:[(0,N.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.title",defaultMessage:"Content engagement"}),(0,N.jsx)(m.ZP,{placement:b.u.Bottom,render:e=>(0,N.jsx)(p.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:k.infoIcon}),renderTooltip:()=>"all_time"!==c?(0,N.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.lastDays",defaultMessage:"Activity on all workspace pages (includes private and shared) over the {dateRange}",values:{dateRange:l.default.formatMessage(r.xX[c])}}):(0,N.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.contentEngagement.tooltip.allTime",defaultMessage:"All time activity on all pages in the workspace (includes private and shared)"})})]}),(0,N.jsx)(j.f,{currentFilter:c,onChangeFilter:I})]}),(0,N.jsxs)(w.rj,{gap:16,children:[(0,N.jsx)(w.r8,{row:1,col:1,children:(0,N.jsx)(S.q,{style:k.cardContainer,textStyles:k.cardTextContainer,loading:a,error:n,icon:_.N,iconStyles:{height:48,width:48},title:(0,N.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.totalViews",defaultMessage:"{pageViews} total views",values:{pageViews:(0,N.jsx)(C.e,{abbreviateNumber:F<T,num:E})}}),byline:(0,N.jsx)(g.Z,{isSecondaryColor:!0,children:(0,N.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.uniqueViews",defaultMessage:"{uniquePageViews} unique page views",values:{uniquePageViews:(0,N.jsx)(C.e,{abbreviateNumber:F<T,num:A})}})})})}),(0,N.jsx)(w.r8,{row:1,col:2,children:(0,N.jsx)(S.q,{style:k.cardContainer,textStyles:k.cardTextContainer,loading:a,error:n,icon:x.j,iconStyles:{height:36,width:36},title:(0,N.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pagesCreated",defaultMessage:"{pagesCreated} pages created",values:{pagesCreated:(0,N.jsx)(C.e,{abbreviateNumber:F<T,num:R})}}),byline:(0,N.jsx)(g.Z,{isSecondaryColor:!0,children:(0,N.jsx)(d.FormattedMessage,{id:"workspaceAnalytics.content.contentEngagement.pageEdits.byline",defaultMessage:"{pageEdits} edits",values:{pageEdits:(0,N.jsx)(C.e,{abbreviateNumber:F<T,num:V})}})})})})]})]})}var k=a(98165),E=a(73075),A=a(53855),R=a(34690),V=a(77883),D=a(40394),I=a(68785),P=a(71291),Z=a(44678),L=a(98569),B=a(15145),O=a(33907),q=a(56666),U=a(27714),W=a(893),z=a(12714),K=a(84210),H=a(87279),G=a(61766),Q=a(52275),$=a(31945),J=a(73063),Y=a(78140),X=a(32163),ee=a(53437),te=a(72495);function ae(e){let{blockStore:t}=e;window.__c={n:"PageCellActions"};const a=(0,v.O7)(),s=(0,n.qz)(void 0,G.Z),i=(0,o.yK)((e=>({changePermissionsIcon:{height:18,width:18,color:e.regularIconColor,fill:"currentColor"},copyLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor"},openLinkIcon:{height:15,width:15,color:e.regularIconColor,fill:"currentColor",transform:"rotate(-45deg)"}})),[]);const r={key:"actions",render:e=>(0,N.jsx)(te.Z,{...e}),items:[{key:"copy-link",render:e=>(0,N.jsx)(Q.Z,{...e,icon:(0,U.N)(i.copyLinkIcon),title:(0,N.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.copyLink",defaultMessage:"Copy link to page"})}),action:async function(){const e=(0,K.ZP)({store:t,pageVisitSource:B.tY.CopyLink});await W.RD({environment:a,stringValue:e,copiedMessage:W.tq.copiedLinkToClipboard}),s.setState({open:!1})}},{key:"open-page-in-new-tab",render:e=>(0,N.jsx)(Q.Z,{...e,icon:(0,O.n)(i.openLinkIcon),title:(0,N.jsx)(d.FormattedMessage,{id:"adminContentSearchTab.pagesTable.page.actions.openLink",defaultMessage:"Open in new tab"})}),action:function(){const e=(0,K.ZP)({store:t,pageVisitSource:B.tY.LinkInPage});z.D({environment:a,url:e}),s.setState({open:!1})}}]};return(0,N.jsx)($.ZP,{popupType:ee.kQ.Popup,alignmentToOrigin:ee.ZP.Alignment.Center,placementToOrigin:ee.ZP.Placement.Right,style:{width:248},render:()=>(0,N.jsx)(Y.Z,{menuType:H.og.Popup,width:248,children:(0,N.jsx)(X.Z,{type:X.i.Vertical,initialFocus:void 0,sections:[r]})}),buttonPopupStore:s,renderOrigin:e=>(0,N.jsx)(J.Z,{icon:q.o,...e})})}const se=(0,d.defineMessages)({views:{id:"workspaceAnalytics.contentTab.contentTable.viewsColumn.tooltip",defaultMessage:"Number of times users have viewed the page"},uniqueViews:{id:"workspaceAnalytics.contentTab.contentTable.uniqueViewsColumn.tooltip",defaultMessage:"Total number of users that have viewed page in the selected period"}}),ne={id:"page",headerTitle:(0,N.jsx)(ge,{message:r.y3.page}),renderCell:e=>(0,N.jsx)(Z.o,{blockStore:e.navigableBlockStore,rightIcon:(0,N.jsx)(ae,{blockStore:e.navigableBlockStore})}),widthData:{width:320,maxWidth:320},sortable:!1},oe={id:"location",headerTitle:(0,N.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.location.name",defaultMessage:"Location"}),renderCell:e=>(0,N.jsx)(R.N,{blockStore:e.navigableBlockStore,teamStore:e.teamStore}),widthData:{width:140},sortable:!1},ie={id:"audience",headerTitle:(0,N.jsx)(ge,{message:r.y3.audience}),renderCell:e=>(0,N.jsx)(g.Z,{children:(0,A.e)(e.audience)}),widthData:{width:140},sortable:!1},re={id:"views",headerTitle:(0,N.jsx)(L.r,{tooltipMessageDescriptor:se.views,columnHeader:r.y3.allViews}),renderCell:e=>(0,N.jsx)(g.Z,{children:e.views.toLocaleString()}),widthData:{width:100},sortable:!0},de={id:"uniqueViews",headerTitle:(0,N.jsx)(L.r,{tooltipMessageDescriptor:se.uniqueViews,columnHeader:r.y3.uniqueViews}),renderCell:e=>(0,N.jsx)(g.Z,{children:e.uniqueViews.toLocaleString()}),widthData:{width:100},sortable:!0},le={id:"createdBy",headerTitle:(0,N.jsx)(ge,{message:r.y3.createdBy}),renderCell:e=>e.createdById?(0,N.jsx)(V.t,{blockStore:e.navigableBlockStore,userIds:[e.createdById]}):null,widthData:{width:140},sortable:!1},ue={id:"createdTime",headerTitle:(0,N.jsx)(ge,{message:r.y3.createdAt}),renderCell:e=>(0,N.jsx)(P.T,{dateTs:e.createdTime}),widthData:{width:100},sortable:!1},ce=[ne,re,de,oe,ie,{id:"lastEditedBy",headerTitle:(0,N.jsx)(ge,{message:r.y3.lastEditedBy}),renderCell:e=>e.lastEditedById?(0,N.jsx)(V.t,{blockStore:e.navigableBlockStore,userIds:[e.lastEditedById]}):null,widthData:{width:140},sortable:!1},{id:"lastEditedTime",headerTitle:(0,N.jsx)(ge,{message:r.y3.lastEditedAt}),renderCell:e=>(0,N.jsx)(P.T,{dateTs:e.lastEditedTime}),widthData:{width:100},sortable:!1},le,ue];function me(e){let{navigableBlockStores:t,analyticsByPageId:a,runNewSearch:i,sort:r,setSort:l,loadNextPage:u,loading:c,error:m}=e;window.__c={n:"ContentAnalyticsTable"};const p=(0,n.VK)((()=>t.map((e=>{var t,s,n;return{id:e.id,isClickable:!1,navigableBlockStore:e,teamStore:(0,k.VP)(e),views:(null===(t=a.get(e.id))||void 0===t?void 0:t.pageViews)||0,uniqueViews:(null===(s=a.get(e.id))||void 0===s?void 0:s.uniquePageViews)||0,createdTime:e.getCreatedTime(),lastEditedTime:e.getLastEditedTime(),createdById:e.getCreatedById(),lastEditedById:e.getLastEditedById(),audience:(null===(n=a.get(e.id))||void 0===n?void 0:n.audience)||"private"}}))),[t,a]),h=(0,s.useMemo)((()=>function(e){const t=ce.find((t=>"pageViews"===e.field&&"views"===t.id||"uniquePageViews"===e.field&&"uniqueViews"===t.id));return t?{column:t,sortAscending:"asc"===e.direction}:void 0}(r)),[r]),f=(0,o.yK)((e=>(0,D.b)({columnRenderInfo:ce,theme:e,containerMarginTop:0})),[]),v=(0,o.yK)((e=>({emptyQuery:{marginTop:15,marginBottom:40,textAlign:"center"},loadingSpinner:{margin:"24px auto 24px"}})),[]);return m?(0,N.jsx)(E.q,{error:m,runNewSearch:i}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(D.D,{hideHeaderRowPadding:!0,allowHorizontalScroll:!0,setStickyHeaderRow:!0,maxHeight:500,columnRenderInfo:ce,rows:p,sortState:h,onSortStateChanged:e=>{l(function(e){const t="views"===e.column.id?"pageViews":"uniquePageViews",a=e.sortAscending?"asc":"desc";return{field:t,direction:a}}(e))},onLoadMore:u,renderNoRowsComponent:()=>(0,N.jsx)(g.Z,{isSmall:!0,style:v.emptyQuery,children:!c&&0===t.length&&(0,N.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.table.empty",defaultMessage:"No pages found with your query."})}),styles:f}),c?(0,N.jsx)(I.Z,{style:v.loadingSpinner}):null]})}function ge(e){let{message:t}=e;window.__c={n:"FormatDefinedMessage"};const a=(0,d.useIntl)();return(0,N.jsx)(N.Fragment,{children:a.formatMessage(t)})}a(57658);var pe=a(72126),he=a(21202),fe=a(97880),ve=a(54642),_e=a(83726),xe=a(27617),Me=a(26136);const ye={query:"",createdBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},teamIds:[]},be={field:"pageViews",direction:"desc"},we=_e.D2,Ce={filters:ye,sort:be,timeRange:we,navigableBlockStores:[],analyticsByPageId:new Map,numPagesLoaded:0,paginationToken:void 0,hasNextPage:!0,loading:!1,error:void 0,shouldReRunSearch:!1};var Se=a(30397),je=a(36550),Ne=a(79782),Te=a(66994),Fe=a(35389);const ke=(0,d.defineMessages)({placeholder:{id:"settings.workspaceAnalytics.contentTab.placeholder",defaultMessage:"Search by title"}});function Ee(e){let{spaceStore:t,teamStores:a,timeRange:s,filters:i,runNewSearch:r,setFilters:u,setTimeRange:c}=e;window.__c={n:"SearchInputsSection"};const m=(0,n.VK)((()=>a??Se.Z.state.teams),[a]),p=(0,o.yK)((e=>({container:{width:"100%",margin:"0 auto 14px"},filterPillsContainer:{width:"100%",display:"flex",flexWrap:"wrap",rowGap:4,flexDirectionRow:"row",alignItems:"center"},timeRangeContainer:{display:"flex",flexDirectionRow:"row",alignItems:"center",justifyContent:"center",gap:4,borderRight:`1px solid ${e.tableDividerColor}`,marginRight:12,paddingRight:6}})),[]);return(0,N.jsxs)("div",{style:p.container,children:[(0,N.jsx)(Te.O,{mode:Te.p.OnChange,query:i.query,setQueryFilter:function(e){u({query:e},{runSearchAfter:!0})},placeholderText:l.default.formatMessage(ke.placeholder)}),(0,N.jsxs)("div",{style:p.filterPillsContainer,children:[(0,N.jsxs)("div",{style:p.timeRangeContainer,children:[(0,N.jsx)(g.Z,{isSecondaryColor:!0,children:(0,N.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.timeRange",defaultMessage:"Views from"})}),(0,N.jsx)(j.f,{currentFilter:s,onChangeFilter:c})]}),(0,N.jsx)(Fe.p,{selectedTeamIds:i.teamIds,setSelectedTeamIds:function(e){u({teamIds:e})},onMenuClose:r,teamStores:m}),(0,N.jsx)(je.y,{spaceStore:t,createdByFilterIds:i.createdBy,setCreatedByFilter:function(e){u({createdBy:e})},runNewSearch:r,includeGuests:!1}),(0,N.jsx)(Ne.f,{lastEditedTime:i.lastEditedTime,createdTime:i.createdTime,setLastEditedTime:function(e){u({lastEditedTime:e,createdTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})},setCreatedOnTime:function(e){u({createdTime:e,lastEditedTime:{starting:void 0,ending:void 0}},{runSearchAfter:!0})}})]})]})}function Ae(e){var t;let{spaceStore:a,teamStores:i,contentEngagement:r}=e;window.__c={n:"SpaceAnalyticsContentTab"};const d=(0,s.useRef)(!1),{loadNextPage:l,navigableBlockStores:u,analyticsByPageId:c,runNewSearch:m,setFilters:g,setTimeRange:p,timeRange:h,filters:_,sort:x,setSort:y,loading:b,error:w}=function(e){let{spaceStore:t}=e;const a=(0,v.O7)(),[n,o]=(0,s.useState)(Ce),i=(0,s.useRef)(ye),r=(0,s.useRef)(be),d=(0,s.useRef)(we),l=(0,s.useCallback)((async e=>{let{fetchFromFirstPage:s,ignoreSearchInputComparison:l}=e;const u=!pe.Xy(n.filters,i.current)||!pe.Xy(n.sort,r.current)||!pe.Xy(n.timeRange,d.current);if(!l&&!u)return;i.current=n.filters,r.current=n.sort,d.current=n.timeRange;let c=n.loading,m=n.error,g=n.hasNextPage,p=n.paginationToken;if(s&&(o((e=>({...Ce,filters:e.filters,timeRange:e.timeRange,sort:e.sort}))),c=Ce.loading,m=Ce.error,g=Ce.hasNextPage,p=Ce.paginationToken),!g||c)return;if(m)return;o((e=>({...e,loading:!0})));const h=await ve.loadContentAnalytics(a,{spaceId:t.id,sort:n.sort,titleQuery:n.filters.query,filters:{inTeams:n.filters.teamIds,lastEditedTime:(0,xe.Hq)(n.filters.lastEditedTime),createdTime:(0,xe.Hq)(n.filters.createdTime),createdBy:n.filters.createdBy},timeRange:n.timeRange,startCursor:p});if("failed"===h.type)return void o((e=>({...e,loading:!1,error:h.error})));const f=h.data.results;o((e=>{const t=[],s=new Map(e.analyticsByPageId),n=new Set(e.navigableBlockStores.map((e=>e.id)));for(const i of f){const e=i.id,o=i.analytics;if(!n.has(e)){const n=new Me.G(a,{table:he.iU,id:e});t.push(n),s.set(e,o)}}const o=[...e.navigableBlockStores,...t];return{...e,navigableBlockStores:o,analyticsByPageId:s,loading:!1,error:void 0,numPagesLoaded:e.numPagesLoaded+1,paginationToken:h.data.nextCursor,hasNextPage:Boolean(h.data.nextCursor)}}))}),[a,t,n.filters,n.sort,n.timeRange,n.loading,n.error,n.hasNextPage,n.paginationToken]);(0,s.useEffect)((()=>{n.shouldReRunSearch&&(o((e=>({...e,shouldReRunSearch:!1}))),l({fetchFromFirstPage:!0,ignoreSearchInputComparison:!1}))}),[n.shouldReRunSearch,l]);const u=(0,s.useCallback)((async()=>{n.shouldReRunSearch||await l({fetchFromFirstPage:!1,ignoreSearchInputComparison:!0})}),[n.shouldReRunSearch,l]),c=(0,s.useCallback)((async e=>{await l({fetchFromFirstPage:!0,ignoreSearchInputComparison:e||!1})}),[l]),m=(0,s.useCallback)(((e,t)=>{o((a=>({...a,filters:{...a.filters,...e},...null!=t&&t.runSearchAfter?{shouldReRunSearch:null==t?void 0:t.runSearchAfter}:void 0})));for(const s of(0,fe.Yd)(e))pe.Xy(e[s],ye[s])||M.uSc(a,{filter:s,value:"createdBy"===s||"teamIds"===s?e[s]:void 0})}),[a]),g=(0,s.useCallback)((e=>{o((t=>({...t,timeRange:e,shouldReRunSearch:!0}))),M.e2(a,{daysFilter:e})}),[a]),p=(0,s.useCallback)((e=>{o((t=>({...t,sort:e,shouldReRunSearch:!0}))),M.jMN(a,{column:e.field,isAscending:"asc"===e.direction})}),[a]);return{...n,loadNextPage:u,runNewSearch:c,setFilters:m,setTimeRange:g,setSort:p}}({spaceStore:a}),C=(0,o.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16}})),[]),S=(0,n.VK)((()=>Boolean(a.canAdmin())),[a]);(0,s.useEffect)((()=>{d.current||(m(!0),d.current=!0)}),[m]);const j=(0,n.VK)((()=>a.getName()),[a]);return"NotFoundError"===(null==r||null===(t=r.error)||void 0===t?void 0:t.name)?(0,N.jsx)(f.y,{type:"empty",spaceName:j}):(0,N.jsxs)("div",{style:C.container,children:[(0,N.jsx)(F,{data:r.data,loading:r.loading,error:r.error,daysFilter:r.daysFilter,setDaysFilter:r.setDaysFilter}),(0,N.jsx)(Re,{canAdmin:S,daysFilter:h}),(0,N.jsx)(Ee,{spaceStore:a,teamStores:i,runNewSearch:m,setFilters:g,filters:_,timeRange:h,setTimeRange:p}),(0,N.jsx)(me,{navigableBlockStores:u,analyticsByPageId:c,runNewSearch:m,sort:x,setSort:y,loadNextPage:l,loading:b,error:w})]})}function Re(e){window.__c={n:"ContentTableHeader"};const t=(0,o.yK)((()=>({sectionTitle:{fontWeight:i.Z.fontWeight.semibold,fontSize:16},sectionTitleSection:{display:"flex",flexFlow:"row",alignItems:"center"},helpInfo:{marginLeft:4},wrapper:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:12},exportButton:{marginLeft:5}})),[]),{canAdmin:a,daysFilter:s}=e,n=(0,N.jsxs)("div",{style:t.sectionTitleSection,children:[(0,N.jsx)(g.Z,{style:t.sectionTitle,children:(0,N.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.allPages.title",defaultMessage:"Pages"})}),(0,N.jsx)(m.ZP,{placement:m.ug.Bottom,render:e=>(0,N.jsx)(p.Z,{...e,href:(0,u.UY)("guides.workspaceAnalytics"),analyticsFrom:"workspace_analytics_faq",style:t.helpInfo}),renderTooltip:()=>"all_time"!==s?(0,N.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.lastDays",defaultMessage:"Activity from the {dateRange} on pages you have access to",values:{dateRange:l.default.formatMessage(r.xX[s])}}):(0,N.jsx)(d.FormattedMessage,{id:"settings.workspaceAnalytics.contentTab.pages.tooltip.allTime",defaultMessage:"All time activity on pages you have access to in the workspace"})})]});return(0,N.jsxs)("div",{style:t.wrapper,children:[n,a&&(0,N.jsx)(h.f,{style:t.exportButton,analyticsType:c.x.Content})]})}},42485:(e,t,a)=>{a.d(t,{y:()=>h});a(67294);var s=a(480),n=a(24405),o=a(83176),i=a(84169),r=a(9291),d=a(12714),l=a(33929),u=a(18514),c=a(89728),m=a(64369),g=a(85893);const p=(0,r.defineMessages)({emptyAnalyticsHeading:{id:"workspaceAnalyticsTabs.empty.heading",defaultMessage:"No workspace analytics yet"},emptyAnalyticsDescription:{id:"workspaceAnalyticsTabs.empty.description",defaultMessage:"It may take some time for workspace analytics information to appear."},disabledAnalyticsHeading:{id:"workspaceAnalyticsTabs.disabled.heading",defaultMessage:"Analytics are disabled"},disabledAnalyticsDescription:{id:"workspaceAnalyticsTabs.disabled.description",defaultMessage:"A workspace owner has turned off page view recording for {name}.{br}This information will not be available in your workspace settings or on individual pages."},disabledAnalyticsDescriptionNoSpaceName:{id:"workspaceAnalyticsTabs.disabled.description.unnamed",defaultMessage:"A workspace owner has turned off page view recording for this space.{br}This information will not be available in your workspace settings or on individual pages."}});function h(e){window.__c={n:"SpaceAnalyticsEmptyState"};const t=(0,n.yK)((e=>({outerDiv:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80%",gap:24},innerDiv:{display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",gap:4},header:{fontSize:16,fontWeight:500},analyticsIcon:{fill:e.mediumTextColor,padding:20,height:150,width:150},learnMoreIcon:{width:14,height:14},learnMore:{gap:4}})),[]),a=(0,s.O7)(),{type:h,spaceName:f}=e,v=function(e,t){switch(e){case"empty":return{heading:l.default.formatMessage(p.emptyAnalyticsHeading),description:l.default.formatMessage(p.emptyAnalyticsDescription)};case"disabled":const e=t?(0,g.jsx)(r.FormattedMessage,{...p.disabledAnalyticsDescription,values:{name:t,br:(0,g.jsx)("br",{})}}):(0,g.jsx)(r.FormattedMessage,{...p.disabledAnalyticsDescriptionNoSpaceName,values:{br:(0,g.jsx)("br",{})}});return{heading:l.default.formatMessage(p.disabledAnalyticsHeading),description:e}}}(h,f);return(0,g.jsx)("div",{style:t.outerDiv,children:(0,g.jsxs)("div",{style:t.innerDiv,children:[(0,o.z)(t.analyticsIcon),(0,g.jsx)(m.Z,{isSecondaryColor:!0,style:t.header,children:v.heading}),(0,g.jsx)(m.Z,{isSecondaryColor:!0,children:v.description}),(0,g.jsxs)(c.Z,{onClick:()=>d.D({environment:a,url:(0,u.UY)("guides.workspaceAnalytics")}),style:t.learnMore,children:[(0,i.m)(t.learnMoreIcon),(0,g.jsx)(m.Z,{isSmall:!0,children:(0,g.jsx)(r.FormattedMessage,{id:"workspaceAnalyticsTabs.disabled.learnMore",defaultMessage:"Learn more"})})]})]})})}},98569:(e,t,a)=>{a.d(t,{r:()=>r});a(67294);var s=a(9291),n=a(33929),o=a(26388),i=a(85893);function r(e){const{tooltipMessageDescriptor:t,columnHeader:a}=e;return(0,i.jsx)(o.ZP,{placement:o.ug.Top,renderTooltip:e=>(0,i.jsx)("div",{...e,children:(0,i.jsx)(s.FormattedMessage,{...t})}),render:e=>(0,i.jsx)("div",{...e,children:n.default.formatMessage(a)})})}},97706:(e,t,a)=>{a.d(t,{q:()=>c});a(67294);var s=a(24405),n=a(8848),o=a(59730),i=a(82990),r=a(9291),d=a(43568),l=a(64369),u=a(85893);function c(e){let{icon:t,iconStyles:a,textStyles:c,style:m,title:g,byline:p,loading:h,error:f}=e;window.__c={n:"AnalyticsCardOverview"};const v=function(e,t,a){return(0,s.yK)((s=>({title:{fontWeight:i.Z.fontWeight.medium,fontSize:16},byline:{fontSize:i.Z.fontSize.UISmall.desktop,marginTop:4},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",...t},titleContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},icon:{height:28,width:28,color:s.lightTextColor,fill:"currentcolor",...e},container:{height:"100%",flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",border:`1px solid ${s.outlineButtonBorder}`,borderRadius:4,padding:12,gap:8,...a},loadingTitle:{display:"block",width:"40%"},loadingByline:{display:"block",width:"60%",marginTop:8,marginBottom:8},errorTitle:{textAlign:"center",color:n.ZP.red}})),[e,t,a])}(a,c,m);return h?(0,u.jsx)("div",{style:v.container,children:(0,u.jsxs)("div",{style:v.textContainer,children:[(0,u.jsx)("div",{style:v.loadingTitle,children:(0,u.jsx)(d.Z,{paragraphs:[{lineHeight:18,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}),p?(0,u.jsx)("div",{style:v.loadingByline,children:(0,u.jsx)(d.Z,{paragraphs:[{lineHeight:14,lineMargin:0,sectionWidths:[100],repeat:0,sectionMargin:0}]})}):null]})}):f?(0,u.jsx)("div",{style:v.container,children:(0,u.jsx)("div",{style:v.titleContainer,children:(0,u.jsx)(l.Z,{style:v.errorTitle,children:(0,o.Jx)(f)?f.message:(0,u.jsx)(r.FormattedMessage,{id:"spaceAnalytics.basicErrorMessage",defaultMessage:"Something went wrong.{br}Try refreshing the page.",values:{br:(0,u.jsx)("br",{})}})})})}):(0,u.jsxs)("div",{style:v.container,children:[t?t(v.icon):null,(0,u.jsxs)("div",{style:v.textContainer,children:[(0,u.jsx)(l.Z,{style:v.title,children:g}),p?(0,u.jsx)(l.Z,{style:v.byline,children:p}):null]})]})}},67579:(e,t,a)=>{a.d(t,{f:()=>v});var s=a(67294),n=a(24405),o=a(69651),i=a(73123),r=a(33929),d=a(87279),l=a(33338),u=a(52275),c=a(78140),m=a(32163),g=a(53437),p=a(72495),h=a(91642),f=a(85893);function v(e){window.__c={n:"DateFilter"};const t=(0,n.yK)((e=>({popup:{width:125,marginLeft:5},pillStyle:{display:"flex",alignItems:"center"}})),[]),{currentFilter:a,hideAllTime:v}=e,[_,x]=(0,s.useState)(!1),M=i.Hz.filter((e=>!v||"all_time"!==e)).map((t=>{const a=()=>{e.onChangeFilter(t),x(!1)};return{key:t,action:()=>{},render:()=>(0,f.jsx)(u.Z,{focused:!1,onClick:a,title:r.default.formatMessage(i.Rh[t])})}})),y=(0,f.jsx)(l.Z,{on:Boolean(a),wrapStyle:t.pillStyle,icon:(0,o.C)({width:16,marginRight:6,fill:"currentColor"}),title:r.default.formatMessage(i.Rh[a]),onClick:()=>{x(!0)}}),b=[{key:"filters",items:M,render:e=>(0,f.jsx)(p.Z,{...e,title:null,loading:!1})}],w=(0,f.jsx)(c.Z,{menuType:d.og.Popup,header:null,children:(0,f.jsx)(m.Z,{type:m.i.Vertical,initialFocus:0,sections:b})});return(0,f.jsx)(h.Z,{marginAfter:!1,children:(0,f.jsx)(g.ZP,{popupType:g.ZP.PopupType.Popup,placementToOrigin:g.ZP.Placement.Bottom,alignmentToOrigin:g.ZP.Alignment.Start,open:_,render:()=>w,onDismiss:()=>x(!1),keepFocus:!0,origin:y,preventScaleTransition:!0,style:t.popup})})}},8840:(e,t,a)=>{a.d(t,{f:()=>w});var s=a(67294),n=a(480),o=a(86628),i=a(97880),r=a(73123),d=a(9291),l=a(50906),u=a(61652),c=a(33929),m=a(87279),g=a(4023),p=a(80444),h=a(24026),f=a(52275),v=a(31945),_=a(78140),x=a(63296),M=a(53437),y=a(72495),b=a(85893);function w(e){return(0,b.jsx)(v.ZP,{popupType:M.kQ.Popup,alignmentToOrigin:g.v.End,render:t=>{let{close:a}=t;return(0,b.jsx)(C,{closePopup:a,analyticsType:e.analyticsType})},renderOrigin:t=>{let{onClick:a}=t;return(0,b.jsx)(x.Z,{style:e.style,onClick:a,children:(0,b.jsx)(d.FormattedMessage,{id:"spaceAnalytics.usersTab.export",defaultMessage:"Export as CSV"})})}})}function C(e){window.__c={n:"ExportAnalyticsMenu"};const{analyticsType:t,closePopup:a}=e,d=(0,n.O7)(),g=(0,o.VK)((()=>{var e;return null===(e=p.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),v=(0,s.useCallback)((async e=>{if(g){switch(t){case h.x.Users:l.LbR(d,{daysFilter:e}),await u.Tp(d,{spaceId:g,daysFilter:e});break;case h.x.Content:l.ZaS(d,{daysFilter:e}),await u.hN(d,{spaceId:g,daysFilter:e});break;default:(0,i.t1)(t)}a()}}),[d,g,t,a]),x=r.Hz.map((e=>(0,b.jsx)(f.Z,{focused:!1,onClick:()=>v(e),title:c.default.formatMessage(r.Rh[e])},e)));return(0,b.jsx)(_.Z,{menuType:m.og.Popup,children:(0,b.jsx)(y.Z,{children:x})})}},35314:(e,t,a)=>{a.d(t,{e:()=>i});var s=a(67294),n=a(86628),o=a(77794);function i(){const[e,t]=(0,s.useState)(0),[a]=(0,s.useState)((()=>new o.E)),i=(0,s.createRef)();return(0,s.useEffect)((()=>{i.current&&a.observe(i.current)}),[i,a]),(0,n.VK)((()=>{e!==a.rect.state.width&&t(a.rect.state.width)}),[e,a.rect]),[i,e]}},89665:(e,t,a)=>{a.d(t,{R:()=>l});var s=a(86628),n=a(19889),o=a(2438),i=a(26136),r=a(88893),d=a(88280);function l(e){let{spaceStore:t}=e;return(0,s.VK)((()=>{const e=d.subscriptionDataStoreInstance.state;if(!e)return{loading:!0};const a=r.CM(e);if(!a.every((e=>i.U6.createChildStore(t,{table:n.KJ,id:e.userId}).isReady())))return{loading:!0};const s=a.filter(o.CF),l=a.filter(o.du);return{loading:!1,members:s.map((e=>{let{userId:a}=e;return i.U6.createChildStore(t,{table:n.KJ,id:a})})),guests:l.map((e=>{let{userId:a}=e;return i.U6.createChildStore(t,{table:n.KJ,id:a})}))}}),[t])}},24026:(e,t,a)=>{a.d(t,{Z:()=>i,x:()=>n});var s=a(49085);let n=function(e){return e.Overview="overview",e.Users="users",e.Content="content",e.Search="search",e}({});class o extends s.default{getInitialState(){return{}}shouldRefreshState(e){const t=this.getState();return e!==t.currentSpaceId||!(t.currentTab!==n.Users||t.usersTabData&&t.usersTabData.usersAndStats)}}const i=new o}}]);