"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3207],{45951:(e,n,t)=>{t.r(n),t.d(n,{OrganizationSettingsConsole:()=>x,OrganizationSettingsConsoleImpl:()=>b});var a=t(67294),o=t(480),r=t(86628),i=t(80444),c=t(79921),s=t(26263),d=t(45953),u=t(85893);const l=(0,a.createContext)({organizationOwnerRecordCache:void 0,updateCacheWithRecordMap:e=>{}});function g(e){let{children:n}=e;window.__c={n:"OrganizationCacheProvider"};const t=(0,o.O7)(),[r,c]=(0,a.useState)(void 0);(0,a.useEffect)((()=>{const e=p(t);c(e)}),[t]);const s=(0,a.useCallback)((e=>{var n;const a=null===(n=i.default.state.currentUserStore)||void 0===n?void 0:n.id;if(!a||!r)return;const o=d.Ak.create(e.data.organizationOwnerRecordMap);for(const{pointer:t,model:i}of o)r.setModelAndRole({pointer:t,userId:a},i,"editor");const s=p(t,r.data);c(s)}),[r,t]);return r?(0,u.jsx)(l.Provider,{value:{organizationOwnerRecordCache:r,updateCacheWithRecordMap:s},children:n}):null}function p(e,n){const t=new s.Z({name:"organizationSettingsConsoleCache",data:n});return t.addCacheFallback(e.defaultRecordCache.inMemoryRecordCache),t}var m=t(84747),h=t(54642);const z=(0,a.createContext)({spaceIds:[]});function C(e){let{children:n,organizationId:t}=e;window.__c={n:"OrganizationDataProvider"};const r=(0,o.O7)(),[i,c]=(0,a.useState)([]),{updateCacheWithRecordMap:s}=(0,a.useContext)(l);return(0,m.Z)((async()=>{const e=await h.getSpacesInOrganization(r,{organizationId:t});"success"===e.type&&(c(e.data.spaceIds),s({data:e.data}))})),(0,u.jsx)(z.Provider,{value:{spaceIds:i},children:n})}var f=t(61149),v=t(12066),w=t(8055),I=t(55175),S=t(86631);function O(e){let{organizationId:n,currentUserStore:t,selectedTabName:r}=e;window.__c={n:"OrganizationSidebar"};const i=(0,o.O7)(),c=(0,a.useMemo)((()=>v.cZ.filter((e=>(0,I.eT[e.name])({environment:i,currentUserStore:t,organizationId:n})))),[t,i,n]),s=(0,a.useMemo)((()=>c.map((e=>({id:e.name,name:I.ow[e.name].tab.name,icon:I.ow[e.name].tab.icon,isSelected:r===e.name,onClick:()=>{w.c4({environment:i,url:(0,f.a5)({organizationId:n,tabRoute:e})})}})))),[i,c,r,n]);return(0,u.jsx)(S.Z,{items:s})}function b(e){let{organizationId:n,tabName:t,properties:a,params:s}=e;window.__c={n:"OrganizationSettingsConsoleImpl"};const d=(0,o.O7)(),l=(0,r.VK)((()=>i.default.state.currentUserStore),[]);if(!n)return null;if(!t)return null;const p=I.ow[t];return(0,I.eT[t])({environment:d,currentUserStore:l,organizationId:n})?(0,u.jsx)(g,{children:(0,u.jsx)(C,{organizationId:n,children:(0,u.jsx)(c.v,{left:(0,u.jsx)(O,{organizationId:n,currentUserStore:l,selectedTabName:t}),right:p.scene({properties:a,queryParams:s,organizationId:n})})})}):null}const x=(0,t(73150).b)(b)}}]);