"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[1932],{45669:(e,t,o)=>{o.d(t,{Z:()=>a});o(67294);var i=o(9291),r=o(78316),n=o(62896),s=o(85893);const a=function(e){let{collectionViewName:t,collectionViewType:o}=e;return t?(0,s.jsx)(n.Z,{children:t}):"page"===o?(0,s.jsx)(i.FormattedMessage,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,s.jsx)(i.FormattedMessage,{...r.b1[o]})}},29921:(e,t,o)=>{o.d(t,{N:()=>he,Z:()=>ve});var i=o(67294),r=o(83355),n=o(480),s=o(53150),a=o(6740),l=o(86628),d=o(24405),c=o(49085),u=o(75071),p=o(15157),g=o(69246),m=o(97880),h=o(82990),S=o(9291),y=o(89858),b=o(65273),v=o(28651),f=o(43250),x=o(98742),T=o(50659);var I=o(8848),w=o(3338),C=o(50906),j=o(23063),M=o(31945),B=o(55118),k=o(26388),L=o(12534),P=o(35026),Z=o(75024),V=o(77907),_=o(80444),O=o(3418),A=o(42185),K=o(33052),F=o(9867),D=o(5210),R=o(85893);const H=function(e){window.__c={n:"TeamCaratSwitcher"};const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:o,style:i}=e,r=(0,d.Fg)(),n=(0,d.yK)((()=>({caratContainer:{minHeight:20,minWidth:20,...i||{}}})),[i]),s=(0,l.VK)((()=>t.state.isHidden),[t]);return(0,R.jsx)("div",{style:n.caratContainer,children:(0,R.jsx)(D.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:!s,color:r.lightIconColor,onClick:o,disabled:!0})})};var N=o(86232),E=(o(57658),o(19889)),z=o(64684),W=o(29302),U=o(95697),$=o(26136);function G(e){window.__c={n:"TeamMembersList"};const t=(0,n.O7)(),[o,r]=(0,i.useState)(!1),{teamStore:s,spaceStore:a,teamOutlinerType:c}=e,{isReady:u,allMembersUserIds:p,userStores:g}=(0,l.VK)((()=>{const e=(0,U.tO)({teamStore:s,spaceStore:a}),t=e.map((e=>$.U6.createChildStore(s,{table:E.KJ,id:e}))),o=t&&t.every((e=>e.isReady()));return{allMembersUserIds:e,userStores:t,isReady:o}}),[s,a]),{ownerStores:m,memberStores:h}=(0,l.VK)((()=>{const e=[],t=[];if(!s.isReady())return{ownerStores:e,memberStores:t};for(const o of g){(null==o?void 0:o.id)&&((0,z.pd)({membership:s.getMembers()},null==o?void 0:o.id)?e.push(o):t.push(o))}return{ownerStores:e,memberStores:t}}),[s,g]),y=(0,d.yK)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},members:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginRight:10,marginLeft:5},avatar:{width:23,height:23,borderRadius:23,marginRight:-5,position:"relative"},teamMemberTooltipSectionLabel:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.mediumInvertedTextColor}})),[]);let b=0,v=g;return v=[...m,...h],g.length>5&&(b=g.length-5,v=v.slice(0,5)),u?(0,R.jsx)("div",{style:y.membershipSection,children:(0,R.jsx)(k.ZP,{placement:k.ug.Bottom,disableTooltip:p.length<=0,render:t=>{return(0,R.jsxs)("span",{...t,style:e.renderStyle,children:[p.length," ",(o=p.length,o>1?(0,R.jsx)(S.FormattedMessage,{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}):(0,R.jsx)(S.FormattedMessage,{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"}))]});var o},renderTooltip:e=>(o||(r(!0),C.v2V(t,{teamStore:s,outliner_type:c})),(0,R.jsx)("div",{...e,children:(0,R.jsxs)("div",{style:{marginBottom:4},children:[v.map((e=>(0,R.jsx)(W.Z,{style:y.teamMemberList,userStore:e,avatarSize:18},e.id))),b>0&&(0,R.jsx)("div",{style:y.moreMessage,children:(0,R.jsx)(S.FormattedMessage,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:b}})})]})}))})}):null}var J=o(74016),Q=o(64552);var Y=o(22487),q=o(14720),X=o(64921),ee=o(68785),te=o(61766),oe=o(37181),ie=o(28451),re=o(81415),ne=o(75769);function se(e){let{teamId:t,origin:o}=e;window.__c={n:"TeamAddAppTemplateTooltip"};const r=(0,n.O7)(),[s,a]=(0,i.useState)(!1),l=(0,d.yK)((()=>({tooltip:{width:240}})),[]);(0,i.useEffect)((()=>{if(!o)return;const{current:e}=o;if(!e)return;const t="IntersectionObserver"in window?new IntersectionObserver((e=>{let[t]=e;return a(t.isIntersecting)}),{threshold:1}):void 0;return null==t||t.observe(e),()=>null==t?void 0:t.unobserve(e)}),[o]);const c=(0,i.useCallback)((()=>{ne.Z.setState({hasShownTooltip:!0,teamId:t}),C.Khd(r,{from:"team_add_app_template"})}),[r,t]),u=(0,i.useCallback)((()=>oe.$n({environment:r,teamId:t})),[r,t]);return s?(0,R.jsx)(ie.P,{calloutId:"team_add_app_template_tooltip",onShow:c,children:(0,R.jsx)(re.U,{origin:o,placementToOrigin:"right",header:(0,R.jsx)(S.FormattedMessage,{id:"teamAddAppTemplateTooltip.header",defaultMessage:"Add templates to your teamspace"}),content:(0,R.jsx)(S.FormattedMessage,{id:"teamAddAppTemplateTooltip.content",defaultMessage:"Get started with projects, docs, wiki, and more"}),onCloseClick:()=>u(),shouldDismissUponOutsideClick:!1,pointerPosition:"0%",pointerLength:24,style:l.tooltip})}):null}function ae(e){const t=(0,n.O7)();return(0,l.VK)((()=>(0,U.dY)({environment:t,teamId:e})),[t,e])}function le(e){window.__c={n:"OutlinerTeamToggleAddPageButton"};const{teamStore:t}=e,o=(0,S.useIntl)(),r=(0,l.qz)(void 0,te.Z),s=(0,i.useRef)(null),a=ae(t.id),c=o.formatMessage({id:"sidebar.addAPageOrTemplateButtonTeamToggle.tooltip",defaultMessage:"Add a page or template"}),p=function(){const e=(0,n.Fy)(),t=e.isMobile?32:20;return(0,d.yK)((o=>({button:{height:t,width:t,border:"none",borderRadius:4,marginLeft:e.isMobile?0:4},mediumText:{color:o.mediumInvertedTextColor},plusIcon:{fill:e.isMobile?o.lightIconColor:o.sidebarTextColor,...e.isMobile?{width:18,height:18}:{width:14,height:14}},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:o.legacyRedSelectColor,height:t,width:t},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20},menuItemButton:{minWidth:200},caption:{minWidth:230}})),[e.isMobile,t])}();return(0,R.jsxs)(R.Fragment,{children:[a&&(0,R.jsx)(se,{teamId:t.id,origin:s}),(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,buttonPopupStore:r,alignmentToOrigin:M.vR.Start,originGap:2,renderOrigin:e=>(0,R.jsx)(k.ZP,{textWrap:!1,renderTooltip:()=>c,placement:k.ug.Bottom,render:t=>(0,R.jsx)(X.Z,{ariaLabel:c,ref:s,style:p.button,...(0,x.Z)(t,e),children:(0,R.jsx)("div",{style:p.plusIconContainer,children:(0,u.f)(p.plusIcon)})})}),render:e=>(0,R.jsx)(q.p7,{renderLoading:e=>(0,R.jsx)("div",{style:q.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,R.jsx)(ee.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_new_page"})})]})}function de(e){window.__c={n:"OutlinerTeamToggleButton"};const{teamStore:t,label:o,isHovered:r,outlinerToggleButtonStore:s,teamOutlinerType:a,outlinerTeamOnToggle:c,onTeamJoinComplete:u,labelAriaId:p}=e,b=(0,n.Fy)().isMobile,v=function(e){switch(e){case g.cz:case g.mu:return!0;case g.PT:case g.kg:return!1;default:(0,m.t1)(e)}}(a),f=(0,n.O7)(),{name:x,showAddPageButton:T}=(0,l.VK)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),D=(0,Q.e)(t),E=function(e){const t=(0,n.O7)(),o=(0,l.VK)((()=>_.default.state.currentSpaceStore),[]);return(0,l.VK)((()=>(0,U.zz)({teamStore:e,spaceStore:o,userId:t.currentUser.id})),[o,t.currentUser.id,e])}(t),z=(0,Y.K)(t),W=(0,l.VK)((()=>_.default.state.currentSpaceStore),[]),[,,$]=(0,l.AF)(void 0,K.Z),q=(0,n.Fy)(),X=b||r,ee=(0,d.yK)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:I.ZP.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:4},container:{position:"relative",display:"flex",alignItems:"center",minHeight:b?48:v?30:28,padding:v?"6px 12px":"0px 10px 0px 11px"},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center"},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...h.Z.textOverflowStyle},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:h.Z.lineHeight.UISmall.desktop,marginBottom:1,...h.Z.textOverflowStyle},membersCountText:{display:"flex",fontSize:12,fontWeight:h.Z.fontWeight.regular,lineHeight:1.3,color:e.lightTextColor,width:"100%",...h.Z.textOverflowStyle},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...h.Z.textOverflowStyle},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.mediumTextColor,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...X?{}:Z.jy},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,...X?{}:Z.jy},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabelContainer:{display:"flex"},closedTeamLabel:{display:"flex",alignItems:"center"},closedTeamTooltip:{whiteSpace:"normal",width:220},carat:{minHeight:v?15:20,height:v?15:20}})),[b,v,X]),te=(0,l.VK)((()=>t.getTeamPagesStore()),[t]),oe=(0,l.VK)((()=>A.Z.state===t.id),[t.id]),ie=(0,l.VK)((()=>t.getTeamAccessLevel()),[t]),[re,ne]=(0,i.useState)(void 0),se=ae(t.id),de=(0,i.useCallback)((e=>{let{draggingStores:t}=e;return!!W&&(0,P.Pl)({environment:f,draggingStores:t,parentStore:te,currentSpaceStore:W})}),[W,f,te]),ue=(0,i.useCallback)((async e=>{await y.NP({dropArgs:e,environment:f,type:"team",isTopLevel:!0,parentStore:te})}),[f,te]);if(!x)return null;const pe=!E,ge=function(e,t){if(!t)return!1;switch(e){case g.mu:return!0;case g.PT:case g.kg:case g.cz:return!1;default:(0,m.t1)(e)}}(a,D),me=!q.isMobile&&!D&&"closed"===ie,he=e=>{O.Z.addNamedPopup("team_more_actions"),C.QkQ(f,{store:t,from:e})},Se=()=>{O.Z.removeNamedPopup("team_more_actions")};return(0,R.jsxs)(B.G,{dropTargetKey:F.Ui(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:de,onSelectableDrop:ue,children:[(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,alignmentToOrigin:M.vR.Start,placementToOrigin:M.pO.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:re,render:e=>(0,R.jsx)(V.LazyTeamOverflowMenu,{teamStore:t,permissionsInviteStore:$,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:i}=e;return(0,R.jsxs)("div",{style:ee.container,onContextMenu:e=>{!q.isMobile&&(0,L.ZP)({event:e,context:L.Af.EditorContextMenu,callback:()=>{e.preventDefault(),ne(new DOMRect(e.clientX,e.clientY)),i()}})},children:[q.isMobile&&(0,R.jsx)(H,{store:t,outlinerToggleButtonStore:s,outlinerTeamOnToggle:c}),(0,R.jsx)("div",{style:ee.teamIconContainer,children:(0,R.jsx)(J.p,{size:20,store:t,disabled:!0,style:{fontWeight:h.Z.fontWeight.medium}})}),(0,R.jsxs)("div",{style:ee.labelContainer,children:[(0,R.jsxs)("div",{style:ee.labelText,id:p,children:[o,!q.isMobile&&(0,R.jsx)(H,{store:t,outlinerToggleButtonStore:s,outlinerTeamOnToggle:c,style:X?ee.carat:Z.jy})]}),v&&void 0!==z&&(0,R.jsxs)("div",{style:ee.membersCountText,children:[W&&(0,R.jsx)(G,{teamStore:t,spaceStore:W,renderStyle:ee.membersCountText,teamOutlinerType:a}),me&&(0,R.jsx)(k.ZP,{placement:k.ug.Bottom,renderTooltip:e=>(0,R.jsx)("div",{style:ee.closedTeamTooltip,...e,children:ce({accessLevel:ie})}),render:e=>(0,R.jsxs)("div",{style:ee.closedTeamLabel,...e,children:[" ","·"," ",(0,R.jsx)(S.FormattedMessage,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"})]})}),ge&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{children:" "})," ·",(0,R.jsx)("span",{children:(0,w.p)(ee.joinedBadgeIcon)}),(0,R.jsx)("span",{style:ee.joinedBadge,children:(0,R.jsx)(S.FormattedMessage,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"})})]})]})]}),D&&(0,R.jsxs)("div",{style:{...ee.overflow,...X||se?{}:Z.jy},children:[(0,R.jsx)(V.LazyOutlinerTeamOverflow,{teamStore:t,from:a,onPopupClick:()=>he(a),onPopupClose:Se}),T&&!q.isMobile&&(0,R.jsx)(le,{teamStore:t})]}),!D&&(0,R.jsx)("div",{style:ee.unjoinedOverflowMenu,children:(0,R.jsx)(V.LazyOutlinerTeamOverflow,{teamStore:t,from:a,hideJoin:!0,onPopupClick:()=>he(a),onPopupClose:Se})}),!q.isMobile&&pe&&(0,R.jsx)(N.M,{style:ee.joinLeaveButton,hoveredStyle:ee.joinLeaveButtonHovered,teamStore:t,placement:k.ug.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0,onJoinedTeam:u}),T&&q.isMobile&&(0,R.jsx)("div",{style:{...ee.overflow,...X?{}:Z.jy},children:(0,R.jsx)(le,{teamStore:t})}),(0,R.jsx)(j.Z,{isVisible:oe,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},exitAnimationStyle:{opacity:0},springConfig:{stiffness:30,damping:10,precision:.001},render:()=>(0,R.jsx)("div",{style:ee.teamHighlightAnimationBackgroundContainer})})]})},onClick:()=>he("teamSidebar"),onClose:Se}),(0,R.jsx)(V.LazyTeamPermissionsInviteWithModal,{permissionsInviteStore:$,store:t})]})}function ce(e){let{accessLevel:t}=e;if("private"===t)return(0,R.jsx)(S.FormattedMessage,{id:"teamJoinLeaveButton.joinTeam.privateTeamTooltip",defaultMessage:"You can only join a private teamspace with an invite from a member"})}var ue=o(38676),pe=o(70704),ge=o(73292),me=o(14694);const he=18;class Se extends r.Z{constructor(){super(...arguments),this.storeTypes={mouseStore:v.Z,focusStore:c.default.createClass(!1),labelMouseStore:v.Z,labelFocusStore:c.default.createClass(!1),outlinerToggleButtonStore:pe.Z},this.headerRef=i.createRef(),this.contentsAriaId=(0,s.Z)(),this.labelAriaId=(0,s.Z)(),this.handleHideClick=()=>{const{isHidden:e}=this.getToggleButtonStore().state,t=!e;"team"===this.props.type?ge.k7({environment:this.environment,spaceViewStore:this.props.spaceViewStore,teamStore:this.props.teamStore,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState,teamOutlinerType:this.props.teamOutlinerType,isExplicitUserAction:!0}):this.props.type===g.g$?y.Eo({environment:this.environment,type:this.props.type,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:!1}):y.Eo({environment:this.environment,spaceViewStore:this.props.spaceViewStore,type:this.props.type,outlinerToggleButtonStore:this.getToggleButtonStore(),newIsHidden:t,shouldPersistToggleState:this.props.shouldPersistToggleState})}}UNSAFE_willMount(e){if(super.UNSAFE_willMount(e),e.initialToggleState&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:"hidden"===e.initialToggleState}),!e.shouldPersistToggleState)return;const t=function(e){const{type:t,spaceViewStore:o}=e;if(t===g.g$)return;if("team"===t)return ge.RW(o,e.teamStore.id);return y.B8(o,t)}(this.props);if(!t)return;const o=p.Z.get({userId:this.environment.currentUser.id,key:t});o&&this.getToggleButtonStore().setState({...this.getToggleButtonStore().state,isHidden:o})}renderComponent(){const{renderSidebar:e,isLastTeam:t,marginBottomOverrideWhenExpanded:o,marginBottomOverrideWhenCollapsed:i}=this.props,{isHidden:r}=this.getToggleButtonStore().state,n={bookmarks:f.F4o,workspace:f.j35,shared:f.MU2,private:f.aL4,offline:f.yNE,team:f.l24,[g.PT]:f.RG3,[g.cz]:f.Uwd,[g.mu]:f.jWx,[g.kg]:f.rIE,[g.g$]:f.Y6l}[this.props.type];return(0,R.jsxs)("div",{ref:this.headerRef,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,a.E)(t)&&this.stores.focusStore.setState(!0)},onBlur:()=>this.stores.focusStore.setState(!1),onMouseMove:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0}),onMouseLeave:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1}),style:{marginBottom:r||t&&!this.environment.device.isMobile?i:o??he,width:"100%"},className:`${n}-container`,children:[this.renderLabel(n),!r&&e({headerRef:this.headerRef,labelAriaId:this.labelAriaId,contentsAriaId:this.contentsAriaId})]})}renderLabel(e){const{isMobile:t}=this.environment.device,{isHidden:o}=this.getToggleButtonStore().state,{labelMouseStore:i,labelFocusStore:r}=this.stores,n=o?(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Click to show section",id:"sidebar.sectionHeaderShow.tooltip"}):(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Click to hide section",id:"sidebar.sectionHeaderHide.tooltip"}),s={...t?(l=this.theme,{textTransform:"initial",fontSize:13,lineHeight:1,color:l.lightTextColor,fontWeight:h.Z.fontWeight.semibold}):xe(this.theme),transition:"color 100ms ease-out",..."team"===this.props.type?{width:"100%"}:{}};var l;(i.state.mouseEntered||r.state)&&Object.assign(s,function(e){return{color:e.darkTextColor}}(this.theme));const d="team"===this.props.type?{width:"100%",display:"flex",alignItems:"center",...(0,T.G$)({isMobile:t})}:function(e){const{isMobile:t}=e.device;return{display:"flex",alignItems:"center",borderRadius:4,padding:"2px 4px",marginLeft:-4,...t&&{marginBottom:8}}}(this.environment);return(0,R.jsx)(me.Z,{className:e,disableMobileBorder:o&&"team"!==this.props.type,shouldShowMobileMarginBottom:o&&"team"!==this.props.type,style:fe(this.props.type),childrenStyle:{overflow:"visible"},right:(0,R.jsx)(ye,{right:this.props.right,showAddButton:this.props.showAddButton,type:this.props.type,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,shouldPersistToggleState:this.props.shouldPersistToggleState,focusStore:this.stores.focusStore,outlinerToggleButtonStore:this.stores.outlinerToggleButtonStore}),children:(0,R.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,R.jsx)(k.ZP,{textWrap:!1,disableTooltip:"team"===this.props.type||"publicPageTemplateIncludes"===this.props.type,renderTooltip:()=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{children:n}),(0,R.jsx)("span",{style:{color:this.theme.mediumInvertedTextColor,whiteSpace:"nowrap"},children:this.props.labelTooltip})]}),placement:k.ug.Top,render:e=>(0,R.jsx)(X.Z,{..."team"===this.props.type&&this.props.teamHeaderLabel?{"aria-labelledby":this.labelAriaId}:{id:this.labelAriaId},"aria-expanded":!o,"aria-controls":this.contentsAriaId,mobileFeedback:t,style:d,hovered:!!this.props.forceHoveredButtonStyle||void 0,onClick:()=>this.handleHideClick(),...(0,x.Z)(e,{onMouseMove:()=>i.setState({...i.state,mouseEntered:!0}),onMouseLeave:()=>i.setState({...i.state,mouseEntered:!1}),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,a.E)(t)&&r.setState(!0)},onBlur:()=>r.setState(!1)}),disabled:"publicPageTemplateIncludes"===this.props.type,children:(0,R.jsx)("span",{style:s,children:this.renderLabelContent()})})})})})}renderLabelContent(){switch(this.props.type){case"bookmarks":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return(0,R.jsx)(S.FormattedMessage,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});case"team":if(this.props.teamHeaderLabel){const{isHidden:e}=this.getToggleButtonStore().state,{mouseEntered:t}=this.stores.labelMouseStore.state;return(0,R.jsx)(de,{isHovered:t||this.stores.labelFocusStore.state,isExpanded:!e,teamStore:this.props.teamStore,label:this.props.teamHeaderLabel,outlinerToggleButtonStore:this.getToggleButtonStore(),outlinerTeamOnToggle:()=>this.handleHideClick(),teamOutlinerType:this.props.teamOutlinerType,onTeamJoinComplete:this.props.onTeamJoinComplete,labelAriaId:this.labelAriaId})}break;case g.kg:case g.mu:case g.cz:case g.PT:case g.g$:return this.props.sectionLabel;default:(0,m.t1)(this.props)}}getToggleButtonStore(){return this.props.customToggleButtonStore||this.stores.outlinerToggleButtonStore}}function ye(e){let{right:t,showAddButton:o,focusStore:i,...r}=e;window.__c={n:"OutlinerToggleButtonRightLabel"};const n=(0,l.VK)((()=>ue.sidebarMouseEnteredStore.state||i.state),[i]),s=(0,d.yK)((()=>({wrapper:{display:"flex",alignItems:"center",opacity:n?1:0,pointerEvents:n?"auto":"none",transition:"opacity 200ms ease-in"}})),[n]);return(0,R.jsxs)("div",{style:s.wrapper,children:[t,o&&(0,R.jsx)(be,{...r})]})}function be(e){let{type:t,disableTooltip:o,labelTooltip:r,spaceStore:s,spaceViewStore:a,shouldPersistToggleState:l,outlinerToggleButtonStore:c}=e;window.__c={n:"OutlinerToggleAddButton"};const p=(0,n.O7)(),h=p.device.isMobile,v=function(e){switch(e){case"bookmarks":case"private":case"shared":case"team":case"workspace":case g.g$:return!1;case g.PT:case g.cz:case g.mu:case g.kg:return!0;default:(0,m.t1)(e)}}(t),f=(0,S.useIntl)(),x=(0,i.useRef)(null),T=(0,i.useCallback)((e=>{a&&"team"!==t&&t!==g.g$&&y.kC({environment:p,spaceStore:s,spaceViewStore:a,type:t,outlinerToggleButtonStore:c,prepend:!0,shouldPersistToggleState:l,useCrdt:(0,b.SL)(e,"private"===t?"private":"other")})}),[p,c,l,s,a,t]),I=(0,i.useCallback)((()=>{F.lo("sidebar_team_section")}),[]),w=(0,d.yK)((e=>({plusButton:{display:"flex",alignItems:"center",justifyContent:"center",height:20,width:20,borderRadius:4,marginLeft:h?0:4},plusIcon:{fill:e.mediumIconColor,width:14,height:14},tutorialTooltip:{width:230},tutorialText:{fontSize:16,lineHeight:.85},labelTooltip:{color:e.mediumInvertedTextColor}})),[h]),C=v?f.formatMessage({defaultMessage:"New teamspace",id:"sidebar.addButton.addTeamTooltip"}):f.formatMessage({defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"});return(0,R.jsx)(k.ZP,{textWrap:!1,disableTooltip:o,renderTooltip:()=>(0,R.jsxs)(R.Fragment,{children:[C,(0,R.jsx)("br",{}),(0,R.jsx)("span",{style:w.labelTooltip,children:!v&&r})]}),placement:k.ug.Bottom,render:e=>(0,R.jsxs)(X.Z,{ariaLabel:C,style:w.plusButton,mobileFeedback:h,onClick:v?I:T,className:"private"===t?"shadow-cursor-new-page-sidebar":void 0,...e,children:[(0,R.jsx)("span",{ref:x}),(0,u.f)(w.plusIcon)]})})}Se.displayName="OutlinerToggleButton";const ve=Se;function fe(e){if("team"===e)return{padding:0,margin:0,paddingLeft:10,borderRadius:0};const t={paddingTop:0,paddingBottom:0,paddingRight:14,paddingLeft:15,minHeight:24,marginBottom:2,marginTop:6};return e===g.g$?{...t,marginTop:0}:t}function xe(e){return{textTransform:"initial",fontSize:12,lineHeight:1,color:e.lightTextColor,fontWeight:h.Z.fontWeight.semibold}}},60442:(e,t,o)=>{o.d(t,{Z:()=>s});o(67294);var i=o(82990),r=o(47853),n=o(85893);const s=function(e){let{imageURL:t,imageWidth:o,imageHeight:i,caption:s,title:l}=e;if(t){const e=(0,r.D)(t);return(0,n.jsxs)("div",{style:{width:o||200,marginTop:4,marginBottom:4},children:[(0,n.jsx)("div",{style:{width:"100%",height:i||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6}}),(0,n.jsx)(a,{caption:s,title:l})]})}return(0,n.jsx)(a,{caption:s,title:l,style:{width:o}})};function a(e){let{style:t,caption:o,title:r}=e;return(0,n.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[r&&(0,n.jsx)("header",{style:{fontWeight:i.Z.fontWeight.bold,marginBottom:4},children:r}),o]})}},3392:(e,t,o)=>{o.d(t,{Z:()=>M});var i=o(67294),r=o(480),n=o(86628),s=o(24405),a=o(75071),l=o(72126),d=o(69246),c=o(9291),u=o(89858),p=o(64921),g=o(55118),m=o(25777),h=o(14694),S=o(43250),y=o(35026),b=o(80444),v=o(74948),f=o(72655),x=o(85893);function T(e){window.__c={n:"EmptyChildrenPlaceholder"};const t=(0,r.Fy)(),o=(0,s.yK)((e=>({placeholder:{color:e.lightTextColor,paddingLeft:12,...t.isMobile&&{display:"flex",alignItems:"center",height:32}}})),[t]);return(0,x.jsx)(h.Z,{role:"treeitem",style:e.itemStyle,children:(0,x.jsx)("div",{style:o.placeholder,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function I(e){window.__c={n:"AddPageButton"};const{type:t}=e,o=(0,r.O7)(),{currentSpaceStore:i,currentSpaceViewStore:a}=(0,n.VK)((()=>b.default.state),[]),l=o.device.isMobile,d=(0,s.yK)((e=>({sidebarItem:{color:e.mediumTextColor}})),[]);if(!i||!a)return null;return(0,x.jsx)(p.Z,{mobileFeedback:l,onClick:async()=>{if("team"===t)return;await u.kC({environment:o,spaceStore:i,spaceViewStore:a,type:t,prepend:!1,shouldPersistToggleState:!0})&&l&&v.close()},children:(0,x.jsx)(h.Z,{style:d.sidebarItem,left:(0,x.jsx)(j,{}),disableMobileBorder:!0,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"Add a page",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}function w(e){const{store:t,index:o}=e;return(0,x.jsx)(f.ZP,{type:e.type,store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:o,itemDepth:e.itemDepth,itemOpenByDefault:e.itemOpenByDefault,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled},t.id)}function C(e){window.__c={n:"EmptyDroppable"};const t=(0,r.O7)(),{type:o,parentStore:i}=e,n=l.oA(["OutlinerItem",o,null==i?void 0:i.id]).join("_");return(0,x.jsx)(g.G,{dropTargetKey:n,canDropBelow:!0,onSelectableDrop:async e=>{await u.NP({dropArgs:e,environment:t,type:o,isTopLevel:!0,parentStore:i})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=b.default.state;return!!o&&(0,y.Pl)({environment:t,draggingStores:e.draggingStores,parentStore:i,currentSpaceStore:o})}})}function j(){window.__c={n:"PlusIcon"};const e=(0,s.yK)((e=>({icon:{fill:e.mediumIconColor,width:16,height:16},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,x.jsx)("div",{style:e.iconContainer,children:(0,a.f)(e.icon)})}const M=function(e){window.__c={n:"Outliner"};const{disabled:t,childStores:o,areChildrenLoading:n,itemDepth:s,type:a}=e,l=(0,r.Fy)(),c=o.map(((t,o)=>(0,i.createElement)(w,{...e,key:t.id,store:t,index:o}))),u=0===s,p=0===c.length,g=(p||e.isHeaderless||l.isMobile)&&u&&("private"===a||"workspace"===a)&&!t,h=p&&!g&&!u,y={offline:S.blN,bookmarks:S.fe0,workspace:S.BEs,shared:S.JkF,private:S.q1J,team:S.l24,[d.PT]:void 0,[d.cz]:void 0,[d.mu]:void 0,[d.kg]:void 0,[d.g$]:void 0}[e.type];return(0,x.jsxs)(m.Z,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:u?"tree":"group",style:e.style,className:y,loaded:!n,showSpinnerTimeout:3e3,spinnerSize:"1em",children:[c,p&&u&&(0,x.jsx)(C,{type:e.type,parentStore:e.parentStore}),g&&(0,x.jsx)(I,{type:e.type}),h&&(0,x.jsx)(T,{itemStyle:e.itemStyle})]})}},72655:(e,t,o)=>{o.d(t,{gZ:()=>Ke,aZ:()=>Fe,ZP:()=>De});var i=o(67294),r=o(480),n=o(6740),s=o(97511),a=o(33125),l=o(86628),d=o(24405),c=o(41432),u=o(15157),p=o(97880),g=o(89858),m=o(79954),h=o(19037),S=o(35026),y=o(52315),b=o(81844),v=o(80796),f=o(26136),x=o(26664),T=o(24646),I=o(21202),w=o(82990),C=o(50906),j=o(17659),M=o(40663),B=o(84076),k=o(68785),L=o(76798),P=o(14694),Z=o(84210),V=o(50659),_=o(98165),O=o(95697),A=o(91948),K=o(50770),F=o(80444),D=o(53730),R=o(9291),H=o(9953),N=o(82530),E=o(31278),z=o(26388),W=o(28020),U=o(85893);function $(e){window.__c={n:"OutlinerItemIcon"};const{targetStore:t,canEditItem:o}=e,i=(0,R.useIntl)(),n=(0,r.O7)(),{isMobile:s}=n.device,a=(0,l.VK)((()=>t.getIcon()),[t]),c=(0,l.VK)((()=>!s&&o&&!t.isLocked()&&!(0,W.qG)(t.id)),[s,o,t]),u=(0,l.VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),p=(0,d.yK)((e=>({pageIcon:{fill:e.mediumIconColor}})),[]),g=e=>{const o=t.getIconStore();o&&N.createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:n,perform:t=>{H.sO({store:o,value:e,transaction:t})}})};return(0,U.jsx)(z.ZP,{renderTooltip:()=>(0,U.jsx)(R.FormattedMessage,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:z.ug.Bottom,render:e=>{var o;return c?(0,U.jsx)(E.Z,{bucket:"secure",disabled:!1,icon:a,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,onChange:g,pageIconStyle:p.pageIcon,...e,largeIcon:!0,iconLoggingData:{recordTable:u,source:"sidebar",block_type:t.getType(),collection_id:"collection"===u?null===(o=t.getIconStore())||void 0===o?void 0:o.id:void 0},label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"})}):(0,U.jsx)(E.Z,{disabled:!0,icon:a,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,pageIconStyle:p.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"})})}})}var G=o(5210);function J(e){window.__c={n:"OutlinerItemLeftToggleButton"};const{store:t,targetStore:o,type:i,itemIndex:n,itemDepth:s,isOpen:a,onToggle:c}=e,u=(0,r.O7)(),{isMobile:p}=u.device,g=(0,l.VK)((()=>{if((0,O.ku)()){const e=Boolean(null==o?void 0:o.isCollectionView()),i=S.Yz(t).length>0;return e||i}return!0}),[t,o]),m=(0,d.yK)((e=>({hiddenToggle:{width:(0,G.q)({isMobile:p,isSidebar:!0})},toggle:{color:e.lightIconColor}})),[p]);if(!g)return(0,U.jsx)("div",{style:m.hiddenToggle});return(0,U.jsx)(G.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:a,color:m.toggle.color,onClick:()=>{const e=0===s,o=_.VP(t);C.t8_(u,{teamStore:o,type:e?"top_level":"nested",is_toggled:!a,outliner_type:i,outliner_position:n,outliner_depth:s}),c(),S.Ps({store:t,toOpen:!a,environment:u,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}o(52262),o(24506);var Q=o(56666),Y=o(75071),q=o(69246),X=o(13493),ee=o(6404),te=o(14900),oe=o(24677),ie=o(64921),re=o(52275),ne=o(31945),se=o(78140),ae=o(32163),le=o(40721),de=o(72495),ce=o(33929),ue=o(87279),pe=o(98742),ge=o(75024),me=o(34583),he=o(40215),Se=o(74948);const ye=(0,R.defineMessages)({addAPageInside:{defaultMessage:"Quickly add a page inside",id:"sidebarItem.addAPageInside.tooltip"}});function be(e){window.__c={n:"OutlinerItemRightIcons"};const{store:t,type:o,canEditItem:i,itemDepth:n,isHovered:s,isFocused:a,onToggle:c}=e,{isMobile:u}=(0,r.Fy)(),p=u||s||a,g=(0,l.VK)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),r=null===(e=t.getCollectionViewCollectionStore())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&i&&!o&&!r)}),[t,i]),m=(0,d.yK)((()=>({iconContainer:{display:"flex",paddingLeft:3,...p?{}:{...ge.jy,display:"block"}}})),[p]);return o===q.g$?null:(0,U.jsxs)("div",{style:m.iconContainer,children:[(0,U.jsx)(Ie,{store:t,type:e.type,itemIndex:e.itemIndex,itemDepth:n}),g&&(0,U.jsx)(ve,{store:t,onToggle:c,isTopLevelItem:0===n})]})}function ve(e){window.__c={n:"AddPageButton"};const{store:t,onToggle:o,isTopLevelItem:i}=e,n=(0,r.O7)(),{isMobile:s}=n.device,a=(0,l.VK)((()=>t.isCollectionView()),[t]),d=(0,l.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),c=(0,l.VK)((()=>{var e;const o=null===(e=t.getCollectionViewStores().at(0))||void 0===e?void 0:e.id;if(!o)return;const i=f.Xr.createChildStore(t,{table:X.n,id:o});return null==i?void 0:i.getFormatStore().getValue()}),[t]),u=(0,l.VK)((()=>{const e=null==c?void 0:c.collection_view_source;if("typed"===(null==e?void 0:e.type))return null==e?void 0:e.databaseType}),[c]),p=ce.default.formatMessage(ye.addAPageInside);return a&&!c&&0===d.length?(0,U.jsx)(xe,{disabled:!0,events:{}}):a&&u?(0,U.jsx)(fe,{store:t,databaseType:u}):d.length<=1?(0,U.jsx)(z.ZP,{renderTooltip:()=>p,placement:z.ug.Bottom,render:e=>{const r={...e,onClick:()=>{we({store:t,onToggle:o,sourceStore:d[0]??t,shouldNavigateToSource:!1,environment:n,isTopLevelItem:i})}};return(0,U.jsx)(xe,{events:r})}}):(0,U.jsx)(z.ZP,{renderTooltip:()=>p,placement:z.ug.Bottom,render:e=>(0,U.jsx)(ne.ZP,{popupType:s?ne.Z4.SlideUp:ne.Z4.Popup,renderOrigin:t=>(0,U.jsx)(xe,{events:(0,pe.Z)(e,t)}),render:e=>(0,U.jsx)(Te,{store:t,onToggle:o,parent:e,isTopLevelItem:i})})})}function fe(e){window.__c={n:"AddTypedPageButton"};const{store:t,databaseType:o}=e,n=(0,r.O7)(),s=(0,l.VK)((()=>F.default.state.currentSpaceViewStore),[]),a=(0,l.VK)((()=>F.default.state.currentSpaceStore),[]),d=(0,l.VK)((()=>null==s?void 0:s.getTeamsStores().map((e=>e.id))),[s]),c=(0,he.F)({environment:n,spaceStore:a,parentStore:a,joinedTeamIds:d??[],moveToTargets:[],overrideDatabaseType:o}),u=(0,l.VK)((()=>{if(c.success)return c.typedDatabases}),[c]),p=(0,i.useCallback)((()=>{u&&te.rm({store:t,typedDatabases:u,environment:n})}),[n,u,t]),g=ce.default.formatMessage(ye.addAPageInside);return c.success&&0!==(null==u?void 0:u.length)?(0,U.jsx)(z.ZP,{renderTooltip:()=>g,placement:z.ug.Bottom,render:e=>{const t={...e,onClick:p};return(0,U.jsx)(xe,{events:t})}}):(0,U.jsx)(xe,{disabled:!0,events:{}})}function xe(e){window.__c={n:"AddPageButtonInternal"};const{isMobile:t}=(0,r.Fy)(),o=Ce();return(0,U.jsx)(ie.Z,{ariaLabel:ce.default.formatMessage(ye.addAPageInside),mobileFeedback:t,style:o.button,disabled:e.disabled,disabledFeedback:e.disabled,...e.events,children:(0,Y.f)(o.buttonIcon)})}function Te(e){window.__c={n:"AddToCollectionViewMenu"};const{store:t,onToggle:o,parent:i,isTopLevelItem:n}=e,s=(0,r.O7)(),{isMobile:a}=s.device,c=(0,l.VK)((()=>t.getLinkedViewCollectionBlockStores()),[t]),u=(0,d.yK)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),p={menuType:a?ue.og.Modal:ue.og.Popup,right:a?(0,U.jsx)(le.DoneMenuText,{}):void 0},g={key:"collections",render:e=>(0,U.jsx)(de.Z,{...e,title:(0,U.jsx)(R.FormattedMessage,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:c.map((e=>({key:e.id,render:t=>(0,U.jsx)(re.Z,{...t,title:(0,U.jsx)("div",{style:u.menuItem,children:(0,U.jsx)(L.Z,{store:e})}),icon:(0,U.jsx)(E.Z,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})}),action:()=>{we({store:e,onToggle:o,sourceStore:e,shouldNavigateToSource:!0,environment:s,isTopLevelItem:n})}})))};return(0,U.jsx)(se.Z,{...p,children:(0,U.jsx)(ae.Z,{type:ae.i.Vertical,onAccept:i.close,initialFocus:void 0,sections:[g]})})}function Ie(e){window.__c={n:"MenuButton"};const{store:t,type:o,itemDepth:i,itemIndex:n}=e,s=(0,R.useIntl)(),a=(0,r.O7)(),{isMobile:l}=a.device,d=Ce(),c=e=>{const r=_.VP(t);oe.Ys({environment:a,store:t}),ee.Qn({environment:a,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:r,type:0===i?"top_level":"nested",outliner_type:o,outliner_position:n,outliner_depth:i}})},u="bookmarks"===o?s.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):s.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,U.jsx)(z.ZP,{renderTooltip:()=>u,placement:z.ug.Bottom,render:e=>(0,U.jsx)(ie.Z,{ariaLabel:u,mobileFeedback:l,style:d.button,onClick:c,...e,children:(0,Q.o)(d.buttonIcon)})})}function we(e){const{store:t,sourceStore:o,shouldNavigateToSource:i,environment:r,isTopLevelItem:n,onToggle:s}=e;me.M_(r)&&(r.device.isMobile&&Se.close(),N.createAndCommit({userAction:"OutlinerItem.createdPage",environment:r,perform:e=>g.D0({environment:r,store:o,transaction:e,navigateToParent:i})}),t.isCollectionView()||(s(!0),S.Ps({store:t,toOpen:!0,environment:r,isTopLevelItem:n})))}function Ce(){const e=(0,r.O7)().device.isMobile;return(0,d.yK)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4},buttonIcon:e?{fill:t.lightIconColor,width:18}:{fill:t.sidebarTextColor,width:14}})),[e])}function je(e){window.__c={n:"BlockSidebarItem"};const{store:t,style:o,targetStore:i,itemDepth:n,type:s,nestedOutlinerAriaId:a,titleAriaId:c,isOpen:u,onFocus:p,onBlur:g,onMouseMove:m,onMouseLeave:h}=e,y=(0,r.O7)(),b=y.device.isMobile,v=(0,l.VK)((()=>"copy_indicator"===t.getType()),[t]),f=(0,l.VK)((()=>function(e){const{targetStore:t,type:o}=e;if(!t)return;const i=(0,S.N)(o);if(t.isNavigableBlock())return(0,Z.ZP)({store:t,fullyQualified:!1,pageVisitSource:i});{const e=_.Dg(t);if(e)return(0,Z.ZP)({store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:i})}}({targetStore:i,type:s})),[i,s]),x=(0,l.VK)((()=>v&&D.transactionQueue.isPendingTransactionForRecord(t.pointer)),[v,t]),T=(0,l.VK)((()=>{const{mainEditorCurrentBlockStore:e}=F.default.state;return e&&t.id===e.id}),[t]),I=(0,l.VK)((()=>(0,K.H)()),[]),M=(0,d.yK)((e=>({sidebarItem:{...!b&&{paddingLeft:5},...T&&{fontWeight:w.Z.fontWeight.semibold,background:e.sidebarItemSelectedBackground,color:e.regularTextColor,...b&&{boxShadow:`\n                            0 1px 0 ${e.buttonHoveredBackground}\n                        `}},...(0,V.Z3)({isMobile:b}),...o},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:b?10:6,marginRight:b?12:void 0},link:{width:"100%"}})),[b,T,o]),L={role:"treeitem","aria-current":T?"page":void 0,"aria-expanded":!!u,"aria-owns":a,"aria-labelledby":c};if(v)return x?(0,U.jsxs)(P.Z,{style:M.sidebarItem,childrenStyle:M.children,onFocus:p,onBlur:g,onMouseMove:m,onMouseLeave:h,children:[(0,U.jsx)(k.Z,{style:M.loadingSpinner}),(0,U.jsx)(A.Z,{targetRecordId:t.id,style:M.moveOrDuplicateProgress})]}):null;if(f){const o=()=>{e.onNavigate&&e.onNavigate(t),I&&j.qQ({environment:y,open:!1});const o=_.VP(t);C.Yg1(y,{teamStore:o,type:0===n?"top_level":"nested",outliner_type:e.type,outliner_position:e.itemIndex,outliner_depth:n})};return(0,U.jsx)(B.Z,{onFocus:p,onBlur:g,style:M.link,href:f,onClick:o,innerStyle:(0,V.G$)({isMobile:b}),...L,children:(0,U.jsx)(Me,{...e,sidebarItemStyle:M.sidebarItem,sidebarItemChildrenStyle:M.children,titleAriaId:c,nestedOutlinerAriaId:a})})}return(0,U.jsx)(Me,{...e,onFocus:p,onBlur:g,sidebarItemStyle:M.sidebarItem,sidebarItemChildrenStyle:M.children,titleAriaId:c,nestedOutlinerAriaId:a,...L})}function Me(e){window.__c={n:"SidebarItemContainer"};const{store:t,parentStore:o,targetStore:i,itemDepth:r,type:n,onFocus:s,onBlur:a,onMouseMove:d,onMouseLeave:u,onToggle:p,titleAriaId:g,nestedOutlinerAriaId:m,isOpen:h,isHovered:S,isFocused:y}=e,b=(0,l.VK)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:r}=e;if(t.isDefined()&&(0,M.h7)(t))return!1;if(t.isCollectionView()&&!(0,O.bq)())return!t.getCollectionViewSourceCollectionStore();if("block"===(null==o?void 0:o.table)){if(f.G.createChildStore(o,{table:I.iU,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===c.Ti.alias)return!0;if(i&&"team"!==r)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:o,isTopLevelItem:0===r,type:n})),[t,o,r,n]);return(0,U.jsx)(P.Z,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:e.sidebarItemChildrenStyle,left:(0,U.jsx)(J,{store:t,targetStore:i,type:n,itemIndex:e.itemIndex,itemDepth:r,"aria-controls":m,"aria-describedby":g,onToggle:p,isOpen:h}),icon:i&&(0,U.jsx)($,{targetStore:i,canEditItem:e.canEditItem}),right:(0,U.jsx)(be,{store:t,type:n,itemIndex:e.itemIndex,itemDepth:r,canEditItem:e.canEditItem,onToggle:p,isHovered:S,isFocused:y}),onFocus:s,onBlur:a,onMouseMove:d,onMouseLeave:u,isAlias:b,children:(0,U.jsx)(L.Z,{id:g,store:t})})}var Be=o(12534),ke=o(45669),Le=o(3392);function Pe(e){window.__c={n:"CollectionViewOutlinerItem"};const{store:t,collectionViewStore:o,onNavigate:n,type:s}=e,a=(0,r.O7)(),c=(0,l.VK)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),u=(0,l.VK)((()=>{const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=F.default.state;return!c&&Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,c]),p=(0,d.yK)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.mediumTextColor},sideBarItem:{...u&&{fontWeight:w.Z.fontWeight.semibold,background:t.buttonHoveredBackground,color:t.regularTextColor,...a.device.isMobile&&{boxShadow:`\n\t\t\t\t\t\t0 1px 0 ${t.buttonHoveredBackground}\n\t\t\t\t\t`}},...e.style}})),[a.device.isMobile,u,e.style]),g=(0,l.VK)((()=>(0,Z.ZP)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,S.N)(s)})),[o.id,t,s]),m=(0,l.VK)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),h=(0,l.VK)((()=>{if("page"!==m.type||!m.pagePointer)return null;const e=f.G.createChildStore(t,{table:m.pagePointer.table,id:m.pagePointer.id}),o=(0,S.Q2)(e);return{pageStore:e,ready:(0,y.b)(e),outlinerItems:o}}),[m,t]),b=(0,l.VK)((()=>t.getContentStore()),[t]),v=(0,i.useCallback)((()=>{n&&n(t)}),[t,n]);if(!m.ready)return null;if("page"===m.type&&h){const{ready:t,outlinerItems:o}=h;return(0,U.jsx)(Le.Z,{type:e.type,childStores:o,areChildrenLoading:!t,itemDepth:e.itemDepth+1,parentStore:b,itemStyle:p.sideBarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled})}return c?null:(0,U.jsx)(B.Z,{href:g,style:{width:"100%"},innerStyle:(0,V.G$)({isMobile:a.device.isMobile}),onClick:v,role:"treeitem","aria-current":u?"step":void 0,children:(0,U.jsx)(P.Z,{icon:(0,U.jsx)("div",{style:p.initialIcon,children:"•"}),style:p.sideBarItem,children:(0,U.jsx)(ke.Z,{collectionViewName:m.name,collectionViewType:m.type??"table"})})})}function Ze(e){window.__c={n:"CollectionViewOutliner"};const{store:t}=e,o=(0,l.VK)((()=>t.getCollectionViewStores()),[t]);return(0,U.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,Be.ZP)({event:e,context:Be.Af.EditorContextMenu,callback:()=>{}})},children:o.map((o=>(0,U.jsx)(Pe,{store:t,collectionViewStore:o,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores},o.id)))})}function Ve(e){window.__c={n:"NestedOutliner"};const{disabled:t,store:o,style:i,targetStore:n,itemDepth:s,nestedOutlinerAriaId:a,titleAriaId:c}=e,{isMobile:u}=(0,r.Fy)(),p=(0,l.VK)((()=>!(0,y.b)(o)),[o]),g=(0,l.VK)((()=>n.isCollectionView()?n:null),[n]),m=(0,l.VK)((()=>(0,S.Yz)(o)),[o]),h=(0,l.VK)((()=>n.getContentStore()),[n]),b=(0,d.yK)((()=>{const e="number"==typeof(null==i?void 0:i.paddingLeft)?i.paddingLeft:u?Ke:5,t=u?Fe:14;return{item:{...i,paddingLeft:e+t}}}),[i,u]);return g?(0,U.jsx)(Ze,{store:g,itemStyle:b.item,onNavigate:e.onNavigate,type:e.type,childStores:m,areChildrenLoading:!1,itemDepth:s+1,parentStore:h,itemToggleStyle:e.toggleStyle,disabled:t,id:a,"aria-labelledby":c}):(0,U.jsx)(Le.Z,{type:e.type,childStores:m,areChildrenLoading:p,itemDepth:s+1,parentStore:h,itemStyle:b.item,itemToggleStyle:e.toggleStyle,onNavigate:e.onNavigate,disabled:t,id:a,"aria-labelledby":c})}function _e(e){return`Outliner-${e.id}`}function Oe(e){let{store:t,type:o,isTopLevelItem:i}=e;return e=>{const r=t.getRecordStoreUIParent();null!=r&&r.valueIs(x.i)&&g.A5({...e,type:o,targetStore:t,targetParentStore:r,isTopLevelItem:i})}}function Ae(e){let{environment:t,store:o,parentStore:i,type:r,isTopLevelItem:n}=e;return async e=>{const{droppedDirection:s,droppedStores:a,duplicate:l}=e;i&&await g.v9({environment:t,type:r,targetParentStore:i,targetStore:o,isTopLevelItem:n,droppedDirection:s,droppedStores:a,duplicate:l})}}const Ke=6,Fe=22,De=function(e){window.__c={n:"OutlinerItem"};const{store:t,itemIndex:o,parentStore:d,type:S,itemDepth:y,disabled:x}=e,I=(0,r.O7)(),w=(0,s.l)(),C=function(e){return 0===e}(y),[j,M]=(0,i.useState)((()=>{if((0,p.$K)(e.itemOpenByDefault))return e.itemOpenByDefault;if(C){const e=u.Z.get({userId:I.currentUser.id,key:_e(t)});if((0,p.$K)(e))return e}return!1})),[B,k]=(0,i.useState)(!1),[L,P]=(0,i.useState)(!1),Z=(0,i.useId)(),V=(0,i.useId)(),_=(0,l.VK)((()=>function(e){if(e.getType()===c.Ti.alias){const t=e.getAliasTargetStore();return t instanceof f.G?t:void 0}return e}(t)),[t]),O=(0,l.VK)((()=>T.Bb(t)),[t]),A=(0,l.VK)((()=>!x&&(0,h.J5)({environment:I,blocks:[t],publicEditMode:w&&w.publicEditModeStore.state})),[x,w,I,t]),K=(0,l.VK)((()=>A&&!t.isLinkedCollectionView()),[t,A]),F=(0,i.useRef)(null);(0,a.c)(b.Z,(()=>({store:t,parentStore:d,type:S,isTopLevelItem:C,getNode:()=>F.current})),[t,d,S,C]);const D=O&&d?{onInsertBelow:e=>g.LR({...e,environment:I,store:t,parentStore:d,before:!0,type:S}),onInsertAbove:e=>g.LR({...e,environment:I,store:t,parentStore:d,before:!1,type:S})}:{},R=0===o,H=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,n.E)(t)&&P(!0)}),[]),N=(0,i.useCallback)((()=>{P(!1)}),[]),E=(0,i.useCallback)((()=>{v.Z.state.isDragging||k(!0)}),[]),z=(0,i.useCallback)((()=>{k(!1)}),[]),W=(0,i.useCallback)((e=>{M(void 0!==e?e:e=>!e)}),[]);return _?(0,U.jsxs)(m.Z,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:O,canDropAbove:R,canDropBelow:O,canDropOnto:K,canInsertBelow:O,canInsertAbove:O,canSelect:O,canTriggerContextMenu:!0,onRemove:Oe({store:t,type:S,isTopLevelItem:C}),onSelectableDrop:Ae({environment:I,store:t,parentStore:d,type:S,isTopLevelItem:C}),shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,...D,ref:F,children:[(0,U.jsx)(je,{store:t,style:e.style,parentStore:d,type:S,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:_,canEditItem:A,nestedOutlinerAriaId:Z,titleAriaId:V,onFocus:H,onBlur:N,onMouseMove:E,onMouseLeave:z,onToggle:W,isHovered:B,isFocused:L,isOpen:j}),j&&(0,U.jsx)(Ve,{...e,targetStore:_,nestedOutlinerAriaId:Z,titleAriaId:V})]}):null}},75546:(e,t,o)=>{o.d(t,{o:()=>c});o(67294);var i=o(480),r=o(86628),n=o(24405),s=o(82990),a=o(95697),l=o(43488),d=o(85893);function c(e){let{teamStore:t,withSelectedStyle:o}=e;window.__c={n:"TeamHeaderLabel"};const c=(0,i.Fy)(),u=(0,r.VK)((()=>{var e;return{teamName:t.getName()??"",shouldShowLock:(0,a.C2)(null==t||null===(e=t.getSettingsStore())||void 0===e?void 0:e.getValue())}}),[t]),p=(0,n.yK)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden"},lockIcon:{width:15,marginLeft:6,marginBottom:1,fill:e.mediumIconColor},labelText:{...s.Z.textOverflowStyle,...o?{color:e.regularTextColor,fontWeight:s.Z.fontWeight.semibold}:{color:e.darkTextColor,fontWeight:s.Z.fontWeight.medium},fontSize:c.isMobile?s.Z.fontSize.UIRegular.mobile:s.Z.fontSize.UIRegular.desktop}})),[c.isMobile,o]);return u?(0,d.jsxs)("div",{style:p.container,children:[(0,d.jsx)("div",{style:p.labelText,children:u.teamName}),u.shouldShowLock&&(0,d.jsx)(l.Z,{iconStyle:p.lockIcon})]}):null}},29165:(e,t,o)=>{o.d(t,{O:()=>I});var i=o(67294),r=o(480),n=o(86628),s=o(29369),a=o(9291),l=o(29921),d=o(80444),c=o(70704),u=o(75546),p=o(24405),g=o(75071),m=o(14720),h=o(64921),S=o(31945),y=o(68785),b=o(14694),v=o(85893);function f(e){let{teamStore:t}=e;window.__c={n:"TeamOutlinerEmptyState"};const o=(0,r.Fy)(),s=(0,n.VK)((()=>t.canAddOrRemoveTopLevelPages()),[t]),[l,d]=(0,i.useState)(void 0),c=(0,p.yK)((e=>({emptyPlaceholder:{color:e.lightTextColor,paddingLeft:12,...!o.isMobile&&{fontSize:14},...o.isMobile&&{display:"flex",alignItems:"center",height:32},display:"flex",alignItems:"center"},addPage:{color:e.mediumTextColor,borderRadius:4},addPageButton:{borderRadius:4,marginLeft:4,marginRight:4},addPageIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},addPageIcon:{fill:e.mediumIconColor,width:16,height:16}})),[o]);return s?(0,v.jsx)(S.ZP,{popupType:S.Z4.Popup,alignmentToOrigin:S.vR.Start,originGap:2,originRect:l,renderOrigin:e=>(0,v.jsx)(h.Z,{mobileFeedback:o.isMobile,style:c.addPageButton,...e,onClick:t=>{d(new DOMRect(t.clientX,t.clientY)),e.onClick(t)},children:(0,v.jsx)(b.Z,{style:c.addPage,disableMobileBorder:!0,left:(0,v.jsx)("div",{style:c.addPageIconContainer,children:(0,g.f)(c.addPageIcon)}),children:(0,v.jsx)(a.FormattedMessage,{id:"teamOutliner.addPage",defaultMessage:"Add a page"})})}),render:e=>(0,v.jsx)(m.p7,{renderLoading:e=>(0,v.jsx)("div",{style:m.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,v.jsx)(y.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_empty_new_page"})}):(0,v.jsx)(b.Z,{disableMobileBorder:!0,children:(0,v.jsx)("div",{style:c.emptyPlaceholder,children:(0,v.jsx)("span",{children:(0,v.jsx)(a.FormattedMessage,{defaultMessage:"No pages inside",id:"teamOutliner.noOverflowEmptyMessage"})})})})}var x=o(54396),T=o(32006);function I(e){let{teamStore:t,sidebarState:o,isLastTeam:i,initialToggleState:p,shouldPersistToggleState:g,customToggleStore:m,teamOutlinerType:h,onNavigate:S,onTeamJoinComplete:y,sidebarTourStep:b}=e;window.__c={n:"TeamOutliner"};const{currentSpaceStore:x,currentSpaceViewStore:I,currentUserSettingsStore:C}=(0,n.VK)((()=>{const{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}=d.default.state;return{currentSpaceStore:e,currentSpaceViewStore:t,currentUserSettingsStore:o}}),[]),j=(0,n.qz)(void 0,c.Z),M=m??j,B=(0,n.VK)((()=>t.getTeamPagesStores()),[t]),k=(0,r.Fy)(),L=(0,n.VK)((()=>{const e=d.default.state.mainEditorCurrentBlockStore;return(null==e?void 0:e.getParentTable())===s.e0&&(null==e?void 0:e.getParentId())===t.id&&!k.isMobile&&M.state.isHidden}),[k.isMobile,t.id,M]);return x&&I&&C?(0,v.jsx)(l.Z,{type:"team",customToggleButtonStore:M,forceHoveredButtonStyle:L,initialToggleState:p,shouldPersistToggleState:g,teamHeaderLabel:(0,v.jsx)(u.o,{teamStore:t,withSelectedStyle:L}),teamStore:t,spaceStore:x,spaceViewStore:I,showAddButton:!1,isLastTeam:i,teamOutlinerType:h,labelTooltip:(0,v.jsx)(a.FormattedMessage,{defaultMessage:"One of your teams",id:"sidebar.teamSection.tooltip"}),onTeamJoinComplete:y,marginBottomOverrideWhenExpanded:k.isMobile?0:16,marginBottomOverrideWhenCollapsed:k.isMobile?0:1,renderSidebar:e=>{let{labelAriaId:i,contentsAriaId:r}=e;if(!t)return;const n=new Set(B.map((e=>e.id))),s=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w,{teamSectionType:h,sidebarState:o,teamStore:t,onNavigate:S,labelAriaId:i,contentsAriaId:r}),0===n.size&&(0,v.jsx)(f,{teamStore:t})]});return b?(0,v.jsx)(T.$,{step:b,children:s}):s}}):null}const w=i.memo((e=>{window.__c={n:"MemoizedTeamTopLevelSidebarOutliner"};const{teamSectionType:t,teamStore:o,sidebarState:r,contentsAriaId:n,onNavigate:s,labelAriaId:a}=e,l=(0,i.useMemo)((()=>({type:"team",teamSectionType:t,teamStore:o})),[t,o]),d=(0,i.useMemo)((()=>({id:n,"aria-labelledby":a})),[n,a]);return(0,v.jsx)(x.r,{state:l,sidebarState:r,onNavigate:s,additionalOutlinerProps:d})}))},54396:(e,t,o)=>{o.d(t,{r:()=>S});var i=o(67294),r=o(480),n=o(86628),s=o(24405),a=o(97880),l=o(35683),d=o(35026),c=o(80444),u=o(46735),p=o(99757),g=o(3392),m=o(72655),h=o(85893);function S(e){window.__c={n:"TopLevelSidebarOutliner"};const{state:t,sidebarState:o,onNavigate:S,additionalOutlinerProps:y,id:b,isHeaderless:v}=e,f=(0,n.VK)((()=>c.default.state.currentSpaceStore),[]),x=(0,n.VK)((()=>c.default.state.currentSpaceViewStore),[]),T=(0,r.O7)(),I=(0,r.Fy)().isMobile,w=(0,n.VK)((()=>!p.n.state),[]),C=(0,n.VK)((()=>(null==f?void 0:f.canEdit())&&w),[f,w]),j=(0,n.VK)((()=>t),[t]),M=(0,n.VK)((()=>{if(x)return(0,d.EE)({currentSpaceViewStore:x,typeWithTeam:j,environment:T,sidebarState:o})}),[x,T,o,j]),B=(0,n.VK)((()=>{if(x&&f)return(0,d.P4)({currentSpaceStore:f,currentSpaceViewStore:x,typeWithTeam:j})}),[f,x,j]),k=(0,i.useCallback)((e=>{switch(j.type){case"bookmarks":u.Z.recordVisit({id:e.id,systemBlockType:e.getSystemBlockTypeStore().getValue(),type:l.vu.Favorite,currentUserId:T.currentUser.id});break;case"team":case"workspace":case"shared":u.Z.recordVisit({id:e.id,systemBlockType:e.getSystemBlockTypeStore().getValue(),type:l.vu.Link,currentUserId:T.currentUser.id});break;case"private":break;default:(0,a.t1)(j)}null==S||S()}),[T.currentUser.id,S,j]),L=(0,s.yK)((()=>({outliner:{display:"block"},outlinerItem:{...I&&"team"===j.type?{paddingLeft:m.gZ+m.aZ}:void 0}})),[I,j.type]);return f&&x&&M?(0,h.jsx)(g.Z,{type:j.type,disabled:!C,itemDepth:0,childStores:M,parentStore:B,style:L.outliner,itemStyle:L.outlinerItem,onNavigate:k,id:b,"aria-labelledby":e["aria-labelledby"],isHeaderless:v,...y}):null}},32006:(e,t,o)=>{o.d(t,{$:()=>d});var i=o(67294),r=o(86628),n=o(14720),s=o(28451),a=o(77999),l=o(85893);function d(e){let{children:t,step:o}=e;window.__c={n:"SidebarTourTutorial"};const d=(0,r.VK)((()=>a.default.state),[]),u=i.useRef(null);return"inactive"===d.type?t:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c,{ref:u,children:t}),(0,l.jsx)(s.g,{calloutId:"sidebar_tour",shouldShow:d.step===o,children:(0,l.jsx)(n.cG,{step:d.step,contentRef:u})})]})}const c=i.forwardRef(((e,t)=>{let{children:o}=e;return(0,l.jsx)("div",{ref:t,children:o})}))},14720:(e,t,o)=>{o.d(t,{Rv:()=>n,Ry:()=>c,cG:()=>d,p7:()=>l,rH:()=>a,tn:()=>r,vs:()=>s});var i=o(77907);const r=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarTeamBrowserContent)),n=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSwitcherMultiAccountPopup)),s=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarFooter)),a=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSectionWithPopup)),l=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.TeamAddAppTemplateMenu)),d=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarTourTutorialContent)),c={LazyTeamAddAppTemplateMenu:{width:250,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}}},62395:(e,t,o)=>{o.d(t,{n:()=>i});const i=o(49085).default.createValue(void 0)},43488:(e,t,o)=>{o.d(t,{Z:()=>a});o(67294);var i=o(16184),r=o(9291),n=o(26388),s=o(85893);function a(e){let{iconStyle:t}=e;return(0,s.jsx)(n.ZP,{textWrap:!0,style:{width:210},placement:n.ug.Bottom,renderTooltip:()=>(0,s.jsx)(r.FormattedMessage,{id:"teamLockIcon.tooltip",defaultMessage:"Private teamspaces can only be accessed or joined by invitation"}),render:e=>(0,s.jsx)("div",{...e,children:(0,i.Q)(t)})})}},40215:(e,t,o)=>{o.d(t,{F:()=>m});var i=o(86628),r=o(59054),n=o(6287),s=o(54814),a=o(23924),l=o(77907),d=o(75822),c=o(62395),u=o(77080),p=o(42330),g=o(26136);function m(e){let{environment:t,spaceStore:o,joinedTeamIds:m,parentStore:h,moveToTargets:S,overrideDatabaseType:y}=e;const b=(0,i.VK)((()=>{const e=null==o?void 0:o.id;if(e)return function(e){if(!c.n.state)return;if(e!==c.n.state.spaceId)return;return c.n.state.typedDatabases}(e)}),[null==o?void 0:o.id]),v=(0,i.VK)((()=>u.default.checkGate("typed_move_to_improved_default_results")),[]),f=(0,l.useDependency)(l.deps.searchActions),[{value:x,status:T}]=(0,r.r5)((async()=>{if(b)return b;if(!o||!h)return;const e=p.ZP.getTargetsDatabaseType()??y;if(!e)return;if("resolved"!==f.status)return;const i=f.value;let r=[];if(v){const s=((await i.searchCollectionsWithRecents({environment:t,query:"",limit:20,databaseType:[e],spaceStore:o,parentStore:o,collectionViewBlockStore:void 0})).results||[]).map((e=>g.NW.createChildStore(h,{table:n.v,id:e})));r=(0,a.qJ)({typedDatabases:s,blocksToFilterParents:S})}else{const i=await s.rG({environment:t,spaceId:o.id,databaseType:e,parentStore:h})??[];r=(0,a.mL)({environment:t,typedDatabases:i,spaceStore:o,joinedTeamIds:m})}return c.n.setState({typedDatabases:r,spaceId:o.id}),p.ZP.setState({...p.ZP.state,variant:"typedInitialized"}),r}),[b,o,v,t,S,y,h,m,f.status,f.value],{debounce:d.vp,throttle:d.vp});return b?{success:!0,typedDatabases:b}:"resolved"===T&&x?{success:!0,typedDatabases:x}:{success:!1}}},22487:(e,t,o)=>{o.d(t,{K:()=>a});var i=o(86628),r=o(72141),n=o(95697),s=o(80444);function a(e){return(0,i.VK)((()=>{if(!e)return 0;const t=s.default.state.currentSpaceStore,o=s.default.state.currentUserStore;if(!r.YX((null==t?void 0:t.getRole())??"none")){return(0,n.tu)({currentUserStore:o,currentSpaceStore:t,teamStore:e,members:e.getMembers()}).length}return(0,n.tO)({teamStore:e,spaceStore:t}).length}),[e])}},13148:(e,t,o)=>{o.d(t,{U:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.I)("close",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},64878:(e,t,o)=>{o.d(t,{h:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.I)("dot",{viewBox:"0 0 5 4",svg:(0,r.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},97439:(e,t,o)=>{o.d(t,{D:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.I)("doubleChevronLeft",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.07031 13.8887C7.2207 14.0391 7.40527 14.1211 7.62402 14.1211C8.06836 14.1211 8.41699 13.7725 8.41699 13.3281C8.41699 13.1094 8.32812 12.9043 8.17773 12.7539L3.37207 8.05762L8.17773 3.375C8.32812 3.21777 8.41699 3.0127 8.41699 2.80078C8.41699 2.35645 8.06836 2.00781 7.62402 2.00781C7.40527 2.00781 7.2207 2.08984 7.07031 2.24023L1.73828 7.44922C1.56055 7.62012 1.46484 7.8252 1.46484 8.06445C1.46484 8.29688 1.55371 8.49512 1.73828 8.67969L7.07031 13.8887ZM13.1748 13.8887C13.3252 14.0391 13.5098 14.1211 13.7354 14.1211C14.1797 14.1211 14.5283 13.7725 14.5283 13.3281C14.5283 13.1094 14.4395 12.9043 14.2891 12.7539L9.4834 8.05762L14.2891 3.375C14.4395 3.21777 14.5283 3.0127 14.5283 2.80078C14.5283 2.35645 14.1797 2.00781 13.7354 2.00781C13.5098 2.00781 13.3252 2.08984 13.1748 2.24023L7.84961 7.44922C7.66504 7.62012 7.57617 7.8252 7.56934 8.06445C7.56934 8.29688 7.66504 8.49512 7.84961 8.67969L13.1748 13.8887Z"})})},16184:(e,t,o)=>{o.d(t,{Q:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},22686:(e,t,o)=>{o.d(t,{f:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.I)("person",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,o)=>{o.d(t,{X:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,r.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,r.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},35840:(e,t,o)=>{o.d(t,{R:()=>n,T:()=>r});o(67294);var i=o(45238);const r=(0,o(85893).jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"}),n=(0,i.I)("search",{viewBox:"0 0 16 16",svg:r})}}]);