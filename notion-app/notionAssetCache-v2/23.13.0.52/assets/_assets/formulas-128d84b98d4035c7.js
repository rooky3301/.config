"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9447],{77492:(e,t,r)=>{r.d(t,{R:()=>o});var n=r(45953);const o={runSync(e,t){let r=t.next();for(;!r.done;){const o=n.Ak.create();for(const t of r.value.recordPointers)o.setModel(t,e(t));r=t.next({recordMap:o})}return r.value},async runAsync(e,t){let r=t.next();for(;!r.done;){const n=await e(r.value.recordPointers);r=t.next({recordMap:n})}return r.value},fetchRecord:function*(e){const{recordMap:t}=yield{recordPointers:[e]};return t.getModel(e)},fetchRecords:function*(e){const{recordMap:t}=yield{recordPointers:e};return t},makeRunners:e=>({sync:t=>o.runSync(t.getRecordModel,e(t)),async:t=>o.runAsync(t.loadRecordModel,e(t))})}},68931:(e,t,r)=>{r.d(t,{C:()=>n});const n={serialize:e=>JSON.stringify(e),deserialize:e=>JSON.parse(e)}},61158:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(67266),o=r.n(n),a=r(72126);let i;i=Symbol.iterator;class s{constructor(e){this.map={},this._makeKey=e}makeKey(e){try{return this._makeKey?this._makeKey(e):o()(e)}catch(t){throw console.error("Failed to serialize",e),t}}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const n of t)this.map[this.makeKey(n)]=n}clear(){this.map={}}delete(e){delete this.map[this.makeKey(e)]}entries(){return Object.keys(this.map).map((e=>this.map[e]))}has(e){return this.makeKey(e)in this.map}getByKey(e){return this.map[e]}some(e){return this.entries().some(e)}find(e){return this.entries().find(e)}clone(){const e=new s(this._makeKey);return e.map=a.Xh(this.map),e}equals(e){return a.Xy(this.map,e.map)}get size(){return Object.keys(this.map).length}*[i](){const e=Object.keys(this.map);for(const t of e)yield this.map[t]}static fromArray(e){const{values:t,getKeyFn:r}=e,n=void 0!==r?new s(r):new s;return t.forEach((e=>n.add(e))),n}}const u=s},482:(e,t,r)=>{function n(e){return o[e.command]}r.d(t,{S:()=>n,d:()=>i,op:()=>a});const o={insertChildrenAfter:!0,insertChildrenBefore:!0,removeChild:!0,setParent:!0,assignAutoIncrementId:!0};const a={set:function(e){return{...e,command:"set"}},update:function(e){return{...e,command:"update"}},append:function(e){return e.args.ids?e.args.before?{pointer:e.pointer,path:e.path,command:"listBeforeMulti",args:{ids:e.args.ids,before:e.args.before}}:{pointer:e.pointer,path:e.path,command:"listAfterMulti",args:{ids:e.args.ids,after:e.args.after}}:e.args.before?{pointer:e.pointer,path:e.path,command:"listBefore",args:{id:e.args.id,before:e.args.before}}:{pointer:e.pointer,path:e.path,command:"listAfter",args:{id:e.args.id,after:e.args.after}}},remove:function(e){return{pointer:e.pointer,path:e.path,command:"listRemove",args:{id:e.args.id}}}};function i(e){for(const t of e)!t.pointer&&t.table&&t.id&&(t.pointer={table:t.table,id:t.id})}},73360:(e,t,r)=>{r.d(t,{QS:()=>C,hL:()=>I,mI:()=>M,mk:()=>x,oK:()=>Z,tz:()=>w});var n=r(70921),o=r(54368),a=r(8542),i=r(10188),s=r(98963),u=r(18844),l=r(44312),c=r(32161),d=r(49953),p=r(94578),m=r(24836),y=r(86135),f=r(83200),g=r(91644),v=r(15047),_=r(29369),b=r(24494),h=r(35794),k=r(11045);const x={create:(e,t)=>({table:e,value:t}),isSpaceRecordWithTable:e=>e.table===v.bx,isTeamRecordWithTable:e=>e.table===_.e0,isSpaceShardRecordWithTable:e=>!!(0,k.IO)(e.table),getSpaceId(e){if(x.isSpaceShardRecordWithTable(e)){if(x.isSpaceRecordWithTable(e))return e.value.id;{const{value:t}=e;return t.space_id}}if(e.table===n.TY){return e.value.space_id}}},T={block:!0,space_view:!0,collection:!0,collection_view:!0,comment:!0,activity:!0,discussion:!0,slack_integration:!0,snapshot:!0,bot:!0,access_request:!0,page_visit:!0,page_exit:!0,integration:!0,[c.P]:!0,[d.r9]:!0,team:!0,reaction:!0,[l.Jd]:!0,[s.cv]:!0,[f.w]:!0,[u.Xj]:!0,[m.qV]:!0,[y.FM]:!0,[h.b]:!0,[o.y]:!0,[g.AT]:!0,[b.w]:!0,[p.P9]:!0,[i.J4]:!0,[a.t_]:!0};function M(e){return T[e]}function w(e){return Boolean(M(e.table)&&Z(e.__IM_SORRY__getValue()))}function Z(e){return"object"==typeof e&&null!==e&&"parent_table"in e&&void 0!==e.parent_table&&void 0!==e.parent_id}const C={getSpaceId:e=>{if(e&&Z(e))return(0,k.an)(e.parent_table)&&"space_id"in e?e.space_id:void 0}},S={block:!0,space_view:!0,collection:!0,collection_view:!0,comment:!0,bot:!0,integration:!0,[l.Jd]:!0,[s.cv]:!0,[u.Xj]:!0,[m.qV]:!0,[y.FM]:!0,[o.y]:!0,[g.AT]:!0,[a.t_]:!0};function I(e){return S[e]}},45953:(e,t,r)=>{r.d(t,{Ak:()=>m,Ao:()=>c,PF:()=>y,R3:()=>l});r(21703),r(57658);var n=r(72126),o=r(59753);let a,i,s,u;function l(e){const t=m.create();for(const{pointer:r,value:n}of e)t.setValue(r,n);return t}class c{constructor(e){this.data=void 0,this.data=e}static create(e){if(e){if(3===e.__version__)return new d(e);if(function(e){return void 0===e.__version__}(e))return new p(e);throw new Error("Unknown RecordMapJson version")}return new d({__version__:3})}getTables(){return Object.keys(this.data).filter((e=>"__"!==e.substr(0,2)))}getSize(){let e=0;const t=this.getTables();for(const r of t)e+=Object.values(this.data[r]).length;return e}delete(e){const t=this.data[e.table];return t&&delete t[e.id],this}clone(){const e=this.createEmptyRecordMap();for(const t of this)e.set(t.pointer,t.value);return e}}a=Symbol.iterator;class d extends c{constructor(e){super(e),this.data=void 0,this.data=e}createEmptyRecordMap(){return c.create({__version__:3})}get(e){const t=this.data[e.table];if(t){const r=t[e.id];if(r)return r.value}}getByTable(e){const t=this.data[e];return t?Object.entries(t).map((t=>{let[r,n]=t;const{spaceId:o,value:a}=n;return{pointer:{table:e,id:r,spaceId:o},value:a}})):[]}set(e,t){this.data[e.table]||(this.data[e.table]={});const r=this.data[e.table]??{},n=r[e.id];let o=e.spaceId;return void 0===e.spaceId&&n&&n.spaceId&&(o=n.spaceId),r[e.id]={spaceId:o,value:t},this}*[a](){const e=this.getTables();for(const t of e){const e=this.data[t];if(e)for(const[r,n]of Object.entries(e)){const{value:e,spaceId:o}=n;yield{pointer:{id:r,table:t,spaceId:o},value:e}}}}toJson(e){const{allowVersionDowngrade:t,maxSupportedVersion:r}=e;return t&&"v1"===r?function(e){const t={};return Object.entries(e).forEach((e=>{let[r,n]=e;if("__"===r.substr(0,2))return;const o=r;n&&(t[o]={},Object.entries(n).forEach((e=>{let[r,n]=e;n&&(t[o][r]=n.value)})))})),t}(this.data):this.data}}i=Symbol.iterator;class p extends c{constructor(e){super(e),this.data=void 0,this.data=e}createEmptyRecordMap(){return c.create({})}get(e){const t=this.data[e.table];if(t)return t[e.id]}getByTable(e){const t=this.data[e];return t?Object.entries(t).map((t=>{let[r,n]=t;return{pointer:{table:e,id:r},value:n}})):[]}set(e,t){let r=this.data[e.table];return r||(r={},this.data[e.table]=r),r[e.id]=t,this}*[i](){for(const[t,r]of Object.entries(this.data))if(r)for(const[n,o]of Object.entries(r)){var e;let r;r=null!=o&&null!==(e=o.value)&&void 0!==e&&e.space_id?{pointer:{table:t,id:n,spaceId:o.value.space_id},value:o}:{pointer:{table:t,id:n},value:o},yield r}}toJson(e){return this.data}}s=Symbol.iterator;class m{constructor(e){this.inner=void 0,this.inner=c.create(e)}has(e){return void 0!==this.getValue(e)}getValue(e){return this.inner.get(e)}getModel(e){const t=this.getValue(e);if(t)return o.kk.fromValue(e.table,t)}getByTable(e){return this.inner.getByTable(e)}getPointersByTable(e){return this.inner.getByTable(e).map((e=>e.pointer))}getModels(e){return e.map((e=>this.getModel(e)))}setValue(e,t){return this.inner.set(e,t),this}setModel(e,t){const r=null==t?void 0:t.__IM_SORRY__getValue();return this.setValue(e,r)}addModel(e){return this.setModel(e.pointer,e)}*[s](){for(const{pointer:e,value:t}of this.inner)yield{pointer:e,model:o.kk.fromValue(e.table,t)}}delete(e){return this.inner.delete(e),this}getSize(){return this.inner.getSize()}clone(){const e=new m;for(const t of this)e.setModel(t.pointer,t.model);return e}toJson(e){return this.inner.toJson(e)}assign(e){for(const{pointer:t,model:r}of e)this.setModel(t,r);return this}static merge(e){const t=new m;return e.forEach((e=>t.assign(e))),t}static create(e){return new m(e)}isEqual(e,t){const r=[],o=[];for(const{pointer:a,model:i}of e){let e=this.getValue(a);null!=t&&t.mapThisValueBeforeComparisonFn&&(e=t.mapThisValueBeforeComparisonFn({value:e,pointer:a}));const r=null==i?void 0:i.__IM_SORRY__getValue();if(o.push(a),!(0,n.Xy)(e,r))return!1}for(const{pointer:a,model:i}of this){let o=null==i?void 0:i.__IM_SORRY__getValue();null!=t&&t.mapThisValueBeforeComparisonFn&&(o=t.mapThisValueBeforeComparisonFn({value:o,pointer:a}));const s=e.getValue(a);if(r.push(a),!(0,n.Xy)(o,s))return!1}if(null!=t&&t.shouldCompareSpaceIdsInPointers){const e=(0,n.MR)(o,["id","spaceId"]),t=(0,n.MR)(r,["id","spaceId"]);if(!(0,n.Xy)(t,e))return!1}return!0}}u=Symbol.iterator;class y{constructor(e){this.inner=void 0,this.inner=c.create(e)}has(e){return void 0!==this.getRole(e)}getValue(e){var t;return null===(t=this.inner.get(e))||void 0===t?void 0:t.value}getModel(e){const t=this.getValue(e);if(t)return o.kk.fromValue(e.table,t)}getRole(e){var t;return null===(t=this.inner.get(e))||void 0===t?void 0:t.role}getByTable(e){return this.inner.getByTable(e)}setValueAndRole(e,t,r){return this.inner.set(e,{value:t,role:r}),this}setModelAndRole(e,t,r){const n=null==t?void 0:t.__IM_SORRY__getValue();return this.setValueAndRole(e,n,r)}*[u](){for(const e of this.inner[Symbol.iterator]())e.value&&(yield{pointer:e.pointer,model:o.kk.fromValue(e.pointer.table,e.value.value),role:e.value.role})}delete(e){return this.inner.delete(e),this}clone(){const e=new y;for(const{pointer:t,model:r,role:n}of this)e.setModelAndRole(t,r,n);return e}getSize(){return this.inner.getSize()}assign(e){for(const{pointer:t,model:r,role:n}of e)this.setModelAndRole(t,r,n);return this}static merge(e){const t=new y;return e.forEach((e=>t.assign(e))),t}toJson(e){return this.inner.toJson(e)}static create(e){return new y(e)}toRecordMap(){const e=m.create();for(const{pointer:t,model:r}of this)r&&e.setModel(t,r);return e}}},606:(e,t,r)=>{r.d(t,{$O:()=>E,Ok:()=>F,P2:()=>O,UI:()=>P,dr:()=>D,qo:()=>B});var n=r(72126),o=r(4615),a=r(73360),i=r(70921),s=r(54368),u=r(8542),l=r(10188),c=r(98963),d=r(18844),p=r(70279),m=r(33709),y=r(82447),f=r(14710),g=r(57883),v=r(84683),_=r(70017),b=r(89470),h=r(94578),k=r(24836),x=r(86135),T=r(65963),M=r(16663),w=r(91644),Z=r(40837),C=r(65635),S=r(47969),I=r(35623),N=r(24494),R=r(35794);const U={[i.TY]:!0,[m.qF]:!0,[p.x_]:!0,[b.UI]:!0,[_.Kk]:!0,[g.t0]:!0,[Z.r]:!0,[f.Dw]:!0,[y.r]:!0,[v.Tu]:!0,[c.cv]:!0,[k.qV]:!0,[x.FM]:!0,[d.Xj]:!0,[R.b]:!0,[s.y]:!0,[w.AT]:!0,[C.Zx]:!0,[S.WU]:!0,[I.M]:!0,[N.w]:!0,[h.P9]:!0,[l.J4]:!0,[u.t_]:!0};function P(e){return e in U}const D={fromSpaceShardRecordId:(e,t)=>({id:e.id,spaceId:e.spaceId,table:t}),fromPointerLike(e){const{table:t,id:r,spaceId:n}=e;return{table:t,id:r,spaceId:n}},fromRecordWithTable(e){const t=e.table,r=e.value.id,n=a.mk.getSpaceId(e);return void 0!==n?{table:t,id:r,spaceId:n}:{table:t,id:r}},getParentPointerFromRecordWithParent(e){const t=e.parent_id,r=e.parent_table,n=a.QS.getSpaceId(e);return void 0!==n?{table:r,id:t,spaceId:n}:{table:r,id:t}},uniq:e=>n.mN(e,(e=>`${e.table}:${e.id}`)),toKey:e=>e.spaceId?`${e.spaceId}:${e.table}:${e.id}`:`${e.table}:${e.id}`,isEqualIdTable:(e,t)=>e.id===t.id&&e.table===t.table,isEqual(e,t){return this.isEqualIdTable(e,t)&&e.spaceId===t.spaceId}},O={toKey:e=>`${e.userId}:${D.toKey(e.pointer)}`};function E(e,t){return e.table===t}function F(e){return(0,o.e)(e.id)||"temporary_password"===e.table||e.table===M.h||e.table===T.a||(0,S.X$)(e)||(0,C.mR)(e)}function B(e,t){return e.table===t.table&&e.id===t.id}},149:(e,t,r)=>{r.d(t,{x:()=>n});r(57658);const n={isSuccess:e=>!("error"in e),isFail:e=>"error"in e,unwrap(e){if(n.isFail(e))throw e.error;return e.value},unwrapOr:(e,t)=>n.isFail(e)?t:e.value,reduce(e,t){let r={value:e[0]};for(let o=1;o<e.length;o++){const a=e[o];if(n.isFail(r))return r;r=t(r.value,a)}return r},map(e,t){const r=[];for(const o of e){const e=t(o);if(n.isFail(e))return e;r.push(e.value)}return{value:r}},catchErrors:function(e){try{const t=e();return function(e){switch(typeof e){case"undefined":case"string":case"bigint":case"symbol":case"boolean":return!1;case"function":case"object":return Boolean(e&&"then"in e&&"function"==typeof e.then)}return!1}(t)?Promise.resolve(t.then((e=>({value:e})),(e=>({error:e})))):{value:t}}catch(t){return{error:t}}}}},66897:(e,t,r)=>{r.d(t,{$4:()=>T,$S:()=>p,D$:()=>_,Hl:()=>M,I4:()=>k,Iq:()=>y,LU:()=>g,ON:()=>h,Wk:()=>f,YU:()=>m,dp:()=>v,m3:()=>b,pu:()=>x,uC:()=>d});var n=r(15070),o=r(59753),a=r(54368),i=r(77420),s=r(19889),u=r(97880),l=r(74487);const c={[s.KJ]:!0,[i.cZ]:!0,[a.y]:!0};l.union([l.object({required:{table:l.literals("bot","notion_user"),id:l.string()},optional:{spaceId:l.string()}}),l.object({required:{table:l.literal("agent"),id:l.string(),spaceId:l.string()},optional:{}})]);function d(e){return e.isUser()}function p(e){return e.table===s.KJ}function m(e){return e.table===i.cZ}function y(e){return e.table===a.y}function f(e){return"object"==typeof e&&"table"in e&&"id"in e&&("string"==typeof(t=e.table)&&t in c);var t}function g(e){return o.kk.isAnyModel(e)?e.asActor:"asActor"in e?e:void 0===e.value?{table:e.table,asActor:void 0}:o.kk.fromRecordWithTable(e).asActor}function v(e){return o.kk.fromValue(s.KJ,e)}function _(e){return o.kk.fromValue(i.cZ,e)}function b(e){return e?v(e):{table:s.KJ,asActor:void 0}}function h(e){return e?_(e):{table:i.cZ,asActor:void 0}}function k(e){return e?function(e){return o.kk.fromValue(a.y,e)}(e):{table:a.y,asActor:void 0}}function x(e){return o.kk.fromRecordWithTable(e).getActorUserId()}function T(e,t){return t?t.table===s.KJ?(null===(r=t.asActor)||void 0===r?void 0:r.getDisplayName(e))??e.formatMessage(o.dp.messages.anonymousPlaceholder):t.table===i.cZ?(0,n.Mh)(t.asActor):t.table===a.y?(null===(l=t.asActor)||void 0===l?void 0:l.getName())??e.formatMessage(o.Rg.messages.unnamedAgent):void(0,u.t1)(t):e.formatMessage(o.dp.messages.anonymousPlaceholder);var r,l}function M(e){var t;const{pointer:r}=e;return(null===(t=o.om.fromGetRecordValueFn(e.getRecordValue||e.getRecordModel)(r))||void 0===t?void 0:t.asActor)??{table:r.table,asActor:void 0}}},87205:(e,t,r)=>{r.d(t,{K9:()=>i,nI:()=>o,vK:()=>a});const n=(0,r(9291).defineMessages)({translateSpanish:{defaultMessage:"Spanish",id:"id.completions.translateSpanish"},translateFrench:{defaultMessage:"French",id:"id.completions.translateFrench"},translateKorean:{defaultMessage:"Korean",id:"id.completions.translateKorean"},translateJapanese:{defaultMessage:"Japanese",id:"id.completions.translateJapanese"},translateEnglish:{defaultMessage:"English",id:"id.completions.translateEnglish"},translateChinese:{defaultMessage:"Chinese",id:"id.completions.translateChinese"},translateRussian:{defaultMessage:"Russian",id:"id.completions.translateRussian"},translatePortuguese:{defaultMessage:"Portuguese",id:"id.completions.translatePortuguese"},translateGerman:{defaultMessage:"German",id:"id.completions.translateGerman"},translateItalian:{defaultMessage:"Italian",id:"id.completions.translateItalian"},translateDutch:{defaultMessage:"Dutch",id:"id.completions.translateDutch"},translateIndonesian:{defaultMessage:"Indonesian",id:"id.completions.translateIndonesian"},translateFilipino:{defaultMessage:"Filipino",id:"id.completions.translateFilipino"},translateVietnamese:{defaultMessage:"Vietnamese",id:"id.completions.translateVietnamese"},changeToneProfessional:{defaultMessage:"Professional",id:"id.completions.changeToneProfessional"},changeToneCasual:{defaultMessage:"Casual",id:"id.completions.changeToneCasual"},changeToneStraightforward:{defaultMessage:"Straightforward",id:"id.completions.changeToneStraightforward"},changeToneConfident:{defaultMessage:"Confident",id:"id.completions.changeToneConfident"},changeToneFriendly:{defaultMessage:"Friendly",id:"id.completions.changeToneFriendly"}}),o=[{key:"english",name:n.translateEnglish},{key:"korean",name:n.translateKorean},{key:"chinese",name:n.translateChinese},{key:"japanese",name:n.translateJapanese},{key:"spanish",name:n.translateSpanish},{key:"russian",name:n.translateRussian},{key:"french",name:n.translateFrench},{key:"portuguese",name:n.translatePortuguese},{key:"german",name:n.translateGerman},{key:"italian",name:n.translateItalian},{key:"dutch",name:n.translateDutch},{key:"indonesian",name:n.translateIndonesian},{key:"filipino",name:n.translateFilipino},{key:"vietnamese",name:n.translateVietnamese}],a=[{key:"professional",name:n.changeToneProfessional},{key:"casual",name:n.changeToneCasual},{key:"straightforward",name:n.changeToneStraightforward},{key:"confident",name:n.changeToneConfident},{key:"friendly",name:n.changeToneFriendly}];function i(e){return"formula"!==e.type&&"rollup"!==e.type&&"relation"!==e.type&&"file"!==e.type&&"url"!==e.type&&"auto_increment_id"!==e.type&&"button"!==e.type&&"email"!==e.type&&"phone_number"!==e.type}},33409:(e,t,r)=>{r.d(t,{x:()=>n});const n={CreatedBy:"notion://docs/created_by_property",CreatedTime:"notion://docs/created_time_property",LastEditedBy:"notion://docs/last_edited_by_property",LastEditedTime:"notion://docs/last_edited_time_property",Tags:"notion://docs/doc_tags_property",Type:"notion://docs/type_property",Status:"notion://docs/docs_status_property"}},92996:(e,t,r)=>{r.d(t,{tt:()=>a.tt,Be:()=>a.Be,bK:()=>u,LI:()=>a.LI,fW:()=>a.fW,By:()=>a.By,zU:()=>a.zU,Cr:()=>x,wC:()=>k,nG:()=>a.nG,Cx:()=>a.Cx,Fi:()=>a.Fi,KW:()=>a.KW,xm:()=>a.xm,mr:()=>n.mr,Aw:()=>a.Aw,wW:()=>a.wW,Yb:()=>a.Yb,T3:()=>a.T3,r:()=>a.r,Ll:()=>a.Ll,J1:()=>a.J1,nl:()=>g.nl,hp:()=>g.hp,SF:()=>g.SF,NH:()=>g.NH,eH:()=>g.eH,Rw:()=>g.Rw,YE:()=>g.YE,df:()=>g.J1,p$:()=>a.p$,gg:()=>a.gg,NB:()=>a.NB,uS:()=>o.uS,z3:()=>o.z3,Kk:()=>o.Kk,g3:()=>o.g3,_1:()=>o._1,sV:()=>o.sV,tD:()=>o.tD,y$:()=>o.y$,iS:()=>a.iS,WN:()=>a.WN,Pf:()=>a.Pf,br:()=>a.br,jh:()=>a.jh,rK:()=>a.rK,GZ:()=>a.GZ,J2:()=>l,T:()=>p,Pi:()=>f,uV:()=>o.uV,Xj:()=>d,tq:()=>c,dD:()=>m,SA:()=>a.SA,jP:()=>y,it:()=>a.it,zI:()=>n.zI,wg:()=>s,b0:()=>g.b0,W:()=>o.W,Es:()=>o.Es,TM:()=>b});var n=r(56606),o=r(59308),a=r(72621),i=r(40005);const s={tasks:a.iS,projects:a.wW},u="createNew";function l(e){return e&&m(e)?a.LI[e].type:a.LI.untyped.type}function c(e,t){return e&&m(e)?a.LI[e].singular:t?a.Ww.untyped_item_singular:a.LI.untyped.singular}function d(e,t){return e&&m(e)?a.LI[e].plural:t?a.Ww.untyped_item_plural:a.LI.untyped.plural}function p(e){return e&&m(e)?a.LI[e].icon:a.LI.untyped.icon}function m(e){return a.fW.includes(e)}function y(e){return a.Q6.has(e)}function f(e){return i.y[e].databaseUris}var g=r(61514);const v="existing_team",_="quick_capture",b="typed_db_migration",h="template_gallery",k={[v]:[a.Yb,a.tt,a.r,a.rK,a.KW],[_]:[],[b]:[],[h]:[a.Ll,a.Yb,a.tt,a.r,a.KW,a.rK]},x={[v]:[a.iS,a.wW,a.p$,a.nG,a.zU,a.Fi,a.GZ],[_]:[a.br,a.iS,a.wW],[b]:[a.iS],[h]:[a.iS,a.wW,a.p$,a.nG,a.zU,a.Fi,a.GZ]}},70475:(e,t,r)=>{r.d(t,{C:()=>n,Z:()=>o});const n={CreatedBy:"notion://meetings/created_by_property",CreatedTime:"notion://meetings/created_time_property",LastEditedBy:"notion://meetings/last_edited_by_property",LastEditedTime:"notion://meetings/last_edited_time_property",Attendees:"notion://meetings/attendees_property",MeetingTime:"notion://meetings/meeting_time_property",MeetingType:"notion://meetings/meeting_type_property",Tags:"notion://meetings/meeting_tags_property",MeetingNoteToCalendarEventRelation:"notion://meetings/meeting_note_to_calendar_event_relation_property",CalendarEventToMeetingNoteRelation:"notion://meetings/calendar_event_to_meeting_note_relation_property"},o="notion://meetings/transcript_tab"},56606:(e,t,r)=>{r.d(t,{mr:()=>a,zI:()=>o});var n=r(9291);r(42613);const o={People:"notion://projects/people_property",Status:"notion://projects/status_property",ProjectDates:"notion://projects/project_dates_property",Priority:"notion://projects/priority_property",Collaborators:"notion://projects/collaborators_property",AiSummary:"notion://projects/project_summary_feature",ProjectToTaskRelation:"notion://projects/project_to_task_relation",BlockingRelation:"notion://projects/project_blocking_relation",BlockedByRelation:"notion://projects/project_blocked_by_relation",CompletionRollup:"notion://projects/completion_rollup",Description:"notion://projects/description_property"};(0,n.defineMessages)({projectTitleProperty:{id:"databaseTypes.projectTypes.projectTitleProperty",defaultMessage:"Project name"},projectOwner:{defaultMessage:"Owner",id:"databaseTypes.projectTypes.projectOwner"},datesProperty:{defaultMessage:"Dates",id:"databaseTypes.projectTypes.datesProperty"},status:{defaultMessage:"Status",id:"appTemplates.projects.status"},done:{defaultMessage:"Done",id:"appTemplates.projects.done"},backlog:{id:"appTemplates.projects.backlog",defaultMessage:"Backlog"},planned:{id:"appTemplates.projects.planned",defaultMessage:"Planning"},paused:{defaultMessage:"Paused",id:"appTemplates.projects.paused"},inProgress:{defaultMessage:"In progress",id:"appTemplates.projects.inProgress"},cancelled:{defaultMessage:"Canceled",id:"appTemplates.projects.cancelled"}});const a="notion://projects/project_summary_feature"},61514:(e,t,r)=>{r.d(t,{J1:()=>o,NH:()=>l,Rw:()=>s,SF:()=>a,YE:()=>i,b0:()=>n,eH:()=>u,hp:()=>c,nl:()=>d});const n={Status:"notion://sprints/sprint_status_property",StatusV2:"notion://sprints/sprint_status_property_v2",UniqueId:"notion://sprints/unique_id_property",Dates:"notion://sprints/dates_property",SprintToTaskRelation:"notion://sprints/sprint_task_relation",TotalTasksRollup:"notion://sprints/total_tasks_property",CompletedTasksRollup:"notion://sprints/completed_tasks_property"},o="past",a="current",i="next",s="last",u="future",l="future-status-group",c="current-status-group",d="complete-status-group"},59308:(e,t,r)=>{r.d(t,{Es:()=>i,Kk:()=>d,W:()=>_,_1:()=>m,g3:()=>u,sV:()=>l,tD:()=>y,uS:()=>s,uV:()=>v,y$:()=>c,z3:()=>p});var n=r(9291),o=r(42613),a=r(72126);const i={Status:"notion://tasks/status_property",Assign:"notion://tasks/assign_property",AiSummary:"notion://tasks/ai_summary_property",DueDate:"notion://tasks/due_date_property",Priority:"notion://tasks/priority_property",Tags:"notion://tasks/tags_property",AutoIncrementId:"notion://tasks/auto_increment_id_property",Description:"notion://tasks/description_property",Estimates:"notion://tasks/estimates_property",Reporter:"notion://tasks/reporter_property",Type:"notion://tasks/task_type_property",CreatedTime:"notion://tasks/created_time_property",LastEditedTime:"notion://tasks/last_edited_time_property",LastEditedBy:"notion://tasks/last_edited_by_property",Location:"notion://tasks/location_property",DuplicatesRelation:"notion://tasks/task_duplicates_relation",DuplicateOfRelation:"notion://tasks/task_duplicate_of_relation",ParentTaskRelation:"notion://tasks/parent_task_relation",SubTaskRelation:"notion://tasks/sub_task_relation",TaskToSprintRelation:"notion://tasks/task_sprint_relation",SprintStatusRollup:"notion://tasks/task_sprint_status_rollup",TaskToProjectRelation:"notion://tasks/task_to_project_relation",BlockingRelation:"notion://tasks/task_blocking_relation",BlockedRelation:"notion://tasks/task_blocked_by_relation",GithubPrsRelation:"notion://tasks/task_to_github_prs_relation",GithubPrsToTaskRelation:"notion://tasks/github_prs_to_task_relation"},s="complete-status-group",u="notion://tasks/tasks_current_sprint_view",l="notion://tasks/tasks_sprint_planning_view",c="notion://tasks/tasks_with_no_sprint_view",d="notion://tasks/relative_current_sprint_filter",p="notion://projects/tutorial/tasks/create_a_task",m="notion://tasks/my_tasks/assigned_to_me_filter",y="notion://tasks/tasks_with_no_sprints_sprint_empty_filter",f=(0,n.defineMessages)({taskTitleProperty:{defaultMessage:"Task name",id:"databaseTypes.taskTypes.taskTitleProperty"},assignProperty:{defaultMessage:"Assignee",id:"databaseTypes.taskTypes.assigneeProperty"},statusProperty:{defaultMessage:"Status",id:"databaseTypes.taskTypes.statusProperty"},dueDateProperty:{defaultMessage:"Due",id:"databaseTypes.taskTypes.dueDateProperty"},notStarted:{defaultMessage:"Not started",id:"databaseTypes.taskTypes.notStarted"},todo:{defaultMessage:"To-do",id:"appTemplates.tasks.todo"},inProgress:{defaultMessage:"In progress",id:"databaseTypes.taskTypes.inProgress"},complete:{defaultMessage:"Complete",id:"databaseTypes.taskTypes.completed"},done:{defaultMessage:"Done",id:"databaseTypes.taskTypes.done"},archived:{defaultMessage:"Archived",id:"databaseTypes.taskTypes.archived"},taskCreatedByProperty:{defaultMessage:"Created by",id:"databaseTypes.taskTypes.taskCreatedByProperty"},createdTimeProperty:{defaultMessage:"Created time",id:"databaseTypes.taskTypes.createdTimeProperty"},lastEditedTimeProperty:{defaultMessage:"Last edited time",id:"databaseTypes.taskTypes.lastEditedTimeProperty"},lastEditedByProperty:{defaultMessage:"Last edited by",id:"databaseTypes.taskTypes.lastEditedByProperty"},locationProperty:{defaultMessage:"Source",id:"databaseTypes.taskTypes.sourceProperty"}});function g(e){return{title:{type:"title",name:e.formatMessage(f.taskTitleProperty)},[i.Assign]:{type:"person",name:e.formatMessage(f.assignProperty)},[i.Status]:{name:"Status",type:"status",groups:[{id:"todo-status-group",name:o.G1,color:"gray",optionIds:["not-started"]},{id:"in-progress-status-group",name:o.Ho,color:"blue",optionIds:["in-progress"]},{id:"complete-status-group",name:o.RW,color:"green",optionIds:["done","archived"]}],options:[{id:"not-started",value:e.formatMessage(f.notStarted)},{id:"in-progress",color:"blue",value:e.formatMessage(f.inProgress)},{id:"done",color:"green",value:e.formatMessage(f.done)},{id:"archived",color:"gray",value:e.formatMessage(f.archived)}],defaultOption:e.formatMessage(f.notStarted)},[i.DueDate]:{type:"date",name:e.formatMessage(f.dueDateProperty)}}}function v(e){return{...g(e),[i.Reporter]:{type:"created_by",name:e.formatMessage(f.taskCreatedByProperty)},[i.CreatedTime]:{type:"created_time",name:e.formatMessage(f.createdTimeProperty)},[i.LastEditedTime]:{type:"last_edited_time",name:e.formatMessage(f.lastEditedTimeProperty)},[i.LastEditedBy]:{type:"last_edited_by",name:e.formatMessage(f.lastEditedByProperty)},[i.Location]:{type:"location",name:e.formatMessage(f.locationProperty),location_type:"parent"}}}function _(e){return a.oA([b,h,e?k:void 0,x])}const b={hidden:!1,property:i.TaskToSprintRelation,value:{type:"relation",value:{type:"relative",value:{type:"builtin",variable:"current"}}}},h={hidden:!1,property:i.TaskToSprintRelation,value:{type:"relation",value:{type:"relative",value:{type:"builtin",variable:"next"}}}},k={hidden:!1,property:i.TaskToSprintRelation,value:{type:"relation",value:{type:"relative",value:{type:"builtin",variable:"last"}}}},x={hidden:!1,property:i.TaskToSprintRelation,value:{type:"relation",value:void 0}}},72621:(e,t,r)=>{r.d(t,{Aw:()=>w,Be:()=>F,By:()=>C,Cx:()=>I,Fi:()=>E,GZ:()=>O,J1:()=>Z,KW:()=>j,LI:()=>te,LZ:()=>Y,Ll:()=>B,MG:()=>z,NB:()=>M,Pf:()=>x,Q6:()=>Q,SA:()=>X,T3:()=>L,WN:()=>k,Ww:()=>ee,Yb:()=>A,br:()=>h,fW:()=>W,gg:()=>T,iS:()=>N,it:()=>J,jh:()=>S,mj:()=>G,nG:()=>U,p$:()=>P,r:()=>q,rK:()=>$,tt:()=>V,wW:()=>R,xm:()=>H,zU:()=>D});var n=r(9291),o=r(69651),a=r(31001),i=r(69578),s=r(59699),u=r(54855),l=r(86793),c=r(33507),d=r(59960),p=r(23539),m=r(97880),y=r(33409),f=r(70475),g=r(56606),v=r(61514),_=r(59308),b=r(46283);const h="untyped",k="_typedDBpreset",x="_db_tutorial_feature",T="notion://sprints",M="notion://tasks_block",w="notion://projects_block",Z="notion://sprints_block",C="notion://docs_block",S="notion://wiki_block",I="notion://meetings_block",N="notion://tasks_collection",R="notion://projects_collection",U="notion://github_prs_sub_external_collection",P="notion://sprints_collection",D="notion://docs_collection",O="notion://wiki_collection",E="notion://meetings_collection",F="notion://calendar_events_sub_external_collection",B="notion://projects/simple_tasks_preset",A="notion://projects/projects_preset",V="notion://projects/agile_preset",L="notion://projects/project_management_importers_preset",q="notion://docs/simple_docs_preset",j="notion://meetings/meetings_preset",$="notion://wiki/company_home_preset",G="notion://wiki/engineering_wiki_preset",Y="notion://wiki/product_wiki_preset",z="notion://wiki/sales_wiki_preset",W=[N,R,P,D,O,E,U,F],H=[B,A,V,L,q,j,$,G,Y,z],K=[$,G,Y,z],J=(0,m.AO)((e=>(0,m.DE)(K,e)?{true:e}:{false:e})),X=(0,m.AO)((e=>(0,m.DE)(H,e)&&!(0,m.DE)(K,e)&&e!==L?{true:e}:{false:e})),Q=new Set([...Object.values(_.Es),...Object.values(g.zI),...Object.values(v.b0),...Object.values(y.x),...Object.values(b.k),...Object.values(f.C)]),ee=(0,n.defineMessages)({untyped_type:{defaultMessage:"Untyped",id:"dbTypes.untyped.type"},untyped_singular:{defaultMessage:"page",id:"dbTypes.untyped.singular"},untyped_plural:{defaultMessage:"pages",id:"dbTypes.untyped.plural"},untyped_caption:{defaultMessage:"Start a database from scratch",id:"dbTypes.untyped.caption"},untyped_item_singular:{defaultMessage:"item",id:"dbTypes.untypedItem.singular"},untyped_item_plural:{defaultMessage:"items",id:"dbTypes.untypedItem.plural"},task_type:{defaultMessage:"Tasks",id:"dbTypes.task.type"},task_singular:{defaultMessage:"task",id:"dbTypes.task.singular"},task_plural:{defaultMessage:"tasks",id:"dbTypes.task.plural"},task_caption:{defaultMessage:"Simple task management",id:"dbTypes.task.caption"},task_benefit1:{defaultMessage:"See all your tasks across multiple task databases in your personal home",id:"dbTypes.tasks.benefit1"},task_benefit2:{defaultMessage:"Custom page layout tailored for tasks",id:"dbTypes.tasks.benefit2"},task_benefit3:{defaultMessage:"Pre-built properties and notifications",id:"dbTypes.tasks.benefit3"},project_type:{defaultMessage:"Projects",id:"dbTypes.project.type"},project_singular:{defaultMessage:"project",id:"dbTypes.project.singular"},project_plural:{defaultMessage:"projects",id:"dbTypes.project.plural"},project_caption:{defaultMessage:"Organize groups of tasks",id:"dbTypes.project.caption"},project_benefit1:{defaultMessage:"See all your projects across multiple project databases in your personal home",id:"dbTypes.projects.benefit1"},project_benefit2:{defaultMessage:"Custom page layout tailored for projects",id:"dbTypes.projects.benefit2"},github_type:{defaultMessage:"GitHub Pull Requests",id:"dbTypes.github.type"},github_singular:{defaultMessage:"pull request",id:"dbTypes.github.singular"},github_plural:{defaultMessage:"pull requests",id:"dbTypes.github.plural"},sprint_type:{defaultMessage:"Sprints",id:"dbTypes.sprint.type"},sprint_singular:{defaultMessage:"sprint",id:"dbTypes.sprint.singular"},sprint_plural:{defaultMessage:"sprints",id:"dbTypes.sprint.plural"},sprint_caption:{defaultMessage:"Agile project management",id:"dbTypes.sprint.caption"},doc_type:{defaultMessage:"Docs",id:"dbTypes.doc.type"},doc_singular:{defaultMessage:"doc",id:"dbTypes.doc.singular"},doc_plural:{defaultMessage:"docs",id:"dbTypes.doc.plural"},doc_caption:{defaultMessage:"Organize team documents",id:"dbTypes.doc.caption"},wiki_type:{defaultMessage:"Wiki",id:"dbTypes.wiki.type"},meeting_type:{defaultMessage:"Meetings",id:"dbTypes.meeting.type"},meeting_singular:{defaultMessage:"meeting",id:"dbTypes.meeting.singular"},meeting_plural:{defaultMessage:"meetings",id:"dbTypes.meeting.plural"},meeting_caption:{defaultMessage:"Event, Time, Participants...",id:"dbTypes.meeting.caption"},calendar_type:{defaultMessage:"Calendar Events",id:"dbTypes.calendar.type"},calendar_singular:{defaultMessage:"calendar event",id:"dbTypes.calendar.singular"},calendar_plural:{defaultMessage:"calendar events",id:"dbTypes.calendar.plural"}}),te={[h]:{type:ee.untyped_type,icon:u.a,singular:ee.untyped_singular,plural:ee.untyped_plural,caption:ee.untyped_caption,blockUri:void 0},[N]:{type:ee.task_type,icon:d.w,singular:ee.task_singular,plural:ee.task_plural,caption:ee.task_caption,blockUri:M},[R]:{type:ee.project_type,icon:l.D,singular:ee.project_singular,plural:ee.project_plural,caption:ee.project_caption,blockUri:w},[U]:{type:ee.github_type,icon:i.f,singular:ee.github_singular,plural:ee.github_plural,blockUri:void 0},[P]:{type:ee.sprint_type,icon:c.L,singular:ee.sprint_singular,plural:ee.sprint_plural,caption:ee.sprint_caption,blockUri:Z},[D]:{type:ee.doc_type,icon:a.A,singular:ee.doc_singular,plural:ee.doc_plural,caption:ee.doc_caption,blockUri:C},[O]:{type:ee.wiki_type,icon:p.Y,singular:ee.untyped_singular,plural:ee.untyped_plural,blockUri:S},[E]:{type:ee.meeting_type,icon:s.N,singular:ee.meeting_singular,plural:ee.meeting_plural,caption:ee.meeting_caption,blockUri:I},[F]:{type:ee.calendar_type,icon:o.C,singular:ee.calendar_singular,plural:ee.calendar_plural,blockUri:void 0}}},40005:(e,t,r)=>{r.d(t,{y:()=>d});var n=r(59699),o=r(54855),a=r(29665),i=r(33507),s=r(59960),u=r(69576),l=r(23539),c=r(72621);const d={untyped:{databaseUris:[],icon:o.a},[c.Ll]:{databaseUris:[c.iS],icon:s.w},[c.Yb]:{databaseUris:[c.wW,c.iS],icon:a.B},[c.tt]:{databaseUris:[c.wW,c.iS,c.p$,c.nG],icon:i.L},[c.T3]:{databaseUris:[c.wW,c.iS]},[c.r]:{databaseUris:[c.zU],icon:u.e},[c.KW]:{databaseUris:[c.Fi],icon:n.N},[c.rK]:{databaseUris:[c.GZ],icon:l.Y},[c.mj]:{databaseUris:[c.GZ],icon:l.Y},[c.LZ]:{databaseUris:[c.GZ],icon:l.Y},[c.MG]:{databaseUris:[c.GZ],icon:l.Y}}},46283:(e,t,r)=>{r.d(t,{k:()=>n});const n={Owner:"notion://wiki/owner_property"}},17215:(e,t,r)=>{r.d(t,{$F:()=>h,Q2:()=>p,T0:()=>g,TX:()=>f,V1:()=>b,bZ:()=>m,lL:()=>c,x:()=>y,xg:()=>_});var n=r(9291),o=r(41432),a=r(1800),i=r(63306),s=r(33709),u=r(9844),l=r(44876);const c=1e3,d=(0,n.defineMessages)({emptyPageTitle:{id:"emptyPageTitle",defaultMessage:"Untitled"},emptyCollectionViewTitle:{id:"emptyDatabaseViewTitle",defaultMessage:"View of {commaSeparatedDatabaseNames}"},restrictedPageTitle:{id:"restrictedPageTitle",defaultMessage:"No access"}});function p(e){return e.formatMessage(d.emptyPageTitle)}function m(e,t){return e.formatMessage(d.emptyCollectionViewTitle,{commaSeparatedDatabaseNames:t})}function y(e){return e.formatMessage(d.restrictedPageTitle)}function f(e,t,r){const n=e.getKeyStore("uri").getValue(),o=e.getKeyStore("attributes").getValue();if(n&&o){const a=null==o?void 0:o.find((e=>{var t;return"avatar"===(null===(t=e.format)||void 0===t?void 0:t.section)}));if(a&&(0,l.Wj)(a))return{pointer:e.pointer,icon:a.values[0]};if(t){const o=function(e,t,r){if(!r)return;const n=(0,l.ny)({url:e,integrations:r,currentSpaceId:t});if("success"!==n.type)return;return n.integration.info.icon||void 0}(n,t,r);if(o)return{pointer:e.pointer,icon:o}}}}function g(e){const{blockModel:t,getRecordModel:r,baseUrl:n,discussionId:u,pageVisitSource:l,notificationId:c}=e;if((0,o.S9)(t.getType()))return(0,a.Z)({pageId:t.id,pageModel:t,baseUrl:n,discussionId:u,notificationId:c,pageVisitSource:l});const d=i.DW(t.pointer,r),p=i.C8(d);if(p){let e=t.id;if(u){const n=r({table:s.qF,id:u,spaceId:t.getSpaceId()});if(n){const t=r(n.getParentPointer());e=t&&t.getType()===o.Ti.tableRow?t.getParentId():n.getParentId()}}return(0,a.Z)({pageId:p.id,pageModel:p,scrollToBlockId:e,baseUrl:n,discussionId:u,notificationId:c,pageVisitSource:l})}}const v=(0,n.defineMessages)({embed:{defaultMessage:"Embed",id:"blockHelpers.embedBlockType"},framer:{defaultMessage:"Framer",id:"blockHelpers.framerBlockType"},tweet:{defaultMessage:"Tweet",id:"blockHelpers.tweetBlockType"},gist:{defaultMessage:"Gist",id:"blockHelpers.gistBlockType"},drive:{defaultMessage:"Drive",id:"blockHelpers.driveBlockType"},figma:{defaultMessage:"Figma",id:"blockHelpers.figmaBlockType"},loom:{defaultMessage:"Loom",id:"blockHelpers.loomBlockType"},typeform:{defaultMessage:"Typeform",id:"blockHelpers.typeformBlockType"},codepen:{defaultMessage:"Codepen",id:"blockHelpers.codepenBlockType"},audio:{defaultMessage:"Audio",id:"blockHelpers.audioBlockType"},maps:{defaultMessage:"Maps",id:"blockHelpers.mapsBlockType"},invision:{defaultMessage:"Invision",id:"blockHelpers.invisionBlockType"},mixpanel:{defaultMessage:"Mixpanel",id:"blockHelpers.mixpanelBlockType"},image:{defaultMessage:"Image",id:"blockHelpers.imageBlockType"},pdf:{defaultMessage:"PDF",id:"blockHelpers.pdfBlockType"},video:{defaultMessage:"Video",id:"blockHelpers.videoBlockType"},file:{defaultMessage:"File",id:"blockHelpers.fileBlockType"},whimsical:{defaultMessage:"Whimsical",id:"blockHelpers.whimsicalBlockType"},miro:{defaultMessage:"Miro",id:"blockHelpers.miroBlockType"},abstract:{defaultMessage:"Abstract",id:"blockHelpers.abstractBlockType"},sketch:{defaultMessage:"Sketch",id:"blockHelpers.sketchBlockType"},excalidraw:{defaultMessage:"Excalidraw",id:"blockHelpers.excalidrawBlockType"},replit:{defaultMessage:"Replit",id:"blockHelpers.replitBlockType"},hex:{defaultMessage:"Hex",id:"blockHelpers.hexBlockType"},deepnote:{defaultMessage:"Deepnote",id:"blockHelpers.deepnoteBlockType"},drawing:{defaultMessage:"Drawing",id:"blockHelpers.drawingBlockType"}});function _(e,t){return e.formatMessage(v[t])}const b=(0,n.defineMessages)({placeholder:{id:"externalObjectInstanceBlock.placeholder.message",defaultMessage:"Embed {value}"},editLabel:{id:"externalObjectInstanceBlock.editLabel.message",defaultMessage:"Link Preview"}});function h(e,t,r){const n=t.getFormat();if(!n)return"";if(n.original_url)return n.original_url??"";if(n.integration_id){const t=r({table:u.K2,id:n.integration_id});if(t)return e.formatMessage(b.placeholder,{value:t.getName()})}return""}},41432:(e,t,r)=>{r.d(t,{$t:()=>z,BT:()=>b,BX:()=>ie,Fx:()=>d,GP:()=>P,MF:()=>s,MV:()=>x,OY:()=>K,Ok:()=>w,PH:()=>U,Pm:()=>ye,Q2:()=>M,Q3:()=>T,S9:()=>ne,TT:()=>H,Ti:()=>m,UW:()=>p,Um:()=>W,VB:()=>X,XD:()=>le,XX:()=>F,Z7:()=>E,ZY:()=>l,Zi:()=>R,Zj:()=>O,Zu:()=>ee,_7:()=>J,_T:()=>te,dM:()=>se,eJ:()=>ae,eh:()=>Y,f4:()=>I,f7:()=>ue,h5:()=>ce,hD:()=>de,hY:()=>_,he:()=>pe,ib:()=>D,kC:()=>h,lQ:()=>re,m3:()=>q,nH:()=>v,nq:()=>Q,oe:()=>S,p2:()=>j,pg:()=>G,q7:()=>k,sX:()=>c,wL:()=>V,wZ:()=>u,zp:()=>oe});var n=r(92996),o=r(606),a=r(21202),i=r(97880);const s={toggleFormatHeaderBlock:"toggle_format_header_block",toggleFormatSubHeaderBlock:"toggle_format_sub_header_block",toggleFormatSubSubHeaderBlock:"toggle_format_sub_sub_header_block",column2Block:"column2_block",column3Block:"column3_block",column4Block:"column4_block",column5Block:"column5_block",mermaidCodeBlock:"mermaid_code_block",aiSummaryBlock:"ai_summary_block",aiActionItemsBlock:"ai_action_items_block",aiFreePromptBlock:"ai_free_prompt_block",aiSectionBlock:"ai_section_block"};s.aiSummaryBlock;const u={header:"toggle_format_header_block",sub_header:"toggle_format_sub_header_block",sub_sub_header:"toggle_format_sub_sub_header_block"};u.header;const l={toggle_format_header_block:"header",toggle_format_sub_header_block:"sub_header",toggle_format_sub_sub_header_block:"sub_sub_header",column2_block:"column_list",column3_block:"column_list",column4_block:"column_list",column5_block:"column_list",mermaid_code_block:"code",ai_summary_block:"ai_block",ai_action_items_block:"ai_block",ai_free_prompt_block:"ai_block",ai_section_block:"ai_block"};function c(e){return e.startsWith("column")&&e.endsWith("block")}function d(e){return e.startsWith("toggle_format_")}function p(e){return e.startsWith("ai_")&&e.endsWith("_block")}l.mermaid_code_block;const m={image:"image",video:"video",bookmark:"bookmark",file:"file",page:"page",linkToPage:"link_to_page",personalHomePage:"personal_home_page",linkToCollection:"link_to_collection",text:"text",header:"header",subHeader:"sub_header",subSubHeader:"sub_sub_header",toDo:"to_do",bulletedList:"bulleted_list",numberedList:"numbered_list",toggle:"toggle",code:"code",factory:"factory",button:"button",divider:"divider",columnList:"column_list",column:"column",copyIndicator:"copy_indicator",breadcrumb:"breadcrumb",equation:"equation",quote:"quote",collectionView:"collection_view",collectionViewPage:"collection_view_page",embed:"embed",framer:"framer",tweet:"tweet",gist:"gist",drive:"drive",figma:"figma",loom:"loom",typeform:"typeform",codepen:"codepen",audio:"audio",maps:"maps",invision:"invision",pdf:"pdf",callout:"callout",tableOfContents:"table_of_contents",whimsical:"whimsical",miro:"miro",abstract:"abstract",sketch:"sketch",excalidraw:"excalidraw",alias:"alias",transclusionContainer:"transclusion_container",transclusionReference:"transclusion_reference",replit:"replit",externalObjectInstance:"external_object_instance",table:"table",tableRow:"table_row",tab:"tab",hex:"hex",deepnote:"deepnote",mixpanel:"mixpanel",externalObjectInstancePage:"external_object_instance_page",aiBlock:"ai_block",drawing:"drawing"},y={text:!0,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,page:!0,column:!0,column_list:!0,factory:!0,transclusion_container:!0,callout:!0,quote:!0,table:!0,tab:!0,ai_block:!0},f={header:!0,sub_header:!0,sub_sub_header:!0},g={text:!0,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,column:!0,transclusion_container:!0,callout:!0,quote:!0},v={callout:!0},_={callout:!0,quote:!0},b={transclusion_container:!0,transclusion_reference:!0,collection_view:!0,column_list:!0,column:!0,table:!0,factory:!0,ai_block:!0,button:!0},h={text:!0,to_do:!0,bulleted_list:!0,numbered_list:!0},k={header:!0,sub_header:!0,sub_sub_header:!0,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,quote:!0,callout:!0},x={text:!0,page:!0,collection_view_page:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,transclusion_container:!0,transclusion_reference:!0,alias:!0},T={text:!0,header:!0,sub_header:!0,sub_sub_header:!0},M={header:!0,sub_header:!0,sub_sub_header:!0,quote:!0,callout:!0},w={image:!0,video:!0,embed:!0,tweet:!0,drive:!0,gist:!0,invision:!0,framer:!0,audio:!0,maps:!0,figma:!0,loom:!0,typeform:!0,codepen:!0,pdf:!0,whimsical:!0,miro:!0,abstract:!0,sketch:!0,excalidraw:!0,replit:!0,hex:!0,deepnote:!0,mixpanel:!0,drawing:!0},Z={image:!0,video:!0,embed:!0,drive:!0,gist:!0,invision:!0,framer:!0,maps:!0,figma:!0,loom:!0,typeform:!0,codepen:!0,pdf:!0,whimsical:!0,miro:!0,abstract:!0,sketch:!0,excalidraw:!0,replit:!0,hex:!0,deepnote:!0,mixpanel:!0},C={image:!0,pdf:!0},S={...w,bookmark:!0,file:!0,code:!0},I={factory:!0},N={transclusion_container:!0,transclusion_reference:!0},R={text:!0,header:!0,sub_header:!0,sub_sub_header:!0,page:!0,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,code:!0,quote:!0,callout:!0,equation:!0,transclusion_container:!0,column_list:!0},U=["text","header","sub_header","sub_sub_header","to_do","bulleted_list","numbered_list","toggle","code","page"],P={image:!0,video:!0,tweet:!0,drive:!0,maps:!0,gist:!0,audio:!0,file:!0,collection_view:!0,pdf:!0,table:!0},D={column_list:!0,collection_view:!0,external_object_instance:!0,...w},O={text:!0,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,quote:!0,page:!0,header:!0,sub_header:!0,sub_sub_header:!0,bookmark:!0,file:!0,collection_view_page:!0,callout:!0,table_of_contents:!0},E={page:!0,collection_view:!0,collection_view_page:!0,external_object_instance_page:!0,personal_home_page:!0},F={column:!0,column_list:!0,copy_indicator:!0,divider:!0,link_to_page:!0,link_to_collection:!0,table_of_contents:!0},B={column:!0,column_list:!0,copy_indicator:!0,divider:!0,link_to_page:!0,link_to_collection:!0,table_of_contents:!0,collection_view:!0,collection_view_page:!0,transclusion_container:!0,transclusion_reference:!0},A={collection_view:!0},V={text:!0,page:!0,bulleted_list:!0,numbered_list:!0,to_do:!0,toggle:!0,quote:!0,factory:!0,code:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,external_object_instance_page:!0,ai_block:!0,file:!0},L={text:!0,page:!0,bulleted_list:!0,numbered_list:!0,to_do:!0,toggle:!0,quote:!0,code:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,ai_block:!0,file:!0,image:!0,video:!0,embed:!0,tweet:!0,drive:!0,gist:!0,invision:!0,framer:!0,audio:!0,maps:!0,figma:!0,loom:!0,typeform:!0,codepen:!0,pdf:!0,whimsical:!0,miro:!0,abstract:!0,sketch:!0,excalidraw:!0,replit:!0,hex:!0,deepnote:!0,mixpanel:!0,drawing:!0,equation:!0},q={header:!0,sub_header:!0,sub_sub_header:!0},j={text:!0,bulleted_list:!0,numbered_list:!0,to_do:!0,toggle:!0,quote:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0},$={text:!0,bulleted_list:!0,numbered_list:!0,to_do:!0,toggle:!0,quote:!0,callout:!0},G={collection_view:!0,collection_view_page:!0},Y={text:!0,bulleted_list:!0,numbered_list:!0,to_do:!0,toggle:!0,quote:!0,header:!0,sub_header:!0,sub_sub_header:!0},z={page:!0,callout:!0,column:!0,factory:!0,button:!0,transclusion_container:!0,transclusion_reference:!0,tab:!0};function W(e,t){return ae(e,t)||ue(e,t)||!!(0,i.qg)(y,e)&&y[e]}function H(e,t){return ae(e,t)||!!(0,i.qg)(g,e)&&g[e]}function K(e){return!!(0,i.qg)(w,e)&&w[e]}function J(e){return!!(0,i.qg)(Z,e)&&Z[e]}function X(e){return!!(0,i.qg)(C,e)&&C[e]}function Q(e){return!!(0,i.qg)(N,e)&&N[e]}function ee(e){return!!(0,i.qg)(R,e)&&R[e]}function te(e,t){return!!(0,i.qg)(B,e)&&B[e]&&!ue(e,t)||Boolean(t&&t.alias_pointer&&(0,o.$O)(t.alias_pointer,a.iU))}function re(e){return!!(0,i.qg)(A,e)&&A[e]}function ne(e){return!!(0,i.qg)(E,e)&&E[e]}function oe(e){return!!(0,i.qg)(f,e)&&f[e]}function ae(e,t){return oe(e)&&(null==t?void 0:t.toggleable)}function ie(e,t){return"toggle"===e||ae(e,t)}function se(e){return!!(0,i.qg)(G,e)&&G[e]}function ue(e,t){return se(e)&&(null==t?void 0:t.app_config_uri)===n.jh}function le(e){return!!(0,i.qg)(V,e)&&V[e]}function ce(e){return!!(0,i.qg)(L,e)&&L[e]}function de(e){return!!(0,i.qg)($,e)&&$[e]}function pe(e){return!!(0,i.qg)(h,e)&&h[e]}const me={page:!0,collection_view_page:!0,external_object_instance_page:!0};function ye(e){return!!(0,i.qg)(me,e)&&me[e]}},15070:(e,t,r)=>{r.d(t,{Be:()=>h,Mh:()=>T,U9:()=>g,Uz:()=>k,Ye:()=>m,c9:()=>b,f2:()=>x,hA:()=>f,ms:()=>y,oA:()=>v,pH:()=>d,xe:()=>_,y2:()=>M});var n=r(72126),o=r(59753),a=r(72141),i=r(77420),s=r(15047),u=r(19889),l=r(97880);const c=(0,l.AO)((e=>"read_property"===e||"insert_property"===e||"update_property"===e?{true:e}:{false:e}));function d(e){return!(!(0,l.Kn)(e)||0===(0,l.Yd)(e).length)&&Object.entries(e).every((e=>{let[t,r]=e;return c(t)&&!0===r}))}const p=(0,l.AO)((e=>(0,l.DE)(a.ZK,e)?{true:e}:{false:e}));function m(e){return!(!(0,l.Kn)(e)||0===(0,l.Yd)(e).length)&&Object.entries(e).every((e=>{let[t,r]=e;return p(t)&&!0===r}))}function y(e){if(!(0,l.Kn)(e)||0===(0,l.Yd)(e).length)return!1;const{read_user_without_email:t,read_user_with_email:r,inherit_creator_permissions:n,link_preview:o,synced_database:a,webhooks:i,workspace_search:s,workspace_page_export:u,read_teamspace:c,...p}=e;return(void 0===r||!0===r&&void 0!==t&&!0===t)&&((void 0===t||!0===t)&&((void 0===n||!0===n)&&(d(p)||m(p))))}function f(e){return o.kk.fromValue(i.cZ,e).isBotWithCoreApiCapabilities()}function g(e){return y(e.capabilities)&&h(e.capabilities)}const v=(0,l.AO)((e=>e.parent_table===u.KJ&&"guest"===e.type&&f(e)?{true:e}:{false:e}));function _(e){return o.kk.fromValue(i.cZ,e).isScimBot()}const b=(0,l.AO)((e=>e.parent_table===s.bx&&"guest"===e.type&&f(e)?{true:e}:{false:e}));function h(e){if(!e||!(0,l.Kn)(e)||0===(0,l.Yd)(e).length)return!1;const{link_preview:t,synced_database:r}=e;return!0===t||!0===r}function k(e){return!(!e||!(0,l.Kn)(e)||0===(0,l.Yd)(e).length)&&!0===e.webhooks}function x(e){if(!e||!(0,l.Kn)(e)||0===(0,l.Yd)(e).length)return!1;const{synced_database:t}=e;return!0===t}function T(e){return(o.kk.isAnyModel(e)?e.getName():null==e?void 0:e.name)||"Unnamed Bot"}function M(e){return n.oA([e.name,"bot"]).join(" ")}},12137:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(72126);const o=function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return!n.hj(e)||n.i2(e)?o:e>r?r:e<t?t:e}},17397:(e,t,r)=>{r.d(t,{L9:()=>u,X0:()=>i});var n=r(97880),o=r(63143);const a={ABAP:!0,Agda:!0,Arduino:!0,Assembly:!0,Bash:!0,BASIC:!0,BNF:!0,C:!0,"C#":!0,"C++":!0,Clojure:!0,CoffeeScript:!0,Coq:!0,CSS:!0,Dart:!0,Dhall:!0,Diff:!0,Docker:!0,EBNF:!0,Elixir:!0,Elm:!0,Erlang:!0,"F#":!0,Flow:!0,Fortran:!0,Gherkin:!0,GLSL:!0,Go:!0,GraphQL:!0,Groovy:!0,Haskell:!0,HTML:!0,Idris:!0,Java:!0,JavaScript:!0,JSON:!0,Julia:!0,Kotlin:!0,LaTeX:!0,Less:!0,Lisp:!0,LiveScript:!0,"LLVM IR":!0,Lua:!0,Makefile:!0,Markdown:!0,Markup:!0,MATLAB:!0,Mathematica:!0,Mermaid:!0,Nix:!0,"Notion Formula":!0,"Objective-C":!0,OCaml:!0,Pascal:!0,Perl:!0,PHP:!0,"Plain Text":!0,PowerShell:!0,Prolog:!0,Protobuf:!0,PureScript:!0,Python:!0,R:!0,Racket:!0,Reason:!0,Ruby:!0,Rust:!0,Sass:!0,Scala:!0,Scheme:!0,Scss:!0,Shell:!0,Solidity:!0,SQL:!0,Swift:!0,TOML:!0,TypeScript:!0,"VB.Net":!0,Verilog:!0,VHDL:!0,"Visual Basic":!0,WebAssembly:!0,XML:!0,YAML:!0,"Java/C/C++/C#":!0},i=(0,n.Yd)(a),s=(0,o.m8)((0,n.qP)(a).map((e=>{let[t]=e;return[t.toLowerCase(),t]}))),u=(0,n.AO)((e=>(0,n.qg)(a,e)&&Boolean(a[e])?{true:e}:{false:e}));(0,n.AO)((e=>(0,n.qg)(s,e)&&Boolean(s[e])?{true:e}:{false:e}))},2032:(e,t,r)=>{r.d(t,{Ag:()=>O,Bf:()=>h,Ei:()=>te,FN:()=>re,Fw:()=>M,HK:()=>y,Mv:()=>oe,O4:()=>ee,OK:()=>Z,OV:()=>P,Pz:()=>J,Sy:()=>g,W6:()=>A,Ys:()=>N,_M:()=>v,dN:()=>ne,en:()=>C,f8:()=>T,gC:()=>I,gu:()=>R,iV:()=>Q,k$:()=>b,o5:()=>p,pI:()=>q,pK:()=>U,sl:()=>m,tD:()=>k,yd:()=>V});r(57658);var n=r(76205),o=r(30823),a=r(35011),i=r(99036),s=r(7057),u=r(53877),l=r(59753),c=r(97880),d=r(63143);const p=["count"];function m(e){return"count"===e}function y(e){return m(e.aggregator)}const f={count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0,show_unique:!0},g=(0,d.XP)(f);function v(e){return"string"==typeof e?Boolean(f[e]):"object"==typeof e?Boolean(f[e.operator]):void(0,c.t1)(e)}const _={sum:!0,average:!0,median:!0,min:!0,max:!0,range:!0},b=(0,d.XP)(_);function h(e){return"string"==typeof e?Boolean(_[e]):"object"==typeof e?Boolean(_[e.operator]):void(0,c.t1)(e)}const k=(0,d.XP)({unique:!0,count_values:!0}),x={earliest_date:!0,latest_date:!0,date_range:!0},T=(0,d.XP)(x);function M(e){return"string"==typeof e?Boolean(x[e]):"object"==typeof e?Boolean(x[e.operator]):void(0,c.t1)(e)}const w={count_per_group:!0,percent_per_group:!0},Z=(0,d.XP)(w);function C(e){return Boolean(w[e.operator])}const S={checked:!0,unchecked:!0,percent_checked:!0,percent_unchecked:!0},I=(0,d.XP)(S);function N(e){return"string"==typeof e?Boolean(S[e]):"object"==typeof e?Boolean(S[e.operator]):void(0,c.t1)(e)}function R(e){return C(e)?e.operator:e}function U(e){return!m(e.aggregator)}function P(e){return"string"==typeof e.aggregator?e.aggregator:"object"==typeof e.aggregator?e.aggregator.operator:void(0,c.t1)(e)}const D={text:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0},checkbox:{count:!0,checked:!0,unchecked:!0,percent_checked:!0,percent_unchecked:!0},select:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0},multi_select:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0},status:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0,count_per_group:!0,percent_per_group:!0},relation:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0},person:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0},location:{count:!0,count_values:!0,unique:!0},number:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0,sum:!0,average:!0,median:!0,min:!0,max:!0,range:!0},date:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0,earliest_date:!0,latest_date:!0,date_range:!0},file:{show_unique:!0,count:!0,count_values:!0,unique:!0,empty:!0,not_empty:!0,percent_empty:!0,percent_not_empty:!0},verification:{}};function O(e,t){return"string"==typeof t?Boolean(D[e][t]):"object"==typeof t?Boolean(D[e][t.operator]):void(0,c.t1)(t)}const E={count:()=>({type:"count",count:0}),count_values:()=>({type:"count_values",count:0}),empty:()=>({type:"empty",empty:0}),not_empty:()=>({type:"not_empty",filled:0}),unique:()=>({type:"unique",values:new Set}),show_unique:()=>({type:"show_unique",values:new Set}),percent_empty:()=>({type:"percent_empty",count:0,empty:0}),percent_not_empty:()=>({type:"percent_not_empty",count:0,filled:0}),sum:()=>({type:"sum",sum:0}),average:()=>({type:"average",count:0,sum:0}),median:()=>({type:"median",values:[]}),min:()=>({type:"min",min:void 0}),max:()=>({type:"max",max:void 0}),range:()=>({type:"range",min:void 0,max:void 0}),earliest_date:()=>({type:"earliest_date",min:void 0}),latest_date:()=>({type:"latest_date",max:void 0}),date_range:()=>({type:"date_range",min:void 0,max:void 0}),checked:()=>({type:"checked",checked:0}),unchecked:()=>({type:"unchecked",unchecked:0}),percent_checked:()=>({type:"percent_checked",count:0,checked:0}),percent_unchecked:()=>({type:"percent_unchecked",count:0,unchecked:0}),count_per_group:e=>{let{groupName:t}=e;return{type:"count_per_group",statusGroup:t,groupCount:0,total:0}},percent_per_group:e=>{let{groupName:t}=e;return{type:"percent_per_group",statusGroup:t,groupCount:0,total:0}}},F=((0,c.Yd)(E),{count:"number",count_values:"number",empty:"number",not_empty:"number",unique:"number",percent_empty:"number",percent_not_empty:"number",sum:"number",average:"number",median:"number",min:"number",max:"number",range:"number",checked:"number",unchecked:"number",percent_checked:"number",percent_unchecked:"number",earliest_date:"date",latest_date:"date",date_range:"date",show_unique:"number",count_per_group:"text",percent_per_group:"number"}),B={userId:void 0,userStartOfWeek:0};function A(e){return F[e]}function V(e){return"string"==typeof e?E[e]([]):"object"==typeof e?E[e.operator]({groupName:e.groupName}):void(0,c.t1)(e)}function L(e){const{state:t,filterValue:r}=e,n=H[t.type][r.type];n&&n(e)}function q(e){const{state:t,aggregation:r,collectionRequestContext:n}=e,{userTimeZone:a,intl:i}=n;if(y(r))L({filterValue:{type:"text",value:void 0},state:t,userTimeZone:a,intl:i});else if(U(r)){const{property:n}=r,{block:s,getRecordModel:u,collectionRequestContext:c,...d}=e,p=(0,o.FT)({...d,block:l.kk.fromBlock(s),getRecordModel:u,property:n,collectionRequestContext:{...c,depth:c.depth+1}});for(const e of p)"verification"!==e.type&&L({filterValue:e,state:t,userTimeZone:a,intl:i})}}function j(e){e.state.count+=1}function $(e){(0,n.nS)({filter:{operator:"is_empty"},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue)&&(e.state.empty+=1)}function G(e){(0,n.nS)({filter:{operator:"is_not_empty"},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue)&&(e.state.filled+=1)}function Y(e){const t=(0,n.nS)({filter:{operator:"is_empty"},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue);e.state.count+=1,t&&(e.state.empty+=1)}function z(e){const t=(0,n.nS)({filter:{operator:"is_not_empty"},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue);e.state.count+=1,t&&(e.state.filled+=1)}const W={number:e=>{const t=e.filterValue;void 0===t.value||isNaN(t.value)||e.state.values.add(t.value.toString())},text:e=>{const t=e.filterValue;void 0!==t.value&&t.value.length>0&&e.state.values.add(t.value)},select:e=>{const t=e.filterValue;void 0!==t.value&&e.state.values.add(t.value)},multi_select:e=>{const t=e.filterValue;if(void 0!==t.value)for(const r of t.value)e.state.values.add(r)},status:e=>{const t=e.filterValue;void 0!==t.option&&e.state.values.add(t.option)},relation:e=>{const t=e.filterValue;if(void 0!==t.value)for(const r of t.value)e.state.values.add(r.id)},person:e=>{const t=e.filterValue;if(void 0!==t.value)for(const r of t.value)e.state.values.add(r.id)},location:e=>{const t=e.filterValue;void 0!==t.value&&e.state.values.add(t.value.id)},date:e=>{const t=e.filterValue;void 0!==t.value&&e.state.values.add(s.ZV({allowRelativeDates:!1,value:t.value,userTimeZone:e.userTimeZone,intl:e.intl}))},file:e=>{const t=e.filterValue;if(void 0!==t.value)for(const r of t.value)e.state.values.add(r)}},H={count:{number:j,text:j,select:j,multi_select:j,status:j,relation:j,person:j,date:j,file:j,location:j,checkbox:j},count_values:{number:e=>{void 0!==e.filterValue.value&&(e.state.count+=1)},text:e=>{const t=e.filterValue;void 0!==t.value&&t.value.length>0&&(e.state.count+=1)},select:e=>{void 0!==e.filterValue.value&&(e.state.count+=1)},multi_select:e=>{const t=e.filterValue;void 0!==t.value&&(e.state.count+=t.value.length)},status:e=>{void 0!==e.filterValue.option&&(e.state.count+=1)},relation:e=>{const t=e.filterValue;void 0!==t.value&&(e.state.count+=t.value.length)},person:e=>{const t=e.filterValue;void 0!==t.value&&(e.state.count+=t.value.length)},date:e=>{void 0!==e.filterValue.value&&(e.state.count+=1)},file:e=>{const t=e.filterValue;void 0!==t.value&&(e.state.count+=t.value.length)},location:e=>{void 0!==e.filterValue.value&&(e.state.count+=1)}},show_unique:W,unique:W,empty:{number:$,text:$,select:$,multi_select:$,status:$,relation:$,person:$,date:$,file:$},not_empty:{number:G,text:G,select:G,multi_select:G,status:G,relation:G,person:G,date:G,file:G},percent_empty:{number:Y,text:Y,select:Y,multi_select:Y,status:Y,relation:Y,person:Y,date:Y,file:Y},percent_not_empty:{number:z,text:z,select:z,multi_select:z,status:z,relation:z,person:z,date:z,file:z},sum:{number:e=>{const t=e.filterValue.value;void 0===t||isNaN(t)||(e.state.sum+=t)}},average:{number:e=>{const t=e.filterValue.value;void 0===t||isNaN(t)||(e.state.count+=1,e.state.sum+=t)}},median:{number:e=>{const t=e.filterValue.value;void 0===t||isNaN(t)||e.state.values.push(t)}},min:{number:e=>{const t=e.filterValue.value;void 0===t||isNaN(t)||(void 0===e.state.min||t<e.state.min)&&(e.state.min=t)}},max:{number:e=>{const t=e.filterValue.value;void 0===t||isNaN(t)||(void 0===e.state.max||t>e.state.max)&&(e.state.max=t)}},range:{number:e=>{const t=e.filterValue.value;void 0===t||isNaN(t)||((void 0===e.state.min||t<e.state.min)&&(e.state.min=t),(void 0===e.state.max||t>e.state.max)&&(e.state.max=t))}},checked:{checkbox:function(e){(0,n.nS)({filter:{operator:"checkbox_is",value:{type:"exact",value:!0}},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue)&&(e.state.checked+=1)}},unchecked:{checkbox:function(e){(0,n.nS)({filter:{operator:"checkbox_is",value:{type:"exact",value:!1}},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue)&&(e.state.unchecked+=1)}},percent_checked:{checkbox:function(e){const t=(0,n.nS)({filter:{operator:"checkbox_is",value:{type:"exact",value:!0}},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue);e.state.count+=1,t&&(e.state.checked+=1)}},percent_unchecked:{checkbox:function(e){const t=(0,n.nS)({filter:{operator:"checkbox_is",value:{type:"exact",value:!1}},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue);e.state.count+=1,t&&(e.state.unchecked+=1)}},date_range:{date:e=>{const t=e.filterValue.value,r=e.state;if(void 0!==t){const n=u.NK(t,e.userTimeZone);(void 0===r.min||n.start<r.min)&&(r.min=n.start);const o=n.end??n.start;(void 0===r.max||r.max<o)&&(r.max=o)}}},earliest_date:{date:e=>{const t=e.filterValue.value,r=e.state;if(void 0!==t){const n=u.NK(t,e.userTimeZone);(void 0===r.min||n.start<r.min)&&(r.min=n.start)}}},latest_date:{date:e=>{const t=e.filterValue.value,r=e.state;if(void 0!==t){const n=u.NK(t,e.userTimeZone),o=n.end??n.start;(void 0===r.max||r.max<o)&&(r.max=o)}}},count_per_group:{status:function(e){(0,n.nS)({filter:{operator:"status_is",value:{type:"is_group",value:e.state.statusGroup}},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue)&&(e.state.groupCount+=1),e.state.total+=1}},percent_per_group:{status:function(e){(0,n.nS)({filter:{operator:"status_is",value:{type:"is_group",value:e.state.statusGroup}},...B,...e,filterType:e.filterValue.type,relativeVariableValues:void 0})(e.filterValue)&&(e.state.groupCount+=1),e.state.total+=1}}},K={count:e=>({type:"number",value:e.count}),count_values:e=>({type:"number",value:e.count}),empty:e=>({type:"number",value:e.empty}),not_empty:e=>({type:"number",value:e.filled}),unique:e=>({type:"number",value:e.values.size}),show_unique:e=>({type:"number",value:e.values.size}),percent_empty:e=>({type:"number",value:0===e.count?void 0:e.empty/e.count}),percent_not_empty:e=>({type:"number",value:0===e.count?void 0:e.filled/e.count}),sum:e=>({type:"number",value:e.sum}),average:e=>({type:"number",value:0===e.count?void 0:e.sum/e.count}),median:e=>({type:"number",value:X(e.values)}),min:e=>({type:"number",value:e.min}),max:e=>({type:"number",value:e.max}),range:e=>({type:"number",value:void 0!==e.max&&void 0!==e.min?e.max-e.min:void 0}),checked:e=>({type:"number",value:e.checked}),unchecked:e=>({type:"number",value:e.unchecked}),percent_checked:e=>({type:"number",value:0===e.count?void 0:e.checked/e.count}),percent_unchecked:e=>({type:"number",value:0===e.count?void 0:e.unchecked/e.count}),earliest_date:e=>({type:"date",value:e.min?u.LH(e.min):void 0}),latest_date:e=>({type:"date",value:e.max?u.LH(e.max):void 0}),date_range:e=>{if(void 0===e.max||void 0===e.min)return{type:"date",value:void 0};return{type:"date",value:u.iC(e.min.valueOf(),e.max.valueOf(),e.min.zoneName)}},count_per_group:e=>({type:"text",value:`${e.groupCount}/${e.total}`}),percent_per_group:e=>({type:"number",value:0===e.total?void 0:e.groupCount/e.total})};function J(e){return(0,K[e.type])(e)}function X(e){if(e.sort((function(e,t){return e-t})),0===e.length)return 0;var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}function Q(e){return!(oe(e)||te(e)||re(e)||i.Eu.includes(e.type))}function ee(e){return"number"===e.type||"number"===(0,a.mm)(e)||"rollup"===e.type&&e.aggregation&&"number"===A(R(e.aggregation))}function te(e){return"status"===e.type}function re(e){return"location"===e.type}function ne(e){return(0,i.Lt)(e)||"date"===(0,a.mm)(e)||"rollup"===e.type&&e.aggregation&&"date"===A(R(e.aggregation))}function oe(e){return"checkbox"===e.type||"checkbox"===(0,a.mm)(e)}},90559:(e,t,r)=>{r.d(t,{$z:()=>c,FT:()=>l,Y7:()=>s,cj:()=>u,wf:()=>i});var n=r(99036),o=r(72126),a=r(24836);function i(e,t){return!o.hj(t)||isNaN(t)?"":e?`${e}-${t}`:`${t}`}function s(e){const{spaceId:t}=e;return{table:"record_counter",id:(0,a.Sr)(e),spaceId:t}}function u(e){return l(e).length>0}function l(e){return[...c((0,n.oC)({id:e.id,format:e.format,space_id:e.space_id,schema:e.schema})),...c((0,n.Dv)({deleted_schema:e.deleted_schema}))]}function c(e){return Object.entries(e).filter((e=>{let[t,r]=e;return r&&"auto_increment_id"===r.type})).map((e=>{let[t]=e;return t}))}},68497:(e,t,r)=>{r.d(t,{L:()=>k});var n=r(90559),o=r(35011),a=r(99036),i=r(80951),s=r(34299),u=r(56373),l=r(40506),c=r(7057),d=r(53877),p=r(43593),m=r(78106),y=r(84682),f=r(72126),g=r(59753),v=r(4615),_=r(82883),b=r(6287),h=r(63143);function k(e){const{schema:t,property:r,block:n}=e,o=t[r];if(!o)return;const a=i.wS(n,r);return(0,T[o.type])({textValue:a,propertySchema:o,...e})}function x(e){const{textValue:t,getRecordModel:r,collectionRequestContext:n}=e,{userTimeZone:o,intl:a}=n;return(0,_.X)({textValue:t,getRecordModel:r,userTimeZone:o,intl:a})}const T={title:x,text:x,select:e=>{const{textValue:t,propertySchema:r}=e,n=r.options||[];return i.Sj(t,n)},multi_select:e=>{const{textValue:t,propertySchema:r}=e,n=r.options||[],o=i.uP(t,n);return o.sort(),o.join(",")},status:e=>{const{textValue:t,propertySchema:r}=e;return i.ZG(t,r)},relation:e=>{let{textValue:t,getRecordModel:r,propertySchema:n}=e;if("relation"!==n.type)return"";const o=i.j$({relationValue:i.rq(t),getRecordModel:r,propertySchema:n}).map((e=>`https://www.notion.so/${(0,v.cj)(e.id)}`));return o.sort(),o.join(", ")},rollup:e=>s.kJ({...e,collectionRequestContext:{...e.collectionRequestContext,visitedProperties:new Set}}),url:e=>{let{textValue:t}=e;return i.zB(t)},email:e=>{let{textValue:t}=e;return i.zB(t)},phone_number:e=>{let{textValue:t}=e;return i.zB(t)},checkbox:e=>{let{textValue:t}=e;return i.Ml(t)?a.bx:a.HC},person:e=>{const{textValue:t,getRecordModel:r,propertySchema:n,block:o,collectionRequestContext:a}=e,{intl:s}=a,u=g.kk.fromBlock(o),l=i.DW({textValue:t,propertySchema:n,blockCreatorPointer:u.getCreatedByPointer()}),c=f.oA(l.map((e=>{const t=r(e);return null==t?void 0:t.getDisplayName(s)})));return c.sort(),c.join(",")},number:e=>{let{textValue:t}=e;const r=i.VY(t);if(void 0!==r)return r.toString()},auto_increment_id:e=>{let{textValue:t,block:r,getRecordModel:o}=e;const a=i.ah(t);if(void 0!==a){const e=g.kk.fromBlock(r),t=e.getParentTable();if(t!==b.v)return;const i=o((0,u.We)({spaceId:e.getSpaceId(),parentTable:t,parentId:e.getParentId()}));return(0,n.wf)(null==i?void 0:i.getRecordKey(),a)}},date:e=>{let{textValue:t,propertySchema:r,collectionRequestContext:n}=e;const{userTimeZone:o,intl:a}=n,s=i.Gl(t),{date_format:u,time_format:l}=r;if(s)return(0,c.ZV)({allowRelativeDates:!1,value:s,date_format:u,time_format:l,userTimeZone:o,intl:a})},file:e=>{const t=i.g(e.textValue).map((t=>{if(e.exportedFilePaths&&e.secureFileS3Url&&e.secureFileS3UrlV2&&p.E$(t.url,[e.secureFileS3Url,e.secureFileS3UrlV2])){const e=p.lF(t.url);if(e)return e}return t.url}));return t.sort(),t.join(",")},formula:e=>{const{property:t,schema:r,block:n,getRecordModel:i,collectionRequestContext:s}=e,{userTimeZone:u,intl:d,depth:p,formulaTimeoutTimestampMs:f,logFormulaTimeoutFn:g,resultCache:v}=s,b=r[t];if("v2"===b.version){if(!b.formula2)return;const e=(0,o.EC)({block:n,property:t,formulaCode:b.formula2.code,getRecordModel:i,intl:d,userTimeZone:u,depth:p,visitedProperties:new Set,resultCache:v,formulaTimeoutTimestampMs:f,logFormulaTimeoutFn:g});if(!e)return;const r=(0,m.j4)(e);return(0,_.X)({textValue:r,getRecordModel:i,userTimeZone:u,intl:d})}{const e=(0,y.AH)({schema:r,property:t,block:n,getRecordModel:i,collectionRequestContext:{...s,visitedProperties:new Set}});return"boolean"==typeof e?e?a.bx:a.HC:(0,h.hj)(e)?e.toString():l.U3(e)?(0,c.ZV)({allowRelativeDates:!1,value:e,userTimeZone:u,intl:d}):e}},created_time:e=>{const{block:t,collectionRequestContext:r}=e,{userTimeZone:n,intl:o}=r,a=g.kk.fromBlock(t);if(a.getCreatedTime())return(0,c.ZV)({allowRelativeDates:!1,value:d.CQ(a.getCreatedTime(),n),userTimeZone:n,intl:o})},last_edited_time:e=>{const{block:t,collectionRequestContext:r}=e,{userTimeZone:n,intl:o}=r,a=g.kk.fromBlock(t);if(a.getLastEditedTime())return(0,c.ZV)({allowRelativeDates:!1,value:d.CQ(a.getLastEditedTime(),n),userTimeZone:n,intl:o})},created_by:e=>{const{block:t,getRecordModel:r,collectionRequestContext:n}=e,{intl:o}=n,a=t.getCreatedByPointer(),i=a&&r(a);return null==i?void 0:i.getDisplayName(o)},last_edited_by:e=>{const{block:t,getRecordModel:r,collectionRequestContext:n}=e,{intl:o}=n,a=t.getLastEditedByPointer(),i=a&&r(a);return null==i?void 0:i.getDisplayName(o)},last_visited_time:()=>"",button:()=>"",location:()=>"",verification:()=>{}}},76205:(e,t,r)=>{r.d(t,{$1:()=>je,A9:()=>ae,CA:()=>Xe,Fo:()=>nt,Gb:()=>ee,J5:()=>ut,Js:()=>A,Jw:()=>Ze,Ly:()=>w,Mm:()=>qe,Mp:()=>j,NU:()=>F,OH:()=>mt,Oo:()=>pt,R8:()=>J,Rf:()=>Ue,SH:()=>lt,T:()=>ye,TI:()=>Ee,TQ:()=>U,TX:()=>ge,UG:()=>fe,Uz:()=>Ae,W6:()=>xe,XA:()=>S,Y1:()=>Ye,YO:()=>z,ZB:()=>Ne,_N:()=>he,aN:()=>Le,a_:()=>Pe,bS:()=>ue,c3:()=>ve,dx:()=>P,e:()=>K,eX:()=>ft,fI:()=>st,fl:()=>Te,gE:()=>pe,h6:()=>ne,hh:()=>Fe,je:()=>rt,kk:()=>yt,l$:()=>ot,mg:()=>I,mv:()=>ke,nS:()=>Je,og:()=>Qe,ot:()=>x,q:()=>Ge,qC:()=>D,r2:()=>q,s9:()=>gt,sw:()=>tt,tO:()=>oe,u0:()=>$,v8:()=>le,vA:()=>Ve,vR:()=>Ie,wB:()=>B,xm:()=>Oe,yI:()=>ct});r(57658),r(21703);var n=r(59308),o=r(2032),a=r(30823),i=r(35011),s=r(14714),u=r(99036),l=r(80951),c=r(43690),d=r(34299),p=r(16691),m=r(53877),y=r(78106),f=r(84682),g=r(72126),v=r(82883),_=(r(21202),r(19889)),b=r(70203),h=r(97880),k=r(63143);const x="50vh",T={string_is:!0,string_is_not:!0,string_contains:!0,string_does_not_contain:!0,string_starts_with:!0,string_ends_with:!0,is_empty:!0,is_not_empty:!0,string_has_no_alphabet_prefix:!1},M=(0,k.XP)(T).filter((e=>T[e]));function w(e){return t=e.operator,T.hasOwnProperty(t);var t}const Z={checkbox_is:!0,checkbox_is_not:!0},C=(0,k.XP)(Z);function S(e){return t=e.operator,Boolean(Z[t]);var t}function I(e){return Array.isArray(e.value)?e.value:e.value.value?[e.value]:[]}const N={enum_is:!0,enum_is_not:!0,is_empty:!0,is_not_empty:!0},R=(0,k.XP)(N);function U(e){return"date_is_within"===e.operator||"date_is_relative_to"===e.operator}function P(e){return t=e.operator,Boolean(N[t]);var t}function D(e){return Array.isArray(e.value)?e.value:e.value.value?[e.value]:[]}const O={enum_contains:!0,enum_does_not_contain:!0,is_empty:!0,is_not_empty:!0},E=(0,k.XP)(O);function F(e){return t=e.operator,Boolean(O[t]);var t}function B(e){return ct(e.value)?[]:Array.isArray(e.value)?e.value:e.value.value?[e.value]:[]}function A(e,t){const r=e.groups??[],n=e.options??[],o=[];for(const a of t)if("is_group"===a.type){const e=r.find((e=>e.name===a.value));if(e){const t=n.filter((t=>{var r;return null===(r=e.optionIds)||void 0===r?void 0:r.includes(t.id)}));o.push(...t.map((e=>({type:"exact",value:e.value}))))}}else o.push({type:"exact",value:a.value});return o}const V={status_is:!0,status_is_not:!0,is_empty:!0,is_not_empty:!0},L=(0,k.XP)(V);function q(e){return Boolean(V[e.operator])}function j(e){return t=e.operator,Boolean(G[t]);var t}function $(e){return Array.isArray(e.value)?e.value:e.value.value?[e.value]:[]}const G={location_is:!0,location_is_not:!0},Y=(0,k.XP)(G);function z(e){return Array.isArray(e.value)?e.value:e.value.value?[e.value]:[]}const W={relation_contains:!0,relation_does_not_contain:!0,is_empty:!0,is_not_empty:!0},H=(0,k.XP)(W);function K(e){return t=e.operator,Boolean(W[t]);var t}function J(e){return Array.isArray(e.value)?e.value:e.value.value?[e.value]:[]}const X={person_contains:!0,person_does_not_contain:!0,is_empty:!0,is_not_empty:!0},Q=(0,k.XP)(X);function ee(e){return t=e.operator,Boolean(X[t]);var t}const te={number_equals:!0,number_does_not_equal:!0,number_greater_than:!0,number_less_than:!0,number_greater_than_or_equal_to:!0,number_less_than_or_equal_to:!0,is_empty:!0,is_not_empty:!0},re=(0,k.XP)(te);function ne(e){return t=e.operator,Boolean(te[t]);var t}const oe=[...(0,k.VO)({today:{type:"relative",value:"today"},tomorrow:{type:"relative",value:"tomorrow"},yesterday:{type:"relative",value:"yesterday"},one_week_ago:{type:"relative",value:"one_week_ago"},one_week_from_now:{type:"relative",value:"one_week_from_now"},one_month_ago:{type:"relative",value:"one_month_ago"},one_month_from_now:{type:"relative",value:"one_month_from_now"}}),{type:"exact",value:void 0}],ae={this_week:{type:"relative",value:"surrounding",unit:"week"},the_past_week:{type:"relative",value:"custom",direction:"past",count:1,unit:"week"},the_past_month:{type:"relative",value:"custom",direction:"past",count:1,unit:"month"},the_past_year:{type:"relative",value:"custom",direction:"past",count:1,unit:"year"},the_next_week:{type:"relative",value:"custom",direction:"future",count:1,unit:"week"},the_next_month:{type:"relative",value:"custom",direction:"future",count:1,unit:"month"},the_next_year:{type:"relative",value:"custom",direction:"future",count:1,unit:"year"}},ie=[...Object.values(ae),{type:"exact",value:void 0}],se=[{type:"relative",value:"custom",direction:"future",count:2,unit:"week"},{type:"exact",value:void 0}];function ue(){return ie}function le(){return se}const ce={date_is:!0,date_is_before:!0,date_is_after:!0,date_is_on_or_before:!0,date_is_on_or_after:!0,date_is_within:!0,date_is_relative_to:!0,is_empty:!0,is_not_empty:!0},de=(0,k.XP)(ce);function pe(e){return t=e.operator,Boolean(ce[t]);var t}const me={start_date:!1,end_date:!0},ye=(0,k.XP)(me);function fe(e){return me[e]}function ge(e){const t=e.use_end;return void 0===t||!1===t?"start_date":!0===t?"end_date":void(0,h.t1)(t)}function ve(e){return"date"===e.type||"formula"===e.type&&"date"===(0,i.mm)(e)||"rollup"===e.type&&void 0!==e.aggregation&&"date_range"===e.aggregation}const _e={is_empty:!0,is_not_empty:!0},be=(0,k.XP)(_e);function he(e){return Boolean(_e[e])}function ke(e){return he(e.operator)}const xe=ke;function Te(e){return Array.isArray(e.value)?e.value:e.value.value?[e.value]:[]}const Me={verification_is:!0,verification_is_not:!0},we=(0,k.XP)(Me);function Ze(e){return t=e.operator,Boolean(Me[t]);var t}const Ce={text:w,number:ne,checkbox:S,select:P,multi_select:F,status:q,relation:K,person:ee,date:pe,file:xe,location:j,verification:Ze},Se={string_is:!0,string_is_not:!0,string_contains:!0,string_does_not_contain:!0,string_starts_with:!0,string_ends_with:!0,checkbox_is:!0,checkbox_is_not:!0,enum_is:!0,enum_is_not:!0,enum_contains:!0,enum_does_not_contain:!0,status_is:!0,status_is_not:!0,relation_contains:!0,relation_does_not_contain:!0,person_contains:!0,person_does_not_contain:!0,number_equals:!0,number_does_not_equal:!0,number_greater_than:!0,number_less_than:!0,number_greater_than_or_equal_to:!0,number_less_than_or_equal_to:!0,date_is:!0,date_is_before:!0,date_is_after:!0,date_is_on_or_before:!0,date_is_on_or_after:!0,date_is_within:!0,date_is_relative_to:!0,location_is:!0,location_is_not:!0,verification_is:!0,verification_is_not:!0};function Ie(e){return Boolean(Se[e.operator])}function Ne(e,t){return e in Ce&&Ce[e](t)}const Re={any:!0,none:!0,every:!0},Ue=(0,k.XP)(Re);function Pe(e){return Boolean(Re[e.operator])}const De={text:M,checkbox:C,select:R,multi_select:E,status:L,relation:H,person:Q,number:re,date:de,file:be,location:Y,verification:we};function Oe(e){return De[e]}const Ee={operator:"and",filters:[{property:"title",filter:{operator:"string_contains",value:{type:"exact",value:void 0}}}]},Fe={operator:"and",filters:[]},Be={and:!0,or:!0},Ae=(0,k.XP)(Be);function Ve(e){return"operator"in e&&Be[e.operator]}function Le(e){return"property"in e&&"string"==typeof e.property}function qe(e){return"timestamp"in e&&"string"==typeof e.timestamp}function je(e){return 0===(e.filters||[]).length}const $e=()=>!1;function Ge(e){const{context:t,filter:r}=e,{userId:n,userTimeZone:o,userStartOfWeek:a}=t,i=r.operator,s=r.filters||[],u=s.map((e=>{let r;return Le(e)?r=Ye({property:e.property,filter:e.filter,context:t,depth:0}):Ve(e)?r=Ge({context:t,filter:e}):qe(e)?r=Ke({filter:e,userId:n,userTimeZone:o,userStartOfWeek:a}):(0,h.t1)(e),{shortCircuitOthers:0,latency:0,processed:0,originalFilter:e,compiledFilter:r}}));let l=0;if("or"===i||"and"===i)return e=>{l++,(l<100&&l%25==24||l%100==99)&&(s.length<=1||u.sort(((e,t)=>{const r=(e.shortCircuitOthers+100)/(e.processed+100),n=(t.shortCircuitOthers+100)/(t.processed+100);return(e.latency+100)/(e.processed+100)/r-(t.latency+100)/(t.processed+100)/n})));let t=!0;for(const r of u){const n=Date.now();if(t=r.compiledFilter(e),r.latency+=Date.now()-n,r.processed++,"or"===i&&t)return r.shortCircuitOthers++,t;if("and"===i&&!t)return r.shortCircuitOthers++,t}return t};(0,h.t1)(i)}function Ye(e){const{property:t,filter:r,context:n,depth:i}=e,{schema:s,userId:u,userTimeZone:c,intl:p,optimizer:m,userStartOfWeek:y,relativeVariableResult:f}=n,g=s[t];if(!g)return $e;let v;if("relation"===g.type&&f&&g.collection_pointer){v=f[g.collection_pointer.id]}if("formula"===g.type)return ze({context:n,filter:r,property:t,propertySchema:g,depth:i});if("rollup"===g.type)return function(e){const{context:t,property:r,filter:n,propertySchema:a,depth:i}=e,{schema:s,userId:u,userTimeZone:l,userStartOfWeek:c,relativeVariableResult:p,intl:m,optimizer:y}=t;if(a.aggregation&&"show_unique"!==a.aggregation){let e;if((0,o._M)(a.aggregation)||(0,o.Bf)(a.aggregation)||(0,o.sl)(a.aggregation)||(0,o.Ys)(a.aggregation)){if(!ne(n))return $e;e="number"}else if((0,o.Fw)(a.aggregation)){if(!pe(n))return $e;e="date"}else if((0,o.en)(a.aggregation)){if(!ne(n)||!w(n))return $e;e="count_per_group"===a.aggregation.operator?"text":"number"}else(0,h.t1)(a.aggregation);const t=Je({filter:n,filterType:e,userId:u,userTimeZone:l,userStartOfWeek:c,relativeVariableValues:void 0});return n=>{const o=(0,d.O0)({property:r,schema:s,...n,collectionRequestContext:{userId:void 0,userTimeZone:l,intl:m,depth:i,visitedProperties:new Set,resultCache:n.resultCache,formulaTimeoutTimestampMs:n.formulaTimeoutTimestampMs,logFormulaTimeoutFn:n.logFormulaTimeoutFn}});return!!o&&(o.type===e&&t(o))}}if(!Pe(n))return $e;let f;const g=e=>{const t=(0,d.gT)({property:r,schema:s,getRecordModel:e});return t?Pe(n.subfilter)?$e:Ye({filter:n.subfilter,property:t.targetProperty,context:{schema:t.targetCollectionSchema,userId:u,userTimeZone:l,userStartOfWeek:c,intl:m,optimizer:y,relativeVariableResult:p},depth:i+1}):$e};return e=>{const{block:t,getRecordModel:o,formulaTimeoutTimestampMs:a,logFormulaTimeoutFn:i}=e,u=(0,d.I_)({property:r,schema:s,block:t,getRecordModel:o}),l=f??=g(o);return it(n.operator,u,(t=>l({block:t,getRecordModel:o,propertyMapping:void 0,formulaTimeoutTimestampMs:a,logFormulaTimeoutFn:i,resultCache:e.resultCache})))}}({context:n,filter:r,property:t,propertySchema:g,depth:i});if("button"===g.type)return $e;const _=(0,a.vc)(g.type);if(!Ne(_,r))return $e;const b=Je({filter:r,filterType:_,userId:u,userTimeZone:c,userStartOfWeek:y,relativeVariableValues:v}),k=e=>{const{block:r,getRecordModel:n,propertyMapping:o,formulaTimeoutTimestampMs:i,logFormulaTimeoutFn:s,resultCache:d}=e,m=(null==o?void 0:o[t])??t;let y;y="title"===g.type&&"collection_view_page"===r.getType()?(0,l.iT)(r,n):(0,l.wS)(r,m,n);const f=(0,a.ML)({filterValueType:_,block:r,propertySchema:g,propertyValue:y,getRecordModel:n,collectionRequestContext:{userId:u,userTimeZone:c,intl:p,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:i,logFormulaTimeoutFn:s,resultCache:d}});return b(f)};if(m){const e={schema:s,property:t,userId:u,userTimeZone:c,intl:p,basicFilter:r,compiledBasicFilter:b,compiledFilter:k},n="function"==typeof m?m:null==m?void 0:m[_],o=null==n?void 0:n(e);if(o)return o}return k}function ze(e){return"v2"===e.propertySchema.version?function(e){const{propertySchema:t,filter:r,context:n,property:o,depth:a}=e,{userId:s,userTimeZone:u,userStartOfWeek:l,intl:c}=n;if(!t.formula2)return $e;const d=t.formula2.result_type;if("array"===d.type){const e=(0,y.B8)(d);if("array"===e.type||"select"===e.type||"function"===e.type)return $e;const s="block"===e.type||"unknown"===e.type?"text":e.type;return function(e){const{propertySchema:t,filter:r,context:n,property:o,subfilterType:a}=e,{userId:s,userTimeZone:u,intl:l,userStartOfWeek:c}=n;if(!Pe(r))return $e;let d;const p=()=>Pe(r.subfilter)?()=>!1:Je({filter:r.subfilter,userId:s,userTimeZone:u,userStartOfWeek:c,relativeVariableValues:void 0,filterType:a});return n=>{if(!t.formula2)return!1;const{block:s,getRecordModel:c,resultCache:m}=n,y=(0,i.EC)({block:s,property:o,formulaCode:t.formula2.code,getRecordModel:c,intl:l,userTimeZone:u,depth:e.depth,visitedProperties:new Set,resultCache:m});if(!y||"array"!==y.type)return!1;if(!(0,i.of)(y)&&!w(r.subfilter))return!1;const f=d??=p();return!!Ne(a,r.subfilter)&&it(r.operator,y.values,(e=>{if("array"===e.type||"undefined"===e.type)return!1;const t=He(e,a,c,l,u);return void 0!==t&&f(t)}))}}({context:n,filter:r,property:o,propertySchema:t,depth:a,subfilterType:s})}const p="block"===d.type||"unknown"===d.type?"text":d.type;if(!Ne(p,r))return $e;const m=Je({filter:r,userId:s,userTimeZone:u,userStartOfWeek:l,filterType:p,relativeVariableValues:void 0});return n=>{if(!t.formula2)return!1;const a=(0,i.EC)({block:n.block,property:o,formulaCode:t.formula2.code,getRecordModel:n.getRecordModel,intl:c,userTimeZone:u,depth:e.depth,visitedProperties:new Set,formulaTimeoutTimestampMs:n.formulaTimeoutTimestampMs,logFormulaTimeoutFn:n.logFormulaTimeoutFn,resultCache:n.resultCache});if("is_empty"===r.operator)return We(a);if("is_not_empty"===r.operator)return!We(a);if(!a||"undefined"===a.type)return!1;const{getRecordModel:s}=n,l=He(a,p,s,c,u);return!!l&&m(l)}}(e):function(e){const{propertySchema:t,filter:r,context:n,property:o,depth:a}=e,{userId:i,userTimeZone:s,userStartOfWeek:u,intl:l,schema:c}=n;if(!t.formula)return $e;const d=t.formula.result_type;if(!d)return $e;if(!Ne(d,r))return $e;const p=Je({filter:r,userId:i,userTimeZone:s,userStartOfWeek:u,filterType:d,relativeVariableValues:void 0});return e=>{const t=(0,f.AH)({...e,property:o,schema:c,collectionRequestContext:{userId:void 0,userTimeZone:s,depth:a,intl:l,resultCache:e.resultCache,visitedProperties:new Set,formulaTimeoutTimestampMs:e.formulaTimeoutTimestampMs,logFormulaTimeoutFn:e.logFormulaTimeoutFn}});return p({type:d,value:t})}}(e)}function We(e){return!e||"undefined"===e.type||"array"===e.type&&0===e.values.length||"text"===e.type&&0===(0,b.eeV)(e.value).length}function He(e,t,r,n,o){let a=e.type;if("undefined"!==a){if("block"===a&&(a="text"),"text"===t||"text"===e.type)return{type:"text",value:(0,v.X)({textValue:(0,y.j4)(e),getRecordModel:r,intl:n,userTimeZone:o})};if("block"===e.type){const t=r(e.value);if(!t)return;return{type:"text",value:t.getRenderTitle({getRecordModel:r,intl:n,userTimeZone:o})}}return"person"===e.type?{type:"person",value:[e.value]}:"number"===e.type?{type:"number",value:e.value}:"date"===e.type?{type:"date",value:e.value}:"checkbox"===e.type?{type:"checkbox",value:e.value}:void("undefined"!==e.type&&"array"!==e.type&&(0,h.t1)(e))}}function Ke(e){const{filter:t,userId:r,userTimeZone:n,userStartOfWeek:o}=e,a=Je({filter:t.filter,userId:r,userTimeZone:n,userStartOfWeek:o,filterType:"date",relativeVariableValues:void 0});return e=>{const r=(0,f.HK)({timestampType:t.timestamp,block:e.block,userTimeZone:n});return a({type:"date",value:r})}}function Je(e){return(0,at[e.filterType])(e)}function Xe(e){const{filter:t}=e,r=Ie(t)?B(t):[],n=g.jj(g.oA(r.filter((e=>"is_group"===e.type)).map((e=>{var t;return null===(t=e.value)||void 0===t?void 0:t.toLowerCase()})))),o=r.filter((e=>"is_option"===e.type)).map((e=>{var t;return null===(t=e.value)||void 0===t?void 0:t.toLowerCase()}));return e=>{const{option:a,group:i}=e;if("is_empty"===t.operator)return void 0===a;if("is_not_empty"===t.operator)return void 0!==a;if(0===r.length)return!0;const s=Boolean(i&&n.includes(i.toLowerCase())),u=Boolean(a&&o.includes(a.toLowerCase()));return"status_is"===t.operator?s||u:"status_is_not"===t.operator?!s&&!u:void(0,h.t1)(t.operator)}}function Qe(e){const{operatorValue:t,userTimeZone:r}=e;if("exact"===t.type){const e=t.value;if(!(0,h.$K)(e))return;const{start:n}=m.NK(e,r);return n.startOf("day").valueOf()}return et({operatorValue:t,userTimeZone:r})}function et(e){const{operatorValue:t,userTimeZone:r}=e;return"today"===t.value?m.Uu(r).valueOf():"tomorrow"===t.value?m.Uu(r).plus({days:1}).valueOf():"yesterday"===t.value?m.Uu(r).minus({days:1}).valueOf():"one_week_from_now"===t.value?m.Uu(r).plus({weeks:1}).valueOf():"one_week_ago"===t.value?m.Uu(r).minus({weeks:1}).valueOf():"one_month_from_now"===t.value?m.Uu(r).plus({months:1}).valueOf():"one_month_ago"===t.value?m.Uu(r).minus({months:1}).valueOf():void(0,h.t1)(t)}function tt(e){const{operatorValue:t,userTimeZone:r,userStartOfWeek:n}=e;if("relative"===t.type&&"surrounding"===t.value){const{start:e,end:o}=rt(t.unit,r,n);return{start:e.valueOf(),end:o.valueOf()}}if("relative"===t.type&&"custom"===t.value){const e=nt(t.direction,t.count,t.unit,r),n=m.kT({timezone:r}).minus({days:1}).valueOf();switch(t.direction){case"future":return{start:n,end:e.valueOf()};case"past":return"past"!==t.direction||"month"!==t.unit&&"week"!==t.unit?{start:e.valueOf(),end:Date.now()}:{start:e.minus({day:1}).valueOf(),end:Date.now()};default:(0,h.t1)(t.direction)}}else{if("relative"===t.type)return function(e,t){if("this_week"===e.value)return{start:m.kT({timezone:t}).startOf("week").valueOf(),end:m.kT({timezone:t}).endOf("week").valueOf()};if("the_past_week"===e.value)return{start:m.Uu(t).minus({days:8}).valueOf(),end:m.kT({timezone:t}).valueOf()};if("the_past_month"===e.value)return{start:m.kT({timezone:t}).minus({months:1,days:1}).valueOf(),end:m.kT({timezone:t}).valueOf()};if("the_past_year"===e.value)return{start:m.kT({timezone:t}).minus({years:1}).valueOf(),end:m.kT({timezone:t}).valueOf()};const r=m.kT({timezone:t}).minus({days:1}).valueOf();return"the_next_week"===e.value?{start:r,end:m.kT({timezone:t}).plus({weeks:1}).valueOf()}:"the_next_month"===e.value?{start:r,end:m.kT({timezone:t}).plus({months:1}).valueOf()}:"the_next_year"===e.value?{start:r,end:m.kT({timezone:t}).plus({years:1}).valueOf()}:void(0,h.t1)(e)}(t,r);if("exact"===t.type){if(t.value){const{value:e}=t;if(e.start_date&&e.end_date){const t={type:"daterange",start_date:e.start_date,end_date:e.end_date},n=m.NK(t,r);return{start:n.start.valueOf(),end:n.end.endOf("day").valueOf()}}if(e.start_date){const t={type:"date",start_date:e.start_date};return{start:m.DF(t,r).valueOf(),end:void 0}}if(e.end_date){const t={type:"date",start_date:e.end_date};return{start:void 0,end:m.DF(t,r).endOf("day").valueOf()}}return{start:void 0,end:void 0}}return{start:void 0,end:void 0}}(0,h.t1)(t)}}function rt(e,t,r){const n=m.kT({timezone:t});switch(e){case"day":return{start:n.startOf("day"),end:n.endOf("day")};case"week":return{start:m.em(n.valueOf(),r,t),end:m.gQ(n.valueOf(),r,t)};case"month":return{start:n.startOf("month").startOf("day"),end:n.endOf("month").startOf("day")};case"year":return{start:n.startOf("year").startOf("day"),end:n.endOf("year").startOf("day")};default:(0,h.t1)(e)}}function nt(e,t,r,n){const o="past"===e?-t:t;return m.kT({timezone:n}).plus({[r]:o})}function ot(e){const{operatorValue:t,userId:r}=e;if("relative"===t.type){if("me"===t.value)return r?{table:_.KJ,id:r}:void 0;(0,h.t1)(t)}return t.value}const at={text:function(e){const{filter:t}=e,r=Ie(t)?(t.value.value||"").trim().toLowerCase():void 0;return e=>{const n=(e.value||"").toLowerCase();if(!g.HD(n))throw new Error(`str is not a string: ${n}`);return"is_empty"===t.operator?0===n.length:"is_not_empty"===t.operator?n.length>0:"string_has_no_alphabet_prefix"===t.operator?Boolean(n&&!(0,s.bk)(n)):!r||("string_is"===t.operator?n===r:"string_is_not"===t.operator?n!==r:"string_contains"===t.operator?n.indexOf(r)>=0:"string_does_not_contain"===t.operator?n.indexOf(r)<0:"string_starts_with"===t.operator?n.slice(0,r.length)===r:"string_ends_with"===t.operator?n.slice(n.length-r.length)===r:void(0,h.t1)(t.operator))}},checkbox:function(e){const{filter:t}=e,r=Boolean(t.value.value);return e=>{const n=Boolean(e.value);return"checkbox_is"===t.operator?n===r:"checkbox_is_not"===t.operator?n!==r:void(0,h.t1)(t.operator)}},select:function(e){const{filter:t}=e,r=Ie(t)?I(t).map((e=>{let{value:t}=e;return t})):[];return e=>{const n=e.value;return"is_empty"===t.operator?void 0===n:"is_not_empty"===t.operator?void 0!==n:0===r.length||("enum_is"===t.operator?r.includes(n):"enum_is_not"===t.operator?!r.includes(n):void(0,h.t1)(t.operator))}},multi_select:function(e){const{filter:t}=e,r=Ie(t)?D(t).map((e=>{let{value:t}=e;return t})):[];return e=>{const n=e.value||[];return"is_empty"===t.operator?0===n.length:"is_not_empty"===t.operator?n.length>0:0===r.length||("enum_contains"===t.operator?n.some((e=>r.includes(e))):"enum_does_not_contain"===t.operator?!n.some((e=>r.includes(e))):void(0,h.t1)(t.operator))}},status:Xe,relation:function(e){const{filter:t,relativeVariableValues:r}=e,n=Ie(t)?z(t).map((e=>{let{type:t,value:n}=e;return"exact"===t?n:"relative"===t&&"builtin"===n.type&&r?r[n.variable]:void 0})):[];return e=>{const r=e.value||[];return"is_empty"===t.operator?0===r.length:"is_not_empty"===t.operator?r.length>0:0===n.length||("relation_contains"===t.operator?r.some((e=>n.includes(e.id))):"relation_does_not_contain"===t.operator?!r.some((e=>n.includes(e.id))):void(0,h.t1)(t.operator))}},person:function(e){const{filter:t,userId:r}=e,n=Ie(t)?J(t).map((e=>{const t=ot({operatorValue:e,userId:r});if(t)return(0,p.dn)(t)})).filter(h.$K):[];return e=>{const r=e.value||[];if("is_empty"===t.operator)return 0===r.length;if("is_not_empty"===t.operator)return r.length>0;if(0===n.length&&0===J(t).length)return!0;const o=new Set(r.map(p.dn));return"person_contains"===t.operator?n.some((e=>o.has(e))):"person_does_not_contain"===t.operator?!n.some((e=>o.has(e))):void(0,h.t1)(t.operator)}},number:function(e){const{filter:t}=e;return e=>{const r=e.value;if("is_empty"===t.operator)return void 0===r||g.i2(r);if("is_not_empty"===t.operator)return void 0!==r&&!g.i2(r);const n=t.value.value;return!(void 0!==n&&!g.i2(n))||(void 0===r||g.i2(r)?"number_does_not_equal"===t.operator:"number_equals"===t.operator?r===n:"number_does_not_equal"===t.operator?r!==n:"number_greater_than"===t.operator?r>n:"number_less_than"===t.operator?r<n:"number_greater_than_or_equal_to"===t.operator?r>=n:"number_less_than_or_equal_to"===t.operator?r<=n:void(0,h.t1)(t.operator))}},date:function(e){const{filter:t,userTimeZone:r,userStartOfWeek:n}=e;if("is_empty"===t.operator)return e=>void 0===e.value;if("is_not_empty"===t.operator)return e=>void 0!==e.value;if(U(t)){const e=tt({operatorValue:t.value,userTimeZone:r,userStartOfWeek:n});return n=>{const o=n.value;if(!o)return!1;const a=m.NK(o,r),i=a.start.valueOf(),s=a.end?a.end.valueOf():a.start.valueOf(),u=t.use_end?s:i;return(void 0===e.start||u>=e.start)&&(void 0===e.end||u<=e.end)}}let o=Qe({operatorValue:t.value,userTimeZone:r}),a=m.kT({date:o,timezone:r}).endOf("day").valueOf();if("object"==typeof t.value.value&&"datetime"===t.value.value.type){const e=function(e){const{operatorValue:t,userTimeZone:r}=e;if("exact"===t.type){const e=t.value;if(!(0,h.$K)(e))return;return m.uO(e,r)}return et({operatorValue:t,userTimeZone:r})}({operatorValue:t.value,userTimeZone:r});if(!(0,h.$K)(e))return()=>!0;o=e,a=e}return e=>{const n=e.value;if(!n)return!1;if(!(0,h.$K)(o))return!0;const i=m.NK(n,r),s=i.start.valueOf(),u=i.end?i.end.valueOf():i.start.valueOf(),l=t.use_end?u:s;return"date_is"===t.operator?a>=l&&o<=l:"date_is_before"===t.operator?l<o:"date_is_on_or_before"===t.operator?l<=a:"date_is_after"===t.operator?l>a:"date_is_on_or_after"===t.operator?l>=o:void(0,h.t1)(t.operator)}},file:function(e){const{filter:t}=e;return e=>{const r=e.value||[];return"is_empty"===t.operator?0===r.length:"is_not_empty"===t.operator?r.length>0:void(0,h.t1)(t)}},location:function(e){const{filter:t}=e,r=$(t).map((e=>{let{value:t}=e;return t}));return e=>{const n=e.value;return"location_is"===t.operator?r.includes(null==n?void 0:n.id):"location_is_not"===t.operator?!r.includes(null==n?void 0:n.id):void(0,h.t1)(t.operator)}},verification:function(e){const{filter:t}=e,r=Ie(t)?Te(t).map((e=>{let{value:t}=e;return t})):[];return e=>{const n=e.value;return"verification_is"===t.operator?r.includes(n):"verification_is_not"===t.operator?!r.includes(n):void(0,h.t1)(t.operator)}}};function it(e,t,r){return"any"===e?0!==t.length&&t.some(r):"none"===e?0===t.length||!t.some(r):"every"===e?0!==t.length&&g.yW(t,r):void(0,h.t1)(e)}function st(e){const{schema:t,property:r,getRecordModel:n}=e,i=t[r];if(!i)return"text";if("formula"===i.type){if("v2"===i.version){if(!i.formula2)return"text";const e=i.formula2.result_type.type;if("unknown"===e||"block"===e)return"text";if("array"===e){const e=(0,y.B8)(i.formula2.result_type.of).type;return"block"===e||"array"===e||"unknown"===e||"function"===e?"text":e}return e}return i.formula&&i.formula.result_type?i.formula.result_type:"text"}if("rollup"===i.type){if(!i.relation_property||!i.target_property)return"text";if(i.aggregation&&"show_unique"!==i.aggregation)return(0,o.W6)((0,o.gu)(i.aggregation));const e=t[i.relation_property];if(!e||"relation"!==e.type||!(0,u.j0)(e))return"text";const r=n((0,u.j0)(e));if(!r)return"text";return st({schema:r.getNormalizedSchema(),property:i.target_property,getRecordModel:n})}return"button"===i.type?"text":(0,a.vc)(i.type)}function ut(e,t,r,n){const i=e[t];if(!i)return!1;if("formula"===i.type){if("v2"===i.version){if(i.formula2){const e=i.formula2.result_type.type;return"unknown"===e||"block"===e?w(r):"array"===e?function(e,t){const r=(0,y.B8)(t);return!("array"===r.type||"function"===r.type||!Pe(e))&&("block"===r.type||"unknown"===r.type?Ne("text",e.subfilter):Ne(r.type,e.subfilter))}(r,i.formula2.result_type.of):Ne(e,r)}return ke(r)}return i.formula&&i.formula.result_type?Ne(i.formula.result_type,r):!!ke(r)}if("rollup"===i.type){if(i.aggregation&&"show_unique"!==i.aggregation){return Ne((0,o.W6)((0,o.gu)(i.aggregation)),r)}if(!Pe(r))return!1;if(!n)return!0;const a=st({schema:e,property:t,getRecordModel:n}),s=Pe(r)?r.subfilter:r;if("text"===a)return w(s);if("relation"===a)return K(s);if("checkbox"===a)return S(s);if("select"===a||"multi_select"===a)return P(s)||F(s);if("status"===a)return q(s);if("person"===a)return ee(s);if("number"===a)return ne(s);if("date"===a)return pe(s);if("file"===a)return!1;if("location"===a)return j(s);if("verification"===a)return Ze(s);(0,h.t1)(a)}if("button"===i.type)return!1;return Ne((0,a.vc)(i.type),r)}function lt(e,t){if(t(e))return e;if(Ve(e))for(const r of e.filters||[]){const e=lt(r,t);if(e)return e}}function ct(e){return!e||(Array.isArray(e)?!e.some(dt):!dt(e))}function dt(e){return e&&!Array.isArray(e)&&void 0!==e.value&&""!==e.value}function pt(e){if(Le(e)){const t=Pe(e.filter)?e.filter.subfilter:e.filter;return Ie(t)&&ct(t.value)}return!1}function mt(e){const{propertyFilters:t,combinatorFilter:r,schema:n}=e;return g.oA([r,...t.map((e=>{const t=(0,c.dN)(e.filter,n);if(t){if(!Le(t))return t;{const e=Pe(t.filter)?t.filter.subfilter:t.filter;if(!Ie(e)||!ct(e.value))return t}}}))])}function yt(e){return 1===e.length&&Ve(e[0])?e[0]:e.length>0?{operator:"and",filters:e}:void 0}function ft(e){return"exact"===e.type?e.type:"surrounding"===e.value?`${e.type}-${e.unit}`:"custom"===e.value?`${e.type}-${e.unit}-${e.count}-${e.direction}`:e.value}function gt(e){return Boolean(e&&Le(e)&&e.property===n.Es.TaskToSprintRelation&&K(e.filter)&&"relation_contains"===e.filter.operator&&Array.isArray(e.filter.value))}},30823:(e,t,r)=>{r.d(t,{BJ:()=>_,FT:()=>P,GJ:()=>b,LR:()=>y,ML:()=>w,qg:()=>N,vc:()=>f,yK:()=>k});var n=r(35011),o=r(80951),a=r(34299),i=r(40506),s=r(53877),u=r(84682),l=r(82883),c=r(89470),d=r(97880),p=r(4308);const m={text:"text",url:"text",email:"text",phone_number:"text",checkbox:"checkbox",select:"select",multi_select:"multi_select",status:"status",person:"person",relation:"relation",created_by:"person",last_edited_by:"person",number:"number",auto_increment_id:"number",date:"date",created_time:"date",last_edited_time:"date",last_visited_time:"date",title:"text",file:"file",location:"location",verification:"verification"};function y(e){return e in m}function f(e){return m[e]}const g={created_by:!0,last_edited_by:!0,created_time:!0,last_edited_time:!0,last_visited_time:!0,location:!0};function v(e){return e in g}function _(e){return y(e.type)&&!v(e.type)}function b(e){const{propertyValue:t,getRecordModel:r,collectionRequestContext:n}=e,{userTimeZone:o,intl:a}=n;return{type:"text",value:(0,l.X)({textValue:t,getRecordModel:r,userTimeZone:o,intl:a})}}function h(e){const{propertyValue:t}=e;return{type:"text",value:o.zB(t)}}function k(e){const{propertySchema:t,propertyValue:r}=e;if(!t||"status"!==t.type)return{type:"status",option:void 0,group:void 0};const n=t.options??[],a=o.ZG(r,t),i=n.find((e=>e.value===a)),s=t.groups??[],u=i?s.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(i.id)})):void 0;return{type:"status",option:a,group:null==u?void 0:u.name}}function x(e){const{propertyValue:t}=e;return{type:"number",value:o.VY(t)}}function T(e){if(!e.timestamp)return{type:"date",value:void 0};return{type:"date",value:s.CQ(e.timestamp,e.userTimeZone)}}const M={text:b,title:b,url:h,email:h,phone_number:h,checkbox:function(e){const{propertyValue:t}=e;return{type:"checkbox",value:o.Ml(t)}},select:function(e){const{propertyValue:t,propertySchema:r}=e,n=r&&"select"===r.type&&r.options||[];return{type:"select",value:o.Sj(t,n)}},multi_select:function(e){const{propertySchema:t,propertyValue:r}=e;if(!t||"multi_select"!==t.type)return{type:"multi_select",value:void 0};const n=t.options||[];return{type:"multi_select",value:o.uP(r,n)}},status:k,relation:function(e){const{propertyValue:t,propertySchema:r,getRecordModel:n}=e;return r&&"relation"===r.type?{type:"relation",value:o.j$({relationValue:o.rq(t),propertySchema:r,getRecordModel:n})}:{type:"relation",value:void 0}},person:function(e){const{block:t,propertyValue:r,propertySchema:n}=e;return{type:"person",value:o.DW({textValue:r,propertySchema:n,blockCreatorPointer:t.getCreatedByPointer()})}},created_by:e=>{let{block:t}=e;const r=t.getCreatedByPointer();return{type:"person",value:r?[r]:void 0}},last_edited_by:e=>{let{block:t}=e;const r=t.getLastEditedByPointer();return{type:"person",value:r?[r]:void 0}},number:x,auto_increment_id:x,date:function(e){const{propertyValue:t}=e;return{type:"date",value:o.Gl(t)}},created_time:e=>{let{block:t,collectionRequestContext:{userTimeZone:r}}=e;return T({timestamp:t.getCreatedTime(),userTimeZone:r})},last_edited_time:e=>{let{block:t,collectionRequestContext:{userTimeZone:r}}=e;return T({timestamp:t.getLastEditedTime(),userTimeZone:r})},file:function(e){const{propertyValue:t}=e;return{type:"file",value:o.g(t).map((e=>e.url))}},location:function(e){const{block:t,propertySchema:r}=e;return r&&"location"===r.type?{type:"location",value:o.UB({block:t})}:{type:"location",value:void 0}},last_visited_time:function(e){const{block:t,propertySchema:r,getRecordModel:n,collectionRequestContext:o}=e,{userTimeZone:a,userId:i}=o;if(!i||!r||"last_visited_time"!==r.type)return{type:"date",value:void 0};const s=(0,c.Pv)({parent_id:t.id,user_id:i}),u=n({table:c.UI,id:s,spaceId:t.getSpaceId()});return T({timestamp:null==u?void 0:u.getVisitedAt(),userTimeZone:a})},verification:function(e){const{propertyValue:t}=e,r=o._w(t);return{type:"verification",value:(0,p.WN)(r).type}}};function w(e){const{filterValueType:t,propertySchema:r}=e;if(!r)return{type:t,value:void 0};if(!y(r.type))return{type:t,value:void 0};const n=M[r.type];return n?n(e):{type:t,value:void 0}}function Z(e){return void 0===e.value||""===e.value?[]:[[e.value]]}function C(e){return o.iD(e.value)}function S(e){return o.eP(e.value)}const I={text:Z,title:Z,url:C,email:C,phone_number:C,checkbox:function(e){return o._I(e.value)},select:function(e){return o.O2(e.value)},multi_select:function(e){return o.zq(e.value)},status:function(e){return o.Is(e.option)},relation:function(e){return o.ow(e.value||[])},person:function(e){return o.C1(e.value||[])},number:S,auto_increment_id:S,date:function(e){return o.d7(e.value)},file:function(e){return o.CC((e.value||[]).map((e=>({name:e,url:e}))))},location:function(){return[]},verification:function(e){return[]}};function N(e){const{propertyType:t,filterValue:r}=e;return(0,I[t])(r)}function*R(e){const{block:t,schema:r,property:o,getRecordModel:a,collectionRequestContext:s,formula2Error:l}=e,{userTimeZone:c,depth:p,intl:m,visitedProperties:y,resultCache:f,formulaTimeoutTimestampMs:g,logFormulaTimeoutFn:v}=s,_=r[o];if(_&&"formula"===_.type)if("v2"===_.version){if(!_.formula2)return;const{code:e}=_.formula2,r=(0,n.EC)({block:t,property:o,formulaCode:e,getRecordModel:a,intl:m,userTimeZone:c,depth:p,visitedProperties:y,formulaTimeoutTimestampMs:g,logFormulaTimeoutFn:v,formula2Error:l,resultCache:f});if(!r)return;yield*U(r,a,c,m)}else{if(!_.formula)return;if(!_.formula.result_type)return;const e=(0,u.AH)({schema:r,property:o,block:t,getRecordModel:a,collectionRequestContext:{userId:void 0,userTimeZone:c,depth:p,intl:m,resultCache:f,visitedProperties:y,formulaTimeoutTimestampMs:g,logFormulaTimeoutFn:v}});if("number"===_.formula.result_type){if("number"!=typeof e)return}else if("text"===_.formula.result_type){if("string"!=typeof e)return}else if("checkbox"===_.formula.result_type){if("boolean"!=typeof e)return}else if("date"===_.formula.result_type){if(!i.U3(e))return}else(0,d.t1)(_.formula.result_type);yield{type:_.formula.result_type,value:e}}}function*U(e,t,r,n){if(e&&"undefined"!==e.type)if("array"===e.type)for(const o of e.values)yield*U(o,t,r,n);else if("block"===e.type){const o=t(e.value);if(!o)return;yield{type:"text",value:o.getRenderTitle({getRecordModel:t,userTimeZone:r,intl:n})}}else"person"===e.type?yield{type:"person",value:[e.value]}:"text"===e.type?yield{type:"text",value:(0,l.X)({textValue:e.value,getRecordModel:t,userTimeZone:r,intl:n})}:("number"===e.type||"date"===e.type||"checkbox"===e.type)&&(yield{type:e.type,value:e.value})}function*P(e){const{block:t,schema:r,property:n,getRecordModel:i,propertyMapping:s,collectionRequestContext:u}=e,l=r[n];if(!l)return;if("formula"===l.type)return void(yield*R(e));if("rollup"===l.type)return void(yield*function*(e){const{block:t,schema:r,property:n,getRecordModel:o,collectionRequestContext:i,formula2Error:s}=e,u=r[n];if(!u)return;if("rollup"!==u.type)return;const l=(0,a.gT)({property:n,schema:r,getRecordModel:o});if(!l)return;if(u.aggregation&&"show_unique"!==u.aggregation){const t=(0,a.O0)(e);return void(t&&(yield t))}const c=(0,a.I_)({property:n,schema:r,block:t,getRecordModel:o});for(const a of c)yield*P({block:a,property:l.targetProperty,schema:l.targetCollectionSchema,getRecordModel:o,propertyMapping:void 0,collectionRequestContext:{...i,depth:i.depth+1},formula2Error:s})}(e));if("button"===l.type)return;const c=f(l.type),d=(null==s?void 0:s[n])??n,p=w({filterValueType:c,propertySchema:l,propertyValue:o.wS(t,d,i),block:t,getRecordModel:i,collectionRequestContext:u});yield p}},35011:(e,t,r)=>{r.d(t,{EC:()=>b,HU:()=>w,NM:()=>h,PY:()=>x,XU:()=>P,cO:()=>Z,j1:()=>U,mm:()=>S,of:()=>T,oh:()=>k,pV:()=>C,py:()=>R,r9:()=>I,uZ:()=>N,x9:()=>_});r(57658);var n=r(60246),o=r(63087),a=r(40506),i=r(7057),s=r(60709),u=r(84116),l=r(47218),c=r(78106),d=r(84682),p=r(18955),m=r(38297),y=r(72126),f=r(59753),g=(r(4615),r(149)),v=r(70203);function _(e){if("function"===e.type)return{type:"unknown"};if("array"===e.type){return{type:"array",of:_(e.of)}}return e}function b(e){const{block:t,property:r,getRecordModel:n,formula2Error:o,resultCache:a}=e,i=(0,m.ky)({block:t,getRecordModel:n}),s=f.kk.fromValue("collection",i);if(!s)return;const u=Z(t,s,r);if(u)return g.x.isFail(u)?void(null===(null==o?void 0:o.error)&&(0,l.no)(u.error)&&(o.error=new l.WV(u.error))):u.value;const c=P({resultCache:a,blockId:t.id,property:r});if(void 0!==c)return x(c);const d=h(e);if(!d)return;const p=k(d);if(!g.x.isFail(p))return p.value;null===(null==o?void 0:o.error)&&(0,l.no)(p.error)&&(o.error=new l.WV(p.error))}function h(e){const{block:t,formulaCode:r,property:n,getRecordModel:o,intl:a,userTimeZone:i,depth:l,visitedProperties:c,formulaTimeoutTimestampMs:d,logFormulaTimeoutFn:p,resultCache:y}=e,g=(0,m.ky)({block:t,getRecordModel:o});if(!f.kk.fromValue("collection",g))return;const v=(0,s.l)();if(!v)return;const _={values:[{kind:u.yp.ThisRow,value:{type:"block",value:t.pointer}}],handleDataRequest:v.createFormulaDataRequestSyncHandler(o),intl:a,userTimeZone:i,depth:l,visitedProperties:c,formulaTimeoutTimestampMs:d,logFormulaTimeoutFn:p,resultCache:y},b=v.executeFormulaSync(r,_);return"value"in b&&U({resultCache:y,blockId:t.id,property:n,value:b.value}),k(b)}function k(e){return g.x.isFail(e)?e:{value:x(e.value)}}function x(e){if("function"===e.type)return{type:"undefined"};if("array"===e.type){var t;if(0===e.values.length)return{type:"undefined"};const r={type:"array",values:(0,c.Yw)(e).values.filter((e=>"undefined"!==e.type))};if(!T(r)){return{type:"array",values:y.oA(r.values.map((e=>{if("array"!==e.type)return{type:"text",value:(0,c.j4)(e)}})))}}return"function"===(null===(t=r.values[0])||void 0===t?void 0:t.type)?{type:"undefined"}:r}return e}function T(e){return 0===e.values.length||e.values.every((t=>t.type===e.values[0].type))}const M=new WeakMap;function w(e,t,r,n){if(!(0,s.l)())return;const o=M.get(e),a={version:t.getVersion(),getResult:n};void 0===o?M.set(e,{[r]:a}):o[r]=a}function Z(e,t,r){if(!(0,s.l)())return;const n=M.get(e),o=null==n?void 0:n[r];return o?o.version!==t.getVersion()?void(null==n||delete n[r]):o.getResult():void 0}function C(e){if("formula"!==e.type)return[];if("v2"===e.version){const t=(0,s.l)();return e.formula2&&t?t.getFormula2Dependencies(e.formula2.code):[]}return(0,p.b$)(e.formula)}function S(e){var t,r;return e&&"formula"===e.type?"v2"===e.version?(null==e||null===(r=e.formula2)||void 0===r?void 0:r.result_type.type)??"unknown":(null===(t=e.formula)||void 0===t?void 0:t.result_type)??"unknown":"unknown"}function I(e){var t,r;return e&&"formula"===e.type?"v2"===e.version?null!=e&&null!==(r=e.formula2)&&void 0!==r&&r.result_type?(0,c.aL)(e.formula2.result_type).type??"unknown":"unknown":(null===(t=e.formula)||void 0===t?void 0:t.result_type)??"unknown":"unknown"}function N(e){return"string"==typeof e?{type:"text",value:(0,v.TPx)(e)}:"number"==typeof e?{type:"number",value:e}:"boolean"==typeof e?{type:"checkbox",value:e}:(0,a.U3)(e)?{type:"date",value:e}:{type:"undefined"}}function R(e){let{schema:t,property:r,blockModel:o,getRecordModel:a,intl:s,userTimeZone:u,depth:l,resultCache:c,formulaTimeoutTimestampMs:p,visitedProperties:m,formula2Error:y}=e;const f=t[r];if("v2"===f.version){if(!f.formula2)return;const e=b({block:o,property:r,formulaCode:f.formula2.code,getRecordModel:a,intl:s,userTimeZone:u,depth:l,visitedProperties:m??new Set,formulaTimeoutTimestampMs:p,formula2Error:y,resultCache:c});if(!e)return;return"date"===e.type?(0,i.ZV)({value:e.value,userTimeZone:u,intl:s,allowRelativeDates:!1}):(0,n.QT)({result:e,getRecordModel:a,userTimeZone:u,intl:s})}{const{formula:e}=f;if(e)return(0,d.AH)({schema:t,property:r,block:o,getRecordModel:a,collectionRequestContext:{userId:void 0,userTimeZone:u,depth:l,intl:s,resultCache:c,visitedProperties:m??new Set,formulaTimeoutTimestampMs:p},formula2Error:y})}}function U(e){let{resultCache:t,blockId:r,property:n,value:a}=e;const i=t.get(r)??new Map;i.set(`${n}:${o.H.FormulaValue2}`,a),t.set(r,i)}function P(e){var t;let{resultCache:r,blockId:n,property:a}=e;return null===(t=r.get(n))||void 0===t?void 0:t.get(`${a}:${o.H.FormulaValue2}`)}},14714:(e,t,r)=>{r.d(t,{A1:()=>A,HB:()=>P,HH:()=>Q,Hd:()=>K,Hk:()=>le,KW:()=>J,Kp:()=>ve,LG:()=>Y,Lr:()=>X,Mc:()=>F,N2:()=>me,Qq:()=>re,R7:()=>U,RA:()=>L,S1:()=>D,Tr:()=>ne,Uh:()=>_e,Wz:()=>$,YG:()=>he,ZH:()=>te,aB:()=>R,bk:()=>de,dQ:()=>be,eF:()=>W,fw:()=>xe,g4:()=>G,ib:()=>B,mD:()=>H,mu:()=>ye,n6:()=>pe,nP:()=>j,pd:()=>E,q6:()=>O,qQ:()=>ie,t2:()=>q,tL:()=>V,vu:()=>fe,we:()=>ee,z8:()=>ge});r(30541),r(57658),r(21703);var n=r(30823),o=r(35011),a=r(80951),i=r(40506),s=r(53877),u=r(84682),l=r(38297),c=r(72126),d=r(59753),p=r(82883),m=r(6287),y=r(89470),f=r(70203),g=r(97880),v=r(74487);const _=v.object({required:{type:v.literal("select"),value:v.undefinable(v.string())},optional:{}}),b=v.object({required:{type:v.literal("multi_select"),value:v.undefinable(v.string())},optional:{}}),h=v.object({required:{type:v.literal("status"),value:v.undefinable(v.union([v.object({required:{type:v.literal("by_group"),group:v.string()},optional:{}}),v.object({required:{type:v.literal("by_option"),option:v.string()},optional:{}})]))},optional:{}}),k=v.object({required:{type:v.union([v.literal("person"),v.literal("created_by"),v.literal("last_edited_by")]),value:v.undefinable(v.object({required:{table:v.literal("notion_user"),id:v.string()},optional:{}}))},optional:{}}),x=v.object({required:{type:v.literal("relation"),value:v.undefinable(v.union([v.object({required:{table:v.literal("block"),id:v.string(),spaceId:v.string()},optional:{}}),v.object({required:{type:v.literal("relative"),value:v.object({required:{type:v.literal("builtin"),variable:v.union([v.literal("current"),v.literal("next")])},optional:{}})},optional:{}})]))},optional:{}}),T=v.object({required:{type:v.literal("location"),value:v.undefinable(v.object({required:{table:v.literal("collection"),id:v.string(),spaceId:v.string()},optional:{}}))},optional:{}}),M=v.object({required:{type:v.union([v.literal("date"),v.literal("created_time"),v.literal("last_edited_time")]),value:v.undefinable(v.any())},optional:{}}),w=v.object({required:{type:v.union([v.literal("text"),v.literal("title"),v.literal("url"),v.literal("email"),v.literal("phone_number")]),value:v.undefinable(v.any())},optional:{}}),Z=v.object({required:{type:v.literal("number"),value:v.undefinable(v.any())},optional:{}}),C=v.object({required:{type:v.literal("checkbox"),value:v.boolean()},optional:{}}),S=v.object({required:{type:v.literal("formula"),value:v.undefinable(v.any())},optional:{}}),I=(v.union([_,b,h,k,x,M,w,Z,C,S,T]),{select:!0,multi_select:!0,person:!0}),N={select:!0,multi_select:!0,status:!0,person:!0,relation:!0,date:!0,text:!0,title:!0,url:!0,email:!0,phone_number:!0,number:!0,checkbox:!0,formula:!0,created_by:!0,last_edited_by:!0,created_time:!0,last_edited_time:!0,last_visited_time:!0,location:!0};function R(e){return P(e.type)}function U(e){return P(e.type)}function P(e){return"text"===e||"title"===e||"url"===e||"email"===e||"phone_number"===e}function D(e){return E(e.type)}function O(e){return E(e.type)}function E(e){return"person"===e||"created_by"===e||"last_edited_by"===e}function F(e){return A(e.type)}function B(e){return A(e.type)}function A(e){return"date"===e||"created_time"===e||"last_edited_time"===e||"last_visited_time"===e}function V(e){return"relation"===e.type}function L(e){return!!e&&"table"in e}function q(e){return!!e&&("type"in e&&"relative"===e.type)}function j(e){return V(e)&&q(e.value)&&"last"===e.value.value.variable}function $(e,t){return"person"===e.type||"relation"===e.type||("select"===e.type||"multi_select"===e.type?t:R(e)?"exact"===e.groupBy:"status"!==e.type&&"number"!==e.type&&"date"!==e.type&&"checkbox"!==e.type&&"created_by"!==e.type&&"last_edited_by"!==e.type&&"created_time"!==e.type&&"last_edited_time"!==e.type&&"last_visited_time"!==e.type&&"formula"!==e.type&&"location"!==e.type&&void(0,g.t1)(e.type))}function G(e){return e.type in I}function Y(e){if("formula"===e.type){const t=(0,o.mm)(e);return"array"!==t&&"unknown"!==t}return e.type in N}const z="uncategorized";function W(e){return"boolean"==typeof e.hidden?e.hidden:"boolean"==typeof e.hiddenByDefault?e.hiddenByDefault:Boolean(e.emptyHidden)}function H(e){return e?K(e.value):z}function K(e){if(!e.value)return`${e.type}:uncategorized`;if("select"===e.type||"multi_select"===e.type)return`${e.type}:${e.value}`;if("status"===e.type){const t="by_group"===e.value.type?e.value.group:e.value.option;return`${e.type}:${e.value.type}-${t}`}if(O(e)||"location"===e.type)return`${e.type}:${e.value.id}`;if("relation"===e.type){const t=e.value;return L(t)?`${e.type}:${t.id}`:`${e.type}:${t.type}:${t.value.variable}`}if(F(e)){const t=ce(e.value);return`${e.type}:${t?t.start_date:e.value.type}`}return U(e)?`${e.type}:${"other"===e.value.type?e.value.type:e.value.value}`:"number"===e.type?`${e.type}:${"out_of_range"===e.value.type?e.value.type:`${e.value.start}:${e.value.end}`}`:"checkbox"===e.type?`${e.type}:${e.value}`:"formula"===e.type?`${e.type}:${K(e.value)}`:void(0,g.t1)(e)}function J(e){return X(e.map((e=>K(e.value))))}function X(e){return e.join(":")}function Q(e,t){return e.length===t.length&&!e.find(((e,r)=>!ee(e.value,t[r].value)))}function ee(e,t){if(e===t)return!0;if(!e||!t)return e===t;if("select"===e.type||"multi_select"===e.type)return t.type===e.type&&(void 0!==e.value&&t.value,e.value===t.value);if("status"===e.type)return t.type===e.type&&(void 0!==e.value&&void 0!==t.value?"by_group"===e.value.type&&"by_group"===t.value.type&&e.value.group===t.value.group||"by_option"===e.value.type&&"by_option"===t.value.type&&e.value.option===t.value.option:e.value===t.value);if(O(e)||"location"===e.type)return t.type===e.type&&(void 0!==e.value&&void 0!==t.value?e.value.table===t.value.table&&e.value.id===t.value.id:e.value===t.value);if("relation"===e.type)return t.type===e.type&&(void 0!==e.value&&void 0!==t.value?L(e.value)&&L(t.value)?e.value.table===t.value.table&&e.value.id===t.value.id:!(!q(e.value)||!q(t.value))&&(e.value.type===t.value.type&&e.value.value.variable===t.value.value.variable):e.value===t.value);if(F(e)){if(t.type!==e.type)return!1;if(void 0!==e.value&&void 0!==t.value){const r=ce(e.value),n=ce(t.value);return void 0!==r&&void 0!==n?c.Xy(r,n):e.value.type===t.value.type}return e.value===t.value}if(U(e))return t.type===e.type&&(void 0!==e.value&&void 0!==t.value?"exact"===e.value.type&&"exact"===t.value.type||"alphabet_prefix"===e.value.type&&"alphabet_prefix"===t.value.type?e.value.value===t.value.value:"other"===e.value.type&&"other"===t.value.type:e.value===t.value);if("number"===e.type){if(t.type!==e.type)return!1;if(void 0!==e.value&&void 0!==t.value){if("range"===e.value.type&&"range"===t.value.type)return e.value.start===t.value.start&&e.value.end===t.value.end;if("out_of_range"===e.value.type&&"out_of_range"===t.value.type)return!0}return e.value===t.value}return"checkbox"===e.type?t.type===e.type&&e.value===t.value:"formula"===e.type?t.type===e.type&&ee(e.value,t.value):void(0,g.t1)(e)}function te(e,t){return e===t||!(!e||!t)&&ee(e.value,t.value)}function re(e){const{schema:t,groupBy:r}=e,{property:n}=r,o=t[n];if(o&&("select"===o.type||"multi_select"===o.type)){const e=(o.options||[]).map((e=>"select"===o.type?{type:"select",value:e.value}:{type:"multi_select",value:e.value}));return e.unshift({type:o.type,value:void 0}),e}if(o&&"status"===o.type){if("status"!==r.type)return;return"group"===r.groupBy?(o.groups??[]).map((e=>({type:"status",value:{type:"by_group",group:e.name}}))):(o.options??[]).map((e=>({type:"status",value:{type:"by_option",option:e.value}})))}}function ne(e){const{block:t,schema:r,reducer:i,getRecordModel:c,propertyMapping:v,relativeVariableResult:_,collectionRequestContext:b}=e,{userId:h,userTimeZone:k,intl:x}=b,T=i.groupBy,M=r[T.property];if(!M||!Y(M))return;const w=(0,a.wS)(t,(null==v?void 0:v[T.property])??T.property,c);if("select"===M.type){const e=(0,a.Sj)(w,M.options||[]);return e?[{type:"select",value:e}]:[{type:"select",value:void 0}]}if("multi_select"===M.type){const e=(0,a.uP)(w,M.options||[]);return e.length>0?e.map((e=>({type:"multi_select",value:e}))):[{type:"multi_select",value:void 0}]}if("status"===M.type){if("status"!==T.type)return;const e=M.options??[],t=(0,a.ZG)(w,M),r=e.find((e=>e.value===t)),n=(M.groups??[]).find((e=>{var t;return r&&(null===(t=e.optionIds)||void 0===t?void 0:t.includes(r.id))}));return"group"===T.groupBy&&n?[{type:"status",value:{type:"by_group",group:n.name}}]:"option"===T.groupBy&&r?[{type:"status",value:{type:"by_option",option:r.value}}]:[{type:"status",value:void 0}]}if("person"===M.type){const e=d.kk.fromBlock(t),r=(0,a.DW)({textValue:w,propertySchema:M,blockCreatorPointer:e.getCreatedByPointer()});return r.length>0?r.map((e=>({type:"person",value:e}))):[{type:"person",value:void 0}]}if("relation"===M.type){const e=(0,a.rq)(w);if(e.length>0){const t=M.collection_pointer,r=t&&_&&_[t.id],n=[];return e.forEach((e=>{var t;e.spaceId||(e.spaceId=null==M||null===(t=M.collection_pointer)||void 0===t?void 0:t.spaceId);const o=ie({relativeVariableValues:r,pointer:e});if(o.length>0)n.push(...o);else{const t={type:"relation",value:e};n.push(t)}})),n}return[{type:"relation",value:void 0}]}if("location"===M.type)return[{type:"location",value:(0,a.UB)({block:t})}];if("date"===M.type){if("date"!==T.type)return;return se({dateValue:(0,a.Gl)(w),intl:x,userTimeZone:k,groupBy:T})}if("created_time"===M.type){if("created_time"!==T.type)return;if(!t.created_time)return[{type:"created_time",value:void 0}];return se({dateValue:(0,s.CQ)(t.created_time,k),intl:x,userTimeZone:k,groupBy:T})}if("last_edited_time"===M.type){if("last_edited_time"!==T.type)return;if(!t.last_edited_time)return[{type:"number",value:void 0}];return se({dateValue:(0,s.CQ)(t.last_edited_time,k),intl:x,userTimeZone:k,groupBy:T})}if("last_visited_time"===M.type){if("last_visited_time"!==T.type)return;if(!h)return;const e=(0,y.Pv)({parent_id:t.id,user_id:h}),r=c({table:y.UI,id:e,spaceId:t.space_id}),n=null==r?void 0:r.getVisitedAt();if(!n)return[{type:"last_visited_time",value:void 0}];return se({dateValue:(0,s.CQ)(n,k),intl:x,userTimeZone:k,groupBy:T})}if("created_by"===M.type){if("created_by"!==T.type)return;return t.created_by_id&&t.created_by_table?[{type:"created_by",value:{table:t.created_by_table,id:t.created_by_id,spaceId:t.space_id}}]:[{type:"created_by",value:void 0}]}if("last_edited_by"===M.type){if("last_edited_by"!==T.type)return;return t.last_edited_by_id&&t.last_edited_by_table?[{type:"last_edited_by",value:{table:t.last_edited_by_table,id:t.last_edited_by_id,spaceId:t.space_id}}]:[{type:"last_edited_by",value:void 0}]}if(P(M.type)){if(!R(T))return;const e=d.kk.fromBlock(t);return ae({textValue:(0,n.GJ)({block:e,propertySchema:M,propertyValue:w,getRecordModel:c,collectionRequestContext:b}).value,groupBy:T})}if("number"===M.type){if("number"!==T.type)return;const e=(0,a.VY)(w);if("number"==typeof e){return[{type:"number",value:pe(e,T.start,T.end,T.size)}]}return[{type:"number",value:void 0}]}if("checkbox"===M.type){if("checkbox"!==T.type)return;return[{type:"checkbox",value:(0,a.Ml)(w)}]}if("formula"===M.type){if("formula"!==T.type)return;const e=T.groupBy,n=(0,l.ky)({block:d.kk.fromBlock(t),getRecordModel:c});if(!n)return;const a={table:m.v,id:n.id,spaceId:t.space_id},i=[(0,f.YCD)((0,f.kbv)({collection:a,property:T.property,name:""}))],s="v2"===M.version?(0,o.EC)({block:d.kk.fromBlock(t),property:T.property,formulaCode:i,getRecordModel:c,intl:x,userTimeZone:k,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:b.formulaTimeoutTimestampMs,logFormulaTimeoutFn:b.logFormulaTimeoutFn,resultCache:b.resultCache}):(0,o.uZ)((0,u.Qs)({property:T.property,schema:r,block:d.kk.fromBlock(t),getRecordModel:c,collectionRequestContext:b})),y=[{type:"formula",value:void 0}];if(!s||"undefined"===s.type)return y;if("text"===e.type){if("text"!==s.type)return y;const t={...e,property:T.property};return oe(ae({textValue:(0,p.X)({textValue:s.value,getRecordModel:c,intl:x,userTimeZone:k,disableAnnotationPrefix:!0}),groupBy:t}))}if("number"===e.type){if("number"!==s.type)return y;return oe([{type:"number",value:pe(s.value,e.start,e.end,e.size)}])}if("checkbox"===e.type)return"checkbox"!==s.type?y:oe([{type:"checkbox",value:s.value}]);if("date"===e.type){if("date"!==s.type)return y;const t=se({dateValue:s.value,intl:x,userTimeZone:k,groupBy:{...e,property:T.property}});return oe(t?t.filter((e=>"date"===e.type)):void 0)}if("person"===e.type||"last_edited_by"===e.type||"created_by"===e.type){if("person"!==s.type)return y;return oe([{type:"person",value:s.value}])}if("relation"===e.type){if("block"!==s.type)return y;const e=c(s.value);if(!e)return y;const t=e.getRenderTitle({getRecordModel:c,userTimeZone:k,intl:x});return t?oe([{type:"text",value:{type:"exact",value:t}}]):y}(0,g.t1)(e.type)}(0,g.t1)(M.type)}function oe(e){if(e)return e.map((e=>({type:"formula",value:e})))}function ae(e){const{textValue:t,groupBy:r}=e;if(R(r)){if(!t)return[{type:r.type,value:void 0}];if("alphabet_prefix"===r.groupBy){const e=de(t);return e?[{type:r.type,value:{type:"alphabet_prefix",value:e}}]:[{type:r.type,value:{type:"other"}}]}if("exact"===r.groupBy)return[{type:r.type,value:{type:"exact",value:t}}];(0,g.t1)(r.groupBy)}}function ie(e){const{relativeVariableValues:t,pointer:r}=e;if(!t)return[];const n=[];return Object.entries(t).forEach((e=>{let[t,o]=e;if(r.id===o){const e={type:"relation",value:{type:"relative",value:{type:"builtin",variable:t}}};n.push(e)}})),n}function se(e){const{dateValue:t,groupBy:r,userTimeZone:n,intl:o}=e;if(!B(r))return;if(!t)return[{type:r.type,value:void 0}];const a=(0,s.NK)(t,n,o.locale).start;if("relative"===r.groupBy){const e=ue(a,{type:"today"},n)||ue(a,{type:"yesterday"},n)||ue(a,{type:"last_7_days"},n)||ue(a,{type:"last_30_days"},n)||ue(a,{type:"tomorrow"},n)||ue(a,{type:"next_7_days"},n)||ue(a,{type:"next_30_days"},n);if(e)return[{type:r.type,value:e}];const t={start:a.startOf("month").startOf("day"),end:a.endOf("month").endOf("day")},o={type:"month",range:s.OQ.toPersistedDateRange(t,a.zoneName)};return[{type:r.type,value:o}]}if("day"===r.groupBy){const e={start:a.startOf("day"),end:a.endOf("day")},t={type:"day",range:s.OQ.toPersistedDateRange(e,a.zoneName)};return[{type:r.type,value:t}]}if("week"===r.groupBy){const e={start:a.startOf("week").startOf("day"),end:a.endOf("week").endOf("day")},t={type:"week",range:s.OQ.toPersistedDateRange(e,a.zoneName)};return[{type:r.type,value:t}]}if("month"===r.groupBy){const e={start:a.startOf("month").startOf("day"),end:a.endOf("month").endOf("day")},t={type:"month",range:s.OQ.toPersistedDateRange(e,a.zoneName)};return[{type:r.type,value:t}]}if("year"===r.groupBy){const e={start:a.startOf("year").startOf("day"),end:a.endOf("year").endOf("day")},t={type:"year",range:s.OQ.toPersistedDateRange(e,a.zoneName)};return[{type:r.type,value:t}]}(0,g.t1)(r.groupBy)}function ue(e,t,r){const n=le(t,r);if((0,i.b8)(n.start.valueOf(),n.end.valueOf(),e.valueOf(),void 0))return t}function le(e,t){const r=(0,s.Uu)(t);if("today"===e.type)return{start:r.startOf("day"),end:r.endOf("day")};if("yesterday"===e.type)return{start:r.minus({days:1}).startOf("day"),end:r.minus({days:1}).endOf("day")};if("last_7_days"===e.type)return{start:r.minus({days:7}).startOf("day"),end:r.minus({days:2}).endOf("day")};if("last_30_days"===e.type)return{start:r.minus({days:30}).startOf("day"),end:r.minus({days:8}).endOf("day")};if("tomorrow"===e.type)return{start:r.plus({days:1}).startOf("day"),end:r.plus({days:1}).endOf("day")};if("next_7_days"===e.type)return{start:r.plus({days:2}).startOf("day"),end:r.plus({days:7}).endOf("day")};if("next_30_days"===e.type)return{start:r.plus({days:8}).startOf("day"),end:r.plus({days:30}).endOf("day")};if("day"===e.type||"week"===e.type||"month"===e.type||"year"===e.type){const r=(0,s.NK)(e.range,t);return{start:r.start.startOf("day"),end:r.end.endOf("day")}}(0,g.t1)(e)}function ce(e){return"today"===e.type||"yesterday"===e.type||"last_7_days"===e.type||"last_30_days"===e.type||"tomorrow"===e.type||"next_7_days"===e.type||"next_30_days"===e.type?void 0:e.range}function de(e){const t=e.toUpperCase()[0];if(/^[A-Z0-9]$/.test(t))return t}function pe(e,t,r,n){if(e<t||e>r)return{type:"out_of_range",start:t,end:r};const o=t+Math.floor((e-t)/n)*n,a=o+n;return{type:"range",start:c.NM(o,Te),end:c.NM(a,Te)}}function me(e){return"checkbox"===(0,o.mm)(e)?{type:"formula",value:{type:"checkbox",value:!1}}:"checkbox"===e.type?{type:"checkbox",value:!1}:"created_by"===e.type||"last_edited_by"===e.type||"created_time"===e.type||"last_edited_time"===e.type||"location"===e.type?void 0:{type:e.type,value:void 0}}function ye(e){return"formula"===e.type?e.groupBy.sort:e.sort}const fe=["group","option"],ge=["relative","day","week","month","year"],ve=["exact","alphabet_prefix"],_e="collection_groups",be="collection_group_aggregation";function he(e,t){return E(e.type)||"checkbox"===e.type?["manual"]:"select"===e.type||"multi_select"===e.type?t?["manual"]:["manual","ascending","descending"]:"status"===e.type||"relation"===e.type?["manual","ascending","descending"]:A(e.type)?["ascending","descending"]:P(e.type)?["manual","ascending","descending"]:"number"===e.type?["ascending","descending"]:"formula"===e.type?he(e.groupBy):"location"===e.type?["manual","ascending","descending"]:void(0,g.t1)(e.type)}function ke(e,t){return"select"===e||"multi_select"===e||E(e)?{...t,type:e,sort:{type:"manual"}}:"status"===e?{...t,type:e,groupBy:"option",sort:{type:"ascending"}}:"relation"===e||"location"===e?{...t,type:e,sort:{type:"ascending"}}:A(e)?{...t,type:e,groupBy:"relative",sort:{type:"ascending"}}:"phone_number"===e||P(e)?{...t,type:e,groupBy:"exact",sort:{type:"ascending"}}:"number"===e?{...t,type:e,start:0,end:1e3,size:100,sort:{type:"ascending"}}:"checkbox"===e?{...t,type:e,sort:{type:"manual"}}:void(0,g.t1)(e)}function xe(e,t,r){const n={property:e};if("formula"===t.type){const e=(0,o.mm)(t);return"array"===e||"unknown"===e?{...n,type:"formula",groupBy:ke("number",n)}:"block"===e?{type:"formula",groupBy:ke("relation",n),...n}:{type:"formula",groupBy:ke(e,n),...n}}const a=ke(t.type,n);return r&&"status"===a.type&&(a.groupBy="group"),a}const Te=10},99036:(e,t,r)=>{r.d(t,{$u:()=>C,Ch:()=>Ze,DS:()=>z,Dv:()=>ve,EY:()=>S,Eu:()=>ae,F0:()=>w,Fn:()=>fe,HC:()=>pe,HF:()=>Me,I4:()=>M,KR:()=>V,Kc:()=>le,Lt:()=>X,MD:()=>W,NK:()=>O,Of:()=>j,RR:()=>Ce,S4:()=>se,TL:()=>T,TN:()=>P,XT:()=>me,XU:()=>U,Yl:()=>J,ZY:()=>q,a5:()=>_e,bx:()=>ce,by:()=>H,cd:()=>de,cu:()=>F,dx:()=>A,en:()=>Q,fG:()=>re,fc:()=>N,gB:()=>E,gq:()=>ye,iE:()=>B,iw:()=>Te,j0:()=>Z,oC:()=>ge,p_:()=>D,pn:()=>xe,q3:()=>G,qF:()=>ne,qQ:()=>$,rX:()=>oe,t:()=>L,uS:()=>he,ub:()=>ee,uk:()=>te,us:()=>we,xo:()=>Y});r(57658);var n=r(9291),o=r(87205),a=r(41892),i=r(17397),s=r(2032),u=r(35011),l=r(99036),c=r(80951),d=r(42613),p=r(8848),m=r(18955),y=r(72126),f=r(59753),g=r(4615),v=r(71644),_=r(6287),b=r(23867),h=r(97880),k=r(63143),x=r(74487);x.intersection([x.object({optional:{},required:{auto_update_on_edit:x.boolean()}}),x.union([x.object({required:{type:x.literal("custom"),prompt:x.string()},optional:{}}),x.object({required:{type:x.literal("extract"),prompt:x.string()},optional:{}}),x.object({required:{type:x.literal("summarize")},optional:{}}),x.object({required:{type:x.literal("translate"),targetProperties:x.array(x.string()),toLanguage:x.literals(...o.nI.map((e=>e.key)))},optional:{}}),x.object({required:{type:x.literals("select"),add_options:x.boolean()},optional:{prompt:x.string()}}),x.object({required:{type:x.literals("multi_select"),add_options:x.boolean()},optional:{prompt:x.string()}})])]);function T(e){const t=p.AP.filter((t=>!e.find((e=>e.color===t)))),r=t.length>0?t:p.AP;return r[y.MX(0,r.length-1)]}function M(e,t){const r=[{id:(0,g.ZP)(),value:t.formatMessage(d.i9.statusOptionNotStarted)},{id:(0,g.ZP)(),value:t.formatMessage(d.i9.statusOptionInProgress),color:"blue"},{id:(0,g.ZP)(),value:t.formatMessage(d.i9.statusOptionDone),color:"green"}];return{name:e,type:"status",options:r,groups:[{id:(0,g.ZP)(),name:d.G1,optionIds:[r[0].id],color:"gray"},{id:(0,g.ZP)(),name:d.Ho,optionIds:[r[1].id],color:"blue"},{id:(0,g.ZP)(),name:d.RW,optionIds:[r[2].id],color:"green"}],defaultOption:t.formatMessage(d.i9.statusOptionNotStarted)}}function w(e){var t;return(null===(t=e.collection_pointer)||void 0===t?void 0:t.id)??e.collection_id}function Z(e){return e.collection_pointer??(void 0!==e.collection_id?{table:_.v,id:e.collection_id,spaceId:(0,b.C)(void 0)}:void 0)}function C(e){var t;const{propertySchema:r,property:n,sourceCollectionId:o,targetCollectionSchema:a}=e;if(!r.property)return!1;const i=Boolean(a[r.property]&&"relation"===(null===(t=a[r.property])||void 0===t?void 0:t.type));return(r.property!==n||w(r)!==o)&&i}function S(e,t){var r;const n=f.kk.fromCollection(t),o=e.id,a=e.propertyId,i=e.propertySchema,s=n.id,u=i.property;if(!u)return!1;const l=n.getNormalizedSchema()[u];if(!l)return!1;if(!("relation"===l.type))return!1;if(!((null===(r=Z(l))||void 0===r?void 0:r.id)===o&&l.property===a))return!1;const c=o===s&&a===u;return!(!i.version&&c)}const I=["person","date"];function N(e){return void 0!==e&&"string"==typeof e&&I.includes(e)}const R=["ai_summary","ai_custom_prompt","ai_extract","ai_translate"],U=(0,h.AO)((e=>R.includes(e)?{true:e}:{false:e}));function P(e){if(U(e))switch(e){case"ai_custom_prompt":case"ai_summary":case"ai_extract":case"ai_translate":return"text";default:(0,h.t1)(e)}return e}function D(e){return"relation"===e.type}function O(e){return"relation"===e.type&&Boolean(e.connectedRelation)}function E(e){return"status"===e.type}function F(e){return"select"===e.type||"multi_select"===e.type}function B(e){return"verification"===e.type}function A(e){return"relation"===e.type||"verification"===e.type||"auto_increment_id"===e.type}function V(e){return"person"===e.type}function L(e){return E(e)||F(e)}function q(e){return"created_by"===e||"created_time"===e||"last_edited_by"===e||"last_edited_time"===e||"auto_increment_id"===e||"location"===e}function j(e){return q(e)||"relation"===e||"formula"===e||"rollup"===e}const $=(0,h.AO)((e=>"text"===e.type||"select"===e.type||"multi_select"===e.type?{true:e}:{false:e}));function G(e){if(e)switch(e.type){case"text":return e.ai_inference;case"select":case"multi_select":return e.select_ai_inference;default:return}}function Y(e){switch(e.type){case"text":return"ai_inference";case"select":case"multi_select":return"select_ai_inference";default:(0,h.t1)(e)}}function z(e){if(!e)return!1;switch(e.type){case"extract":case"custom":return!0;case"select":case"multi_select":case"summarize":case"translate":return!1;default:throw(0,h.t1)(e)}}const W=(0,h.AO)((e=>"custom"===e||"extract"===e||"translate"===e||"summarize"===e?{true:e}:{false:e}));function H(e,t){return!!e&&(!("text"!==t||!W(e.type))||("select"===t||"multi_select"===t)&&e.type===t)}const K=["text","title","url","email","phone_number","number"];function J(e){return K.includes(e)}function X(e){const t=(0,u.mm)(e);return"formula"===e.type?"date"===t:"rollup"===e.type?Boolean(e.relation_property&&e.target_property&&e.aggregation&&"date"===(0,s.W6)((0,s.gu)(e.aggregation))):"date"===e.type||"created_time"===e.type||"last_edited_time"===e.type}function Q(e){return"relation"===e.type||"person"===e.type}const ee=["text","relation","url","select","multi_select","person","number","email","phone_number","title"],te=["created_by","created_time","checkbox","last_edited_by","last_edited_time","location"],re=i.X0.map((e=>({value:e,id:e}))),ne=["title","description","caption","link","checked","language","source","size"],oe=["verification","button"],ae=["verification","button"],ie=new Set(ne);function se(e){return ie.has(e)}const ue=(0,n.defineMessages)({title:{id:"block.propertyTypeName.title",defaultMessage:"Title"},description:{id:"block.propertyTypeName.description",defaultMessage:"Description"},caption:{id:"block.propertyTypeName.caption",defaultMessage:"Caption"},link:{id:"block.propertyTypeName.link",defaultMessage:"Link"},checked:{id:"block.propertyTypeName.checked",defaultMessage:"Checked"},language:{id:"block.propertyTypeName.language",defaultMessage:"Language"},source:{id:"block.propertyTypeName.source",defaultMessage:"Source"},size:{id:"block.propertyTypeName.size",defaultMessage:"Size"}}),le=y.HP((e=>{const t={name:e.formatMessage(ue.title),type:"title"},r={name:e.formatMessage(ue.link),type:"url"};return{title:t,description:{name:e.formatMessage(ue.description),type:"text"},caption:{name:e.formatMessage(ue.caption),type:"text"},link:r,checked:{name:e.formatMessage(ue.checked),type:"checkbox"},language:{name:e.formatMessage(ue.language),type:"select",options:re},source:{name:e.formatMessage(ue.source),type:"url"},size:{name:e.formatMessage(ue.size),type:"text"}}}),(e=>e.locale)),ce="Yes",de=[[ce]],pe="No",me=[[pe]],ye=1e3;function fe(e){const t={},r=Object.keys(e);for(const n of r)(0,v.j5)(n)&&(t[n]=e[n]);return t}function ge(e){const t={...ke(e),...be(null==e?void 0:e.schema,null==e?void 0:e.id)},r=he(t);return t[r]||(t[r]={type:"title",name:"Name"}),t}function ve(e){return be(null==e?void 0:e.deleted_schema)}function _e(e){return be(e.block_schema)}function be(e,t){return function(e,t){const r={...e};let n=!1;const o=Object.keys(r);for(const a of o){const e=r[a];if(e)if((F(e)||E(e))&&e.options){const o=new Set,i=[];for(const r of e.options)r.value&&!o.has(r.value)&&(o.add(r.value),r.collectionIds=t?[t]:void 0,i.push(r));i.length!==e.options.length&&(r[a]={...e,options:i},n=!0)}else if("relation"===e.type)Z(e)?e.property||e.version||(r[a]={...e,property:a},n=!0):(r[a]={name:e.name,type:"text"},n=!0);else if("formula"===e.type){const t=e.formula?m.as(e.formula):void 0;r[a]={...e,formula:t},n=!0}else void 0===e.type&&(r[a]=void 0)}return{wasNormalized:n,normalizedSchema:r}}(e,t).normalizedSchema}function he(e){return`${c.UU}title`in e?`${c.UU}title`:"title"}new WeakMap;function ke(e){var t,r;return null!=e&&null!==(t=e.format)&&void 0!==t&&t.external_schema?(0,k.m8)(Object.entries(null==e||null===(r=e.format)||void 0===r?void 0:r.external_schema).flatMap((t=>{let[r,n]=t;if(void 0===n)return[];const o=`${c.UU}${r}`;if("relation"===(null==n?void 0:n.type)){var a;const t=null===(a=e.format)||void 0===a||null===(a=a.related_external_object_uris_to_instance_ids)||void 0===a?void 0:a[n.uri];return t?[[o,{name:n.name,type:null==n?void 0:n.type,collection_id:t,collection_pointer:{table:_.v,id:t,spaceId:e.space_id}}]]:[]}return[[o,n]]}))):{}}function xe(e){return Me(e)||we(e)}const Te="title";function Me(e){return e===Te}function we(e){return e===`${c.UU}${Te}`}a.Z.images.icons.titlePng,a.Z.images.icons.textPng,a.Z.images.icons.numberPng,a.Z.images.icons.urlPng,a.Z.images.icons.selectPng,a.Z.images.icons.multipleSelectPng,a.Z.images.icons.statusPng,a.Z.images.icons.personPng,a.Z.images.icons.emailPng,a.Z.images.icons.phoneNumberPng,a.Z.images.icons.datePng,a.Z.images.icons.filePng,a.Z.images.icons.checkboxPng,a.Z.images.icons.formulaPng,a.Z.images.icons.relationPng,a.Z.images.icons.relationPng,a.Z.images.icons.createdAtPng,a.Z.images.icons.createdByPng,a.Z.images.icons.createdAtPng,a.Z.images.icons.createdByPng,a.Z.images.icons.createdAtPng,a.Z.images.icons.formulaPng,a.Z.images.icons.idPng,a.Z.images.icons.locationPng,a.Z.images.icons.verificationSvg;function Ze(e){const{collectionId:t,property:r,propertySchema:n,newOption:o,isAscending:a}=e,i=n.options||[],s=y.cx(i,(e=>e.value.localeCompare(o.value,void 0,{sensitivity:"base"})*(a?1:-1)>=0));return-1!==s?{pointer:{table:_.v,id:t},command:"keyedObjectListBefore",path:["schema",r,"options"],args:{value:o,before:i[s]}}:{pointer:{table:_.v,id:t},command:"keyedObjectListAfter",path:["schema",r,"options"],args:{value:o}}}function Ce(e){const{newTokenValues:t,property:r,propertySchema:n,collectionId:o}=e;if(!l.cu(n))return;const a=n.options||[],i=t.flatMap((e=>e.filter((e=>!a.find((t=>t.value===e)))))),s=[];return i.forEach((e=>{const t=l.TL(a),i={id:(0,g.ZP)(),value:e,color:t};"alphabetical"===n.auto_sort_options||"reverse_alphabetical"===n.auto_sort_options?s.push(l.Ch({collectionId:o,property:r,propertySchema:n,newOption:i,isAscending:"alphabetical"===n.auto_sort_options})):s.push({pointer:{table:_.v,id:o},command:"keyedObjectListAfter",path:["schema",r,"options"],args:{value:i}})})),s}},80951:(e,t,r)=>{r.d(t,{A0:()=>xe,Ak:()=>Y,BW:()=>pe,BY:()=>me,C1:()=>de,CC:()=>Ne,DW:()=>ce,Ds:()=>Le,Gk:()=>A,Gl:()=>ue,Hw:()=>Pe,IQ:()=>qe,Is:()=>te,KK:()=>We,Kp:()=>ke,LC:()=>ze,LL:()=>ye,Ml:()=>ae,NT:()=>Je,O2:()=>H,P4:()=>W,Pd:()=>be,Ps:()=>He,Qm:()=>B,Sj:()=>z,Tp:()=>ee,U8:()=>we,UB:()=>Ee,UU:()=>I,VY:()=>Ce,ZG:()=>re,_I:()=>ie,_w:()=>Q,ah:()=>De,d7:()=>le,e7:()=>Oe,eP:()=>Se,eb:()=>Ae,f0:()=>E,fp:()=>P,g:()=>Ie,gg:()=>Te,gi:()=>je,i7:()=>q,iD:()=>Ue,iT:()=>R,ib:()=>J,ic:()=>Me,j$:()=>ve,kc:()=>_e,nW:()=>Fe,ow:()=>ge,pX:()=>he,rO:()=>oe,rq:()=>fe,sJ:()=>Ge,sh:()=>$e,uJ:()=>Ve,uP:()=>K,wI:()=>$,wS:()=>U,wV:()=>Be,wl:()=>N,xz:()=>F,yF:()=>Ze,yp:()=>ne,zB:()=>Re,zq:()=>X});r(57658);var n=r(66897),o=r(70475),a=r(41432),i=r(30823),s=r(35011),u=r(99036),l=r(42613),c=r(56373),d=r(16691),p=r(40506),m=r(84795),y=r(14215),f=r(77657),g=(r(60709),r(38297)),v=r(76725),_=r(30845),b=r(72126),h=r(59753),k=r(38737),x=(r(482),r(606)),T=r(21202),M=r(6287),w=r(19889),Z=r(70203),C=r(97880),S=r(44876);r(63143);const I=" ";function N(e){return e[0]===I}function R(e,t){const r=e.getCollectionPointer();if(!r)return;const n=t(r);return null==n?void 0:n.getName()}function U(e,t,r){const n=h.kk.fromBlock(e),o=n.getPropertiesStore().getKeyStore(t).getValue();if(o)return o;if(n.getType()===a.Ti.externalObjectInstancePage&&N(t)||"title"===t){var i;const e=null===(i=n.getExternalObjectAttributes())||void 0===i?void 0:i.find((e=>"title"===t?e.id===t:e.id===t.slice(1)));if(e)return function(e,t,r,n){if("inline"===e.type){return e.values.flatMap((e=>"string"==typeof e?Z.TPx(e):"number"==typeof e?Se(e):"boolean"==typeof e?ie(e):S.l1(e)?[]:"date"===e.type||"datetime"===e.type||"datetimerange"===e.type?le(e):void(0,C.t1)(e)))}if("embed"===e.type)return e.values.flatMap(Ue);if("relation"===e.type)return ge(e.values.map((e=>{const r=null==t?void 0:t[e];if(r)return{table:T.iU,id:r,spaceId:n}})).filter(C.$K));if("person"===e.type)return de(e.values.map((e=>{const t=null==r?void 0:r[e];if(t)return{table:w.KJ,id:t,spaceId:n}})).filter(C.$K));(0,C.t1)(e)}(e,n.getFormatValue("related_external_object_uris_to_instance_ids"),n.getFormatValue("related_external_object_uris_to_user_ids"),n.getSpaceId())}}function P(e,t,r){var n;const o=r.getSchema(),a=o[t];if(null==a||!a.derived_property_record_metadata||"external_object_instance_page_metadata"!==a.derived_property_record_metadata.type)return;const i=a.derived_property_record_metadata;if(!o[i.pointer_property_uri])return;return{eoipPointer:null===(n=fe(e.getProperty(i.pointer_property_uri)))||void 0===n?void 0:n[0],eoipMetadata:i}}function D(e,t,r){const n=O(e,t,r);if(n)return U(n.eoip,`${I}${n.externalObjectAttribute}`)}function O(e,t,r){if(!r)return;const n=e.getParentPointer();if(!n.id||!n.spaceId||n.table!==M.v)return;const o=r(n);if((null==o?void 0:o.table)!==M.v)return;const a=P(e,t,o);if(!a)return;const{eoipPointer:i,eoipMetadata:s}=a;if(!i)return;const u=r(i);return u?{eoip:u,externalObjectAttribute:s.external_object_attribute}:void 0}function E(e,t,r){if(!e||!t)return!1;return!!O(e,t,r)}function F(e){const{textValue:t,blockModel:r,getRecordModel:n,propertySchema:o}=e,a=r.getParentPointer();if("auto_increment_id"===(null==o?void 0:o.type)&&"collection"===(null==a?void 0:a.table)&&null!=a&&a.spaceId){var i;return`${`${null===(i=n((0,c.We)({spaceId:a.spaceId,parentTable:"collection",parentId:a.id})))||void 0===i?void 0:i.record_key}-`??0}${t}`}return t}function B(e){const{schema:t,property:r}=e;return t[r]||t[`${I}${r}`]}function A(e){var t;return e.properties||(null===(t=e.format)||void 0===t?void 0:t.attributes)}const V=new WeakMap;function L(e){if(!e.length)return;let t=V.get(e);if(void 0===t){t=new Map;for(const r of e){const e=r.value.trim().toLowerCase();t.set(e,r)}V.set(e,t)}return t}function q(e,t){const r=L(e);return null==r?void 0:r.get(t.trim().toLowerCase())}function j(e,t){var r;const n=L(e);return null==n||null===(r=n.get(t.trim().toLowerCase()))||void 0===r?void 0:r.value}function $(e,t){var r;const n=L(e);return null==n||null===(r=n.get(t.trim().toLowerCase()))||void 0===r?void 0:r.color}const G=new WeakMap;function Y(e){if(void 0===e)return[];const t=G.get(e);if(void 0!==t)return t;const r=Z.Jcv(e).split(",").map((e=>e.trim())).filter(Boolean);return G.set(e,r),r}function z(e,t){const r=Y(e);for(const n of r){const e=j(t,n);if(e)return e}}function W(e,t){const r=Y(e);for(const n of r){const e=q(t,n);if(e)return e}}function H(e){return e?[[e]]:[]}function K(e,t){const r=Y(e).map((e=>{const r=j(t,e);if(r)return r}));return b.jj(b.oA(r))}function J(e,t){const r=Y(e).map((e=>q(t,e)));return b.jj(b.oA(r))}function X(e){if(!e)return[];return[[e.join(",")]]}function Q(e){if(!e)return;const t=Z.bjV(e);if(0===t.length)return;const r=ue(e);return r&&((0,p.v9)(r)||(0,p.qg)(r))?[t[0],r]:void 0}function ee(e){if(!e)return[];const[t,r]=e,n=[];return t.table===w.KJ?n.push(Z.YCD(Z.tEo(t.id))):n.push(Z.YCD(Z.CbB(t.id))),n.push(le(r)[0]),(0,v.Z)(n,(()=>Z.V3y(",")))}const te=H;function re(e,t){return ne(e,t)??t.defaultOption}function ne(e,t){return z(e,t.options??[])}function oe(e,t,r){var n,o,a,i;const s=re(e,t),u=t.groups??[],c=(t.options??[]).find((e=>e.value===s)),d=c&&u.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(c.id)})),p=r.formatMessage(l.ct.statusGroupNameComplete),m=r.formatMessage(l.ct.statusGroupNameInProgress);return(null==d||null===(n=d.name)||void 0===n?void 0:n.toLowerCase())===p.toLowerCase()||(null==d||null===(o=d.name)||void 0===o?void 0:o.toLowerCase())===l.RW.toLowerCase()||((null==d||null===(a=d.name)||void 0===a?void 0:a.toLowerCase())===m.toLowerCase()||(null==d||null===(i=d.name)||void 0===i?void 0:i.toLowerCase())===l.Ho.toLowerCase())&&"partial"}function ae(e){return Z.Jcv(e).trim().toLowerCase()===u.bx.trim().toLowerCase()}function ie(e){return e?u.cd:u.XT}const se=new WeakMap;function ue(e){if(e&&se.has(e))return se.get(e);const t=function(e){const t=Z.nai(e);if(t.length>0){if("Invalid Date"===t[0].start_date)return;return t[0]}const r=Z.Jcv(e);return(0,m.parseDateTimeRangeString)(r)}(e);return e&&se.set(e,t),t}function le(e){return e?[Z.YCD(Z.pZr(e))]:[]}function ce(e){const{textValue:t,propertySchema:r,blockCreatorPointer:n,bypassLimit:o}=e;if("person"!==(null==r?void 0:r.type))return[];const a=Z.bjV(t),i=new Set;let s=[];for(const u of a){const e=(0,d.dn)(u);i.has(e)||(i.add(e),s.push(u))}return 0===s.length&&"created_by"===r.default&&n&&(s=[n]),r.limit&&!o?s.slice(0,1):s}function de(e){const t=e.map((e=>e.table===w.KJ?Z.YCD(Z.tEo(e.id)):Z.YCD(Z.CbB(e.id))));return(0,v.Z)(t,(()=>Z.V3y(",")))}function pe(e){const{value:t,isTemplatePage:r,propertySchema:o,blockCreatorPointer:a}=e;if(!o)return[];const i=Z.KSk({includeTemplateVariables:r,value:t}),s=new Set;let u=[];for(const c of i){let e;(0,n.Wk)(c)?e=c.id:Z.D4X(c)?e=c:(0,C.t1)(c),s.has(e)||(s.add(e),u.push(c))}0===u.length&&"created_by"===o.default&&a&&(u=[a]);const l=o.limit;return l?u.slice(0,l):u}function me(e){const t=e.map((e=>Z.D4X(e)?Z.YCD(Z.WBu({type:e})):(0,n.Wk)(e)?e.table===w.KJ?Z.YCD(Z.tEo(e.id)):Z.YCD(Z.CbB(e.id)):void(0,C.t1)(e)));return(0,v.Z)(t,(()=>Z.V3y(",")))}function ye(e){const t=Z.jDe(e);return b.jj(t)}function fe(e){const t=Z.cCA(e);return x.dr.uniq(t)}function ge(e){const t=e.map((e=>Z.YCD(Z.$0A(e.id,e.spaceId))));return(0,v.Z)(t,(()=>Z.V3y(",")))}function ve(e){const{relationValue:t,propertySchema:r,limit:n,getRecordModel:o}=e,a=r.limit??n,i=[];for(const l of t){var s;if(a&&i.length>=a)break;const e=o(l);if(!e||!e.getAlive())continue;(null===(s=(0,g.J2)({getRecordModel:o,block:e}))||void 0===s?void 0:s.id)===(0,u.F0)(r)&&i.push(l)}return i}function _e(e){let{relationValue:t,propertySchema:r,getRecordModel:n,relationPropertyCollectionId:o,limit:a,originAction:i}=e;const s=r.limit??a,u=[];for(const c of t){var l;if(s&&u.length>=s)break;if("paste"===i){u.push(c);continue}const e=n(c);if(!e||!e.getAlive())continue;(null===(l=(0,g.J2)({getRecordModel:n,block:e}))||void 0===l?void 0:l.id)===o&&u.push(c)}return u}async function be(e){const{relationValue:t,propertySchema:r,loadRecordModel:n,limit:o}=e,a=r.limit??o,i=[];for(const s of b.yo(t,10)){const e=(await Promise.all(s.map((async e=>{var t;const o=await n(e);if(!o||!o.getAlive())return;return(null===(t=await(0,g.Rd)({loadRecordModel:n,block:o}))||void 0===t?void 0:t.id)===(0,u.F0)(r)?e:void 0})))).filter(C.$K);if(a){const t=a-i.length;e.splice(t)}if(i.push(...e),a&&i.length>=a)break}return i}function he(e,t,r){let n=[...e];const o=e.findIndex((e=>e.property===t));return n=e[o]?[...e.slice(0,o),{property:t,visible:r},...e.slice(o+1)]:[...e,{property:t,visible:r}],n}function ke(e){return!!e&&!("relation"!==e.type||!e.connectedRelation||e.connectedRelation.integration_id!==f.U9)}function xe(e){return!!e&&!("relation"!==e.type||!e.connectedRelation||e.connectedRelation.integration_id!==f.Dv)}function Te(e){return!!e&&!("relation"!==e.type||!e.connectedRelation||e.connectedRelation.integration_id!==f.f3)}function Me(e){return!!e&&!("relation"!==e.type||!e.connectedRelation||e.connectedRelation.integration_id!==f.mQ)}function we(e){return!!e&&!("relation"!==e.type||!e.connectedRelation||e.connectedRelation.integration_id!==f.Nw)}function Ze(e){return!!e&&!("relation"!==e.type||!e.connectedRelation||e.connectedRelation.integration_id!==f.Dv)}function Ce(e){const t=Z.Jcv(e);return k.p3(t)}function Se(e){return void 0===e||isNaN(e)?[]:[[e.toString()]]}function Ie(e){const t=Z.rxn(e),r=b.mN(t,(e=>e.url));if(r.length>0)return r;const n=Z.Jcv(e);if(n){const e=Z.rOz(n);if(e)return[{name:e.value,url:e.href}]}return[]}function Ne(e){const t=e.map((e=>Z.V3y(e.name,[Z.edl(e.url)])));return(0,v.Z)(t,(()=>Z.V3y(",")))}function Re(e){const t=Z.rxn(e);if(t.length>0)return t[0].url;return Z.Jcv(e)}function Ue(e){return null==e?[]:[Z.V3y(e,[Z.edl(e)])]}function Pe(e,t){if("url"===e){const e=Re(t);if(e){const t=_.s(e);if(t&&t[0]&&t[0].href)return t[0].href}}else if("phone_number"===e){const e=Re(t);if(e){return`tel:${e.trim().replace(/\s/g,"").replace(/\(/g,"").replace(/\)/g,"").replace(/\-/g,"").replace(/\./g,"")}`}}else if("email"===e){const e=Re(t);if(e)return`mailto:${e}`}}function De(e){const t=Z.Jcv(e);return k.p3(t)}function Oe(e){return void 0===e||isNaN(e)?[]:[[e.toString()]]}function Ee(e){const t=h.kk.fromBlock(e.block);if("page"===t.getType()&&t.getParentTable()===M.v)return t.getParentPointer()}function Fe(e){const{block:t,getRecordModel:r}=e,n=Ee({block:t});return n&&r(n)}function Be(e){var t,r;const{block:n,property:o,schema:a,getRecordModel:s,userId:u,userTimeZone:l,intl:c}=e,d=(0,i.FT)({block:n,property:o,schema:a,getRecordModel:s,propertyMapping:void 0,collectionRequestContext:{userId:u,intl:c,userTimeZone:l,depth:0,visitedProperties:new Set,resultCache:new Map}});if(void 0===d)return!0;for(const i of d){if(D(n,o,s))return!1;switch(i.type){case"text":if(null!=i&&null!==(t=i.value)&&void 0!==t&&t.length)return!1;break;case"checkbox":if(null!=i&&i.value)return!1;break;case"select":case"number":case"date":if(void 0!==i.value)return!1;break;case"multi_select":case"relation":case"person":case"file":if(null!=i&&null!==(r=i.value)&&void 0!==r&&r.length)return!1;break;case"verification":if(void 0!==i.value&&"none"!==i.value)return!1;break;case"status":if(void 0!==i.option)return!1;break;case"location":return!1;default:(0,C.t1)(i)}}return!0}function Ae(e){if(e&&"formula"===e.type){return"checkbox"===(0,s.mm)(e)}return e&&"checkbox"===e.type}function Ve(e){const{block:t,propertySchema:r,getRecordModel:n}=e;if(void 0===r.property)return[];const o=U(t,r.property);if(void 0===o)return[];return ve({relationValue:fe(o),getRecordModel:n,propertySchema:r}).map((e=>n(e))).filter(C.$K)}function Le(e){const{block:t,propertySchema:r,getRecordModel:n}=e;if(void 0===r.property)return[];const o=U(t,r.property);if(void 0===o)return[];return ve({relationValue:fe(o),getRecordModel:n,propertySchema:r}).map((e=>n(e))).filter(C.$K)}function qe(e){let{before:t,after:r}=e;if(!(t&&r&&(0,u.t)(t)&&(0,u.t)(r)))return;const n=t.options??[],o=r.options??[],a=b.KX(n,"id"),i=b.KX(o,"id"),s=[],l=[],c=[];for(const u of n){const e=i[u.id];e?e.value!==u.value&&c.push({before:u,after:e}):l.push(u)}for(const u of o)a[u.id]||s.push(u);return{newOptions:s,removedOptions:l,modifiedOptions:c}}function je(e){let{isAuthed:t,isSpaceAdmin:r,isPropertyAdminAuthOnly:n,isMobile:o}=e;return!t&&!r&&n&&!o}function $e(e){const{propertySchema:t,isTypedProperty:r}=e,n=(0,u.NK)(t);return"title"===t.type||"verification"===t.type||"auto_increment_id"===t.type||r||n}function Ge(e){return[...Z.cCA(e),...Z.bjV(e)]}const Ye=[o.C.MeetingNoteToCalendarEventRelation,o.C.Attendees,o.C.MeetingTime];function ze(e,t){return!!e&&Ye.some((r=>{var n;return(null===(n=e.getPropertyMapping())||void 0===n?void 0:n[r])===t}))}function We(e,t,r){return!(!e||!t)&&(!!ze(t,r)&&!!Ke(e))}function He(e,t){const r=Ke(e),n=r?t(r):void 0;return null==n?void 0:n.getFormat().uri}function Ke(e){var t;return null===(t=fe(e.getPropertiesStore().getKeyStore(o.C.MeetingNoteToCalendarEventRelation).getValue()))||void 0===t?void 0:t[0]}function Je(e){const{beforeValue:t,afterValue:r,propertySchema:n,getRecordModel:o,getBlockTitle:a}=e,i=fe(t),s=fe(r),u=(0,y.N)(i,s,(e=>`${e.id}${e.table}`)),l=new Set(ve({relationValue:u.created,getRecordModel:o,propertySchema:n})),c=new Set(ve({relationValue:u.deleted,getRecordModel:o,propertySchema:n})),d=[...l,...c];return d.flatMap(((e,t)=>{const r=a({table:T.iU,id:e.id})||[],n=[],o=Z.lzi(r);for(const a of o)if(Z.QJH(a)){const t=l.has(e)?"+":"-",r=[a[0],[[t]]];n.push(r)}else n.push(a);return t<d.length-1&&n.push(Z.V3y("\n")),n}))}},43690:(e,t,r)=>{r.d(t,{BW:()=>A,C7:()=>W,Ct:()=>oe,HF:()=>J,Ih:()=>se,Oi:()=>ce,Qo:()=>le,Uo:()=>z,aW:()=>q,c_:()=>ae,dN:()=>ie,fY:()=>$,fk:()=>O,jF:()=>H,kk:()=>V,ps:()=>j,x3:()=>L,zh:()=>ue});r(57658);var n=r(41432),o=r(2032),a=r(76205),i=r(30823),s=r(35011),u=r(99036),l=r(80951),c=r(97058),d=r(10070),p=r(28155),m=r(56373),y=r(6695),f=r(60709),g=r(84116),v=r(78106),_=r(38297),b=r(59730),h=r(72126),k=r(59753),x=r(92516),T=r(61158),M=r(63306),w=r(73360),Z=r(33361),C=r(606),S=r(98459),I=r(82883),N=r(21202),R=r(6287),U=r(97880),P=r(74487);P.object({required:{type:P.literal("reducer"),userTimeZone:P.undefinable(P.string()),searchQuery:P.undefinable(P.string())},optional:{sort:P.any(),filter:P.any(),reducers:P.any(),upwardTraversalRelation:P.any(),vectorSearch:P.undefinable(P.any()),userId:P.string(),reducerDependencies:P.record(P.string(),P.array(P.string())),maxPreloadedRecords:P.number()}});class D{constructor(){this.filterStats=void 0,this.trackingOptimizer=void 0,this.cachedFilters=void 0,this.filterStats=[],this.trackingOptimizer=e=>{var t;const r={fail:0,pass:0,evalTime:0,filter:e.basicFilter,property:e.property,type:null===(t=e.schema[e.property])||void 0===t?void 0:t.type};return this.filterStats.push(r),t=>{const n=Date.now(),o=e.compiledFilter(t);return r.evalTime+=Date.now()-n,o?r.pass+=1:r.fail+=1,o}},this.cachedFilters=new WeakMap}compile(e){const{context:t,filter:r,propertyMapping:n}=e;if(!r)return;const o=this.memoizedCompile(r,t);return n?e=>o({...e,propertyMapping:n}):o}memoizedCompile(e,t){var r,n;const o=null===(r=this.cachedFilters.get(t.schema))||void 0===r?void 0:r.get(e);if(void 0!==o)return o;const i={...t,optimizer:this.trackingOptimizer},s=(0,a.q)({context:i,filter:e});return this.cachedFilters.has(t.schema)||this.cachedFilters.set(t.schema,new WeakMap),null===(n=this.cachedFilters.get(t.schema))||void 0===n||n.set(e,s),s}}function O(e){const{schema:t,loader:r,getRecordModel:n,pageSort:o,apiSorts:a,intl:i,isSorted:s,relativeVariableResult:u}=e;if("reducer"===r.type){const e={};h.Ed(r.reducers||{},((l,d)=>{e[d]=(0,c.Q7)({schema:t,loader:r,reducer:l,pageSort:o,getRecordModel:n,apiSorts:a,intl:i,isSorted:s,relativeVariableResult:u})}));return{type:"reducer",reducerStates:e,completedReducers:{},filterCompiler:new D,upwardTraversalVisitedIds:new Set,vectorSearchScores:{}}}(0,U.t1)(r.type)}const E={incremented:!1,completedReducers:{},isSubitemWithDeadTopLevelBlock:!1};function F(e){return e.alive&&!e.is_template&&e.type!==n.Ti.copyIndicator}function B(e){const{block:t,propertySchema:r,getRecordModel:n,visitedIds:o,currentTraversalVisitedIds:a}=e;if(o.has(t.id))return new Set;o.add(t.id);const i=(0,l.uJ)({block:t,propertySchema:r,getRecordModel:n});if(0===i.length)return new Set([t]);if(i.some((e=>a.has(e.id))))return new Set([t]);if(i.some((e=>o.has(e.id))))return new Set;const s=new Set;for(const u of i){a.add(u.id);const e=B({block:u,propertySchema:r,getRecordModel:n,visitedIds:o,currentTraversalVisitedIds:a});a.delete(u.id);for(const t of e){F(t)&&s.add(t)}}return s}function A(e,t,r,n){var o;const{visibleProperties:a,loader:i,userId:s,getRecordModel:u,intl:l,schema:m,relativeVariableResult:y,groupsReducerIds:f,reducerIdsWithNoGroupDependencies:g,collectionSourceType:v,resultCache:h,userStartOfWeek:x,areBlocksPreFiltered:T}=r,w=k.kk.fromBlock(e),Z=k.kk.fromCollection(t);if(!(0,p.MQ)(v)&&!function(e){const{collection:t,block:r,getRecordModel:n}=e;if(!F(r))return!1;const o=(0,_.J2)({getRecordModel:n,block:r});return t.id===(null==o?void 0:o.id)}({collection:Z,getRecordModel:u,block:w}))return E;if(!i.reducers)return E;const C={},S=Z.getNormalizedSchema(),I=null===(o=Z.getFormat())||void 0===o?void 0:o.app_uri_map,N={schema:m,intl:l,userId:s,userTimeZone:i.userTimeZone,userStartOfWeek:x,relativeVariableResult:y};if("reducer"===i.type){if(!T){const e=n.filterCompiler.compile({filter:i.filter,context:N,propertyMapping:I});if(!(!e||e({block:k.kk.fromBlock(w),getRecordModel:u,propertyMapping:I,formulaTimeoutTimestampMs:r.formulaTimeoutMs&&Date.now()+r.formulaTimeoutMs,logFormulaTimeoutFn:r.logFormulaTimeoutFn,resultCache:h})))return E;if(i.searchQuery&&!$({block:w,query:i.searchQuery,getRecordModel:u,userTimeZone:i.userTimeZone,schema:S,intl:l,onlyPropertyIds:a?d.aQ.fromViewPropertyIds(a,I):void 0}))return E}const e=i.upwardTraversalRelation?B({block:w,propertySchema:i.upwardTraversalRelation,getRecordModel:u,visitedIds:n.upwardTraversalVisitedIds,currentTraversalVisitedIds:new Set([w.id])}):new Set([w]);let t=!1;if(i.upwardTraversalRelation)for(const r of e){if(r.id===w.id)continue;if(!(0,M.Zg)((0,M.DW)(r.pointer,u))){t=!0;break}}const o=i.reducerDependencies??{};for(const l of e){const e=[];for(const o of f??[]){const t=i.reducers[o],d=n.reducerStates[o];if((0,c.qf)({intl:r.intl,reducer:t,reducerId:o,state:d,schema:m,block:l,getRecordModel:u,userTimeZone:i.userTimeZone,userId:s,visibleProperties:a,propertyMapping:I,relativeVariableResult:y,formulaTimeoutMs:r.formulaTimeoutMs,logFormulaTimeoutFn:r.logFormulaTimeoutFn,resultCache:h}),"groups"!==d.type)throw new b.D3("Expected GroupsReducer to be of type 'groups'");e.push(d)}const t=(0,c.cm)(e,l.id),d=new Set;for(const r of t){const e=o[r];for(const t of e??[])d.add(t)}for(const o of[...d,...g??[]]){if(n.completedReducers[o])continue;const e=i.reducers[o];if(!e)continue;const t=n.reducerStates[o],d=n.filterCompiler.compile({filter:e.filter,context:N,propertyMapping:I});if(!d||d({block:k.kk.fromBlock(l),getRecordModel:u,propertyMapping:void 0,formulaTimeoutTimestampMs:r.formulaTimeoutMs&&Date.now()+r.formulaTimeoutMs,logFormulaTimeoutFn:r.logFormulaTimeoutFn,resultCache:h})){const{shouldComplete:d}=(0,c.qf)({intl:r.intl,reducer:e,reducerId:o,state:t,schema:m,block:l,getRecordModel:u,userTimeZone:i.userTimeZone,userId:s,visibleProperties:a,propertyMapping:I,relativeVariableResult:y,formulaTimeoutMs:r.formulaTimeoutMs,logFormulaTimeoutFn:r.logFormulaTimeoutFn,resultCache:h});if(d&&!i.vectorSearch){const a=(0,c.rQ)({reducer:e,state:t,reducerLoaderState:n,loader:i,schema:m,isSprintPlanningView:r.isSprintPlanningView});C[o]=a,n.completedReducers[o]=a}}}}return{incremented:!0,completedReducers:C,isSubitemWithDeadTopLevelBlock:t}}(0,U.t1)(i.type)}function V(e,t){const{loader:r,schema:n}=e;if("reducer"===r.type){const o={...t.completedReducers},a={};r.reducers&&h.Ed(r.reducers||{},((i,s)=>{if(t.completedReducers[s])return;const u=t.reducerStates[s],l=(0,c.rQ)({reducer:i,reducerLoaderState:t,state:u,loader:r,schema:n,isSprintPlanningView:e.isSprintPlanningView});o[s]=l,a[s]=l}));return{result:{type:"reducer",reducerResults:o},completedReducers:a,filterStats:t.filterCompiler.filterStats}}(0,U.t1)(r.type)}function L(e,t){let r=[],n=[];if(e){const[o,a]=h.uK(Object.entries(e),(e=>{let[,t]=e;return"groups"===t.type}));r=o.map((e=>{let[t,r]=e;return t}));const i=a.map((e=>{let[t,r]=e;return t})),s=new Set(Object.values(t??{}).flat());n=i.filter((e=>!s.has(e)))}return{groupsReducerIds:r,reducerIdsWithNoGroupDependencies:n}}function q(e){const{result:t,onlyTypes:r}=e;if("reducer"===t.type){const e=new Set;return h.Ed(t.reducerResults,(t=>{if(!r||r.includes(t.type))for(const r of function(e){const t=new Set;if("results"===e.type)for(const r of e.blockIds)t.add(r);else if("groups"===e.type)for(const{value:r}of e.results)"relation"===r.type&&r.value&&"id"in r.value&&t.add(r.value.id),"location"===r.type&&r.value&&t.add(r.value.id);return[...t]}(t))e.add(r)})),Array.from(e.values())}(0,U.t1)(t.type)}function j(e,t,r){var n;const o=(0,y.iB)(e,r,void 0,(0,y.Dg)(t))[(0,y.oz)(t)];"list"!==t&&"calendar"!==t||null==o||o.push({visible:!0,property:"title"});return null==o||null===(n=o.filter((e=>Boolean(e.visible))))||void 0===n?void 0:n.map((e=>e.property))}function $(e){const{block:t,query:r,getRecordModel:n,userTimeZone:o,schema:a,intl:i,onlyPropertyIds:s}=e,u=k.kk.fromBlock(t);if(!(0,l.Gk)({properties:u.getProperties(),format:u.getFormat()}))return!1;const c=s??Object.keys(a);return Boolean(c.find((e=>{let t;if(t="title"===e&&u.isType("collection_view_page")?(0,l.iT)(u,n):(0,l.wS)(u,e,n),!t)return!1;const s=(0,I.X)({textValue:t,getRecordModel:n,userTimeZone:o,intl:i});return Y((0,l.xz)({textValue:s,blockModel:u,getRecordModel:n,propertySchema:a[e]})).indexOf(Y(r.trim()))>=0})))}const G=/[\u0300-\u036f]/g;function Y(e){return e?e.toLocaleLowerCase().normalize("NFD").replace(G,""):""}const z=6,W=15;async function H(e){const{blocks:t,recordMap:r,loadRecordModel:n}=e;for(const o of t){const e=(o.content??[]).slice(0,W).map((e=>({table:N.iU,id:e,spaceId:o.space_id}))),t=await n(e);r.assign(t)}}async function K(e){let{record:t,dependencies:r,loadRecordModel:n,userId:o,userTimeZone:a,intl:i,formulaTimeoutMs:u,logFormulaTimeoutFn:c,checkCancellation:d,dependencyCache:p,resultCache:y}=e;d&&d();const b=[],h=t.value;if(h.parent_table&&h.parent_id&&b.push(C.dr.getParentPointerFromRecordWithParent(h)),t.table===N.iU){const e=t.value;if(e){const t=k.kk.fromBlock(e),o=t.getCollectionPointer();o&&b.push(o);const h=await(0,_.Rd)({block:t,loadRecordModel:n});if(h){const t=r.get(h.id),o=[...(null==t?void 0:t.get("title"))??[],...(null==t?void 0:t.get("text"))??[]].map((e=>{let{property:t}=e;return t}));for(const r of o){var x;const t=null===(x=e.properties)||void 0===x?void 0:x[r];t&&b.push(...(0,S.F2)(t))}(null==t?void 0:t.get("created_by"))&&e.created_by_table&&e.created_by_id&&b.push({table:e.created_by_table,id:e.created_by_id,spaceId:e.space_id});(null==t?void 0:t.get("last_edited_by"))&&e.last_edited_by_table&&e.last_edited_by_id&&b.push({table:e.last_edited_by_table,id:e.last_edited_by_id,spaceId:e.space_id});if((null==t?void 0:t.get("auto_increment_id"))&&b.push((0,m.We)({spaceId:e.space_id,parentTable:R.v,parentId:h.id})),t&&(0,l.Gk)(e)){const r=[...t.get("relation")??[],...t.get("person")??[]];for(const t of r){const r=(0,l.wS)(e,t.property),n=(0,l.LL)(r);for(const e of n)b.push({table:N.iU,id:e,spaceId:t.collectionPointer.spaceId});const o=k.kk.fromBlock(e),a=(0,l.DW)({textValue:r,propertySchema:t.propertySchema,bypassLimit:!0,blockCreatorPointer:o.getCreatedByPointer()});for(const e of a)b.push(e)}const o=t.get("formula");if(o&&a&&i)for(const t of o){d&&d();const r=t.propertySchema,o=(0,f.l)();if(void 0===r.version||void 0===r.formula2||!o)return b;const l={kind:g.yp.ThisRow,value:{type:"block",value:{table:"block",id:e.id}}};let m;const _=(0,s.XU)({resultCache:y,blockId:e.id,property:t.property});if(void 0!==_)m={value:(0,s.PY)(_)};else{const f={values:[l],handleDataRequest:(0,v.yf)(k.om.constant(void 0),n,u,c,d,p,y),intl:i,userTimeZone:a,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:u&&Date.now()+u,logFormulaTimeoutFn:c,resultCache:y},g=await o.executeFormulaAsync(r.formula2.code,f);"value"in g&&(0,s.j1)({resultCache:y,blockId:e.id,property:t.property,value:g.value}),m=(0,s.oh)(g)}(0,s.HU)(k.kk.fromBlock(e),h,t.property,(()=>m))}}}}}return b}async function J(e){return X(e,new T.Z)}async function X(e,t){var r;const{collectionPointer:n,schema:o,property:a,loadRecordModel:i,dependencyCache:l}=e,c=o[a];if(!c)return[];const d=null===(r=l.get(n.id))||void 0===r?void 0:r.get(a);if(d)return d;const p={collectionPointer:n,property:a,propertySchema:c};if(t.has(p))return[p];if(t.add(p),c.derived_property_record_metadata){const e=c.derived_property_record_metadata.pointer_property_uri,t=o[e];if(t){return[{collectionPointer:n,property:e,propertySchema:t}]}}else{if("relation"===c.type){const e=(0,u.j0)(c);return e&&await i(e),[]}if("formula"===c.type){const e=h.oA((0,s.pV)(c).map((e=>{const t=o[e];if(t){return{collectionPointer:n,property:e,propertySchema:t}}}))),r=await Promise.all(e.map((e=>{let{property:r}=e;return X({collectionPointer:n,schema:o,property:r,loadRecordModel:i,dependencyCache:l},t)}))),u=h.mN([...e,...h.xH(r)],(e=>{let{collectionPointer:t,property:r}=e;return`${t.id}${r}`}));return Q({dependencyCache:l,collectionPointer:n,property:a,result:u}),u}if("rollup"===c.type&&c.relation_property&&c.target_property){const e=o[c.relation_property];if(!e||"relation"!==e.type)return[];const r=(0,u.j0)(e);if(!r)return[];const s=await i(r),d=(null==s?void 0:s.getNormalizedSchema())??{},p=[],m={collectionPointer:n,property:c.relation_property,propertySchema:e};if(p.push(m),c.target_property_type){const e=d[c.target_property];if(e&&c.target_property_type===e.type){const t={collectionPointer:{table:R.v,id:r.id,spaceId:null==s?void 0:s.space_id},property:c.target_property,propertySchema:e};p.push(t)}}const y=await X({collectionPointer:r,schema:d,property:c.target_property,loadRecordModel:i,dependencyCache:l},t);p.push(...y);const f=h.mN(p,(e=>{let{collectionPointer:t,property:r}=e;return`${t.id}${r}`}));return Q({dependencyCache:l,collectionPointer:n,property:a,result:f}),f}}return[]}function Q(e){const{dependencyCache:t,collectionPointer:r,property:n,result:o}=e,a=t.get(r.id);if(void 0!==a)a.set(n,o);else{const e=new Map;e.set(n,o),t.set(r.id,e)}}function ee(e){const{filter:t,propertyIdSet:r}=e;if((0,a.aN)(t))r.add(t.property);else if((0,a.vA)(t)){const e=t.filters||[];for(const t of e)ee({filter:t,propertyIdSet:r})}}function te(e){const{loader:t,schema:r,loadAllProperties:n}=e,a=new Set,i=new Set;var s;if(t&&(null!=t&&null!==(s=t.upwardTraversalRelation)&&void 0!==s&&s.property&&a.add(t.upwardTraversalRelation.property),"reducer"===t.type)){if((t.filter||t.filterToComputeDependencies)&&ee({propertyIdSet:a,filter:t.filterToComputeDependencies??t.filter}),t.sort)for(const n of t.sort){var u;"formula"===(null===(u=r[n.property])||void 0===u?void 0:u.type)?i.add(n.property):a.add(n.property)}const e=t.reducers||{};h.Ed(e,(e=>{if(e){var t;let n;if(e.filter&&ee({propertyIdSet:a,filter:e.filter}),"aggregation"===e.type&&(0,o.pK)(e.aggregation)&&(n=e.aggregation.property),"groups"===e.type&&(n=e.groupBy.property),!n)return;"formula"===(null===(t=r[n])||void 0===t?void 0:t.type)?i.add(n):a.add(n)}}))}if(function(e){return Boolean(null==e?void 0:e.searchQuery)||Boolean(h.VO(null==e?void 0:e.reducers).some((e=>Boolean("results"===e.type&&e.searchQuery))))}(t))for(const o of Object.keys(r)){const e=r[o];if(e){if("rollup"===e.type||"formula"===e.type)continue;a.add(o)}}if(n)for(const o of Object.keys(r))i.add(o);return{filterStagePropertySet:a,incrementStagePropertySet:i}}function re(e){return"property"in e}async function ne(e){const{recordMap:t,loadRecordModel:r,collectionValue:n,properties:o,schema:a,dependencyCache:i}=e,s=x.s.throughRecordMap(t,r),u=new T.Z,l={table:R.v,id:n.id,spaceId:n.space_id};return await Promise.all(o.map((async e=>{const t=a[e];if(t){const r={collectionPointer:l,property:e,propertySchema:t};u.add(r);const n=await J({collectionPointer:l,schema:a,property:e,loadRecordModel:s,dependencyCache:i});for(const e of n)u.add(e)}}))),u}async function oe(e){const{collectionValue:t,loader:r,recordMap:n,loadRecordModel:o,loadAllProperties:a,apiSorts:i,dependencyCache:s}=e,l=(0,u.oC)(t),c=k.kk.fromCollection(t).getPropertyMapping(),p=(i??[]).filter(re),{filterStagePropertySet:m,incrementStagePropertySet:y}=te({loader:r,schema:l,loadAllProperties:a});p.forEach((e=>m.add(e.property)));const f=Array.from(m),g=h.e5(Array.from(y),f),v=d.aQ.fromViewPropertyIds(f,c),_=d.aQ.fromViewPropertyIds(Array.from(g),c),[b,x]=await Promise.all([await ne({recordMap:n,loadRecordModel:o,collectionValue:t,properties:v,schema:l,dependencyCache:s}),await ne({recordMap:n,loadRecordModel:o,collectionValue:t,properties:_,schema:l,dependencyCache:s})]);return{filterStageDependencies:b.entries(),incrementStageDependencies:x.entries()}}async function ae(e){const{blocks:t,recordMap:r,dependencies:n,loadRecordModel:o,userId:a,userTimeZone:i,intl:s,formulaTimeoutMs:u,logFormulaTimeoutFn:l,checkCancellation:c,dependencyCache:d,resultCache:p}=e;c&&c();const m=[];for(const v of t){const e=k.kk.fromBlock(v),t=e.pointer;m.push(t),r.setModel(e.pointer,e)}if(!n)return;const y=new Map,f=new Map;for(const v of n){const e=v.collectionPointer.id,t="formula"===v.propertySchema.type?y:f;let r=t.get(e);void 0===r&&(r=new Map,t.set(e,r));const n=r.get(v.propertySchema.type);void 0===n?r.set(v.propertySchema.type,[v]):n.push(v)}const g=x.s.throughRecordMap(r,o);for(const v of[f,y])await(0,Z.aV)({recordPointers:m,recurFn:async(e,t,r)=>await K({record:w.mk.create(e.table,e.__IM_SORRY__getValue()),dependencies:v,dependencyCache:d,loadRecordModel:g,intl:s,userId:a,userTimeZone:i,formulaTimeoutMs:u,logFormulaTimeoutFn:l,checkCancellation:c,resultCache:p}),loadRecordModel:g,recordMap:r})}function ie(e,t){const r=t[e.property];if(r&&e.filter){if("status"===r.type){const{property:t,filter:n}=e,o=r.groups??[];if((0,a.mv)(e.filter))return e;if((0,a.XA)(n)){const e=n.value.value;if(void 0===e)return;const r=o[o.length-1];return{filter:{operator:e?"status_is":"status_is_not",value:{type:"is_group",value:null==r?void 0:r.name}},property:t}}if((0,a.dx)(n)||(0,a.NU)(n)){if((0,a.mv)(n))return;const e=((0,a.dx)(n)?(0,a.mg)(n):(0,a.qC)(n)).map((e=>({type:"is_option",value:e.value})));return{filter:{operator:"enum_is"===n.operator||"enum_contains"===n.operator?"status_is":"status_is_not",value:e.length>0?e:{type:"is_group",value:void 0}},property:t}}if(!(0,a.r2)(n))return}if((0,a.J5)(t,e.property,e.filter,void 0)){if("select"===r.type){if(!(0,a.dx)(e.filter))return;if((0,a.mv)(e.filter))return e;const t=(0,a.mg)(e.filter);if(0===t.length)return e;return t.every((e=>(r.options||[]).some((t=>t.value===e.value))))?e:void 0}if("multi_select"===r.type){if(!(0,a.NU)(e.filter))return;if((0,a.mv)(e.filter))return e;const t=(0,a.qC)(e.filter);if(0===t.length)return e;return t.every((e=>(r.options||[]).some((t=>t.value===e.value))))?e:void 0}if("date"===r.type&&(0,a.TQ)(e.filter)){const t=e.filter.value;if("relative"===t.type){if("custom"===t.value||"surrounding"===t.value)return{...e,filter:{...e.filter,operator:"date_is_relative_to"}};{const r=a.A9[t.value],n={...e.filter,value:r,operator:"date_is_relative_to"};return{...e,filter:n}}}if("exact"===t.type)return{...e,filter:{...e.filter,operator:"date_is_within"}};(0,U.t1)(t)}if("relation"===r.type&&"relation_contains"===e.filter.operator){const t=(0,a.YO)(e.filter);t.length>1&&(e.filter.value=t.filter((e=>void 0!==e.value)))}return e}}}function se(e,t){if((0,a.vA)(e)){const r=e,n=r.filters||[],o={...r,filters:h.oA(n.map((e=>se(e,t))))};if(!o.filters||0===o.filters.length)return;return o}return(0,a.aN)(e)?ie(e,t):e}function ue(e,t){return e.filter((e=>{const r=t[e.property];return Boolean(r)}))}function le(e,t){let r=e&&e.query2?e.query2:{};if(r.calendar_by&&e&&"calendar"===e.type){const e=t[r.calendar_by];e&&(0,u.Lt)(e)||(r={...r,calendar_by:void 0})}if(r.timeline_by&&e&&"timeline"===e.type){const e=t[r.timeline_by];if(e&&(0,u.Lt)(e)||(r={...r,timeline_by:void 0}),r.timeline_by_end){const e=t[r.timeline_by_end];e&&(0,u.Lt)(e)||(r={...r,timeline_by_end:void 0})}}if(r.filter&&(r={...r,filter:se(r.filter,t)}),r.sort&&(r={...r,sort:ue(r.sort,t)}),r.aggregations){const n=r.aggregations.filter((r=>{if((0,o.HK)(r))return(0,o.sl)(r.aggregator);const n=t[r.property];if(n){if((0,i.LR)(n.type)){const e=(0,i.vc)(n.type);if(!(0,o.Ag)(e,r.aggregator))return!1}return!!e}}));r={...r,aggregations:n}}return!e||"board"!==e.type||r.aggregations&&0!==r.aggregations.length||(r.aggregations=[{aggregator:"count"}]),r}function ce(e){const{expectedAggregator:t,aggregationReducerResult:r}=e;if(!t)return{error:"no aggregation provided"};const n=(0,o.W6)((0,o.gu)(t));return r&&"aggregation"===r.type&&r.aggregationResult.type===n&&void 0!==r.aggregationResult.value?{value:r.aggregationResult.value}:{error:"unexpected response returned for aggregation"}}},97058:(e,t,r)=>{r.d(t,{M9:()=>f,Q7:()=>g,cm:()=>S,gd:()=>h,qf:()=>v,rQ:()=>_});r(57658);var n=r(59308),o=r(2032),a=r(14714),i=r(80951),s=r(43690),u=r(10070),l=r(60246),c=r(59730),d=r(72126),p=r(59753),m=r(70203),y=r(97880);const f="board_collection_groups";function g(e){const{schema:t,loader:r,reducer:n,getRecordModel:i,intl:s,apiSorts:u,pageSort:c,isSorted:d,relativeVariableResult:p}=e;if("results"===n.type){const e=(0,l.$m)({userId:r.userId,userTimeZone:r.userTimeZone,intl:s,userSorts:r.sort??[],apiSorts:u});return{type:"results",sorting:d?"sorted":new l.EO([...e,...(0,l.Xm)(c)]),blockIds:[],total:0}}if("groups"===n.type){const e={type:"groups",groupsMap:new Map,blockIdToGroupIds:new Map,blockIdToSubgroupIds:new Map},r=(0,a.Qq)({schema:t,groupBy:n.groupBy});if(r)for(const t of r){const r=(0,a.Hd)(t);e.groupsMap.set(r,C({propertyType:n.groupBy.type,group:t,currentValue:e.groupsMap.get(r),getRecordModel:i}))}else{const r=t[n.groupBy.property];if(r&&(0,a.LG)(r)){const t=(0,a.N2)(r);if(t){const r=(0,a.Hd)(t);e.groupsMap.set(r,C({propertyType:n.groupBy.type,group:t,currentValue:e.groupsMap.get(r),getRecordModel:i}))}if(r&&"relation"===r.type&&p){var m;const t=null===(m=r.collection_pointer)||void 0===m?void 0:m.id;if(t){const r=p[t];r&&Object.entries(r).filter((e=>{let[t,r]=e;return void 0!==r})).forEach((t=>{let[r,o]=t;const s={type:"relation",value:{type:"relative",value:{type:"builtin",variable:r}}},u=(0,a.Hd)(s);e.groupsMap.set(u,C({propertyType:n.groupBy.type,group:s,currentValue:e.groupsMap.get(u),getRecordModel:i}))}))}}}}if(n.groupSortPreference)for(const t of n.groupSortPreference)if(t.type===n.groupBy.type){const r=(0,a.Hd)(t);e.groupsMap.set(r,C({propertyType:n.groupBy.type,group:t,currentValue:e.groupsMap.get(r),getRecordModel:i}))}return e}if("aggregation"===n.type)return{type:"aggregation",aggregationState:(0,o.yd)(n.aggregation.aggregator)};(0,y.t1)(n)}function v(e){const{block:t,schema:r,reducer:n,state:i,getRecordModel:l,userId:d,userTimeZone:m,intl:g,visibleProperties:v,propertyMapping:_,relativeVariableResult:b,reducerId:h,formulaTimeoutMs:k,logFormulaTimeoutFn:x,resultCache:T}=e,M={userId:d,userTimeZone:m,intl:g,visitedProperties:new Set,depth:0,resultCache:T,formulaTimeoutTimestampMs:k&&Date.now()+k,logFormulaTimeoutFn:x};if("results"===n.type){if("results"!==i.type)throw new c.D3("Reducer and state type mismatch");if(n.searchQuery&&!(0,s.fY)({block:t,query:n.searchQuery,getRecordModel:l,userTimeZone:m,schema:r,intl:e.intl,onlyPropertyIds:v?u.aQ.fromViewPropertyIds(v,_):void 0}))return{shouldComplete:!1};if(i.blockIds.push(t.id),i.total++,"sorted"===i.sorting){if(i.total>n.limit)return{shouldComplete:!0}}else i.sorting.updateBlock({block:p.kk.fromBlock(t),schema:r,propertyMapping:_,getRecordModel:l,resultCache:T});return{shouldComplete:!1}}if("groups"===n.type){if("groups"!==i.type)throw new c.D3("Reducer and state type mismatch");const e=(0,a.Tr)({block:t,schema:r,reducer:n,getRecordModel:l,propertyMapping:_,relativeVariableResult:b,collectionRequestContext:M});if(e)for(const r of e){var w;const e=(0,a.Hd)(r),o=C({group:r,propertyType:n.groupBy.type,currentValue:i.groupsMap.get(e),getRecordModel:l});o.total++,i.groupsMap.set(e,o);const s=!!h&&h===f?i.blockIdToSubgroupIds:i.blockIdToGroupIds;s.has(t.id)||s.set(t.id,new Set),null===(w=s.get(t.id))||void 0===w||w.add(e)}return{shouldComplete:!1}}if("aggregation"===n.type){if("aggregation"!==i.type)throw new c.D3("Reducer and state type mismatch");return(0,o.pI)({block:t,schema:r,aggregation:n.aggregation,state:i.aggregationState,getRecordModel:l,propertyMapping:_,collectionRequestContext:M}),{shouldComplete:!1}}(0,y.t1)(n)}function _(e){const{reducer:t,reducerLoaderState:r,state:n,loader:a,schema:i,isSprintPlanningView:s}=e;if("results"===t.type){if("results"!==n.type)throw new c.D3("Reducer and state type mismatch");let e=n.blockIds;a.vectorSearch?e=d.Xo(n.blockIds,(e=>{const t=r.vectorSearchScores[e];return"number"==typeof t?t:-1/0}),"desc"):"sorted"!==n.sorting&&(e=(0,l.Qx)(n.blockIds,n.sorting));return{type:"results",blockIds:e.slice(0,t.limit),hasMore:e.length>t.limit}}if("groups"===t.type){if("groups"!==n.type)throw new c.D3("Reducer and state type mismatch");let e=Array.from(n.groupsMap.values());const r=t.groupBy;e="formula"===r.type?b({groupBy:{...r.groupBy,property:r.property},groups:e,reducer:t,loader:a,schema:i,isSprintPlanningView:s}):b({groupBy:r,groups:e,reducer:t,loader:a,schema:i,isSprintPlanningView:s});return{type:"groups",results:e.slice(0,t.limit).map((e=>{let{value:t,total:r}=e;return{value:t,total:r}})),total:e.length}}if("aggregation"===t.type){if("aggregation"!==n.type)throw new c.D3("Reducer and state type mismatch");return{type:"aggregation",aggregationResult:(0,o.Pz)(n.aggregationState)}}(0,y.t1)(t)}function b(e){const{groupBy:t,groups:r,reducer:n,loader:o,schema:i,isSprintPlanningView:s}=e;if("status"===t.type||(0,a.S1)(t)){if("manual"===t.sort.type)return k(r,n.groupSortPreference);{const e=i[t.property];if("status"===(null==e?void 0:e.type))return function(e,t,r){const n=[],o=[],a=r.groups??[],i=r.options??[];for(const u of e){const e=u.value;if(e.value){if("status"===e.type){const t=e.value;if("by_group"===t.type){const e=a.findIndex((e=>e.name===t.group));o.push({group:u,index:e})}else if("by_option"===t.type){const e=i.findIndex((e=>e.value===t.option));o.push({group:u,index:e})}else(0,y.t1)(t)}}else n.push(u)}const s=d.MR(o,(e=>e.index));t||s.reverse();return[...n,...s.map((e=>e.group))]}(r,"ascending"===t.sort.type,e)}}else if("select"===t.type||"multi_select"===t.type){if("manual"===t.sort.type)return k(r,n.groupSortPreference);{const e=i[t.property];if("select"===(null==e?void 0:e.type)||"multi_select"===(null==e?void 0:e.type))return function(e,t){const r=[],n=[];for(const o of e){const e=o.value;"select"!==e.type&&"multi_select"!==e.type||!e.value?n.push(o):r.push(o)}r.sort(((e,t)=>{const r="select"!==e.value.type&&"multi_select"!==e.value.type||!e.value.value?"":e.value.value,n="select"!==t.value.type&&"multi_select"!==t.value.type||!t.value.value?"":t.value.value;return r.localeCompare(n,void 0,{sensitivity:"base"})})),t||r.reverse();return[...n,...r]}(r,"ascending"===t.sort.type)}}else if((0,a.ib)(t)){if("ascending"===t.sort.type)return x(r,!0,o);if("descending"===t.sort.type)return x(r,!1,o);(0,y.t1)(t.sort)}else if("relation"===t.type){if("manual"===t.sort.type)return s?h(r,n.groupSortPreference):k(r,n.groupSortPreference);if("ascending"===t.sort.type)return T(r,{ascending:!0,nullGroupsLast:I(n)});if("descending"===t.sort.type)return T(r,{ascending:!1,nullGroupsLast:I(n)});(0,y.t1)(t.sort)}else if("location"===t.type){if("manual"===t.sort.type)return k(r,n.groupSortPreference);if("ascending"===t.sort.type)return M(r,!0);if("descending"===t.sort.type)return M(r,!1);(0,y.t1)(t.sort)}else if((0,a.aB)(t)){if("manual"===t.sort.type)return k(r,n.groupSortPreference);if("ascending"===t.sort.type)return w(r,!0);if("descending"===t.sort.type)return w(r,!1);(0,y.t1)(t.sort)}else if("number"===t.type){if("ascending"===t.sort.type)return Z(r,!0);if("descending"===t.sort.type)return Z(r,!1);(0,y.t1)(t.sort)}else{if("checkbox"===t.type)return k(r,n.groupSortPreference);(0,y.t1)(t.type)}return r}function h(e,t){const r=function(e,t){const r=(0,n.W)(t),o=r.map((e=>e.value)),i={};for(let n=0;n<r.length;n++){const t=o[n];d.sE(e,t)||(i[(0,a.Hd)(t)]=n)}for(let n=0;n<e.length;n++){const t=e[n];i[(0,a.Hd)(t)]=n+r.length}return i}(t,e.some((e=>(0,a.nP)(e.value))));return d.MR(e,[e=>{const t=r[(0,a.Hd)(e.value)];return void 0!==t?t:1/0},e=>(0,a.Hd)(e.value)])}function k(e,t){const r={};for(let n=0;n<t.length;n++){const e=t[n];r[(0,a.Hd)(e)]=n}return d.MR(e,[e=>{const t=r[(0,a.Hd)(e.value)];return void 0!==t?t:1/0},e=>(0,a.Hd)(e.value)])}function x(e,t,r){const n=[],o=[];for(const s of e){const e=s.value;if(e.value){if("formula"===e.type&&"date"===e.value.type&&e.value.value){const t=(0,a.Hk)(e.value.value,r.userTimeZone);n.push({start:t.start.valueOf(),group:s})}else if((0,a.Mc)(e)){const t=(0,a.Hk)(e.value,r.userTimeZone);n.push({start:t.start.valueOf(),group:s})}}else o.push(s)}const i=d.MR(n,(e=>e.start));return t||i.reverse(),[...o,...i.map((e=>{let{group:t}=e;return t}))]}function T(e,t){const r=[],n=[],{ascending:o,nullGroupsLast:a}=t;for(const i of e){const e=i.value;"relation"===e.type&&e.value?r.push(i):n.push(i)}return r.sort(((e,t)=>{const r="relation"===e.type&&e.title?e.title:"",n="relation"===t.type&&t.title?t.title:"";return r.localeCompare(n,void 0,{sensitivity:"base"})})),o||r.reverse(),a?[...r,...n]:[...n,...r]}function M(e,t){const r=[],n=[];for(const o of e){const e=o.value;"location"===e.type&&e.value?r.push(o):n.push(o)}return r.sort(((e,t)=>{const r="location"===e.type&&e.title?e.title:"",n="location"===t.type&&t.title?t.title:"";return r.localeCompare(n,void 0,{sensitivity:"base"})})),t||r.reverse(),[...n,...r]}function w(e,t){const r=[],n=[],o=[];for(const i of e){const e=i.value;e.value?"formula"===e.type&&"text"===e.value.type&&e.value.value?"other"===e.value.value.type?o.push(i):r.push({group:i,value:e.value.value.value}):(0,a.R7)(e)&&("other"===e.value.type?o.push(i):r.push({group:i,value:e.value.value})):n.push(i)}return r.sort(((e,t)=>e.value.localeCompare(t.value,void 0,{sensitivity:"base"}))),t||r.reverse(),[...n,...r.map((e=>{let{group:t}=e;return t})),...o]}function Z(e,t){const r=[],n=[],o=[];for(const i of e){const e=i.value;e.value?"formula"===e.type&&"number"===e.value.type&&e.value.value?"out_of_range"===e.value.value.type?o.push(i):r.push({group:i,start:e.value.value.start}):"number"===e.type&&("out_of_range"===e.value.type?o.push(i):r.push({group:i,start:e.value.start})):n.push(i)}const a=d.MR(r,(e=>e.start));return t||a.reverse(),[...n,...a.map((e=>{let{group:t}=e;return t})),...o]}function C(e){const{propertyType:t,group:r,currentValue:n,getRecordModel:o}=e,s=(null==n?void 0:n.total)||0;if("relation"===t){if("relation"===r.type&&r.value){if((0,a.RA)(r.value)){const e=o(r.value);return{type:t,value:r,title:(0,m.QaF)(e?(0,i.wS)(e,"title",o):void 0),total:s}}return{type:t,value:r,title:r.value.value.variable,total:s}}return{type:t,value:r,title:void 0,total:s}}if("location"===t){if("location"===r.type&&r.value){const e=o(r.value);return{type:t,value:r,title:(0,m.QaF)(null==e?void 0:e.getName()),total:s}}return{type:t,value:r,title:void 0,total:s}}return{type:t,value:r,total:s}}function S(e,t){const r=function(e,t){const r=new Set,n=new Set,o=new Set;for(const a of e){if("groups"!==a.type)return new Set;for(const e of a.blockIdToGroupIds.get(t)??[])n.add(e);for(const e of a.blockIdToSubgroupIds.get(t)??[])o.add(e)}for(const i of o)for(const e of n){const t=(0,a.Lr)([i,e]);r.add(t)}return n.forEach((e=>r.add(e))),o.forEach((e=>r.add(e))),r}(e,t);for(const n of e){if("groups"!==n.type)return new Set;n.blockIdToGroupIds.delete(t),n.blockIdToSubgroupIds.delete(t)}return r}function I(e){const t="groups"===e.type?e.groupBy.property:null;return Boolean(t&&t===n.Es.TaskToProjectRelation)}},34299:(e,t,r)=>{r.d(t,{I_:()=>v,O0:()=>g,gT:()=>_,kJ:()=>f});r(57658);var n=r(2032),o=r(68497),a=r(99036),i=r(80951),s=r(63087),u=r(7057),l=r(53877),c=r(38297),d=r(24211),p=r(72126),m=r(59753),y=r(97880);function f(e){const{property:t,schema:r,block:a,getRecordModel:s,collectionRequestContext:c}=e,{userTimeZone:f,depth:v,intl:b}=c,h=_({property:t,schema:r,getRecordModel:s});if(!h)return;const{propertySchema:k,relationPropertySchema:x,targetCollectionSchema:T}=h;if(k.relation_property&&k.target_property){if(!k.aggregation||"show_unique"===k.aggregation){const e=m.kk.fromBlock(a).getProperties(),t=i.j$({relationValue:i.rq(e[k.relation_property]),propertySchema:x,getRecordModel:s}),r=new Set;return p.oA(t.map((e=>{const t=s(e);if(k.target_property&&t){const e=(0,o.L)({property:k.target_property,schema:T,block:t,getRecordModel:s,collectionRequestContext:{...c,depth:v+1,visitedProperties:new Set}});if("show_unique"===k.aggregation&&e){if(r.has(e))return;r.add(e)}return e}}))).join(",")}{const e=g({property:t,schema:r,block:a,getRecordModel:s,collectionRequestContext:c});if(void 0===e)return;if("text"===e.type)return e.value;if("number"===e.type){if(!e.value)return;return e.value.toString()}if("date"===e.type){if(!e.value)return;if(!(0,n.Fw)(k.aggregation))return;if("earliest_date"===k.aggregation||"latest_date"===k.aggregation)return(0,u.Yx)(l.uO(e.value,f),"medium",(0,d.E2)(b));if("date_range"===k.aggregation)return(0,u.LU)(e.value,f,b);(0,y.t1)(k.aggregation)}(0,y.t1)(e)}}}function g(e){const{schema:t,property:r,block:o,getRecordModel:a,collectionRequestContext:u,formula2Error:l}=e,d=function(e){var t;let{resultCache:r,blockId:n,property:o}=e;return null===(t=r.get(n))||void 0===t?void 0:t.get(`${o}:${s.H.CollectionAggregationResult}`)}({resultCache:u.resultCache,blockId:o.id,property:r});if(void 0!==d)return d;const p=_({property:r,schema:t,getRecordModel:a});if(!p)return;const{propertySchema:m,relationPropertySchema:y,targetCollectionSchema:f}=p;if(!m.aggregation||!m.relation_property||!m.target_property)return;const g=i.j$({relationValue:i.rq(i.wS(o,m.relation_property)),getRecordModel:a,propertySchema:y}),v=function(e){const{relationPointers:t,initialState:r,getRecordModel:o,targetPropertyId:a,targetCollectionSchema:i,collectionRequestContext:s,formula2Error:u}=e,l={...r};for(const d of t){const e=o(d);if(e&&(0,c.ky)({getRecordModel:o,block:e})){const t={property:a,aggregator:l.type};(0,n.pI)({aggregation:t,state:l,schema:i,block:e,getRecordModel:o,propertyMapping:void 0,collectionRequestContext:s,formula2Error:u})}}return l}({initialState:(0,n.yd)(m.aggregation),relationPointers:g,getRecordModel:a,targetPropertyId:m.target_property,targetCollectionSchema:f,collectionRequestContext:u,formula2Error:l}),b=(0,n.Pz)(v);return function(e){let{resultCache:t,blockId:r,property:n,value:o}=e;const a=t.get(r)??new Map;a.set(`${n}:${s.H.CollectionAggregationResult}`,o),t.set(r,a)}({resultCache:u.resultCache,blockId:o.id,property:r,value:b}),b}function v(e){const{schema:t,property:r,block:n,getRecordModel:o}=e,a=_({property:r,schema:t,getRecordModel:o});if(!a)return[];const{propertySchema:s}=a;if(!s.relation_property||!s.target_property)return[];const u=i.j$({relationValue:i.rq(i.wS(n,s.relation_property)),getRecordModel:o,propertySchema:a.relationPropertySchema}),l=[];for(const i of u){const e=o(i);e&&l.push(e)}return l}function _(e){const{schema:t,property:r,getRecordModel:n}=e,o=t[r];if(!(o&&"rollup"===o.type&&o.relation_property&&o.target_property_type&&o.target_property))return;const i=t[o.relation_property];if(!i||"relation"!==i.type||!(0,a.F0)(i))return;const s=n((0,a.j0)(i));if(!s)return;const u=s.getNormalizedSchema(),l=u[o.target_property];return l&&o.target_property_type===l.type?{propertySchema:o,targetProperty:o.target_property,relationPropertySchema:i,targetCollectionModel:s,targetCollectionSchema:u,targetPropertySchema:l}:void 0}},10070:(e,t,r)=>{r.d(t,{Hs:()=>m,W0:()=>v,aQ:()=>l,jf:()=>d});r(21703);var n=r(92996),o=(r(70475),r(46283),r(5345)),a=r(42613),i=r(72126),s=r(149),u=r(97880);const l={fromViewPropertyIds:(e,t)=>e.map((e=>(null==t?void 0:t[e])??e)),toViewSchema(e,t){const r={},n=t?i.U_(t):{};for(const[o,a]of Object.entries(e)){r[(null==n?void 0:n[o])??o]=a}return r},deriveTypeUri(e,t){const r=(t?i.U_(t):{})[e];return(0,n.jP)(r)?r:void 0},deriveTypeUris(e,t){const r=t?i.U_(t):{};return new Set(Object.keys(e).map((e=>r[e])).filter(n.jP))}};class c extends Error{constructor(e,t,r){super(`Cannot merge property schemas for property "${e}": ${t.type} <> ${r.type}`)}}function d(e){const{schemas:t,onlyPropertyIds:r,prioritizeLooserLimitRule:n}=e,o={},a=r??i.G0(...t.map(Object.keys));for(const i of a){const e=t.map((e=>e[i])).filter(u.$K);if(!(0,u.Of)(e))continue;const r=s.x.reduce(e,((e,t)=>{const r=y(e,t,n);if(void 0===r){return{error:new c(i,e,t)}}return{value:r}}));if(s.x.isFail(r))return{error:r.error};o[i]=r.value}return{value:o}}const p=new WeakMap;function m(e,t,r){if("typed"!==e)return r.getNormalizedSchema();const n=p.get(r);if(!n){var o;const e=r.getNormalizedSchema(),n=d({schemas:[t,l.toViewSchema(e,null===(o=r.getFormat())||void 0===o?void 0:o.app_uri_map)],prioritizeLooserLimitRule:!1});if(n.error)throw n.error;return p.set(r,n.value),n.value}return n}function y(e,t,r){if("select"===e.type||"multi_select"===e.type){if(e.type!==t.type)return;const r=e.options||[],n=t.options||[],o=i.qZ(r,n,(e=>e.id));return{type:t.type,name:t.name,icon:t.icon,options:o}}if("status"===e.type){if(e.type!==t.type)return;return function(e,t){const r=[e,t].flatMap((e=>e.groups??[])),n=i.mN(r,(e=>g(e.id,e.name))).map((e=>({id:e.id,name:g(e.id,e.name),color:e.color,optionIds:[]}))),a=new Map,s=new Set;for(const c of n){var u,l;const r=null===(u=e.groups)||void 0===u?void 0:u.find((e=>g(e.id,e.name)===c.name)),n=null===(l=t.groups)||void 0===l?void 0:l.find((e=>g(e.id,e.name)===c.name)),d=(e.options??[]).filter((e=>((null==r?void 0:r.optionIds)??[]).includes(e.id))),p=(t.options??[]).filter((e=>((null==n?void 0:n.optionIds)??[]).includes(e.id))),m=i.Xh(i.zo(p,d));for(const e of m){const t=e.value.toLowerCase(),r=a.get(t);if(r){if(r.collectionIds||e.collectionIds){const t=i.jj([...r.collectionIds??[],...e.collectionIds??[]]);r.collectionIds=t}}else s.has(e.id)&&(e.id=`${e.id}-${o.c(t)}`),s.add(e.id),a.set(t,e)}c.optionIds=i.jj(m.map((e=>e.id)))}return{type:"status",name:t.name,defaultOption:t.defaultOption,groups:n,options:[...a.values()]}}(e,t)}if("number"===e.type){if(e.type!==t.type)return;return{type:t.type,name:t.name,icon:t.icon,number_format:f(e,t,"number_format"),show_as:f(e,t,"show_as")}}if("date"===e.type||"created_time"===e.type||"last_edited_time"===e.type||"last_visited_time"===e.type){if(e.type!==t.type)return;return{type:t.type,name:t.name,icon:t.icon,time_format:f(e,t,"time_format"),date_format:f(e,t,"date_format")}}if("person"===e.type){if(e.type!==t.type)return;const n=f(e,t,"limit");return{type:t.type,name:t.name,icon:t.icon,limit:n??(r?void 0:t.limit),default:f(e,t,"default")??t.default}}if("relation"===e.type){if(e.type!==t.type||e.autoRelate!==t.autoRelate)return;const n=f(e,t,"limit");return{type:t.type,name:t.name,icon:t.icon,autoRelate:f(e,t,"autoRelate"),property:f(e,t,"property"),limit:n??(r?void 0:t.limit),version:"v2",collection_pointer:f(e,t,"collection_pointer")}}if("rollup"===e.type){if(e.type!==t.type||e.relation_property!==t.relation_property||e.aggregation!==t.aggregation)return;return{type:t.type,name:t.name,icon:t.icon,relation_property:t.relation_property,aggregation:t.aggregation,show_as:f(e,t,"show_as"),target_property:f(e,t,"target_property"),target_property_type:f(e,t,"target_property_type")}}if("formula"===e.type){if("v2"===e.version){var n,a;if(e.type!==t.type||e.version!==t.version||!i.Xy(null===(n=e.formula2)||void 0===n?void 0:n.code,null===(a=t.formula2)||void 0===a?void 0:a.code))return;return{type:t.type,name:t.name,icon:t.icon,formula2:t.formula2,number_format:f(e,t,"number_format"),show_as:f(e,t,"show_as")}}if(e.type!==t.type||e.version!==t.version||!i.Xy(e.formula,t.formula))return;return{type:t.type,name:t.name,icon:t.icon,formula:t.formula,number_format:f(e,t,"number_format"),show_as:f(e,t,"show_as")}}if("auto_increment_id"===e.type){if(e.type!==t.type)return;return t}if("title"===e.type||"file"===e.type||"text"===e.type||"checkbox"===e.type||"url"===e.type||"email"===e.type||"phone_number"===e.type||"created_by"===e.type||"last_edited_by"===e.type||"button"===e.type||"location"===e.type||"verification"===e.type){if(e.type!==t.type)return;return t}(0,u.t1)(e)}function f(e,t,r){return i.Xy(e[r],t[r])?e[r]:void 0}function g(e,t){return"todo-status-group"===e?a.G1:"in-progress-status-group"===e?a.Ho:"complete-status-group"===e?a.RW:"current-status-group"===e?a.Ap:"future-status-group"===e?a.JV:t}function v(e,t){for(const r in t){const n=t[r];if((null==n?void 0:n.name)===e)return[r,n]}}},60246:(e,t,r)=>{r.d(t,{$m:()=>P,C6:()=>v,EO:()=>E,QT:()=>Z,Qx:()=>I,Xm:()=>D});r(57658);var n=r(35011),o=r(80951),a=r(34299),i=r(40506),s=r(53877),u=r(78106),l=r(84682),c=r(72126),d=r(82883),p=r(89470),m=r(70203),y=r(97880),f=r(4308);let g;const v=["ascending","descending"],_={select:!0,multi_select:!0,status:!0,created_time:!0,date:!0,last_edited_time:!0,last_visited_time:!0,number:!0,auto_increment_id:!0,verification:!0};function b(e){const{textValue:t,getRecordModel:r,collectionRequestContext:n}=e,{userTimeZone:o,intl:a}=n;return(0,d.X)({intl:a,textValue:t,getRecordModel:r,userTimeZone:o}).toLowerCase()}function h(e){const{textValue:t,propertySchema:r}=e,n=r.options||[],a=o.Sj(t,n),i=n.findIndex((e=>e.value===a));if(i>=0)return i}const k=new WeakMap;function x(e){return o.zB(e.textValue)}function T(e){return o.VY(e.textValue)}function M(e){const{actors:t,getRecordModel:r,intl:n}=e;return c.oA(t.map((e=>{const t=r(e);return null==t?void 0:t.getDisplayName(n)}))).join(" ")}function w(e){const{pointers:t,getRecordModel:r}=e;return c.oA(t.map((e=>{const t=r(e),n=t?o.wS(t,"title",r):"";return t&&n?m.Jcv(n).replace(/,/g,""):""}))).join(" ")}function Z(e){const{result:t,getRecordModel:r,userTimeZone:n,intl:o}=e;if("checkbox"===t.type||"number"===t.type)return t.value;if("text"===t.type)return(0,d.X)({textValue:t.value,getRecordModel:r,userTimeZone:n,intl:o});if("date"===t.type)return s.uO(t.value,n);if("person"===t.type)return M({actors:[t.value],getRecordModel:r,intl:o});if("block"===t.type){const e=r(t.value);if(!e)return;return e.getRenderTitle({getRecordModel:r,userTimeZone:n,intl:o})}if("array"===t.type){const e=t.values;if(0===e.length)return;if(e.every((e=>"block"===e.type))){return w({pointers:e.map((e=>e.value)),getRecordModel:r})}if(function(e){return e.every((e=>"person"===e.type))}(e)){return M({actors:e.map((e=>e.value)),getRecordModel:r,intl:o})}return(0,d.X)({textValue:(0,u.j4)(t),getRecordModel:r,userTimeZone:n,intl:o})}}const C={title:b,text:b,select:h,multi_select:h,status:function(e){const{textValue:t,propertySchema:r}=e,n=o.ZG(t,r),a=k.get(r);if(a)return n?a.get(n):void 0;const i=function(e){const t=e.options||[],r=e.groups||[],n=new Map;for(const[i,s]of r.entries())for(const e of s.optionIds??[])n.set(e,i);const o=c.MR([...t.entries()],[e=>{let[t,r]=e;return n.get(r.id)},e=>{let[t,r]=e;return t}]).map((e=>{let[t,r]=e;return r})),a=new Map;for(let i=0;i<o.length;i++)a.set(o[i].value,i);return a}(r);return k.set(r,i),n?i.get(n):void 0},url:x,email:x,phone_number:x,checkbox:function(e){return o.Ml(e.textValue)},number:T,auto_increment_id:T,location:function(e){const{getRecordModel:t,block:r,collectionRequestContext:n}=e,a=o.nW({block:r,getRecordModel:t});if(a)return b({textValue:a.getName(),getRecordModel:t,collectionRequestContext:n})},person:function(e){const{textValue:t,getRecordModel:r,propertySchema:n,block:a,collectionRequestContext:i}=e,{intl:s}=i;return M({intl:s,actors:o.DW({textValue:t,propertySchema:n,blockCreatorPointer:a.getCreatedByPointer()}),getRecordModel:r})},date:function(e){const{textValue:t,collectionRequestContext:r}=e,{userTimeZone:n}=r,a=o.Gl(t);if(a)return s.uO(a,n)},relation:function(e){const{textValue:t,getRecordModel:r,propertySchema:n}=e;if("relation"!==n.type)return;return w({pointers:o.j$({relationValue:o.rq(t),getRecordModel:r,propertySchema:n}),getRecordModel:r})},created_time:e=>{let{block:t}=e;return t.getCreatedTime()},last_edited_time:e=>{let{block:t}=e;return t.getLastEditedTime()},file:e=>{let{textValue:t}=e;return m.Jcv(t)},created_by:e=>{let{block:t,getRecordModel:r,collectionRequestContext:n}=e;const{intl:o}=n,a=t.getCreatedByPointer();if(a)return M({actors:[a],getRecordModel:r,intl:o})},last_edited_by:e=>{let{block:t,getRecordModel:r,collectionRequestContext:n}=e;const{intl:o}=n,a=t.getLastEditedByPointer();if(a)return M({actors:[a],getRecordModel:r,intl:o})},last_visited_time:e=>{let{block:t,getRecordModel:r,collectionRequestContext:n}=e;const{userId:o}=n;if(!o)return;const a=(0,p.Pv)({parent_id:t.id,user_id:o}),i=r({table:p.UI,id:a,spaceId:t.getSpaceId()});return null==i?void 0:i.getVisitedAt()},verification:function(e){const t=o._w(e.textValue);if(!t)return;const r=(0,f.WN)(t),n=r.type;switch(n){case"verified":return r.isIndefinite?Number.POSITIVE_INFINITY:r.dateTimeRange.end.valueOf();case"expired":return r.dateTimeRange.end.valueOf();case"none":return;default:(0,y.t1)(n)}}};function S(e){const{schema:t,property:r,block:u,getRecordModel:c,propertyMapping:d,collectionRequestContext:p}=e,{userTimeZone:m,depth:f,intl:g,formulaTimeoutTimestampMs:v,logFormulaTimeoutFn:_}=p,b=t[r];if(!b)return;if("formula"===b.type){if(void 0===b.version){const t=(0,l.AH)({...e,collectionRequestContext:{...p,visitedProperties:new Set}});return i.U3(t)?s.uO(t,m):t}{if(!b.formula2)return;const e=(0,n.EC)({block:u,property:r,formulaCode:b.formula2.code,getRecordModel:c,intl:g,userTimeZone:m,depth:f,visitedProperties:new Set,formulaTimeoutTimestampMs:v,logFormulaTimeoutFn:_,resultCache:p.resultCache});if(!e)return;return Z({result:e,getRecordModel:c,userTimeZone:m,intl:g})}}if("rollup"===b.type){const n=(0,a.gT)({property:r,schema:t,getRecordModel:c});if(!n)return;if(b.aggregation&&"show_unique"!==b.aggregation){const t=(0,a.O0)({...e,collectionRequestContext:{...p,visitedProperties:new Set}});if(void 0===t)return;if("number"===t.type||"text"===t.type)return t.value;if("date"===t.type){if(!t.value)return;return s.uO(t.value,m)}(0,y.t1)(t)}const o=(0,a.I_)(e);if(0===o.length)return;const i=o[0];return S({property:n.targetProperty,schema:n.targetCollectionSchema,block:i,getRecordModel:c,propertyMapping:void 0,collectionRequestContext:{...p,depth:f+1}})}if("button"===b.type)return;const h=C[b.type],k=(null==d?void 0:d[r])??r;let x;return x="title"===b.type&&u.isType("collection_view_page")?o.iT(u,c):o.wS(u,k,c),h({textValue:x,propertySchema:b,...e})}function I(e,t){const r=[...e];return r.sort(t.compare),r}function N(e){const{property:t,direction:r,userTimeZone:n,userId:o,intl:a}=e;return{getSortValue:e=>{let{block:r,schema:i,propertyMapping:s,getRecordModel:u,formulaTimeoutTimestampMs:l,logFormulaTimeoutFn:c,resultCache:d}=e;return S({property:t,schema:i,block:r,getRecordModel:u,propertyMapping:s,collectionRequestContext:{intl:a,userId:o,userTimeZone:n,depth:0,resultCache:d,visitedProperties:new Set,formulaTimeoutTimestampMs:l,logFormulaTimeoutFn:c}})},descending:"descending"===r,isNumeric:e=>{const r=e[t];return!!r&&(n=r.type,_[n]);var n}}}function R(e){const{userId:t,userTimeZone:r,intl:n,apiSorts:o}=e;return o?o.map((e=>"property"in e?N({property:e.property,direction:e.direction,userId:t,userTimeZone:r,intl:n}):"timestamp"in e?function(e){const{timestamp:t,direction:r}=e;return{getSortValue:e=>{let{block:r}=e;return"created_time"===t?r.getCreatedTime():"last_edited_time"===t?r.getLastEditedTime():void(0,y.t1)(t)},descending:"descending"===r,isNumeric:()=>!0}}(e):void(0,y.t1)(e))):[]}function U(e){const{userTimeZone:t,intl:r,userId:n,userSorts:o}=e;return[...o.map((e=>N({property:e.property,direction:e.direction,userId:n,userTimeZone:t,intl:r})))]}function P(e){return[...R(e),...U(e)]}function D(e){return[new O(e),{getSortValue:e=>{let{block:t}=e;return t.getCreatedTime()},descending:!0,isNumeric:()=>!0},{getSortValue:e=>{let{block:t}=e;return t.id},descending:!1,isNumeric:()=>!1}]}g=Symbol.iterator;class O{constructor(e){this.pageSortIndex=void 0,this.descending=!1,this.pageSortIndex=O.buildPageSortIndex(e)}isNumeric(){return!0}getSortValue(e){return this.pageSortIndex[e.block.id]}[g](){return Object.entries(this.pageSortIndex)[Symbol.iterator]()}update(e){this.pageSortIndex=O.buildPageSortIndex(e)}}O.buildPageSortIndex=e=>{const t={};return e.forEach(((e,r)=>t[e]=r)),t};class E{constructor(e){this.resultSortMap=void 0,this.compare=(e,t)=>{const{querySorts:r,resultSortMap:n}=this;for(let o=0;o<r.length;o++){const a=r[o],i=F(n[e][o],n[t][o],a.descending);if(0!==i)return i}return 0},this.querySorts=e,this.resultSortMap={}}debugDump(){return this.resultSortMap}hasBlock(e){return void 0!==this.resultSortMap[e]}deleteBlock(e){delete this.resultSortMap[e]}updateBlock(e){const t=this.querySorts.map((t=>t.getSortValue(e)));this.resultSortMap[e.block.id]=t}updatePageSortIfAny(e){const t=this.querySorts.findIndex((e=>e instanceof O));if(-1===t)return[];const r=this.querySorts[t];r.update(e);const n=[];for(const[o,a]of Object.entries(this.resultSortMap)){const e=a[t],i=r.getSortValue({block:{id:o}});e!==i&&(a[t]=i,n.push(o))}return n}}function F(e,t,r){const n=B(e),o=B(t);return n&&!o?1:o&&!n?-1:void 0!==e&&void 0!==t&&e>t?r?-1:1:void 0!==e&&void 0!==t&&e<t?r?1:-1:0}function B(e){return null==e||""===e}},28155:(e,t,r)=>{r.d(t,{MQ:()=>l,Sl:()=>s,nx:()=>u});var n=r(92996),o=r(60310),a=r(97880),i=r(74487);const s={schema:i.union([i.object({required:{type:i.literal("collection"),id:i.uuid(),spaceId:i.uuid()},optional:{}}),i.object({required:{type:i.literal("typed"),databaseType:i.literals(...n.fW),spaceId:i.uuid()},optional:{}}),i.object({required:{type:i.literal("trending"),spaceId:i.uuid(),userId:i.uuid()},optional:{teamId:i.uuid()}}),i.object({required:{type:i.literal("similarUsers"),spaceId:i.uuid(),userId:i.uuid()},optional:{}})]),getCollectionId(e){if(u(e))return(0,o.hJ)(e);switch(e.type){case"collection":return e.id;case"typed":return e.databaseType;default:(0,a.t1)(e)}},getTaintId(e){if(u(e)){return`${(0,o.hJ)(e)}:${e.spaceId}`}switch(e.type){case"collection":return e.id;case"typed":return`${e.spaceId}:${e.databaseType}`;default:(0,a.t1)(e)}},hasCollections(e){if(u(e))return!1;switch(e.type){case"collection":case"typed":return!0;default:(0,a.t1)(e)}}};function u(e){return l(null==e?void 0:e.type)}function l(e){switch(e){case"trending":case"similarUsers":return!0;case"collection":case"typed":case void 0:return!1;default:(0,a.t1)(e)}}},42613:(e,t,r)=>{r.d(t,{Ap:()=>s,G1:()=>o,Ho:()=>a,JV:()=>u,RW:()=>i,ct:()=>l,i9:()=>c});var n=r(9291);const o="To-do",a="In progress",i="Complete",s="Current",u="Future",l=(0,n.defineMessages)({statusGroupNameTodo:{id:"database.statusProperty.groupName.todo",defaultMessage:"To-do"},statusGroupNameInProgress:{id:"database.statusProperty.groupName.inProgress",defaultMessage:"In progress"},statusGroupNameComplete:{id:"database.statusProperty.groupName.complete",defaultMessage:"Complete"},statusGroupNameFuture:{id:"database.statusProperty.groupName.future",defaultMessage:"Complete"},statusGroupNameCurrent:{id:"database.statusProperty.groupName.current",defaultMessage:"Complete"}}),c=(0,n.defineMessages)({statusOptionNotStarted:{id:"database.statusProperty.option.notStarted",defaultMessage:"Not started"},statusOptionInProgress:{id:"database.statusProperty.option.inProgress",defaultMessage:"In progress"},statusOptionDone:{id:"database.statusProperty.option.done",defaultMessage:"Done"}})},63087:(e,t,r)=>{r.d(t,{H:()=>a,y:()=>o});var n=r(74487);const o=n.undefinable(n.object({required:{blockIdToVersion:n.record(n.string(),n.number())},optional:{hasMore:n.boolean()}}));let a=function(e){return e[e.FormulaValue=0]="FormulaValue",e[e.FormulaValue2=1]="FormulaValue2",e[e.CollectionAggregationResult=2]="CollectionAggregationResult",e}({})},16691:(e,t,r)=>{r.d(t,{Vg:()=>a,dn:()=>n,vY:()=>o});r(606);function n(e){const{table:t,id:r}=e;return`${r}:${t}`}function o(e){return`:${e.id}`}function a(e){const t=e.split(":");return{id:t[1],spaceId:""===t[0]?void 0:t[0]}}},33831:(e,t,r)=>{r.d(t,{Z:()=>o});r(67294);var n=r(85893);function o(e){let{children:t,viewBox:r,style:o,className:a}=e;return(0,n.jsx)("svg",{role:"graphics-symbol",viewBox:r,style:{width:"100%",height:"100%",display:"block",fill:"inherit",flexShrink:0,...o},className:a,children:t})}},80994:(e,t,r)=>{r.d(t,{Aw:()=>s,GC:()=>a,hW:()=>n});const n=[{name:"Afghanistan",countryCode:"AF"},{name:"land Islands",countryCode:"AX"},{name:"Albania",countryCode:"AL"},{name:"Algeria",countryCode:"DZ"},{name:"American Samoa",countryCode:"AS"},{name:"Andorra",countryCode:"AD"},{name:"Angola",countryCode:"AO"},{name:"Anguilla",countryCode:"AI"},{name:"Antarctica",countryCode:"AQ"},{name:"Antigua and Barbuda",countryCode:"AG"},{name:"Argentina",countryCode:"AR"},{name:"Armenia",countryCode:"AM"},{name:"Aruba",countryCode:"AW"},{name:"Australia",countryCode:"AU",vatApplicable:!0},{name:"Austria",countryCode:"AT",vatApplicable:!0},{name:"Azerbaijan",countryCode:"AZ"},{name:"Bahamas",countryCode:"BS"},{name:"Bahrain",countryCode:"BH"},{name:"Bangladesh",countryCode:"BD"},{name:"Barbados",countryCode:"BB"},{name:"Belarus",countryCode:"BY"},{name:"Belgium",countryCode:"BE",vatApplicable:!0},{name:"Belize",countryCode:"BZ"},{name:"Benin",countryCode:"BJ"},{name:"Bermuda",countryCode:"BM"},{name:"Bhutan",countryCode:"BT"},{name:"Bolivia (Plurinational State of)",countryCode:"BO"},{name:"Bonaire, Sint Eustatius and Saba",countryCode:"BQ"},{name:"Bosnia and Herzegovina",countryCode:"BA"},{name:"Botswana",countryCode:"BW"},{name:"Bouvet Island",countryCode:"BV"},{name:"Brazil",countryCode:"BR"},{name:"British Indian Ocean Territory",countryCode:"IO"},{name:"Brunei Darussalam",countryCode:"BN"},{name:"Bulgaria",countryCode:"BG",vatApplicable:!0},{name:"Burkina Faso",countryCode:"BF"},{name:"Burundi",countryCode:"BI"},{name:"Cabo Verde",countryCode:"CV"},{name:"Cambodia",countryCode:"KH"},{name:"Cameroon",countryCode:"CM"},{name:"Canada",countryCode:"CA",vatApplicable:!0},{name:"Cayman Islands",countryCode:"KY"},{name:"Central African Republic",countryCode:"CF"},{name:"Chad",countryCode:"TD"},{name:"Chile",countryCode:"CL"},{name:"China",countryCode:"CN"},{name:"Christmas Island",countryCode:"CX"},{name:"Cocos (Keeling) Islands",countryCode:"CC"},{name:"Colombia",countryCode:"CO"},{name:"Comoros",countryCode:"KM"},{name:"Congo",countryCode:"CG"},{name:"Congo, Democratic Republic of the",countryCode:"CD"},{name:"Cook Islands",countryCode:"CK"},{name:"Costa Rica",countryCode:"CR"},{name:"Cte d'Ivoire",countryCode:"CI"},{name:"Croatia",countryCode:"HR",vatApplicable:!0},{name:"Cuba",countryCode:"CU"},{name:"Curaao",countryCode:"CW"},{name:"Cyprus",countryCode:"CY",vatApplicable:!0},{name:"Czechia",countryCode:"CZ",vatApplicable:!0},{name:"Denmark",countryCode:"DK",vatApplicable:!0},{name:"Djibouti",countryCode:"DJ"},{name:"Dominica",countryCode:"DM"},{name:"Dominican Republic",countryCode:"DO"},{name:"Ecuador",countryCode:"EC"},{name:"Egypt",countryCode:"EG"},{name:"El Salvador",countryCode:"SV"},{name:"Equatorial Guinea",countryCode:"GQ"},{name:"Eritrea",countryCode:"ER"},{name:"Estonia",countryCode:"EE",vatApplicable:!0},{name:"Eswatini",countryCode:"SZ"},{name:"Ethiopia",countryCode:"ET"},{name:"Falkland Islands (Malvinas)",countryCode:"FK"},{name:"Faroe Islands",countryCode:"FO"},{name:"Fiji",countryCode:"FJ"},{name:"Finland",countryCode:"FI",vatApplicable:!0},{name:"France",countryCode:"FR",vatApplicable:!0},{name:"French Guiana",countryCode:"GF"},{name:"French Polynesia",countryCode:"PF"},{name:"French Southern Territories",countryCode:"TF"},{name:"Gabon",countryCode:"GA"},{name:"Gambia",countryCode:"GM"},{name:"Georgia",countryCode:"GE"},{name:"Germany",countryCode:"DE",vatApplicable:!0},{name:"Ghana",countryCode:"GH"},{name:"Gibraltar",countryCode:"GI"},{name:"Greece",countryCode:"GR",vatApplicable:!0},{name:"Greenland",countryCode:"GL"},{name:"Grenada",countryCode:"GD"},{name:"Guadeloupe",countryCode:"GP"},{name:"Guam",countryCode:"GU"},{name:"Guatemala",countryCode:"GT"},{name:"Guernsey",countryCode:"GG"},{name:"Guinea",countryCode:"GN"},{name:"Guinea-Bissau",countryCode:"GW"},{name:"Guyana",countryCode:"GY"},{name:"Haiti",countryCode:"HT"},{name:"Heard Island and McDonald Islands",countryCode:"HM"},{name:"Holy See",countryCode:"VA"},{name:"Honduras",countryCode:"HN"},{name:"Hong Kong",countryCode:"HK"},{name:"Hungary",countryCode:"HU",vatApplicable:!0},{name:"Iceland",countryCode:"IS"},{name:"India",countryCode:"IN",vatApplicable:!0},{name:"Indonesia",countryCode:"ID"},{name:"Iran (Islamic Republic of)",countryCode:"IR"},{name:"Iraq",countryCode:"IQ"},{name:"Ireland",countryCode:"IE",vatApplicable:!0},{name:"Isle of Man",countryCode:"IM"},{name:"Israel",countryCode:"IL"},{name:"Italy",countryCode:"IT",vatApplicable:!0},{name:"Jamaica",countryCode:"JM"},{name:"Japan",countryCode:"JP"},{name:"Jersey",countryCode:"JE"},{name:"Jordan",countryCode:"JO"},{name:"Kazakhstan",countryCode:"KZ"},{name:"Kenya",countryCode:"KE"},{name:"Kiribati",countryCode:"KI"},{name:"Korea, Republic of",countryCode:"KR",vatApplicable:!0},{name:"Kosovo",countryCode:"XK"},{name:"Kuwait",countryCode:"KW"},{name:"Kyrgyzstan",countryCode:"KG"},{name:"Lao People's Democratic Republic",countryCode:"LA"},{name:"Latvia",countryCode:"LV",vatApplicable:!0},{name:"Lebanon",countryCode:"LB"},{name:"Lesotho",countryCode:"LS"},{name:"Liberia",countryCode:"LR"},{name:"Libya",countryCode:"LY"},{name:"Liechtenstein",countryCode:"LI"},{name:"Lithuania",countryCode:"LT",vatApplicable:!0},{name:"Luxembourg",countryCode:"LU",vatApplicable:!0},{name:"Macao",countryCode:"MO"},{name:"Madagascar",countryCode:"MG"},{name:"Malawi",countryCode:"MW"},{name:"Malaysia",countryCode:"MY"},{name:"Maldives",countryCode:"MV"},{name:"Mali",countryCode:"ML"},{name:"Malta",countryCode:"MT",vatApplicable:!0},{name:"Marshall Islands",countryCode:"MH"},{name:"Martinique",countryCode:"MQ"},{name:"Mauritania",countryCode:"MR"},{name:"Mauritius",countryCode:"MU"},{name:"Mayotte",countryCode:"YT"},{name:"Mexico",countryCode:"MX"},{name:"Micronesia (Federated States of)",countryCode:"FM"},{name:"Moldova, Republic of",countryCode:"MD"},{name:"Monaco",countryCode:"MC"},{name:"Mongolia",countryCode:"MN"},{name:"Montenegro",countryCode:"ME"},{name:"Montserrat",countryCode:"MS"},{name:"Morocco",countryCode:"MA"},{name:"Mozambique",countryCode:"MZ"},{name:"Myanmar",countryCode:"MM"},{name:"Namibia",countryCode:"NA"},{name:"Nauru",countryCode:"NR"},{name:"Nepal",countryCode:"NP"},{name:"Netherlands",countryCode:"NL",vatApplicable:!0},{name:"New Caledonia",countryCode:"NC"},{name:"New Zealand",countryCode:"NZ",vatApplicable:!0},{name:"Nicaragua",countryCode:"NI"},{name:"Niger",countryCode:"NE"},{name:"Nigeria",countryCode:"NG"},{name:"Niue",countryCode:"NU"},{name:"Norfolk Island",countryCode:"NF"},{name:"North Korea",countryCode:"KP"},{name:"North Macedonia",countryCode:"MK"},{name:"Northern Mariana Islands",countryCode:"MP"},{name:"Norway",countryCode:"NO",vatApplicable:!0},{name:"Oman",countryCode:"OM"},{name:"Pakistan",countryCode:"PK"},{name:"Palau",countryCode:"PW"},{name:"Palestine, State of",countryCode:"PS"},{name:"Panama",countryCode:"PA"},{name:"Papua New Guinea",countryCode:"PG"},{name:"Paraguay",countryCode:"PY"},{name:"Peru",countryCode:"PE"},{name:"Philippines",countryCode:"PH"},{name:"Pitcairn",countryCode:"PN"},{name:"Poland",countryCode:"PL",vatApplicable:!0},{name:"Portugal",countryCode:"PT",vatApplicable:!0},{name:"Puerto Rico",countryCode:"PR"},{name:"Qatar",countryCode:"QA"},{name:"Runion",countryCode:"RE"},{name:"Romania",countryCode:"RO",vatApplicable:!0},{name:"Russian Federation",countryCode:"RU",vatApplicable:!0},{name:"Rwanda",countryCode:"RW"},{name:"Saint Barthlemy",countryCode:"BL"},{name:"Saint Helena, Ascension and Tristan da Cunha",countryCode:"SH"},{name:"Saint Kitts and Nevis",countryCode:"KN"},{name:"Saint Lucia",countryCode:"LC"},{name:"Saint Martin (French part)",countryCode:"MF"},{name:"Saint Pierre and Miquelon",countryCode:"PM"},{name:"Saint Vincent and the Grenadines",countryCode:"VC"},{name:"Samoa",countryCode:"WS"},{name:"San Marino",countryCode:"SM"},{name:"Sao Tome and Principe",countryCode:"ST"},{name:"Saudi Arabia",countryCode:"SA"},{name:"Senegal",countryCode:"SN"},{name:"Serbia",countryCode:"RS"},{name:"Seychelles",countryCode:"SC"},{name:"Sierra Leone",countryCode:"SL"},{name:"Singapore",countryCode:"SG",vatApplicable:!0},{name:"Sint Maarten (Dutch part)",countryCode:"SX"},{name:"Slovakia",countryCode:"SK",vatApplicable:!0},{name:"Slovenia",countryCode:"SI",vatApplicable:!0},{name:"Solomon Islands",countryCode:"SB"},{name:"Somalia",countryCode:"SO"},{name:"South Africa",countryCode:"ZA"},{name:"South Georgia and the South Sandwich Islands",countryCode:"GS"},{name:"South Sudan",countryCode:"SS"},{name:"Spain",countryCode:"ES",vatApplicable:!0},{name:"Sri Lanka",countryCode:"LK"},{name:"Sudan",countryCode:"SD"},{name:"Suriname",countryCode:"SR"},{name:"Svalbard and Jan Mayen",countryCode:"SJ"},{name:"Sweden",countryCode:"SE",vatApplicable:!0},{name:"Switzerland",countryCode:"CH",vatApplicable:!0},{name:"Syrian Arab Republic",countryCode:"SY"},{name:"Taiwan",countryCode:"TW",vatApplicable:!0},{name:"Tajikistan",countryCode:"TJ"},{name:"Tanzania, United Republic of",countryCode:"TZ"},{name:"Thailand",countryCode:"TH"},{name:"Timor-Leste",countryCode:"TL"},{name:"Togo",countryCode:"TG"},{name:"Tokelau",countryCode:"TK"},{name:"Tonga",countryCode:"TO"},{name:"Trinidad and Tobago",countryCode:"TT"},{name:"Tunisia",countryCode:"TN"},{name:"Turkey",countryCode:"TR"},{name:"Turkmenistan",countryCode:"TM"},{name:"Turks and Caicos Islands",countryCode:"TC"},{name:"Tuvalu",countryCode:"TV"},{name:"Uganda",countryCode:"UG"},{name:"Ukraine",countryCode:"UA"},{name:"United Arab Emirates",countryCode:"AE"},{name:"United Kingdom",countryCode:"GB",vatApplicable:!0},{name:"United States",countryCode:"US"},{name:"United States Minor Outlying Islands",countryCode:"UM"},{name:"Uruguay",countryCode:"UY"},{name:"Uzbekistan",countryCode:"UZ"},{name:"Vanuatu",countryCode:"VU"},{name:"Venezuela (Bolivarian Republic of)",countryCode:"VE"},{name:"Viet Nam",countryCode:"VN"},{name:"Virgin Islands (British)",countryCode:"VG"},{name:"Virgin Islands (U.S.)",countryCode:"VI"},{name:"Wallis and Futuna",countryCode:"WF"},{name:"Western Sahara",countryCode:"EH"},{name:"Yemen",countryCode:"YE"},{name:"Zambia",countryCode:"ZM"},{name:"Zimbabwe",countryCode:"ZW"}],o=new Set(n.map((e=>{let{countryCode:t}=e;return t})));function a(e){return void 0!==e&&o.has(e)}const i=Object.fromEntries(n.map((e=>{let{name:t,countryCode:r}=e;return[t,r]})));Object.fromEntries(n.map((e=>[e.countryCode,e])));new Set([i.Austria,i.Belgium,i.Bulgaria,i.Croatia,i.Cyprus,i.Czechia,i.Denmark,i.Estonia,i.Finland,i.France,i.Germany,i.Greece,i.Hungary,i.Ireland,i.Italy,i.Latvia,i.Lithuania,i.Luxembourg,i.Malta,i.Netherlands,i.Poland,i.Portugal,i.Romania,i.Slovakia,i.Slovenia,i.Spain,i.Sweden]);function s(e){if(!a(e))return{opt:"in",defaultOptIn:!1};switch(e){case i["United Kingdom"]:case i.Belgium:case i.Bulgaria:case i.Croatia:case i.Czechia:case i.Denmark:case i.Estonia:case i.Finland:case i.France:case i.Greece:case i.Ireland:case i.Latvia:case i.Lithuania:case i.Luxembourg:case i.Malta:case i.Netherlands:case i.Norway:case i.Portugal:case i.Romania:case i.Sweden:case i.Spain:case i.Slovenia:case i.Iceland:case i.Kosovo:case i.Turkey:return{opt:"out",defaultOptIn:!0};case i.Cyprus:case i.Hungary:case i.Italy:case i.Poland:case i.Switzerland:case i.Serbia:case i["Bosnia and Herzegovina"]:case i.Montenegro:case i.Albania:case i["Moldova, Republic of"]:case i["North Macedonia"]:case i.Slovakia:return{opt:"in",defaultOptIn:!1};case i.Germany:case i.Austria:return{opt:"doubleIn",defaultOptIn:!1};default:return{opt:"in",defaultOptIn:!0}}}},1800:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(15145),o=r(41432),a=r(80951),i=r(80310),s=r(59753),u=r(4615),l=r(70203),c=r(64002);function d(e){const{pageId:t,spaceDomain:r,scrollToBlockId:d,peekViewBlockId:p,peekMode:m,collectionViewId:y,baseUrl:f,discussionId:g,showMoveTo:v,saveParent:_,duplicate:b,pageVisitSource:h,templateGalleryItem:k,projectManagementLaunch:x,notificationId:T,openPageUpdatesTab:M,queryId:w}=e;let Z;"pageModel"in e&&e.pageModel?Z=e.pageModel:"pageValue"in e&&e.pageValue&&(Z=s.kk.fromValue("block",e.pageValue));let C="";if(Z&&(0,o.XD)(Z.getType())&&(0,a.wS)(Z,"title")){const e=(0,a.wS)(Z,"title");C=l.Jcv(e||[]).replace(/[^\w]/g," ").trim().slice(0,100).split(/\s+/g).join("-")}let S="/";r&&(S+=`${r}/`),t&&(S+=C?`${C}-${u.cj(t)}`:`${u.cj(t)}`),f&&(S=`${f}${S}`);const I={};return y&&(I.v=u.cj(y)),p&&(I[i.UJ]=u.cj(p)),m&&(I.pm=m),g&&(I.d=u.cj(g)),T&&(I.nid=u.cj(T)),v&&(I.showMoveTo="true"),_&&(I.saveParent="true"),b&&(I.duplicate="true"),k&&(I.tg=k),x&&(I.pjm="true"),M&&(I.openPageUpdatesTab="true"),h&&(I[n.$X]=String(h)),w&&(I[n.Mf]=w),c.bf({url:S,query:I,hash:d&&u.cj(d)})}},7057:(e,t,r)=>{r.d(t,{$6:()=>Z,$I:()=>w,$b:()=>S,Cp:()=>T,LU:()=>v,OB:()=>c,Yx:()=>M,ZV:()=>l,ZW:()=>x,er:()=>b,kv:()=>h,mr:()=>m,ns:()=>f,p6:()=>p,tv:()=>C,xE:()=>y});var n=r(30120),o=r(42875),a=r(24211),i=r(97880),s=r(40506),u=r(53877);function l(e){return c({...e,formatValuesFn:e=>{const{endDate:t,endTime:r,startDate:n}=e;return(0,i.$K)(r)?`${n}  ${r}`:(0,i.$K)(t)?`${n}  ${t}`:n}})}function c(e){const{value:t,shortenDateAndRange:r,allowRelativeDates:a,date_format:i,time_format:l,intl:c,alwaysIncludeTimezone:p,formatValuesFn:m,getToday:f}=e,{locale:v}=c,_=e.userTimeZone&&function(e){if(e in d)return d[e];try{Intl.DateTimeFormat(void 0,{timeZone:e})}catch(t){return d[e]=!1,!1}return d[e]=!0,!0}(e.userTimeZone)?e.userTimeZone:(0,o.r)(),b=u.NK(t,_,v),h=Boolean(r),k=i??s.sF,x="date"===t.type||"daterange"===t.type,T=!x&&e.displayInUserTimezone,M=T?b.start.setZone(_):b.start,w=b.end&&T?b.end.setZone(_):b.end,Z=M.toLocaleString(n.ou.DATE_SHORT).startsWith(String(M.year)),C=g({date:M,dateFormat:k,timeFormat:l,shortenDate:h,allowRelativeDates:a,userTimeZone:_,intl:c,hasRangeDate:Z?void 0:w,excludeTime:x,alwaysIncludeTimezone:p,getToday:f});if(w){if("datetimerange"===t.type&&M.startOf("day").equals(w.startOf("day"))){return m({endTime:y({dateTime:w,timeFormat:l,humanReadable:!1}),startDate:C})}return m({endDate:g({date:w,dateFormat:k,timeFormat:l,shortenDate:h,allowRelativeDates:a,userTimeZone:_,intl:c,hasRangeDate:Z?M:void 0,excludeTime:x,alwaysIncludeTimezone:p,getToday:f}),startDate:C})}return m({startDate:C})}const d={};function p(e){const{date:t,dateFormat:r,allowRelativeDates:o,shortenDate:a,hasRangeDate:i,intl:l,getToday:c}=e;return o&&"relative"===r?function(e){const{date:t,intl:r}=e,n=(e.getToday??u.Uu)(t.zone),o=Math.round(t.startOf("day").diff(n,"days").get("days"));if(0===o)return r.formatMessage({defaultMessage:"Today",id:"dateFormatHelpers.text.today"});if(1===o)return r.formatMessage({defaultMessage:"Tomorrow",id:"dateFormatHelpers.text.tomorrow"});if(-1===o)return r.formatMessage({defaultMessage:"Yesterday",id:"dateFormatHelpers.text.yesterday"});const a=t.toLocaleString({weekday:"long"});if(o>1&&o<=7)return t.weekNumber===n.weekNumber?a:r.formatMessage({defaultMessage:"Next {dayOfTheWeek}",id:"dateFormatHelpers.text.nextDayOfTheWeek"},{dayOfTheWeek:a});if(o<-1&&o>=-7)return t.weekNumber===n.weekNumber?a:r.formatMessage({defaultMessage:"Last {dayOfTheWeek}",id:"dateFormatHelpers.text.lastDayOfTheWeek"},{dayOfTheWeek:a});return x(t,"long")}({date:t,intl:l,getToday:c}):function(e){const{date:t,dateFormat:r,shortenDate:o,hasRangeDate:a}=e,i=function(e){const t="relative"===e.dateFormat||"MMM DD, YYYY"===e.dateFormat?s.sF:e.dateFormat;return s.jG(t)}({dateFormat:r});if("DDD"===i){const e=o&&(!a&&t.year===n.ou.now().year||t.year===(null==a?void 0:a.year));return t.toLocaleString({year:e?void 0:"numeric",month:o?"short":"long",day:"numeric"})}return t.toFormat(i)}({date:t,dateFormat:r,shortenDate:a,hasRangeDate:i})}function m(e){const{time_format:t}=e,r=Boolean(e.humanReadable);return y({dateTime:n.ou.fromFormat(e.start_time,s.jK).setLocale(e.intl.locale),timeFormat:t,humanReadable:r})}function y(e){const{dateTime:t,humanReadable:r,timeFormat:o}=e;if(r&&"h:mm A"===o){return t.toLocaleString(n.ou.TIME_SIMPLE).replace(" ","").toLowerCase()}if(o){const e=s._F(o);return t.toFormat(e)}return t.toLocaleString(n.ou.TIME_SIMPLE)}function f(e){const{time_format:t,intl:r,start_time:o,end_time:a,humanReadable:i}=e;let u=n.ou.fromFormat(o,s.jK).setLocale(r.locale).toFormat(s._F(t)),l=n.ou.fromFormat(a,s.jK).setLocale(r.locale).toFormat(s._F(t));return i&&"h:mm A"===t&&((u.includes("AM")&&l.includes("AM")||u.includes("PM")&&l.includes("PM"))&&(u=u.replace("AM","").replace("PM","")),u.includes(":00")&&l.includes(":00")&&(u=u.replace(":00",""),l=l.replace(":00","")),u=u.replace(" ","").toLowerCase(),l=l.replace(" ","").toLowerCase()),[u,l].join("-")}function g(e){const{date:t,dateFormat:r,timeFormat:n,userTimeZone:o,excludeTime:a,alwaysIncludeTimezone:i}=e;if(!t.isValid)return"";const s=p(e);if(a)return s;const l=[s,y({dateTime:t,timeFormat:n,humanReadable:"relative"===r})].join(" "),c=t.setZone(o);if(i||t.toFormat(u._F)!==c.toFormat(u._F)){return`${l} (${t.toFormat("ZZZZ")})`}return l}function v(e,t,r){const n=u.NK(e,t);if(u.qw(n)){const e=n.end.diff(n.start),t=e.as("year");if(t>=1)return r.formatMessage({defaultMessage:"{number, plural, one {{number} year} other {{number} years}}",id:"dateFormatHelpers.formatDuration.years"},{number:_(t)});const o=e.as("months");if(o>=1)return r.formatMessage({defaultMessage:"{number, plural, one {{number} month} other {{number} months}}",id:"dateFormatHelpers.formatDuration.months"},{number:_(o)});const a=e.as("days");if(a>=1)return r.formatMessage({defaultMessage:"{number, plural, one {{number} day} other {{number} days}}",id:"dateFormatHelpers.formatDuration.days"},{number:Math.round(a)});const i=e.as("hours");if(i>=1)return r.formatMessage({defaultMessage:"{number, plural, one {{number} hour} other {{number} hours}}",id:"dateFormatHelpers.formatDuration.hours"},{number:Math.round(i)});const s=e.as("minutes");return r.formatMessage({defaultMessage:"{number, plural, one {{number} minute} other {{number} minutes}}",id:"dateFormatHelpers.formatDuration.minutes"},{number:Math.round(s)})}return""}function _(e){return Math.round(10*e)/10}function b(e,t){const r=n.ou.local().setLocale((0,a.E2)(e)).set({weekday:t});if(r.isValid)return r.toFormat("ccccc")}function h(e,t){return(1===e?[1,2,3,4,5,6,7]:[7,1,2,3,4,5,6]).map((e=>[e,n.ou.fromObject({weekday:e}).setLocale(t).toLocaleString({weekday:"short"})]))}const k={very_short:{year:"2-digit",month:"numeric",day:"numeric"},short:n.ou.DATE_SHORT,short2:{year:"numeric",month:"2-digit",day:"2-digit"},medium:n.ou.DATE_MED,medium_with_time:n.ou.DATETIME_MED,long:n.ou.DATE_FULL,day:{day:"numeric"},month_long:{month:"long"},month_short:{month:"short"},month_day:{day:"numeric",month:"short"},month_day_time:{day:"numeric",month:"short",hour:"numeric",minute:"numeric"},month_day_long:{day:"numeric",month:"long"},month_year_long:{month:"long",year:"numeric"},month_year_short:{month:"short",year:"numeric"},time:{hour:"numeric",minute:"numeric"}};function x(e,t,r){return(r?e.setLocale(r):e).toLocaleString(k[t])}function T(e,t){return"YYYY-MM-DD"===t?e.toISODate():e.toFormat(s.jG(t))}function M(e,t,r,o){return x(n.ou.fromMillis(e,{locale:r,zone:o}),t)}function w(e){return n.ou.fromMillis(e).toUTC().toISO({format:"extended"})}function Z(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=t?n.ou.fromMillis(e).toUTC():n.ou.fromMillis(e);return r.toISODate({format:"extended"})}function C(e,t){return n.ou.fromMillis(e,{locale:t}).toRelative()??""}function S(e,t,r){const o=n.ou.now().startOf("day"),a=n.ou.fromMillis(e,{locale:t}),i=Math.round(a.startOf("day").diff(o,"days").as("days")),s=a.toLocaleString(n.ou.TIME_SIMPLE);return 0===i?r.formatMessage({defaultMessage:"Today at {time}",id:"dateFormatHelpers.formatMillisToCalendar.todayAt"},{time:s}):-1===i?r.formatMessage({defaultMessage:"Yesterday at {time}",id:"dateFormatHelpers.formatMillisToCalendar.yesterdayAt"},{time:s}):x(a,"medium_with_time")}},23956:(e,t,r)=>{r.d(t,{YI:()=>a});const n="-deleted@notion.so",o="-deleted@makenotion.com";function a(e){return e.endsWith(n)||e.endsWith(o)}},14215:(e,t,r)=>{r.d(t,{E:()=>n,N:()=>o});r(57658),r(21703);function n(e,t){const r=new Set(e),n=new Set,o=new Array,a=new Array;for(const i of t)n.add(i),r.has(i)||a.push(i);for(const i of e)n.has(i)||o.push(i);return{created:a,deleted:o}}function o(e,t,r){const n=new Map,o=new Map,a=new Array,i=new Array;for(const s of e)n.set(r(s),s);for(const s of t){const e=r(s);o.set(e,s),n.has(e)||i.push(e)}for(const s of e){const e=r(s);o.has(e)||a.push(e)}return{created:i.map((e=>{const t=o.get(e);if(!t)throw new Error("After map did not contain value.");return t})),deleted:a.map((e=>{const t=n.get(e);if(!t)throw new Error("Before map did not contain value.");return t}))}}},33728:(e,t,r)=>{r.d(t,{BZ:()=>c,CU:()=>p,Gd:()=>g,H3:()=>i,dq:()=>d,dy:()=>v,nj:()=>m,oH:()=>s,t_:()=>_,zI:()=>y});r(57658);var n=r(83999),o=r(80994),a=r(72126);r(4615),r(64002);function i(e){if(e){const t=f(e);if(!t)return;const{name:r,domain:n}=t;return`${r.trim().toLowerCase()}@${n.trim().toLowerCase()}`}}function s(e){return Boolean(e&&n.validate(e))}const u=/[a-z0-9.!#$%&'*+/=?^_`{|}~\-]+@[a-z0-9._+\-]+\.[a-z0-9._+\-]+/gi,l=/^[a-z0-9.!#$%&'*+/=?^_`{|}~\-]+(@([a-z0-9._+\-]+(\.[a-z0-9._+\-]+)?)?)?$/gi;function c(e){const t=e.match(l);return!!t&&t.length>0}function d(e){const t=function(e){const t=e.match(u);if(t&&!(t.length<1))return i(t[0])}(e);return t||""}function p(e){const t=e.match(u);return null===t?[]:a.jj(a.oA(t.map(i)))}function m(e){const t=[],r=[],n=e.split(",").map((e=>e.trim()));n.slice(0,-1).forEach((e=>{if(0===e.length)return;const n=p(e);n.length>0?t.push(...n):r.push(e)}));const o=n[n.length-1],s=p(o);let u="";if(0===s.length)u=o;else if(1===s.length){const e=s[0];i(e)!==i(o)||t.length>0?t.push(e):u=o}else t.push(...s);return{extractedEmails:a.jj(a.oA(t.map(i))),invalidParts:a.jj(r),newInputValue:u}}function y(e){const t=p(e);return t.length>1||1===t.length&&i(t[0])!==i(e)?{extractedEmails:t,newInputValue:""}:{extractedEmails:[],newInputValue:e}}function f(e){const t=e.lastIndexOf("@"),r=e.substring(0,t),n=e.substring(t+1);if(""!==r&&""!==n)return{name:r,domain:n}}function g(e){if(e){const t=f(e);if(!t)return;return t.domain}}function v(e,t){if(!e)return!1;const r=g(t);return a.q9(e,r)}function _(e){return"doubleIn"===(0,o.Aw)(e).opt?"https://privacyportal.onetrust.com/ui/#/preferences/multipage/login/85da1f3a-9621-4cdf-a38b-0c15137a20c5":"https://privacyportal.onetrust.com/ui/#/preferences/multipage/login/06108214-ebec-46eb-ba8b-20521af00794"}},90902:(e,t,r)=>{r.d(t,{Q4:()=>a,YN:()=>n,tN:()=>o});const n=["","","","","",""],o=n.length-1,a={}},15095:(e,t,r)=>{r.d(t,{G0:()=>f,Gb:()=>k,Hk:()=>y,W3:()=>w,bk:()=>g,db:()=>b,nV:()=>M,p4:()=>T,rJ:()=>_,yS:()=>v,yz:()=>m,zX:()=>d});r(57658),r(52262),r(24506);var n=r(39593),o=r.n(n),a=r(41892),i=r(90902),s=r(72126),u=r(97880),l=r(63143),c=r(82798);const d=60,p=/[\u{E0020}-\u{E007E}]/u;function m(e,t){let{positionalEmojiData:r}=t;const n=r[e];if(!n)return;const[o,a,s,u]=n,{keywords:l,uniqueKeywords:c}=i.Q4[e]||{};return{codepoints:o,sheetX:a,sheetY:s,variations:u,keywords:l,uniqueKeywords:c}}function y(e,t){var r;return null===(r=m(e,t))||void 0===r||null===(r=r[k(e)])||void 0===r||null===(r=r.keywords)||void 0===r?void 0:r[0]}function f(e){return{x:66*e.sheetX+1,y:66*e.sheetY+1,size:64}}function g(e){return"apple"===e?a.Z.images.emoji.appleEmojiSpritesheet64Png:"twitter"===e?a.Z.images.emoji.twitterEmojiSpritesheet64Png:"google"===e?a.Z.images.emoji.googleEmojiSpritesheet64Png:(0,u.t1)(e)}function v(e,t){const r=m(e,t);return r&&r.variations||[]}function _(e){const t=e.toLowerCase().replace(/_/g," ").replace(/-([a-z])/g," $1").replace(/\s+/g," ").trim();if(t)return t}function b(e,t){return T(e).filter((e=>!m(e,t))).join("")}const h=["","","","",""];function k(e){var t=e;return h.forEach((e=>t=t.replace(e,""))),t}const x=new(o())({max:30,maxAge:l.hM,updateAgeOnGet:!0});function T(e){const t=x.get(e);if(t)return t;if(s.HD(e)){const t=function(e){const t=[];let r=0;for(;r<e.length;){let n=e[r];if(""===e[r]&&r+2<=e.length){const t=r;for(r+=1;r<e.length&&p.test(e[r]);)r+=1;if(r<e.length&&""===e[r]){const o=r;n=e.slice(t,o+1).join("")}else r=t}t.push(n),r+=1}return t}(s.qo(e));return x.set(e,t),t}return s.qo(e)}class M{constructor(e){this.codepointToGraphemeMap=void 0,this.codepointToGraphemeMap=new Map;let t=0,r=0;for(;r<e.length;r++){const n=e[r].length;for(let e=0;e<n;e++)this.codepointToGraphemeMap.set(t+e,r);t+=n}this.codepointToGraphemeMap.set(t,r)}getGraphemeIndex(e){return(0,c.TO)(this.codepointToGraphemeMap.get(e))}}class w{constructor(e){this.graphemeInfoArray=void 0,this.graphemeInfoArray=[];let t=0;for(const r of e)this.graphemeInfoArray.push({char:r,startIndex:t,length:r.length}),t+=r.length}getStringStartIndex(e){return(0,c.T)(0<=e&&e<=this.graphemeInfoArray.length),e===this.graphemeInfoArray.length?this.getStringLength():this.graphemeInfoArray[e].startIndex}getStringEndIndex(e){return(0,c.T)(0<=e&&e<this.graphemeInfoArray.length),this.graphemeInfoArray[e].startIndex+this.graphemeInfoArray[e].length-1}getCharLength(e){return(0,c.T)(0<=e&&e<this.graphemeInfoArray.length),this.graphemeInfoArray[e].length}getStringLength(){return this.graphemeInfoArray.length?this.graphemeInfoArray.at(-1).startIndex+this.graphemeInfoArray.at(-1).length:0}getInclusiveStringRangeForSelection(e){return{startIndex:this.getStringStartIndex(e.startIndex),endIndex:this.getStringEndIndex(e.endIndex-1)}}getLength(){return this.graphemeInfoArray.length}}},78934:(e,t,r)=>{r.d(t,{Ic:()=>n});const n=Object.freeze({});Object.freeze([]),Object.freeze([])},77657:(e,t,r)=>{r.d(t,{BP:()=>_,Dv:()=>n,Gw:()=>o,Nw:()=>s,U9:()=>a,YM:()=>d,f3:()=>u,mC:()=>c,mQ:()=>l,nO:()=>i,ok:()=>g,s9:()=>b,tO:()=>f,u2:()=>v});const n="c0d82879-3eea-4c21-b0d1-42a775022c4b",o="cdc46cd9-f0e9-48fd-b3aa-18481098e29e",a="b759b994-5c32-4268-bbb0-41f435abb8d9",i="7f5d87f7-be5f-45ee-83d3-b9af153f0ee0",s="e0dbc237-dcea-4ed7-8de0-bfc1ea6ac768",u="2e19d8ee-fc61-48c1-be14-07a3aff43542",l="3a6a5bc3-6b3a-467e-9fc5-de4b6024a0e1",c="15d02cbd-b82a-4ccd-928e-f2ff0806f9ba",d="249a0797-abfd-4ee9-b8c3-30c32489eb2b",p="042f18e5-d630-4b45-964d-583e1d62b602",m="00000000-0000-4000-8000-000000000005",y="00000000-0000-4000-8000-000000000003",f=[u,l,s];function g(e){return[m,p].includes(e)}const v={[o]:"github",[c]:"jira",[i]:"slack","70570080-b12c-4484-a5ef-7c917ea6af1e":"zoom","7df961b7-66d9-4fb1-a963-ebcd171d6148":"asana","45c081d8-e28b-43d0-87be-c373ca160336":"trello",[l]:"figma","4d0f0ca4-c5f2-42c8-b6a6-795a590a3e57":"dropbox","ef9a1f68-a912-4bc0-9523-1688a2a52645":"onedrive",[p]:"google_calendar","09c1d111-fdc8-4ab8-8351-8b4b4edf2976":"hubspot","e719abb7-effd-42f1-aa3f-0f449710fdc0":"gitlab",[d]:"box","c20823c5-4014-4716-baa0-08d603480004":"adobe_xd","a5cac57e-e610-4b62-b515-9e2757c0a945":"clickup",[u]:"google_drive","48fba5a0-411d-43eb-aad4-1daff8c3c64d":"pagerduty",[s]:"zendesk",[n]:"cron"};function _(e){const{integrationId:t}=e;return t in v||t===y||t===a||t===m}function b(e){return function(e){return[y,o].includes(e)}(e)?"github":g(e)?"google_calendar":v[e]}},43593:(e,t,r)=>{r.d(t,{AA:()=>P,E$:()=>b,F8:()=>T,GN:()=>S,Wv:()=>N,bY:()=>l,ef:()=>Z,g_:()=>w,lF:()=>g,lJ:()=>u,mD:()=>U,mV:()=>I,rF:()=>O,w2:()=>D,x$:()=>v,zw:()=>C});r(21703),r(10517);var n=r(17755),o=r(59730),a=r(72126),i=r(4615),s=(r(70203),r(64002));const u=["A4","A3"],l=["Letter","Legal","Tabloid"];u.concat(l);const c=function(e){return!!e&&e.includes("files-secure.s3.us-west-2.amazonaws.com")},d=function(e){return!!e&&e.includes("s3.us-west-2.amazonaws.com/secure.notion-static.com")};const p=function(e){if(!y(e))return;const t=s.Qc(e);if(t.pathname){const e=t.pathname.split("/");if(c(t.host)){const t=e[2];if((0,i.e)(t))return t}else{if(!d(t.host))return e[2];{const t=e[3];if((0,i.e)(t))return t}}}},m=function(e){let t;try{t=new URL(e)}catch(r){return}if(t.hostname.endsWith(".amazonaws.com")){if(t.hostname.startsWith("s3")){const e=t.pathname.split("/")[1];return{baseurl:`${t.protocol}//${t.hostname}/${e}`,bucket:e}}return{baseurl:`${t.protocol}//${t.host}`,bucket:t.hostname.split(".")[0]}}},y=function(e){var t;return null===(t=m(e))||void 0===t?void 0:t.baseurl},f=function(e){const t=s.Qc(e);if(t.pathname){const e=t.pathname.split("/");return c(t.host)?e.slice(1).join("/"):d(t.host)?e.slice(3).join("/"):e.slice(2).join("/")}},g=function(e){if(s.Qc(e).pathname){const t=p(e),r=function(e){const t=s.Qc(e);if(t.pathname)return t.pathname.split("/")[3]}(e);if(r){const e=r.indexOf(".");return`${r.substring(0,e)}-${t}${r.substring(e)}`}}},v=function(e){const t=["https://file.notion.so/","https://file-dev.notion.so/","https://file-stg.notion.so/","http://file-local.notion.so:3000/"];for(const r of t)if(null!=e&&e.startsWith(r))return!0;return!1};function _(e,t){if(!e)return!1;if(!(e.startsWith(t)||e.replace("s3.","s3-").startsWith(t)))return!1;if(t.includes("temporary.notion-static.com"))return!0;if(t.includes("secure.notion-static.com")||t.includes("-files-secure")){const t=s.Qc(e);if(!t.pathname)return!1;const r=t.pathname.split("/")??[];return 4===r.length&&""!==r[3]}return!1}const b=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(h(e,r))return!0;if(t.length>3)throw new o.p8("invalid method parameters");for(const n of t)if(_(e,n))return!0;return!1},h=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const n=s.Qc(e);if(!n.pathname||n.host!==r)return!1;const o=n.pathname.split("/")??[];return Boolean(e&&o.length>=3&&`/${o[1]}`===t)},k={"image/fits":!0,"image/ief":!0,"image/jp2":!0,"image/jpeg":!0,"image/jpg":!0,"image/jpm":!0,"image/jpx":!0,"image/png":!0,"image/tiff":!0,"image/tif":!0,"image/heic":!0,"image/x-icon":!0,"image/svg+xml":!0,"application/pdf":!0},x={heic:!0,ico:!0,jpeg:!0,jpg:!0,png:!0,tif:!0,tiff:!0,gif:!0,svg:!0,pdf:!0,webp:!0},T=function(e,t){if(M(e))return!1;const r=(U(e)||"").toLowerCase();return!(!x[r]&&!k[`image/${r}`])&&!(t&&t.length>0&&"gif"===r&&b(e,t))},M=function(e){const t=e.toLowerCase();return t.startsWith("/images/")&&!t.includes("..")},w=function(e){return e.startsWith("https://images.unsplash.com/")},Z=function(e){const t=new RegExp("^(http|https)://media[0-9-]+.giphy.com/");return null!==e.match(t)},C=function(e,t){const r=s.Qc(e);return s.bf({url:`https://images.unsplash.com${r.pathname}`,query:{...r.query,w:(3*Math.max(400*Math.round(t/400),400)).toString()}})},S=function(e,t,r,o,a){const i=(0,n.EK)({url:e,permissionRecord:t,baseUrl:r,fullyQualified:!1,userId:o});return fetch(i).then((e=>e.blob())).then((e=>{const t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=a||"image",t.click(),window.URL.revokeObjectURL(t.href)}))},I=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";var o=R(e,r,n);if(void 0!==o)return o;if(b(e,t)){const t=p(e),r=f(e);if(t&&r){return{id:t,url:e}}}},N=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(void 0===e)return;const a=R(e,n,o);if(void 0===a)return;const i=s.Qc(e);if(!i.pathname)return;const u=i.pathname.split("/");if(u.length<5)return;const l="f"===u[2],c=l?5:4;return{name:u[c],link:`${l?r:t}/${u.slice(3).join("/")}`}},R=function(e,t,r){if(h(e,t,r)){const t=s.Qc(e);if(!t.pathname)return;const r=t.pathname.split("/");if(r.length<5)return;const n="s"===r[2]?3:4,o=r[n],a=r.slice(n).join("/");if(o&&a){return{id:o,url:e}}}};function U(e){const t=s.Qc(e);if(!t.href)return;if(!t.pathname)return;const r=a.Z$(t.pathname.split("/"));if(!r)return;const n=r.split(".");return 1===n.length?"":n[n.length-1]}const P=function(e){const t=e.lastIndexOf(".");return t>=0?e.substring(0,t):e},D=function(e){const t=s.Qc(e);if(t.pathname){const e=t.pathname.substring(t.pathname.lastIndexOf("/")+1);if(e)return e}return""},O=function(e){let t=e.title||D(e.source)||e.source;if(e.title){const r=U(e.source),n=U(t.replace("#",""));r&&r!==n&&(t+=`.${r}`)}return t}},17755:(e,t,r)=>{r.d(t,{EK:()=>s,Q4:()=>i,g:()=>l,nK:()=>a});var n=r(72126),o=r(64002);const a=5e3;function i(e){return u({...e,permissionRecord:void 0})}function s(e){return u(e)}function u(e){const{userId:t}=e;let{url:r,width:a}=e;const{baseUrl:i,fullyQualified:s,stripGoogleIconQuery:u,permissionRecord:l}=e;if(r.startsWith("C:\\"))return r;o.j3(r)&&(r=o.O_({relativeUrl:r,baseUrl:i})),u&&(r=r.replace("?sz=50",""));const c={...l};a&&r.indexOf(".ico")<0&&r.indexOf(".svg")<0&&r.indexOf(".gif")<0&&(a*=2,a=n.NM(a,-1),a=Math.max(a,40),a=Math.min(a,2e3),c.width=a.toString()),c.userId=t;const d=s?i:"";return o.bf({url:`${d}/image/${encodeURIComponent(r)}`,query:{...c,cache:"v2"}})}function l(e){const{baseURL:t,url:r,downloadName:n,download:a,permissionRecord:i,currentUserId:s,domainBaseURL:u}=e,l=o.j3(r)?o.O_({relativeUrl:r,baseUrl:t}):r,c={...i};n&&(c.name=n),a&&(c.download="true"),s&&(c.userId=s);const d=u||"";return o.bf({url:`${d}/signed/${encodeURIComponent(l)}`,query:{...c,cache:"v2"}})}},6695:(e,t,r)=>{r.d(t,{AX:()=>y,De:()=>z,Dg:()=>U,H:()=>b,Lw:()=>O,Nx:()=>v,PZ:()=>g,Rt:()=>B,Sn:()=>f,XU:()=>P,iA:()=>G,iB:()=>C,j5:()=>d,jk:()=>w,kp:()=>x,lw:()=>_,oz:()=>m,rx:()=>Z,sl:()=>p,v0:()=>D,vP:()=>E});r(57658);var n=r(35011),o=r(14714),a=r(99036),i=r(80951),s=r(43690),u=r(72126),l=r(97880),c=r(63143);let d=function(e){return e[e.Block=0]="Block",e[e.Page=1]="Page",e[e.Collection=2]="Collection",e[e.Table=3]="Table",e[e.Board=4]="Board",e[e.Calendar=5]="Calendar",e[e.List=6]="List",e[e.Gallery=7]="Gallery",e[e.Timeline=8]="Timeline",e[e.PageView=9]="PageView",e[e.Relation=10]="Relation",e}({});const p=["sprint_board","tutorial"];function m(e){return"table"===e?"table_properties":"board"===e?"board_properties":"calendar"===e?"calendar_properties":"gallery"===e?"gallery_properties":"list"===e?"list_properties":"timeline"===e?"timeline_properties":"page"===e?"page_view_properties":void(0,l.t1)(e)}const y=["show","hide_if_empty","hide"],f=["section_show","section_collapsed","section_hide","inline","minimal"],g="medium",v=200,_=35,b=["hours","day","week","bi_week","month","quarter","year"],h=(0,l.AO)((e=>e.original_url&&e.external_object_id?{true:e}:{false:e})),k=((0,l.AO)((e=>e.original_url&&!e.external_object_id?{true:e}:{false:e})),(0,l.AO)((e=>e.is_placeholder&&!e.integration_id?{true:e}:{false:e}))),x=(0,l.AO)((e=>h(e)||h(e)||k(e)?{true:e}:{false:e})),T={type:"load_limit",limit:50},M={type:"load_limit",limit:25},w=[{type:"load_limit",limit:10},{type:"load_limit",limit:25},{type:"load_limit",limit:50},{type:"load_limit",limit:100}];function Z(e,t){return e||(t?M:T)}function C(e,t,r,n){if(e||(e={}),n===d.Table||n===d.Relation){if(e={...e,table_properties:N(e.table_properties||[],t,"force",!0),collection_group_by:V(e,t),collection_groups:q(e.collection_groups),property_filters:j(e,t),table_frozen_column_index:void 0!==e.table_frozen_column_index?Math.max(e.table_frozen_column_index,-1):-1},n===d.Relation){const r=N(e.table_properties||[],t,"force",!0);e.collection_relation_options||(e.collection_relation_options={});if(r.filter((e=>{var r;return"relation"===(null===(r=t[e.property])||void 0===r?void 0:r.type)})).map((t=>{e.collection_relation_options&&!e.collection_relation_options[t.property]&&(e.collection_relation_options[t.property]={})})),e.collection_relation_options){const t={};Object.entries(e.collection_relation_options).map((e=>{let[r,n]=e;const o=n.related_properties;let a;if(o)if(o.find((e=>"title"===e.property)))if(o.find((e=>"title"===e.property&&!e.visible))){const e=o.find((e=>"title"===e.property&&!e.visible));e&&(e.visible=!0)}else a=o;else a=[{property:"title",visible:!0},...o];else a=[{property:"title",visible:!0}];t[r]={related_properties:a}})),e.collection_relation_options=t}}}else if(n===d.Board){const n=S(e.board_cover,t),o=e.board_properties||[];!0!==(e={...e,board_columns_by:A(e,t,r),board_cover:n,board_columns:e.board_columns||e.board_groups2||[],board_properties:R({propertyFormats:e.board_properties||[],schema:t,titleProperty:O(n)?"allow":"force"}),collection_group_by:V(e,t),collection_groups:q(e.collection_groups),property_filters:j(e,t),table_wrap:void 0===e.table_wrap||e.table_wrap}).board_title_visible||o.find((e=>"title"===e.property))||(e.board_properties=B(e.board_properties||[],"title",!0),delete e.board_title_visible)}else if(n===d.Calendar)e={...e,calendar_properties:R({propertyFormats:e.calendar_properties||[],schema:t,titleProperty:"disallow"}),property_filters:j(e,t)};else if(n===d.List)e={...e,list_properties:R({propertyFormats:e.list_properties||[],schema:t,titleProperty:"disallow"}),collection_group_by:V(e,t),collection_groups:q(e.collection_groups),property_filters:j(e,t)};else if(n===d.Gallery){const r=S(e.gallery_cover,t);!0===(e={...e,gallery_cover:r,gallery_properties:R({propertyFormats:e.gallery_properties||[],schema:t,titleProperty:O(r)?"allow":"force"}),collection_group_by:V(e,t),collection_groups:q(e.collection_groups),property_filters:j(e,t)}).gallery_title_visible&&(e.gallery_properties=B(e.gallery_properties||[],"title",!0),delete e.gallery_title_visible)}else if(n===d.Timeline){const r=N(e.timeline_table_properties||[],t,"allow",!1),n=r.some((e=>{let{visible:t}=e;return Boolean(t)})),o=E(Boolean(e.timeline_show_table),r);e={...e,timeline_properties:R({propertyFormats:e.timeline_properties||[],schema:t,titleProperty:o?"allow":"force"}),timeline_table_properties:r,timeline_show_table:Boolean(e.timeline_show_table&&n),collection_group_by:V(e,t),collection_groups:q(e.collection_groups),property_filters:j(e,t)}}else if(n===d.Page||n===d.Collection){var o;const r=R({propertyFormats:e.collection_page_properties||[],schema:t,titleProperty:"disallow"}),n=t=>{const r=e.property_visibility;if(r){const e=r.find((e=>{let{property:r}=e;return r===t}));return e&&e.visibility}},a=["hide","hide_if_empty"],i=r.some((e=>a.includes(n(e.property)||"show")))?"hide_if_empty":"show";e={...e,page_section_visibility:e.page_section_visibility||{backlinks:"section_collapsed",comments:"section_show",margin_comments:"inline"},property_visibility:r.map((e=>({property:e.property,visibility:n(e.property)||i}))),collection_page_sections:null===(o=e.collection_page_sections)||void 0===o?void 0:o.filter((e=>e&&Boolean(t[e.section]))),collection_page_properties:r}}else n===d.PageView&&(e={...e});const a=e.inline_collection_first_load_limit;return a&&"load_all"===a.type&&(e.inline_collection_first_load_limit={type:"load_limit",limit:100}),e={...e,collection_view_subitem:e.collection_view_subitem??e.collection_view_toggle_by,collection_default_subitem:e.collection_default_subitem??e.collection_default_toggle_by,subitem_property:e.subitem_property}}function S(e,t){if(e&&"property"===e.type){const r=t[e.property];return r&&"file"===r.type?e:void 0}return e}function I(e){const t=Object.keys(e);return u.MR(t,(t=>{if(a.pn(t))return"";{const r=e[t];return r?r.name:""}}))}function N(e,t,r,n){let o=[...e];o=o.filter((e=>e&&Boolean(t[e.property])));const i=a.uS(t);"allow"===r?o=B(o,i,!1):"disallow"===r?o=F(o,i):"force"===r&&(o=B(o,i,!0));const s=o.some((e=>!e.visible)),l=I(t);for(const u of l){if(a.HF(u))continue;a.us(u)&&(o=F(o,"title"));const r=e.find((e=>e.property===u)),i=t[u];let l=!1;i&&a.p_(i)&&i.hideByDefaultInUnconfiguredViews&&(l=!0),r||(s||!n||l?o.push({property:u,visible:!1}):o.push({property:u,visible:!0}))}return o=o.map((e=>{if(e.width)return e;{const t=a.pn(e.property)?280:v;return{...e,width:t}}})),o=u.mN(o,(e=>{let{property:t}=e;return t})),o}function R(e){const{propertyFormats:t,schema:r,titleProperty:n}=e;let o=[...t];o=o.filter((e=>e&&Boolean(r[e.property]))),"allow"===n?o=B(o,"title",!1):"disallow"===n?o=F(o,"title"):"force"===n&&(o=B(o,"title",!0));const i=I(r);for(const s of i)if(!a.pn(s)){o.find((e=>e.property===s))||o.push({property:s,visible:!1})}return o=u.mN(o,(e=>{let{property:t}=e;return t})),o}function U(e){return"table"===e?d.Table:"board"===e?d.Board:"calendar"===e?d.Calendar:"list"===e?d.List:"timeline"===e?d.Timeline:"page"===e?d.PageView:d.Gallery}function P(e){const{block:t,property:r,schema:n,getRecordModel:o,userId:a,userTimeZone:s,intl:u}=e;if(!t)return!1;if("title"===r)return!1;const l=n[r];return!(!l||"checkbox"!==l.type)||(!(!l||"button"!==l.type)||(!(!l||"status"!==l.type)||!i.wV({property:r,schema:n,block:t,getRecordModel:o,userId:a,userTimeZone:s,intl:u})))}function D(e){return e&&e.format&&e.format.drive_properties}function O(e){return Boolean(e)}function E(e,t){return Boolean(e&&t.find((e=>{let{property:t,visible:r}=e;return Boolean("title"===t&&r)})))}function F(e,t){return e.filter((e=>{let{property:r}=e;return r!==t}))}function B(e,t,r){let n=[...e];const o=e.findIndex((e=>e.property===t)),a=e[o];return a?!a.visible&&r&&(n[o]={...n[o],visible:!0}):n=[{property:t,visible:!0},...e],n}function A(e,t,r){let n;if(e.board_columns_by)n=L(e.board_columns_by,t);else if(r&&r.group_by){const e=t[r.group_by];e&&(0,o.g4)(e)&&(n={property:r.group_by,type:e.type,sort:{type:"manual"}})}return n}function V(e,t){let r;return e.collection_group_by&&(r=L(e.collection_group_by,t)),r}function L(e,t){if(!e)return;const r=t[e.property];if(r&&(0,o.LG)(r)){if("formula"===e.type){let t=(0,n.mm)(r);return"block"===t&&(t="relation"),t===e.groupBy.type?e:(0,o.fw)(e.property,r)}return r.type===e.type&&e.sort&&(0,o.YG)(e).includes(e.sort.type)?e:(0,o.fw)(e.property,r)}}function q(e){const t=e?e.filter((e=>!(0,o.eF)(e))):[],r=e?e.filter((e=>(0,o.eF)(e))):[];return t.slice(0,100).concat(r)}function j(e,t){if(e.property_filters){const r=e.property_filters.map((e=>{let{id:r,filter:n}=e;const o=(0,s.dN)(n,t);return o&&{id:r,filter:o}}));return u.oA(r)}}const $=new RegExp(/notion:\/\/.*\/tutorial\/.*/);function G(e){return!!e&&$.test(e)}const Y=5*c.hM;function z(e,t){var r;const n=null===(r=e.update_ai_inferences_status)||void 0===r?void 0:r[t];return n?"requested"===n.type?{isRunning:Date.now()-n.created_time<Y}:"updating"===n.type?{isRunning:Date.now()-n.last_edited_time<Y,numPagesFilled:n.num_pages_filled,numPagesRequested:n.num_pages_requested}:void(0,l.t1)(n):{isRunning:!1}}},64340:(e,t,r)=>{r.d(t,{P:()=>i});r(57658);var n=r(97880);const o={LLLL:"DDDD t",llll:void 0,LLL:"DDD t",lll:"DD t",LL:"DDD",ll:"DD",L:void 0,l:void 0,LT:"t",LTS:"tt",M:"L",Mo:void 0,MM:"LL",MMM:void 0,MMMM:void 0,Q:"q",Qo:void 0,D:"d",Do:void 0,DD:"dd",DDD:"o",DDDo:void 0,DDDD:"ooo",d:void 0,do:void 0,dd:void 0,ddd:void 0,dddd:"cccc",e:void 0,E:"c",w:void 0,wo:void 0,ww:void 0,W:"W",Wo:void 0,WW:"WW",YY:"yy",YYYY:"yyyy",YYYYYY:void 0,Y:"y",gg:"kk",gggg:"kkkk",GG:"kk",GGGG:"kkkk",A:"a",a:void 0,H:"H",HH:"HH",h:"h",hh:"hh",k:void 0,kk:void 0,m:"m",mm:"mm",s:"s",ss:"ss",S:"uuu",SS:"uu",SSS:"SSS",z:void 0,zz:void 0,Z:"ZZ",ZZ:"ZZZ",X:"X",x:"x"};const a=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|LTS|LT|LL?L?L?|l{1,4}|.)/g;function i(e,t){let r=[];const i=[],c=e.locale.substring(0,2),d=t=>{if(r.length>0){const t=r.join("");i.push(e.toFormat(t)),r=[]}t&&i.push(t)},p=t.match(a);return p?(p.forEach((t=>{if(o[t])r.push(o[t]);else if((a=t)in o&&void 0===o[a])switch(t){case"llll":"en"===c?r.push("ccc, DD t"):"ja"===c?r.push("DD(ccc) t"):"ko"===c?r.push("DD cccc t"):"de"===c?r.push("ccc., DD t"):r.push("ccc DD t");break;case"L":"ko"===c?r.push("yyyy.MM.dd."):d(e.toLocaleString({day:"2-digit",month:"2-digit",year:"numeric"}));break;case"l":"ja"===c?d(e.toLocaleString({day:"2-digit",month:"2-digit",year:"numeric"})):"ko"===c?r.push("yyyy.MM.dd."):"fr"===c?r.push("d/M/y"):r.push("D");break;case"MMM":"ja"===c?d(e.toLocaleString({month:"long"})):r.push("LLL");break;case"MMMM":"ja"===c?d(e.toLocaleString({month:"long"})):r.push("LLLL");break;case"e":if("fr"===c||"de"===c){d((e.weekday-1).toString());break}case"d":case"do":const a=7===e.weekday?0:e.weekday;if("do"===t){const e=l(c,a,"c");if(e){d(e);break}}d(a.toString());break;case"dd":d(e.weekdayShort.substring(0,2));break;case"ddd":"de"===c?r.push("ccc."):r.push("ccc");break;case"ww":if("fr"===c||"de"===c){r.push("WW");break}case"w":case"wo":const i=function(e,t){if("fr"===t||"de"===t)return e.weekNumber;const r=e.set({month:1,day:1});if(u(e,r)||u(e,r.set({year:e.year+1})))return 1;return s(e)}(e,c);if("wo"===t){const e=l(c,i,"W");if(e){d(e);break}}const p="ww"===t?i.toString().padStart(2,"0"):i.toString();d(p);break;case"YYYYYY":d(`+${e.year.toString().padStart(6,"0")}`);break;case"a":d(e.toFormat("a").toLowerCase());break;case"k":0===e.hour?d("24"):r.push("H");break;case"kk":0===e.hour?d("24"):r.push("HH");break;case"Mo":case"Qo":case"Do":case"DDDo":case"Wo":const m=o[t.replace("o","")],y=function(e,t,r){const n=t.toFormat(r),o=parseInt(n);if(isNaN(o))return;return l(e,o,r)}(c,e,m);y?d(y):r.push(m);break;case"z":case"zz":const f=e.zone.offsetName(e.toMillis(),{format:"short",locale:"en-US"});d(f);break;default:(0,n.t1)(t)}else/^S{4,9}/.test(t)?r.push("SSS"):/^\[.*\]$/.test(t)?d(t.substring(1,t.length-1)):d(t.replace(/\\/g,""));var a})),d(),i.join("")):e.toFormat(t)}function s(e){if(7===e.weekday)return s(e.plus({days:1}));const t=e.set({month:1,day:1}),r=e.set({month:1,day:4});if(t.weekNumber!==r.weekNumber){if(1!==(7===t.weekday?e.set({month:1,day:2}).weekNumber:t.weekNumber))return e.weekNumber+1}return e.weekNumber}function u(e,t){const r=7===e.weekday?e.plus({days:1}):e,n=7===t.weekday?t.plus({days:1}):t;return r.hasSame(n,"week")}function l(e,t,r){switch(e){case"en":return function(e){const t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}(t);case"fr":return function(e,t){switch(t){case"d":return e+(1===e?"er":"");default:case"L":case"q":case"o":case"c":return e+(1===e?"er":"e");case"W":return e+(1===e?"re":"e")}}(t,r);case"de":return`${t}.`;case"ja":return function(e,t){switch(t){case"y":return 1===e?"":`${e}`;case"d":case"c":case"o":return`${e}`;default:return e.toString()}}(t,r);case"ko":return function(e,t){switch(t){case"d":case"c":case"o":return`${e}`;case"L":return`${e}`;case"W":return`${e}`;default:return e.toString()}}(t,r);default:return}}},23790:(e,t,r)=>{r.d(t,{Jy:()=>s,qT:()=>o,uy:()=>i,xK:()=>a});var n=r(606);function o(e,t){return Array.isArray(t)?t.some((t=>o(e,t))):"unknown"===e.type||"unknown"===t.type||"expression"===t.type||e.type===t.type&&("block"===e.type||"select"===e.type||"function"===e.type?s(e,t):"array"!==e.type||"array"!==t.type||o(e.of,t.of))}function a(e,t){return!!o(e,t)||(o({type:"checkbox"},t)?{type:"checkbox"}:!!o({type:"text"},t)&&{type:"text"})}function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=r?s:(e,t)=>e.type===t.type;return n(e,t)||"array"===e.type&&n(e.of,t)}function s(e,t){return e.type===t.type&&("block"===e.type&&"block"===t.type?void 0===e.collection?void 0===t.collection:void 0!==t.collection&&(0,n.qo)(e.collection,t.collection):"select"===e.type&&"select"===t.type?(0,n.qo)(e.collection,t.collection)&&e.property===t.property:"array"===e.type&&"array"===t.type?s(e.of,t.of):"function"!==e.type||"function"!==t.type||e.libraryFunction===t.libraryFunction&&void 0!==e.boundTargetType==(void 0!==t.boundTargetType))}},84116:(e,t,r)=>{r.d(t,{Av:()=>c,DF:()=>_,Eb:()=>l,GV:()=>T,Oy:()=>a,QQ:()=>f,Uq:()=>b,WG:()=>s,WY:()=>M,Xm:()=>h,dy:()=>u,eO:()=>g,gD:()=>k,kA:()=>v,vz:()=>i,x2:()=>o,yp:()=>n,zF:()=>y,zq:()=>x});let n=function(e){return e[e.Binding=0]="Binding",e[e.ContextValue=1]="ContextValue",e[e.ThisRow=2]="ThisRow",e}({}),o=function(e){return e[e.Binding=0]="Binding",e[e.Token=1]="Token",e[e.Builtin=2]="Builtin",e[e.LibraryFunction=3]="LibraryFunction",e}({}),a=function(e){return e.Checkbox="checkbox",e.Block="block",e.Person="person",e.BlockProperty="block_property",e.Date="date",e.ContextValue="context",e}({}),i=function(e){return e.Title="title",e.CreatedBy="created_by",e.CreatedTime="created_time",e.LastEditedBy="last_edited_by",e.LastEditedTime="last_edited_time",e}({});const s=Object.values(i),u={[i.Title]:{type:"text"},[i.CreatedBy]:{type:"person"},[i.CreatedTime]:{type:"date"},[i.LastEditedBy]:{type:"person"},[i.LastEditedTime]:{type:"date"}},l="{{notion:",c="}}",d="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",p=l.replace(/\{/g,"\\{"),m=c.replace(/\}/g,"\\}"),y=new RegExp(`${p}.*${m}`),f=new RegExp(`^${p}${a.Block}:(${d})(:${d})?${m}`),g=new RegExp(`^${p}${a.Person}:(${d})${m}`),v=new RegExp(`^${p}${a.BlockProperty}:([^:]+)(:(${d}):(${d}))?${m}`),_=(new RegExp(`${p}${a.BlockProperty}:([^:]+)(:(${d}):(${d}))?${m}`,"g"),new RegExp(`^${p}${a.Checkbox}:(true|false)${m}`)),b=new RegExp(`^${p}${a.ContextValue}:([^}]+)${m}`),h=new RegExp(`^${p}${a.Date}:([^}]+)${m}`),k=new RegExp(/prop\((["'])(.*?)(["'])\)/g),x=["add","subtract","multiply","divide","sum","min","max"],T="current",M="index"},21114:(e,t,r)=>{r.d(t,{FR:()=>m,OY:()=>p,ic:()=>d,sB:()=>c,sG:()=>l,y_:()=>y});var n=r(72126),o=r(97880),a=r(68602),i=r(47218),s=r(78106);function u(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,o.t1)(e)}}function l(e){switch(e.type){case i.$E.InvalidCharacter:return{...a.mr.InvalidCharacter,values:{errorCharacter:e.character}};case i.$E.UnclosedStringLiteral:return a.mr.UnclosedStringLiteral;case i.$E.UnclosedComment:return a.mr.UnclosedComment;case i.$E.TokenExpected:return{...a.mr.TokenExpected,values:{expectedToken:e.token}};case i.$E.StringLiteralContainsToken:return a.mr.StringLiteralContainsToken;case i.$E.ExpressionExpected:return a.mr.ExpressionExpected;case i.$E.PropertyTokenOrFunctionExpected:return a.mr.PropertyExpected;case i.$E.EndOfInputExpected:return a.mr.EndOfInputExpected;case i.$E.UnexpectedError:return a.mr.UnexpectedError;default:(0,o.t1)(e)}}function c(e){switch(e.type){case i.h4.FunctionCallArgumentWrongType:case i.h4.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function d(e){let t;switch(e.type){case i.h4.ThisRowTypeNotFound:t=a.o8.ThisRowTypeNotFound;break;case i.h4.ThisRowNotBlockWithCollection:t=a.o8.ThisRowNotBlockWithCollection;break;case i.h4.MissingPropertyOnThisRow:t={...a.o8.MissingPropertyOnThisRow,values:{propertyName:e.property}};break;case i.h4.MissingContextVariable:t={...a.o8.MissingContextVariable,values:{valueId:e.token.valueId}};break;case i.h4.MissingBlock:t={...a.o8.MissingBlock,values:{blockId:e.token.blockId}};break;case i.h4.CallingNotFunction:t={...a.o8.CallingNotFunction,values:{expressionType:u(e.callee.type.type)}};break;case i.h4.FunctionCallTooFewArguments:t={...a.o8.FunctionCallTooFewArguments,values:{minNumParameters:e.minNumParameters,functionName:e.libraryFunction.name,numArguments:e.numArguments}};break;case i.h4.FunctionCallUnexpectedArgument:t={...a.o8.FunctionCallUnexpectedArgument,values:{functionName:e.libraryFunction.name}};break;case i.h4.FunctionCallArgumentWrongType:t={...a.o8.FunctionCallArgumentWrongType,values:{argumentType:u(e.argument.type.type),functionName:e.libraryFunction.name}};break;case i.h4.MemberPropertyMismatchCollection:t={...a.o8.MemberPropertyMismatchCollection,values:{propertyName:e.token.property}};break;case i.h4.MemberPropertyMissing:t={...a.o8.MemberPropertyMissing,values:{propertyName:e.property}};break;case i.h4.MemberPropertyTargetNotBlock:t=a.o8.MemberPropertyTargetNotBlock;break;case i.h4.MemberPropertyTypeInvalid:t={...a.o8.MemberPropertyTypeInvalid,values:{propertyName:e.propertyName,propertyType:e.propertyType}};break;case i.h4.UndefinedIdentifier:t={...a.o8.UndefinedIdentifier,values:{identifier:e.node.text}};break;case i.h4.UnifiedFunctionCannotFindFunction:t={...a.o8.UnifiedFunctionCannotFindFunction,values:{functionName:e.name}};break;case i.h4.UnifiedFunctionNoArguments:t={...a.o8.UnifiedFunctionNoArguments,values:{functionName:e.libraryFunction.name}};break;case i.h4.UnifiedFunctionTargetWrongType:t={...a.o8.UnifiedFunctionTargetWrongType,values:{functionName:e.libraryFunction.name,targetType:u(e.expression.type.type)}};break;case i.h4.CannotRelativelyCompareTypes:t={...a.o8.CannotRelativelyCompareTypes,values:{lhsType:u(e.lhsType.type),rhsType:u(e.rhsType.type)}};break;case i.h4.CannotDoMathOnType:t={...a.o8.CannotDoMathOnType,values:{lhsType:u(e.lhsType.type),rhsType:u(e.rhsType.type)}};break;case i.h4.UnaryMinusOnNonNumber:t={...a.o8.UnaryMinusOnNonNumber,values:{type:u(e.expression.type.type)}};break;case i.h4.IdentifierExpected:t=a.o8.IdentifierExpected;break;case i.h4.FunctionCallExpected:t={...a.o8.FunctionCallExpected,values:{functionName:e.functionName}};break;case i.h4.RenamedIdentifier:t={...a.o8.RenamedIdentifier,values:{identifier:e.identifier,renamedTo:e.renamedTo}};break;case i.h4.RemovedFunction:t={...a.o8.RemovedFunction,values:{functionName:e.functionName,alternative:e.alternative}};break;default:(0,o.t1)(e)}return{...t,values:{...t.values,startOffset:e.node.startOffset,endOffset:e.node.endOffset+1}}}function p(e){let t;switch(e.type){case i.FY.MissingThisRow:t=a.YG.MissingThisRow;break;case i.FY.MissingSchemaPropertyOnThisRow:t={...a.YG.MissingSchemaPropertyOnThisRow,values:{propertyName:e.property}};break;case i.FY.ThisRowBlockPropertyMismatchCollection:t=a.YG.ThisRowBlockPropertyMismatchCollection;break;case i.FY.MissingContextVariable:t={...a.YG.MissingContextVariable,values:{valueId:e.valueId}};break;case i.FY.IdentifierNotFound:t={...a.YG.IdentifierNotFound,values:{identifier:e.node.text}};break;case i.FY.CannotRelativelyCompareTypes:t={...a.YG.CannotRelativelyCompareTypes,values:{lhsType:u(e.lhsType),rhsType:u(e.rhsType)}};break;case i.FY.CannotDoMathOnType:t={...a.YG.CannotDoMathOnType,values:{valueType:u(e.valueType)}};break;case i.FY.CannotCallNonFunction:t={...a.YG.CannotCallNonFunction,values:{calleeType:u(e.calleeType)}};break;case i.FY.UnifiedFunctionPropertyNotFound:t={...a.YG.UnifiedFunctionPropertyNotFound,values:{functionName:e.node.name}};break;case i.FY.LibraryFunctionExecutionError:t={...a.YG.LibraryFunctionExecutionError,values:{functionName:e.libraryFunction.name}};break;case i.FY.FunctionCallTooFewArguments:t={...a.YG.FunctionCallTooFewArguments,values:{functionName:e.libraryFunction.name}};break;case i.FY.FunctionCallUnexpectedArgument:t={...a.YG.FunctionCallUnexpectedArgument,values:{functionName:e.libraryFunction.name}};break;case i.FY.FunctionCallArgumentWrongType:t={...a.YG.FunctionCallArgumentWrongType,values:{functionName:e.libraryFunction.name,argumentType:u(e.argumentType)}};break;case i.FY.AccessingPropertyOnNonBlock:t=a.YG.AccessingPropertyOnNonBlock;break;case i.FY.MissingDataDependencyBlock:t={...a.YG.MissingDataDependencyBlock,values:{blockId:e.blockPointer.id}};break;case i.FY.MissingDataDependencyPerson:t={...a.YG.MissingDataDependencyPerson,values:{personId:e.personPointer.id}};break;case i.FY.MemberPropertyMismatchCollection:t=a.YG.MemberPropertyMismatchCollection;break;case i.FY.MissingPropertyOnSchemaForMemberProperty:t=a.YG.MissingPropertyOnSchemaForMemberProperty;break;case i.FY.UnaryMinusOnNonNumber:t={...a.YG.UnaryMinusOnNonNumber,values:{expressionType:u(e.expressionType)}};break;case i.FY.UnexpectedRecoveryNode:t=a.YG.UnexpectedRecoveryNode;break;case i.FY.UnexpectedError:t=a.YG.UnexpectedError;break;case i.FY.DepthExceeded:t=a.YG.DepthExceeded;break;case i.FY.CycleDetected:t=a.YG.CycleDetected;break;case i.FY.MaxEvaluationTimeExceeded:t=a.YG.MaxEvaluationTimeExceeded;break;default:(0,o.t1)(e)}return(0,s.w7)(e)?{...t,values:{...t.values,startOffset:e.node.startOffset,endOffset:e.node.endOffset+1}}:t}function m(e){const t=null==e?void 0:e.values;return[n.CE(e,"values"),t]}function y(e){return e.type===i.FY.DepthExceeded||e.type===i.FY.CycleDetected||e.type===i.FY.MaxEvaluationTimeExceeded}},21027:(e,t,r)=>{r.d(t,{Ec:()=>u,_z:()=>l,co:()=>c});r(57658);var n=r(41432),o=r(99036),a=r(606),i=r(21202),s=r(6287);function*u(e,t){const r=yield{recordPointers:e},n=t.limit,a=[];for(const i of e){if(void 0!==n&&a.length>=n)break;const e=r.getRecordModel(i);if(!e||!e.getAlive())continue;const s=yield*c(e);(null==s?void 0:s.id)===(0,o.F0)(t)&&a.push(e)}return a}function*l(e,t){const r=t[e];if(!(r&&"rollup"===r.type&&r.relation_property&&r.target_property_type&&r.target_property))return;const n=t[r.relation_property];if(!n||"relation"!==n.type||!(0,o.F0)(n))return;const a=(0,o.j0)(n),{getRecordModel:i}=yield{recordPointers:[a]},s=i((0,o.j0)(n));if(!s)return;const u=s.getNormalizedSchema(),l=u[r.target_property];return l&&r.target_property_type===l.type?{propertySchema:r,targetProperty:r.target_property,relationPropertySchema:n,targetCollectionModel:s,targetCollectionSchema:u,targetPropertySchema:l,targetCollectionPointer:a}:void 0}function*c(e){const t=e.getParentPointer();if(t.table===s.v){return(yield{recordPointers:[t]}).getRecordModel(t)}const r=e.getType();if((0,n.Pm)(r))return yield*function*(e){let t=e.getParentPointer();for(;t;){if(a.dr.isEqual(t,e.pointer))return;if(t.table!==i.iU)return;const r=(yield{recordPointers:[t]}).getRecordModel(t);if(!r)return;if(!r.isCollectionView()){t=r.getParentPointer();continue}const n=r.getCollectionPointer();if(!n)return;const o=(yield{recordPointers:[n]}).getRecordModel(n);if(!o)return;const s=o.getRootPagePointer();return o.isPageTreeCollection()&&s&&a.dr.isEqual(s,t)?o:void 0}}(e)}},51849:(e,t,r)=>{r.d(t,{Eh:()=>s,aU:()=>u,dJ:()=>l,eD:()=>d,tE:()=>c});r(57658);var n=r(15095),o=r(70203),a=r(97880),i=r(78106);function s(e,t){if(0===t)return 0;let r=0,o=0;for(let i=0;i<e.length;i++){const s=e[i];switch(s.type){case"code":if(t<=r+s.codeLength)return o+(0,n.p4)(s.text).slice(0,t-r).join("").length;r+=s.codeLength,o+=s.length;break;case"token":if(t<=r+1)return o+s.length;r+=1,o+=s.length;break;default:(0,a.t1)(s)}}return o}function u(e,t,r){if(0===t)return 0;let o=0,a=0;for(let i=0;i<e.length;i++){const s=e[i];switch(s.type){case"code":if(t<=a+s.length)return o+(0,n.p4)(s.text.substring(0,t-a)).length;o+=s.codeLength,a+=s.length;break;case"token":if(a+s.length>=t)return o+("right"===r?1:0);o+=1,a+=s.length}}return o}function l(e){let t="";const r=[];return null==e||e.forEach((e=>{const a=(0,o.hDy)(e),s=(0,i._u)(a);if(void 0!==s)return t+=s,void r.push({type:"token",length:s.length});const u=(0,o.WiV)(e);t+=u,r.push({type:"code",length:u.length,codeLength:(0,n.p4)(u).length,text:u})})),[t,r]}function c(e,t){return{...e,startOffset:u(t,e.startOffset,"left"),endOffset:u(t,e.endOffset,"left")}}function d(e){return e.reduce(((e,t)=>{const r=t.type;return"token"===r?e+1:"code"===r?e+t.codeLength:void(0,a.t1)(r)}),0)}},3067:(e,t,r)=>{r.d(t,{QP:()=>l,h0:()=>c,um:()=>d});r(30541),r(57658);var n=r(9291),o=r(2032),a=r(70203),i=r(84116),s=r(78106);const u=(0,n.defineMessages)({property:{id:"formula2Input.propertyHelper.descriptionGeneric",defaultMessage:"Database property."},titlePropertyDescription:{id:"formulaLibrary.property.title.description",defaultMessage:"Title property."},textPropertyDescription:{id:"formulaLibrary.property.text.description",defaultMessage:"Text property."},urlPropertyDescription:{id:"formulaLibrary.property.url.description",defaultMessage:"URL property."},emailPropertyDescription:{id:"formulaLibrary.property.email.description",defaultMessage:"Email property."},phoneNumberPropertyDescription:{id:"formulaLibrary.property.phoneNumber.description",defaultMessage:"Phone number property."},selectPropertyDescription:{id:"formulaLibrary.property.select.description",defaultMessage:"Select property."},multiSelectPropertyDescription:{id:"formulaLibrary.property.multiSelect.description",defaultMessage:"Multi-select property, list."},statusPropertyDescription:{id:"formulaLibrary.property.status.description",defaultMessage:"Status property."},checkboxPropertyDescription:{id:"formulaLibrary.property.checkbox.description",defaultMessage:"Checkbox property."},datePropertyDescription:{id:"formulaLibrary.property.date.description",defaultMessage:"Date property."},personPropertyDescription:{id:"formulaLibrary.property.person.description",defaultMessage:"Person property, list."},relationPropertyDescription:{id:"formulaLibrary.property.relation.description",defaultMessage:"Relation property, list."},rollupPropertyDescriptionList:{id:"formulaLibrary.property.rollup.description",defaultMessage:"Rollup property, list."},rollupPropertyDescription:{id:"formulaLibrary.property.rollup.descriptionWithList",defaultMessage:"Rollup property."},numberPropertyDescription:{id:"formulaLibrary.property.number.description",defaultMessage:"Number property."},formulaPropertyDescription:{id:"formulaLibrary.property.formula.description",defaultMessage:"Formula property."},formulaPropertyDescriptionList:{id:"formulaLibrary.property.formula.descriptionWithList",defaultMessage:"Formula property, list."},createdTimePropertyDescription:{id:"formulaLibrary.property.createdTime.description",defaultMessage:"Created time property."},lastEditedTimePropertyDescription:{id:"formulaLibrary.property.lastEditedTime.description",defaultMessage:"Last edited time property."},createdByPropertyDescription:{id:"formulaLibrary.property.createdBy.description",defaultMessage:"Created by property."},lastEditedByPropertyDescription:{id:"formulaLibrary.property.lastEditedBy.description",defaultMessage:"Last edited by property."},filePropertyDescription:{id:"formulaLibrary.property.file.description",defaultMessage:"File property, list."},autoincrementIdDescription:{id:"formulaLibrary.property.autoincrementId.description",defaultMessage:"ID property."}}),l={title:{name:"title",type:{type:"text"},description:u.titlePropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),['.style("b")']],isCopyable:!0},{input:[c("Full Name"),['.split(" ").at(0)']]}]:[{input:[c("Title")]},{input:[c("Title"),['.style("b")']]},{input:[c("Name"),['.split(" ").at(0)']]}]},text:{name:"text",type:{type:"text"},description:u.textPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[["upper("],p(e),[")"]],isCopyable:!0},{input:[p(e),['.style("b", "red")']],isCopyable:!0}]:[{input:[["upper("],c("Name"),[")"]]},{input:[c("Name"),['.style("b", "red")']]}]},url:{name:"url",type:{type:"text"},description:u.urlPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[' ? link("Link", '],p(e),[').style("green") : ""']],isCopyable:!0}]:[{input:[c("URL"),[' ? link("Link", '],c("URL"),[').style("green") : ""']]}]},email:{name:"email",type:{type:"text"},description:u.emailPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[' ? link("Email", "mailto:" + '],p(e),[').style("blue") : ""']],isCopyable:!0}]:[{input:[c("Email"),[' ? link("Email", "mailto:" + '],c("Email"),[').style("blue") : ""']]}]},phone_number:{name:"phone_number",type:{type:"text"},description:u.phoneNumberPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[' ? link("Call", "tel:" + '],p(e),[').style("blue") : ""']],isCopyable:!0}]:[{input:[c("Email"),[' ? link("Call", "tel:" + '],c("Email"),[').style("blue") : ""']]}]},number:{name:"number",type:{type:"number"},description:u.numberPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[" / 2"]],isCopyable:!0},{input:[["pi() * "],p(e),[" ^ 2"]],isCopyable:!0}]:[{input:[c("Cost"),[" / "],c("Total Units")]},{input:[["pi() * "],c("Radius"),[" ^ 2"]]}]},select:{name:"select",type:{type:"text"},description:u.selectPropertyDescription,examples:e=>{const t=[{input:[c("Priority"),[' == "High"']]},{input:[['["Feature", "Bug"].includes('],c("Task Type"),[")"]]}];return e&&t.unshift({input:[p(e)],isCopyable:!0}),t}},multi_select:{name:"select",type:{type:"array",of:{type:"text"}},description:u.multiSelectPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[".length()"]],isCopyable:!0}]:[{input:[c("Tags"),[".length()"]]},{input:[c("Tags"),['.includes("Finance")']]}]},status:{name:"status",type:{type:"text"},description:u.statusPropertyDescription,examples:e=>"Status"===(null==e?void 0:e.name)?[{input:[p(e)],isCopyable:!0},{input:[p(e),[' == "Done"']],isCopyable:!0},{input:[['["Not started", "In progress"].includes('],p(e),[")"]],isCopyable:!0}]:[{input:[c("Status"),[' == "Done"']]},{input:[['["Not started", "In progress"].includes('],c("Status"),[")"]]}]},checkbox:{name:"checkbox",type:{type:"checkbox"},description:u.checkboxPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[["not "],p(e)],isCopyable:!0},{input:[c("Signed"),[" and "],c("Sealed"),[" and "],c("Delivered")]}]:[{input:[["not"],c("Done")]},{input:[c("Signed"),[" and "],c("Sealed"),[" and "],c("Delivered")]}]},date:{name:"date",type:{type:"date"},description:u.datePropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[" > now()"]],isCopyable:!0},{input:[p(e),['.dateAdd(1, "weeks")']],isCopyable:!0},{input:[["dateBetween("],p(e),[', now(), "days")']],isCopyable:!0}]:[{input:[c("Due Date"),[" > now()"]]},{input:[["formatDate("],c("Date"),[', "YYYY/MM/DD HH:mm")']]},{input:[["dateBetween("],c("Birthday"),[', now(), "days")']]}]},person:{name:"person",type:{type:"array",of:{type:"text"}},description:u.personPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[".length()"]],isCopyable:!0},{input:[p(e),[".at(0)"]],isCopyable:!0},{input:[p(e),[".map(current.email())"]],isCopyable:!0}]:[{input:[c("Participants"),[".at(0)"]]},{input:[c("Participants"),[".length()"]]}]},relation:{name:"relation",type:{type:"array",of:{type:"block"}},description:u.relationPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[".length()"]],isCopyable:!0},{input:[c("Tasks"),[".filter(current."],c("Status"),[' != "Done")']]}]:[{input:[c("Tasks"),[".length()"]]},{input:[c("Tasks"),[".filter(current."],c("Status"),[' != "Done")']]}]},rollup:{name:"rollup",type:e=>{if("rollup"===(null==e?void 0:e.type)&&("show_unique"===e.aggregation||void 0===e.aggregation))return{type:"array",of:{type:"unknown"}};if(e&&"aggregation"in e&&void 0!==e.aggregation){return{type:(0,o.W6)((0,o.gu)(e.aggregation))}}return{type:"unknown"}},description:e=>"rollup"!==(null==e?void 0:e.type)||"show_unique"!==e.aggregation&&void 0!==e.aggregation?u.rollupPropertyDescription:u.rollupPropertyDescriptionList,examples:(e,t)=>{let r;return r=!t||"rollup"!==(null==t?void 0:t.type)||"show_unique"!==t.aggregation&&void 0!==t.aggregation?[{input:[c("Average cost"),[" * 12"]]},{input:[c("Sum of customers"),[" > 100"]]}]:[void 0!==e?{input:[p(e),[".length()"]],isCopyable:!0}:{input:[c("Purchases"),[".length()"]]},{input:[["sum("],c("Purchases"),[".map(current."],c("Cost"),["))"]]}],e&&r.unshift({input:[p(e)],isCopyable:!0}),r}},file:{name:"file",type:{type:"array",of:{type:"text"}},description:u.filePropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[".length()"]],isCopyable:!0},{input:[p(e),['.filter(current.match(".pdf$"))']],isCopyable:!0},{input:[p(e),['.map(link("File", current))']],isCopyable:!0}]:[{input:[c("Attachments"),[".length()"]]},{input:[c("Attachments"),['.filter(current.match(".pdf$"))']]},{input:[c("Attachments"),['.map(link("File", current))']]}]},formula:{name:"formula",type:e=>{var t,r,n;return e&&"formula2"in e&&null!==(t=e.formula2)&&void 0!==t&&null!==(t=t.result_type)&&void 0!==t&&t.type?e.formula2.result_type:e&&"formula"in e&&null!==(r=e.formula)&&void 0!==r&&r.result_type?{type:null===(n=e.formula)||void 0===n?void 0:n.result_type}:{type:"unknown"}},description:e=>{var t;return e&&"formula2"in e&&"array"===(null===(t=e.formula2)||void 0===t||null===(t=t.result_type)||void 0===t?void 0:t.type)?u.formulaPropertyDescriptionList:u.formulaPropertyDescription},examples:(e,t)=>{var r,n;let o={type:"unknown"};if(t&&"formula2"in t&&null!==(r=t.formula2)&&void 0!==r&&null!==(r=r.result_type)&&void 0!==r&&r.type)o=t.formula2.result_type;else if(t&&"formula"in t&&null!==(n=t.formula)&&void 0!==n&&n.result_type){var a;o={type:null===(a=t.formula)||void 0===a?void 0:a.result_type}}if(!e)return[];const i=[{input:[p(e)],isCopyable:!0}];switch(o.type){case"array":switch(i.push({input:[p(e),[".length()"]],isCopyable:!0}),o.of.type){case"text":i.push({input:[p(e),['.join("\\n")']],isCopyable:!0});break;case"number":i.push({input:[p(e),[".sum()"]],isCopyable:!0});break;case"date":i.push({input:[p(e),['.map(dateBetween(now(), current, "days"))']],isCopyable:!0});break;case"person":i.push({input:[p(e),[".map(current.name())"]],isCopyable:!0});break;case"checkbox":i.push({input:[p(e),[".every(current == true)"]],isCopyable:!0});break;case"block":i.push({input:[c("Primary Tasks"),[".filter(current."],c("Status"),[' == "Done")']]})}break;case"number":i.push({input:[p(e),[" * 2 > 100"]],isCopyable:!0});break;case"text":i.push({input:[p(e),[".upper()"]],isCopyable:!0});break;case"date":i.push({input:[p(e),[" > now()"]],isCopyable:!0});break;case"person":i.push({input:[p(e),[".name()"]],isCopyable:!0});break;case"checkbox":i.push({input:[["not "],p(e)],isCopyable:!0});break;case"block":i.push({input:[c("Primary Task"),["."],c("Status")]})}return i}},created_time:{name:"created_time",type:{type:"date"},description:u.createdTimePropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),['.dateAdd(1, "weeks")']],isCopyable:!0},{input:[p(e),[' > dateSubtract(now(), 1, "years")']],isCopyable:!0}]:[{input:[d(i.vz.CreatedTime),['.dateAdd(1, "weeks")']]},{input:[d(i.vz.CreatedTime),[' > dateSubtract(now(), 1, "years")']]}]},last_edited_time:{name:"last_edited_time",type:{type:"date"},description:u.lastEditedTimePropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),['.dateAdd(1, "weeks")']],isCopyable:!0},{input:[p(e),[' > dateSubtract(now(), 1, "month")']],isCopyable:!0}]:[{input:[d(i.vz.LastEditedTime),['.dateAdd(1, "weeks")']]},{input:[d(i.vz.LastEditedTime),[' > dateSubtract(now(), 1, "month")']]}]},created_by:{name:"created_by",type:{type:"person"},description:u.createdByPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[".name()"]],isCopyable:!0},{input:[p(e),[".email()"]],isCopyable:!0}]:[{input:[d(i.vz.CreatedBy),[".name()"]]},{input:[d(i.vz.CreatedBy),[".email()"]]}]},last_edited_by:{name:"last_edited_by",type:{type:"person"},description:u.lastEditedByPropertyDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),[".name()"]],isCopyable:!0},{input:[p(e),[".email()"]],isCopyable:!0}]:[{input:[d(i.vz.LastEditedBy),[".name()"]]},{input:[d(i.vz.LastEditedBy),[".email()"]]}]},auto_increment_id:{name:"auto_increment_id",type:{type:"number"},description:u.autoincrementIdDescription,examples:e=>e?[{input:[p(e)],isCopyable:!0},{input:[p(e),['.split("-").first() /* Prefix */']],isCopyable:!0},{input:[p(e),['.split("-").last().toNumber() /* ID */']],isCopyable:!0}]:[{input:[c("ID Code")]},{input:[c("Task ID"),['.split("-").first() /* Prefix */']],output:'"TASK"'},{input:[c("Task ID"),['.split("-").last().toNumber() /* ID */']],output:"123"}]},button:null,location:null,last_visited_time:null,verification:null};function c(e){return(0,a.YCD)((0,a.kbv)({collection:void 0,name:e,property:""}))}function d(e){return(0,a.YCD)((0,a.kbv)({collection:void 0,name:(0,s.Ve)(e),property:e}))}function p(e){return(0,a.YCD)((0,a.kbv)(e))}},68602:(e,t,r)=>{r.d(t,{Gw:()=>s,YG:()=>i,mr:()=>o,o8:()=>a});var n=r(9291);const o=(0,n.defineMessages)({InvalidCharacter:{defaultMessage:'Invalid character "{errorCharacter}".',id:"formulas.formulaParseError.invalidCharacter"},UnclosedStringLiteral:{defaultMessage:"Unclosed string literal.",id:"formulas.formulaParseError.unclosedStringLiteral"},UnclosedComment:{defaultMessage:"Unclosed comment. Comments must be closed with a */ sequence.",id:"formulas.formulaParseError.unclosedComment"},TokenExpected:{defaultMessage:'Expected token "{expectedToken}".',id:"formulas.formulaParseError.tokenExpected"},StringLiteralContainsToken:{defaultMessage:"String literal contains token.",id:"formulas.formulaParseError.stringLiteralContainsToken"},ExpressionExpected:{defaultMessage:"Expression expected.",id:"formulas.formulaParseError.expressionExpected"},PropertyExpected:{defaultMessage:"Property token or function expected.",id:"formulas.formulaParseError.propertyExpected"},EndOfInputExpected:{defaultMessage:"End of input expected.",id:"formulas.formulaParseError.endOfInputExpected"},UnexpectedError:{defaultMessage:"Unexpected error.",id:"formulas.formulaParseError.unexpectedError"}}),a=(0,n.defineMessages)({ThisRowTypeNotFound:{defaultMessage:"Cannot find this row in context.",id:"formulas.formulaTypecheckerError.thisRowTypeNotFound"},ThisRowNotBlockWithCollection:{defaultMessage:"This row is not a block with a collection.",id:"formulas.formulaTypecheckerError.thisRowNotBlockWithCollection"},MissingPropertyOnThisRow:{defaultMessage:'Cannot find property "{propertyName}" on this row.',id:"formulas.formulaTypecheckerError.missingPropertyOnThisRow"},MissingContextVariable:{defaultMessage:"Cannot find context variable {valueId}.",id:"formulas.formulaTypecheckerError.missingContextVariable"},MissingBlock:{defaultMessage:"Could not find block {blockId}.",id:"formulas.formulaTypecheckerError.missingBlock"},CallingNotFunction:{defaultMessage:"Cannot call expression of type {expressionType}.",id:"formulas.formulaTypecheckerError.callingNotFunction"},FunctionCallTooFewArguments:{defaultMessage:"Function {functionName} expects {minNumParameters} arguments, but only {numArguments} were provided.",id:"formulas.formulaTypecheckerError.functionCallTooFewArguments"},FunctionCallUnexpectedArgument:{defaultMessage:"Function {functionName} received unexpected argument.",id:"formulas.formulaTypecheckerError.functionCallUnexpectedArgument"},FunctionCallArgumentWrongType:{defaultMessage:"Argument of type {argumentType} does not satisfy function {functionName}.",id:"formulas.formulaTypecheckerError.functionCallArgumentWrongType"},MemberPropertyMismatchCollection:{defaultMessage:"Token {propertyName} does not match block's collection.",id:"formulas.formulaTypecheckerError.memberPropertyMismatchCollection"},MemberPropertyMissing:{defaultMessage:'Cannot find property "{propertyName}" on collection.',id:"formulas.formulaTypecheckerError.memberPropertyMissing"},MemberPropertyTargetNotBlock:{defaultMessage:"Cannot access property on non-block.",id:"formulas.formulaTypecheckerError.memberPropertyTargetNotBlock"},MemberPropertyTypeInvalid:{defaultMessage:"Cannot access {propertyName} due to an unsupported property type.",id:"formulas.formulaTypecheckerError.memberInvalidPropertyType"},UndefinedIdentifier:{defaultMessage:"{identifier} is not defined.",id:"formulas.formulaTypecheckerError.undefinedIdentifier"},IdentifierExpected:{defaultMessage:"Expected identifier.",id:"formulas.formulaTypecheckerError.identifierExpected"},UnifiedFunctionCannotFindFunction:{defaultMessage:"Cannot find function {functionName}.",id:"formulas.formulaTypecheckerError.unifiedFunctionCannotFindFunction"},UnifiedFunctionNoArguments:{defaultMessage:"Function {functionName} does not expect any arguments.",id:"formulas.formulaTypecheckerError.unifiedFunctionNoArguments"},UnifiedFunctionTargetWrongType:{defaultMessage:"Cannot call {functionName} with target of type {targetType}.",id:"formulas.formulaTypecheckerError.unifiedFunctionTargetWrongType"},CannotRelativelyCompareTypes:{defaultMessage:"Cannot compare {lhsType} and {rhsType}.",id:"formulas.formulaTypecheckerError.cannotRelativelyCompareTypes"},CannotDoMathOnType:{defaultMessage:"Cannot do math on {lhsType} and {rhsType}.",id:"formulas.formulaTypecheckerError.cannotDoMathOnType"},UnaryMinusOnNonNumber:{defaultMessage:"Cannot apply minus to {type}.",id:"formulas.formulaTypecheckerError.unaryMinusOnNonNumber"},CircularDependency:{defaultMessage:"Circular dependency detected; this formula references itself.",id:"formulas.formulaTypecheckerError.circularDependency"},FunctionCallExpected:{defaultMessage:"Expected function {functionName}() to be called.",id:"formulas.formulaTypecheckerError.functionCallExpected"},RenamedIdentifier:{defaultMessage:'The function "{identifier}()" was renamed to "{renamedTo}()".',id:"formulas.formulaEvaluatorError.renamedIdentifier"},RemovedFunction:{defaultMessage:'The function "{functionName}()" was removed. You can use {alternative} instead.',id:"formulas.formulaEvaluatorError.removedFunction"}}),i=(0,n.defineMessages)({MissingThisRow:{defaultMessage:"Cannot find this row.",id:"formulas.formulaEvaluatorError.missingThisRow"},MissingSchemaPropertyOnThisRow:{defaultMessage:'Missing property "{propertyName}" on this row.',id:"formulas.formulaEvaluatorError.missingSchemaPropertyOnThisRow"},ThisRowBlockPropertyMismatchCollection:{defaultMessage:"This row property belongs to a different collection.",id:"formulas.formulaEvaluatorError.thisRowBlockPropertyMismatchCollection"},MissingContextVariable:{defaultMessage:'Missing context variable "{valueId}".',id:"formulas.formulaEvaluatorError.missingContextVariable"},IdentifierNotFound:{defaultMessage:'"{identifier}" is not defined.',id:"formulas.formulaEvaluatorError.identifierNotFound"},CannotRelativelyCompareTypes:{defaultMessage:'Cannot compare types "{lhsType}" and "{rhsType}".',id:"formulas.formulaEvaluatorError.cannotRelativelyCompareTypes"},CannotDoMathOnType:{defaultMessage:'Cannot do math on type "{valueType}".',id:"formulas.formulaEvaluatorError.cannotDoMathOnType"},CannotCallNonFunction:{defaultMessage:'Cannot call type "{calleeType}".',id:"formulas.formulaEvaluatorError.cannotCallNonFunction"},UnifiedFunctionPropertyNotFound:{defaultMessage:'Function "{functionName}" not found.',id:"formulas.formulaEvaluatorError.unifiedFunctionPropertyNotFound"},LibraryFunctionExecutionError:{defaultMessage:'Error occurred while calling "{functionName}".',id:"formulas.formulaEvaluatorError.libraryFunctionExecutionError"},FunctionCallTooFewArguments:{defaultMessage:'Called "{functionName}" with too few arguments.',id:"formulas.formulaEvaluatorError.functionCallTooFewArguments"},FunctionCallUnexpectedArgument:{defaultMessage:'Called "{functionName}" with unexpected argument.',id:"formulas.formulaEvaluatorError.functionCallUnexpectedArgument"},FunctionCallArgumentWrongType:{defaultMessage:'Called "{functionName}" with wrong argument type "{argumentType}".',id:"formulas.formulaEvaluatorError.functionCallArgumentWrongType"},AccessingPropertyOnNonBlock:{defaultMessage:"Target value is not a block.",id:"formulas.formulaEvaluatorError.accessingPropertyOnNonBlock"},AccessingUserPropertyOnNonPerson:{defaultMessage:"Target value is not a person.",id:"formulas.formulaEvaluatorError.accessingUserPropertyOnNonPerson"},MissingDataDependencyBlock:{defaultMessage:'Cannot find target block "{blockId}".',id:"formulas.formulaEvaluatorError.missingDataDependencyBlock"},MissingDataDependencyPerson:{defaultMessage:'Cannot find target person "{personId}".',id:"formulas.formulaEvaluatorError.missingDataDependencyPerson"},MemberPropertyMismatchCollection:{defaultMessage:"Cannot access property of a different collection.",id:"formulas.formulaEvaluatorError.memberPropertyMismatchCollection"},MissingPropertyOnSchemaForMemberProperty:{defaultMessage:"Cannot find property on collection.",id:"formulas.formulaEvaluatorError.missingPropertyOnSchemaForMemberProperty"},UnaryMinusOnNonNumber:{defaultMessage:"Cannot negate value of type {expressionType}.",id:"formulas.formulaEvaluatorError.unaryMinusOnNonNumber"},UnexpectedRecoveryNode:{defaultMessage:"Unexpected recovery node.",id:"formulas.formulaEvaluatorError.unexpectedRecoveryNode"},UnexpectedError:{defaultMessage:"Unexpected error.",id:"formulas.formulaEvaluatorError.unexpectedError"},DepthExceeded:{defaultMessage:"Maximum recursion depth exceeded.",id:"formulas.formulaEvaluatorError.depthExceeded"},CycleDetected:{defaultMessage:"Cycle detected in formula.",id:"formulas.formulaEvaluatorError.cycleDetected"},MaxEvaluationTimeExceeded:{defaultMessage:"Max Evaluation Time Exceeded.",id:"formulas.formulaEvaluatorError.maxEvaluationTimeExceeded"}}),s=(0,n.defineMessages)({true:{id:"formula2Input.builtin.true",defaultMessage:"The boolean value true."},false:{id:"formula2Input.builtin.false",defaultMessage:"The boolean value false."},and:{id:"formula2Input.builtin.and",defaultMessage:"The boolean operator and."},or:{id:"formula2Input.builtin.or",defaultMessage:"The boolean operator or."},not:{id:"formula2Input.builtin.not",defaultMessage:"Returns the opposite of a boolean value."},"+":{id:"formula2Input.builtin.plus",defaultMessage:"Adds two values together."},"-":{id:"formula2Input.builtin.subtract",defaultMessage:"Subtracts two numbers."},"*":{id:"formula2Input.builtin.mult",defaultMessage:"Multiplies two numbers."},"/":{id:"formula2Input.builtin.div",defaultMessage:"Divides two numbers."},"%":{id:"formula2Input.builtin.mod",defaultMessage:"The modulo operator, which returns the remainder of a division."},"^":{id:"formula2Input.builtin.pow",defaultMessage:"Raises a number to a power."},"==":{id:"formula2Input.builtin.eq",defaultMessage:"Checks if two values are equal."},"!=":{id:"formula2Input.builtin.neq",defaultMessage:"Checks if two values are not equal."},">":{id:"formula2Input.builtin.gt",defaultMessage:"Checks if the first value is greater than the second."},"<":{id:"formula2Input.builtin.lt",defaultMessage:"Checks if the first value is less than the second."},">=":{id:"formula2Input.builtin.ge",defaultMessage:"Checks if the first value is greater than or equal to the second."},"<=":{id:"formula2Input.builtin.le",defaultMessage:"Checks if the first value is less than or equal to the second."}})},93685:(e,t,r)=>{r.r(t),r.d(t,{addTypesToFormulaAST:()=>Le,addTypesToFormulaASTAsync:()=>Ve,analyzeFormula:()=>Qe,convertCollectionFormulaToFormula2:()=>Fe,convertFormulaCSTToAST:()=>Te,createFormulaDataRequestHandler:()=>A.yf,createFormulaDataRequestSyncHandler:()=>A.lc,evaluateFormulaASTAsync:()=>Ne,executeFormulaAsync:()=>Xe,executeFormulaSync:()=>Je,formulaResultAndOldFormulaValueEqual:()=>A.hV,getFormula2Dependencies:()=>et,getFormulaEditorInfoAtPosition:()=>He,getMessageForFormulaEvaluatorError:()=>Be.OY,getMessageForFormulaTypecheckError:()=>Be.ic,getNodeOfInterestForFormulaTypecheckError:()=>Be.sB,isUniqueFormulaEvaluatorError:()=>A.hp,parseFormulaInputToAst:()=>Ze,parseFormulaInputToCst:()=>Me,processFormulaInput:()=>T.dJ});var n=r(149),o=r(66897),a=r(90559),i=r(35011),s=r(80951),u=r(34299),l=r(60246),c=r(56373),d=r(7406),p=r(72126),m=r(29477),y=r(606),f=r(21202),g=r(6287),v=r(19889),_=r(70203),b=r(97880),h=r(84682),k=r(84116),x=r(21027),T=r(51849),M=(r(21703),r(57658),r(52262),r(24506),r(30120)),w=r(9291),Z=r(40506),C=r(53877),S=r(84795),I=r(64340),N=r(42875),R=r(76725),U=r(4615),P=r(63143),D=r(23790),O=r(69282),E=r.n(O),F=r(8848),B=r(47218),A=r(78106);function V(e,t,r){return{name:e,eval:function*(e,t){return{type:"number",value:r}},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:`${e}()`,output:r.toString()}]],syntax:[`${e}()`],description:t}}function L(e,t,r,n){const o=n.map((t=>({input:`${e}(${t})`,output:`${r(t)}`}))),a=n.map((t=>({input:`${t}.${e}()`,output:`${r(t)}`})));return{name:e,eval:function*(e,t){const[n]=e;return E()("number"===n.type),{type:"number",value:r(n.value)}},parameters:{expected:[{name:"input",type:{type:"number"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[o,a],syntax:[`${e}(number)`,`number.${e}()`],description:t}}function q(e,t,r,n){return{name:e,eval:function*(t,n){let[o,a]=t;if(k.zq.includes(e)){if("undefined"===o.type&&"undefined"===a.type)return{type:"number",value:0};"undefined"===o.type&&"number"===a.type?o={type:"number",value:0}:"undefined"===a.type&&"number"===o.type&&(a={type:"number",value:0})}return E()("number"===o.type&&"number"===a.type),{type:"number",value:(0,p.NM)(r(o.value,a.value),12)}},parameters:{expected:[{name:"lhs",type:{type:"number"}},{name:"rhs",type:{type:"number"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:`${e}(5, 10)`,output:`${r(5,10)}`},{input:`5 ${n} 10`,output:`${r(5,10)}`}],[{input:`5.${e}(10)`,output:`${r(5,10)}`},{input:`5 ${n} 10`,output:`${r(5,10)}`}]],syntax:[`${e}(number, number)`,`number.${e}(number)`],description:t}}const j=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"];function*$(e,t){let r=yield*(0,A.PX)(e,t);if("s"!==r.at(-1)&&(r+="s"),!j.includes(r.toLowerCase()))throw new B.Mu({type:B.sj.DateInvalidDurationUnit,invalidUnit:r});return r}function G(e){return function*(t,r){const[n,o,a]=t;E()("date"===n.type&&"number"===o.type&&"text"===a.type);const i=(0,C.NK)(n.value,r.userTimeZone),s=yield*$(a.value,r),u=e(i.start,o.value,s),l="hours"===s||"minutes"===s||"seconds"===s||"milliseconds"===s;return{type:"date",value:"date"!==n.value.type&&"daterange"!==n.value.type||l?(0,C.CQ)(u,r.userTimeZone):(0,C.hT)(u,r.userTimeZone)}}}function Y(e){return function*(t,r){const[n]=t;return E()("date"===n.type),{type:"number",value:e((0,C.NK)((0,Z.Ws)(n.value),r.userTimeZone,r.intl.locale).start)}}}function z(e,t,r){return(0,A.LD)(e.map(((e,n)=>function*(e,t){try{return yield*Ie(e,t)}catch{return{type:"undefined"}}}(t,{...r,values:[{kind:k.yp.Binding,id:k.GV,value:e},{kind:k.yp.Binding,id:k.WY,value:{type:"number",value:n}},...r.values]}))))}const W={b:["b"],i:["i"],s:["s"],u:["_"],c:["c"]},H=["b","i","s","_","c","h"];function K(e){const t=[];return e.forEach((e=>{var r;const n=null==e||null===(r=e[0])||void 0===r?void 0:r[0].toLowerCase().split(",");for(const o of n){const e=J(o);if(e)t.push(e);else{const e=W[o];e&&t.push(e)}}})),t}function J(e){const t=F.E_.find((t=>t===e));return t?[_.GKr.Highlight,t]:"green"===e?[_.GKr.Highlight,"teal"]:"green_background"===e?[_.GKr.Highlight,"teal_background"]:"grey"===e?[_.GKr.Highlight,"gray"]:"grey_background"===e?[_.GKr.Highlight,"gray_background"]:void 0}const X=["number","date","checkbox","undefined"];function Q(e){let t;return e.every((e=>"undefined"===e.type||(void 0===t?!!X.includes(e.type)&&(t=e.type,!0):t===e.type)))}function ee(e){const{left:t,right:r,context:n}=e;return"date"===t.type&&"date"===r.type?(0,A.SU)(t.value,r.value,n.userTimeZone):"number"===t.type&&"number"===r.type?t.value-r.value:"checkbox"===t.type&&"checkbox"===r.type?t.value===r.value?0:t.value?1:-1:"undefined"===t.type?"undefined"===r.type?0:-1:"undefined"===r.type?1:0}function te(e){const{left:t,leftAsString:r,right:n,rightAsString:o,context:a}=e;return"date"===t.type&&"date"===n.type?(0,A.SU)(t.value,n.value,a.userTimeZone):"number"===t.type&&"number"===n.type?t.value-n.value:"checkbox"===t.type&&"checkbox"===n.type?t.value===n.value?0:t.value?1:-1:"undefined"===t.type?"undefined"===n.type?0:-1:"undefined"===n.type?1:r.localeCompare(o)}var re=r(3067),ne=r(68602);function oe(e){if(!e)throw new Error("Assertion failed in formulaLibraryFunctions")}const ae=(0,w.defineMessages)({if:{id:"database.formula2.operator.if.description",defaultMessage:"Returns the first value if the condition is true; otherwise, returns the second value."},ifs:{id:"database.formula2.operator.ifs.description",defaultMessage:"Returns the value that corresponds to the first true condition. This can be used as an alternative to multiple nested if() statements."},e:{id:"database.formula2.constant.e.description",defaultMessage:"Returns the base of the natural logarithm."},pi:{id:"database.formula2.constant.pi.description",defaultMessage:"Returns the ratio of a circle's circumference to its diameter."},add:{id:"database.formula2.operator.add.description",defaultMessage:"Returns the sum of two numbers."},at:{id:"database.formula2.operator.at.description",defaultMessage:"Returns the value at the specified index in a list."},every:{id:"database.formula2.operator.every.description",defaultMessage:"Returns true if every item in the list satisfies the given condition, and false otherwise."},filter:{id:"database.formula2.operator.filter.description",defaultMessage:"Returns the values in the list for which the condition is true."},find:{id:"database.formula2.operator.find.description",defaultMessage:"Returns the first element in the list for which the condition returns true."},first:{id:"database.formula2.operator.first.description",defaultMessage:"Returns the first item in the list."},flat:{id:"database.formula2.operator.flat.description",defaultMessage:"Flattens a list of lists into a single list."},includes:{id:"database.formula2.operator.includes.description",defaultMessage:"Returns true if the list contains the specified value, and false otherwise."},last:{id:"database.formula2.operator.last.description",defaultMessage:"Returns the last item in the list."},map:{id:"database.formula2.operator.map.description",defaultMessage:"Returns the list populated with the results of calling the expression on every item in the input list."},reverse:{id:"database.formula2.operator.reverse.description",defaultMessage:"Returns the reversed list."},slice:{id:"database.formula2.operator.slice.description",defaultMessage:"Returns the items of the list from the provided start index (inclusive) to the end index (optional and exclusive)."},findIndex:{id:"database.formula2.operator.findIndex.description",defaultMessage:"Returns the index of the first item in the list for which the condition evaluates to true."},unique:{id:"database.formula2.operator.unique.description",defaultMessage:"Returns the list of unique values in the input list."},toPlainText:{id:"database.formula2.operator.toPlainText.description",defaultMessage:"Returns the plain text representation of the input text."},toText:{id:"database.formula2.operator.toText.description",defaultMessage:"Returns the text representation of the input value."},sort:{id:"database.formula2.operator.sort.description",defaultMessage:"Returns the list in sorted order. Optionally, a provided expression can be used to determine the sorting order."},some:{id:"database.formula2.operator.some.description",defaultMessage:"Returns true if any item in the list satisfies the given condition, and false otherwise."},let:{id:"database.formula2.operator.let.description",defaultMessage:"Assigns a value to a variable and evaluates the expression using that variable."},lets:{id:"database.formula2.operator.lets.description",defaultMessage:"Assigns values to multiple variables and evaluates the expression using those variables."},sum:{id:"database.formula2.operator.sum.description",defaultMessage:"Returns the sum of its arguments."},subtract:{id:"database.formula2.operator.subtract.description",defaultMessage:"Returns the difference of two numbers."},multiply:{id:"database.formula2.operator.multiply.description",defaultMessage:"Returns the product of two numbers."},divide:{id:"database.formula2.operator.divide.description",defaultMessage:"Returns the quotient of two numbers."},pow:{id:"database.formula2.operator.pow.description",defaultMessage:"Returns the result of a base number raised to an exponent power."},mod:{id:"database.formula2.operator.mod.description",defaultMessage:"Returns the first number modulo the second number."},equal:{id:"database.formula2.operator.equal.description",defaultMessage:"Returns true if both values are equal and false otherwise."},unequal:{id:"database.formula2.operator.unequal.description",defaultMessage:"Returns false if both values are equal and true otherwise."},concat:{id:"database.formula2.function.concat.description",defaultMessage:"Returns the concatenation of multiple lists."},join:{id:"database.formula2.function.join.description",defaultMessage:"Returns the values of the list with the joiner placed between each of the values."},split:{id:"database.formula2.function.split.description",defaultMessage:"Returns the list of values created by splitting a text by a separator."},substring:{id:"database.formula2.function.slice.description",defaultMessage:"Returns the substring of the text from the start index (inclusive) to the end index (optional and exclusive)."},length:{id:"database.formula2.function.length.description",defaultMessage:"Returns the length of the text or list value."},format:{id:"database.formula2.function.format.description",defaultMessage:"Returns the value formatted as text."},style:{id:"database.formula2.function.style.description",defaultMessage:'Adds styles and colors to the text. Valid formatting styles: "b" (bold), "u" (underline), "i" (italics), "c" (code), or "s" (strikethrough). Valid colors: "gray", "brown", "orange", "yellow", "green", "blue", "purple", "pink", and "red". Add "_background" to colors to set background colors.'},unstyle:{id:"database.formula2.function.unstyle.description",defaultMessage:"Removes formatting styles from the text. If no styles are specified, all styles are removed."},link:{id:"database.formula2.function.link.description",defaultMessage:"Creates a hyperlink from the label text and the URL."},toNumber:{id:"database.formula2.function.toNumber.description",defaultMessage:"Parses a number from text."},contains:{id:"database.formula2.function.contains.description",defaultMessage:"Returns true if the search string is present in the value."},replace:{id:"database.formula2.function.replace.description",defaultMessage:"Replaces the first match of the regular expression with the replacement value."},replaceAll:{id:"database.formula2.function.replaceAll.description",defaultMessage:"Replaces all matches of the regular expression with the replacement value."},test:{id:"database.formula2.function.test.description",defaultMessage:"Returns true if the value matches the regular expression and false otherwise."},match:{id:"database.formula2.function.match.description",defaultMessage:"Returns all matches of the regular expression as a list."},empty:{id:"database.formula2.function.empty.description",defaultMessage:"Returns true if the value is empty. 0, , false, and [] are considered empty."},abs:{id:"database.formula2.function.abs.description",defaultMessage:"Returns the absolute value of the number."},cbrt:{id:"database.formula2.function.cbrt.description",defaultMessage:"Returns the cube root of the number."},ceil:{id:"database.formula2.function.ceil.description",defaultMessage:"Returns the smallest integer greater than or equal to the number."},exp:{id:"database.formula2.function.exp.description",defaultMessage:"Returns e^x, where x is the argument, and e is Euler's number (2.718), the base of the natural logarithm."},floor:{id:"database.formula2.function.floor.description",defaultMessage:"Returns the largest integer less than or equal to the number."},ln:{id:"database.formula2.function.ln.description",defaultMessage:"Returns the natural logarithm of the number."},log10:{id:"database.formula2.function.log10.description",defaultMessage:"Returns the base 10 logarithm of the number."},log2:{id:"database.formula2.function.log2.description",defaultMessage:"Returns the base 2 logarithm of the number."},max:{id:"database.formula2.function.max.description",defaultMessage:"Returns the largest number of the arguments."},min:{id:"database.formula2.function.min.description",defaultMessage:"Returns the smallest number of the arguments."},mean:{id:"database.formula2.function.mean.description",defaultMessage:"Returns the arithmetic average of its arguments."},median:{id:"database.formula2.function.median.description",defaultMessage:"Returns the middle value of its arguments."},mode:{id:"database.formula2.function.mode.description",defaultMessage:"Returns the most commonly occurring value of its arguments."},round:{id:"database.formula2.function.round.description",defaultMessage:"Returns the value of a number rounded to the nearest integer."},sign:{id:"database.formula2.function.sign.description",defaultMessage:"Returns 1 if the number is positive, -1 if it is negative, and 0 if it is zero."},sqrt:{id:"database.formula2.function.sqrt.description",defaultMessage:"Returns the positive square root of the number."},start:{id:"database.formula2.function.start.description",defaultMessage:"Returns the start of the date range."},end:{id:"database.formula2.function.end.description",defaultMessage:"Returns the end of the date range."},now:{id:"database.formula2.function.now.description",defaultMessage:"Returns the current date and time."},timestamp:{id:"database.formula2.function.timestamp.description",defaultMessage:"Returns the current Unix timestamp, representing the number of milliseconds that have elapsed since January 1, 1970."},fromTimestamp:{id:"database.formula2.function.fromTimestamp.description",defaultMessage:"Returns the date from the given Unix timestamp. The timestamp represents the number of milliseconds that have elapsed since January 1, 1970. Note: the returned date will not retain the seconds & milliseconds."},dateAdd:{id:"database.formula2.function.dateAdd.description",defaultMessage:'Adds time to the date. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", or "minutes".'},dateSubtract:{id:"database.formula2.function.dateSubtract.description",defaultMessage:'Subtracts time from the date. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", or "minutes".'},dateBetween:{id:"database.formula2.function.dateBetween.description",defaultMessage:'Returns the difference between two dates. The unit argument can be one of: "years", "quarters", "months", "weeks", "days", "hours", or "minutes".'},formatDate:{id:"database.formula2.function.formatDate.description",defaultMessage:'Formats the date using a custom format string. The format string can contain the following text to represent parts of the date: "YYYY" for year, "MM" for month, "DD" for day, "HH" for hour, "mm" for minute.'},date:{id:"database.formula2.function.date.description",defaultMessage:"Returns the day of the month from the date (1-31)."},day:{id:"database.formula2.function.day.description",defaultMessage:"Returns the day of the week of the date, between 1 (Monday) and 7 (Sunday)."},month:{id:"database.formula2.function.month.description",defaultMessage:"Returns the month of the date (1-12)."},week:{id:"database.formula2.function.week.description",defaultMessage:"Returns the ISO week of the year of the date (1-53)."},year:{id:"database.formula2.function.year.description",defaultMessage:"Returns the year of the date."},hour:{id:"database.formula2.function.hour.description",defaultMessage:"Returns the hour of the date (0-23)."},minute:{id:"database.formula2.function.minute.description",defaultMessage:"Returns the minute of the date (0-59)."},parseDate:{id:"database.formula2.function.parseDate.description",defaultMessage:"Returns the date parsed according to the ISO 8601 standard."},dateRange:{id:"database.formula2.function.dateRange.description",defaultMessage:"Returns a date range constructed from the start and end dates."},dateStart:{id:"database.formula2.function.dateStart.description",defaultMessage:"Returns the start of the date range."},dateEnd:{id:"database.formula2.function.dateEnd.description",defaultMessage:"Returns the end of the date range."},id:{id:"database.formula2.function.id.description",defaultMessage:"Returns the id of the page. If no page is provided, returns the id of the page the formula is on."},name:{id:"database.formula2.function.name.description",defaultMessage:"Returns the name of a person."},email:{id:"database.formula2.function.email.description",defaultMessage:"Returns the email address of a person."},lower:{id:"database.formula2.function.lower.description",defaultMessage:"Converts the text to lowercase."},upper:{id:"database.formula2.function.upper.description",defaultMessage:"Converts the text to uppercase."},repeat:{id:"database.formula2.function.repeat.description",defaultMessage:"Repeats the text a given number of times."},_wait:{id:"database.formula2.function.wait.description",defaultMessage:"Wait a specified duration before returning a value."}}),ie={type:"undefined"},se={name:"expression",type:{type:"expression"},augmentScope:e=>{var t;const r="array"===(null===(t=e[0])||void 0===t?void 0:t.type)?e[0].of:{type:"unknown"};return{[k.GV]:r,[k.WY]:{type:"number"}}}},ue={expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},se]},le={expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{...se,optional:!0}]},ce={if:{name:"if",eval:function*(e,t){const[r,n,o]=e;return oe("checkbox"===r.type),r.value?yield*Ie(n,t):yield*Ie(o,t)},parameters:{expected:[{name:"condition",type:{type:"checkbox"}},{name:"ifTrue",type:{type:"expression"}},{name:"ifFalse",type:{type:"expression"}}]},returnType:e=>{let[t,r,n]=e;return void 0!==r&&void 0!==n&&(0,D.Jy)(r,n)?r:{type:"unknown"}},iconType:{type:"checkbox"},examples:[[{input:"if(true, 1, 2)",output:"1"},{input:"if(false, 1, 2)",output:"2"},{input:[(0,re.h0)("Checked"),[' == true ? "Complete" : "Incomplete"']]}],[{input:"true.if(1, 2)",output:"1"},{input:"false.if(1, 2)",output:"2"}]],syntax:["if(condition, ifTrue, ifFalse)","condition.if(ifTrue, ifFalse)"],description:ae.if},ifs:{name:"ifs",parameters:{expected:[{name:"condition",type:{type:"checkbox"}},{name:"ifTrue",type:{type:"expression"}}],varargs:[{name:"rest",type:{type:"expression"}}]},returnType:e=>{if(e.length<2)return{type:"unknown"};const t=e[1];let r=2;for(;r<e.length-1;r+=2)if(!(0,D.Jy)(e[r+1],t))return{type:"unknown"};if(r===e.length-1){const n=e[r];if(!(0,D.Jy)(n,t))return{type:"unknown"}}return t},eval:function*(e,t){const r=e[0];if(oe("checkbox"===r.type),r.value)return yield*Ie(e[1],t);for(let n=2;n<e.length-1;n+=2){const r=e[n];if((0,A.vh)(yield*Ie(r,t)))return yield*Ie(e[n+1],t)}return e.length%2==1?yield*Ie(e[e.length-1],t):ie},iconType:{type:"checkbox"},examples:[[{input:"ifs(true, 1, true, 2, 3)",output:"1"},{input:"ifs(false, 1, false, 2, 3)",output:"3"}],[{input:"true.ifs(1, true, 2, 3)",output:"1"},{input:"false.ifs(1, false, 2, 3)",output:"3"}]],syntax:["ifs(condition, ifTrue, condition2, ifTrue2, ..., else)","condition.ifs(ifTrue, condition2, ifTrue2, ..., else)"],description:ae.ifs},and:{name:"and",eval:function*(e,t){return{type:"checkbox",value:e.every((e=>(0,A.vh)(e)))}},parameters:{varargs:[{name:"value",type:[{type:"unknown"}]}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"and(true, true, true)",output:"true"},{input:"and(3 > 2, 2 < 3)",output:"false"}],[{input:"true.and(true, true)",output:"true"},{input:"(3 > 2).and(2 < 3)",output:"false"}]],syntax:["and(boolean, boolean, ...)","boolean.and(boolean, ...)"],description:ne.Gw.and},or:{name:"or",eval:function*(e,t){return{type:"checkbox",value:e.some((e=>(0,A.vh)(e)))}},parameters:{varargs:[{name:"value",type:[{type:"unknown"}]}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"or(true, false, false)",output:"true"},{input:"or(3 > 2, 2 < 3)",output:"true"}],[{input:"true.or(false, false)",output:"true"},{input:"(3 > 2).or(2 < 3)",output:"true"}]],syntax:["or(boolean, boolean, ...)","boolean.or(boolean, ...)"],description:ne.Gw.or},not:{name:"not",eval:function*(e,t){const[r]=e;return{type:"checkbox",value:!(0,A.vh)(r)}},parameters:{varargs:[{name:"value",type:[{type:"unknown"}]}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"not(true)",output:"false"},{input:"not(2 > 3)",output:"true"}],[{input:"true.not()",output:"false"},{input:"(2 > 3).not()",output:"true"}]],syntax:["not(boolean)","boolean.not()"],description:ne.Gw.not},empty:{name:"empty",eval:function*(e,t){const[r]=e;return{type:"checkbox",value:"array"===r.type?0===r.values.length:!(0,A.vh)(r)}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"empty(0)",output:"true"},{input:"empty([])",output:"true"}],[{input:"0.empty()",output:"true"},{input:"[].empty()",output:"true"}]],syntax:["empty(value)","value.empty()"],description:ae.empty},length:{name:"length",eval:function*(e,t){const[r]=e;return"array"===r.type?{type:"number",value:r.values.length}:(oe("text"===r.type),{type:"number",value:r.value.reduce(((e,t)=>e+(0,_.J1x)(t)),0)})},parameters:{expected:[{name:"input",type:[{type:"text"},{type:"array",of:{type:"unknown"}}]}]},returnType:{type:"number"},iconType:{type:"text"},examples:[[{input:'length("hello")',output:"5"},{input:"length([1, 2, 3])",output:"3"}],[{input:'"hello".length()',output:"5"},{input:"[1, 2, 3].length()",output:"3"}]],syntax:["length(value)","value.length()"],description:ae.length},substring:{name:"substring",eval:function*(e,t){const[r,n,o]=e;oe("text"===r.type&&"number"===n.type);return{type:"text",value:[[(yield*(0,A.PX)(r.value,t)).slice(n.value,"number"===(null==o?void 0:o.type)?o.value:void 0)]]}},parameters:{expected:[{name:"target",type:{type:"text"}},{name:"startIndex",type:{type:"number"}},{name:"endIndex",optional:!0,type:{type:"number"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'substring("Notion", 0, 3)',output:'"Not"'},{input:'substring("Notion", 3)',output:'"ion"'}],[{input:'"Notion".substring(0, 3)',output:'"Not"'},{input:'"Notion".substring(3)',output:'"ion"'}]],syntax:["substring(text, startIndex, endIndex?)","text.substring(startIndex, endIndex?)"],description:ae.substring},contains:{name:"contains",eval:function*(e,t){const[r,n]=e;oe("text"===r.type&&"text"===n.type);const o=yield*(0,A.PX)(r.value,t),a=yield*(0,A.PX)(n.value,t);return{type:"checkbox",value:o.includes(a)}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"search",type:{type:"text"}}]},returnType:{type:"checkbox"},iconType:{type:"text"},examples:[[{input:'contains("Notion", "ot")',output:"true"}],[{input:'"Notion".contains("ot")',output:"true"}]],syntax:["contains(value, search)","value.contains(search)"],description:ae.contains},test:{name:"test",eval:function*(e,t){const[r,n]=e;return oe("text"===r.type&&"text"===n.type),{type:"checkbox",value:new RegExp(yield*(0,A.PX)(n.value,t)).test(yield*(0,A.PX)(r.value,t))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:'test("Notion", "Not")',output:"true"},{input:'test("Notion", "\\d")',output:"false"}],[{input:'"Notion.test("Not")',output:"true"},{input:'"Notion".test("\\d")',output:"false"}]],syntax:["test(text, pattern)","text.test(pattern)"],description:ae.test},match:{name:"match",eval:function*(e,t){const[r,n]=e;oe("text"===r.type&&"text"===n.type);const o=yield*(0,A.PX)(r.value,t),a=yield*(0,A.PX)(n.value,t),i=o.match(new RegExp(a,"g"));return i?{type:"array",values:i.map((e=>({type:"text",value:(0,_.TPx)(e)})))}:{type:"array",values:[]}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}}]},returnType:{type:"array",of:{type:"text"}},iconType:{type:"text"},examples:[[{input:'match("Notion Notion", "Not")',output:'["Not", "Not"]'},{input:'match("Notion 123 Notion 456", "\\d+")',output:'["123", "456"]'}],[{input:'"Notion Notion".match("Not")',output:'["Not", "Not"]'},{input:'"Notion 123 Notion 456".match("\\d+")',output:'["123", "456"]'}]],syntax:["match(text, pattern)","text.match(pattern)"],description:ae.match},replace:{name:"replace",eval:function*(e,t){const[r,n,o]=e;oe("text"===r.type&&"text"===n.type);const a=yield*(0,A.PX)(r.value,t),i=yield*(0,A.PX)(n.value,t);return{type:"text",value:(0,_.TPx)(a.replace(new RegExp(i),"text"===(null==o?void 0:o.type)?yield*(0,A.PX)(o.value,t):""))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}},{name:"replacement",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'replace("Notion Notion", "N", "M")',output:'"Motion Notion"'}],[{input:'"Notion Notion".replace("N", "M")',output:'"Motion Notion"'}]],syntax:["replace(text, pattern, replacement?)","text.replace(pattern, replacement?)"],description:ae.replace},replaceAll:{name:"replaceAll",eval:function*(e,t){const[r,n,o]=e;oe("text"===r.type&&"text"===n.type);const a=yield*(0,A.PX)(r.value,t);return{type:"text",value:(0,_.TPx)(a.replace(new RegExp(yield*(0,A.PX)(n.value,t),"g"),"text"===(null==o?void 0:o.type)?yield*(0,A.PX)(o.value,t):""))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"pattern",type:{type:"text"}},{name:"replacement",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'replaceAll("Notion Notion", "N", "M")',output:'"Motion Motion"'},{input:'replaceAll("Notion 123", "\\d", "")',output:'"Notion"'}],[{input:'"Notion Notion".replaceAll("N", "M")',output:'"Motion Motion"'},{input:'"Notion 123".replaceAll("\\d", "")',output:'"Notion"'}]],syntax:["replaceAll(text, pattern, replacement?)","text.replaceAll(pattern, replacement?)"],description:ae.replaceAll},lower:{name:"lower",eval:function*(e){const[t]=e;oe("text"===t.type);return{type:"text",value:t.value.map((e=>{const t=(0,_.hDy)(e),r=(0,_.WiV)(e);return(0,_.V3y)(r.toLowerCase(),t)}))}},parameters:{expected:[{name:"text",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'lower("NOTION")',output:'"notion"'}],[{input:'"NOTION".lower()',output:'"notion"'}]],syntax:["lower(text)","text.lower()"],description:ae.lower},upper:{name:"upper",eval:function*(e){const[t]=e;oe("text"===t.type);return{type:"text",value:t.value.map((e=>{const t=(0,_.hDy)(e),r=(0,_.WiV)(e);return(0,_.V3y)(r.toUpperCase(),t)}))}},parameters:{expected:[{name:"text",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'upper("notion")',output:'"NOTION"'}],[{input:'"notion".upper()',output:'"NOTION"'}]],syntax:["upper(text)","text.upper()"],description:ae.upper},repeat:{name:"repeat",eval:function*(e){const[t,r]=e;oe("text"===t.type),oe("number"===r.type);const n=[],o=Math.min(r.value,1e4);for(let a=0;a<o;a++)n.push(...t.value);return{type:"text",value:n}},parameters:{expected:[{name:"text",type:{type:"text"}},{name:"count",type:{type:"number"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'repeat("0", 4)',output:'"0000"'},{input:'repeat("~=", 10).style("blue")',output:[['"'],["~=~=~=~=~=~=~=~=~=~=",[["h","blue"]]],['"']]}],[{input:'"0".repeat(4)',output:'"0000"'},{input:'"~=".repeat(10).style("blue")',output:[['"'],["~=~=~=~=~=~=~=~=~=~=",[["h","blue"]]],['"']]}]],syntax:["repeat(text, count)","text.repeat(count)"],description:ae.repeat},link:{name:"link",eval:function*(e){const[t,r]=e;return oe("text"===t.type),oe("text"===r.type),{type:"text",value:(0,_.C9B)(t.value,(0,_.Jcv)(r.value))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"url",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'link("Notion", "https://notion.so")',output:[['"'],["Notion",[(0,_.edl)("https://notion.so")]],['"']]}],[{input:'"Notion".link("https://notion.so")',output:[['"'],["Notion",[(0,_.edl)("https://notion.so")]],['"']]}]],syntax:["link(text, url)","text.link(url)"],description:ae.link},style:{name:"style",eval:function*(e){const[t,...r]=e;oe("text"===t.type),r.forEach((e=>oe("text"===e.type)));const n=r.length>0?K(r.map((e=>(oe("text"===e.type),e.value))).filter(b.$K)):[];return{type:"text",value:(o=t.value,a=n,o.map((e=>{const t=(0,_.hDy)(e);return(0,_.V3y)((0,_.WiV)(e),[...t,...a])})))};var o,a},parameters:{expected:[{name:"input",type:{type:"text"}}],varargs:[{name:"styles",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:'style("Notion", "b", "u")',output:[['"'],["Notion",[["b"],["_"]]],['"']]},{input:'style("Notion", "blue", "gray_background")',output:[['"'],["Notion",[["h","blue"],["h","blue_background"]]],['"']]}],[{input:'"Notion".style("b", "u")',output:[['"'],["Notion",[["b"],["_"]]],['"']]},{input:'"Notion".style("blue", "blue_background")',output:[['"'],["Notion",[["h","blue"],["h","blue_background"]]],['"']]}]],syntax:["style(value, styles)","value.style(styles)"],description:ae.style},unstyle:{name:"unstyle",eval:function*(e){const[t,...r]=e;oe("text"===t.type);const n=r.length>0?K(r.map((e=>(oe("text"===e.type),e.value))).filter(b.$K)):void 0;return{type:"text",value:(o=t.value,a=n,o.map((e=>(0,_.V3y)((0,_.WiV)(e),(0,_.hDy)(e).filter((e=>{const t=(0,_.J7s)(e);return!H.includes(t)||void 0!==a&&!a.some((r=>t===r[0]&&(void 0===r[1]||e[1]===r[1])))}))))))};var o,a},parameters:{expected:[{name:"input",type:{type:"text"}}],varargs:[{name:"styles",optional:!0,type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:[['unstyle("'],["Text",[["b"],["c"]]],['")']],output:[['"Text"']]},{input:[['unstyle("'],["Text",[["h","blue"],["b"]]],['", "blue")']],output:[['"'],["Text",[["b"]]],['"']]}],[{input:[['"'],["Text",[["b"],["c"]]],['".unstyle()']],output:[['"Text"']]},{input:[['"'],["Text",[["h","blue"],["b"]]],['".unstyle("blue")']],output:[['"'],["Text",[["b"]]],['"']]}]],syntax:["unstyle(value, styles?)","value.unstyle(styles?)"],description:ae.unstyle},format:{name:"format",eval:function*(e,t){const[r]=e,n=(0,A.j4)(r);return{type:"text",value:(0,_.TPx)(yield*(0,A.PX)(n,t))}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"text"},iconType:{type:"text"},examples:[[{input:"format(1234)",output:'"1234"'},{input:"format(now())",output:[['"'],[(0,I.P)(M.ou.now(),"MMMM D, Y HH:mm")],['"']]}],[{input:"1234.format()",output:'"1234"'},{input:"now().format()",output:[['"'],[(0,I.P)(M.ou.now(),"MMMM D, Y HH:mm")],['"']]}]],syntax:["format(value)","value.format()"],description:ae.format},add:q("add",ae.add,((e,t)=>e+t),"+"),subtract:q("subtract",ae.subtract,((e,t)=>e-t),"-"),multiply:q("multiply",ae.multiply,((e,t)=>e*t),"*"),mod:q("mod",ae.mod,((e,t)=>e%t),"%"),pow:q("pow",ae.pow,((e,t)=>e**t),"^"),divide:{name:"divide",description:ae.divide,eval:function*(e,t){const[r,n]=e;return oe("number"===r.type&&"number"===n.type),0===n.value?ie:{type:"number",value:r.value/n.value}},returnType:{type:"number"},iconType:{type:"number"},syntax:["divide(number, number)","number.divide(number)"],parameters:{expected:[{name:"lhs",type:{type:"number"}},{name:"rhs",type:{type:"number"}}]},examples:[[{input:"divide(5, 10)",output:"0.5"},{input:"5 / 10",output:"0.5"}],[{input:"5.divide(10)",output:"0.5"},{input:"5 / 10",output:"0.5"}]]},min:{name:"min",eval:function*(e,t){const r=e.flatMap((e=>"array"===e.type?e.values.map((e=>{if("number"===e.type)return e.value})).filter(b.$K):"number"===e.type?[e.value]:void 0)).filter(b.$K);return 0===r.length?ie:{type:"number",value:Math.min(...r)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"min(1, 2, 3)",output:"1"},{input:"min([1, 2, 3])",output:"1"}],[{input:"[1, 2, 3].min()",output:"1"}]],syntax:["min(list)","list.min()"],description:ae.min},max:{name:"max",eval:function*(e,t){const r=e.flatMap((e=>"array"===e.type?e.values.map((e=>{if("number"===e.type)return e.value})).filter(b.$K):"number"===e.type?[e.value]:void 0)).filter(b.$K);return 0===r.length?ie:{type:"number",value:Math.max(...r)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"max(1, 2, 3)",output:"3"},{input:"max([1, 2, 3])",output:"3"}],[{input:"[1, 2, 3].max()",output:"3"}]],syntax:["max(list)","list.max()"],description:ae.max},sum:{name:"sum",eval:function*(e,t){return{type:"number",value:e.reduce(((e,t)=>e+("number"===t.type?t.value:"array"===t.type?t.values.reduce(((e,t)=>e+("number"===t.type?t.value:0)),0):0)),0)}},parameters:{varargs:[{name:"value",type:[{type:"number"},{type:"array",of:{type:"number"}}]}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:"sum(1, 2, 3)",output:"6"},{input:"sum([1, 2, 3], 4, 5)",output:"15"}],[{input:"[1, 2, 3].sum()",output:"6"},{input:"[1, 2, 3].sum(4, 5)",output:"15"}]],syntax:["sum(list)","list.sum()"],description:ae.sum},abs:L("abs",ae.abs,Math.abs,[10,-10]),round:L("round",ae.round,Math.round,[.4,-.6]),ceil:L("ceil",ae.ceil,Math.ceil,[.4,-.6]),floor:L("floor",ae.floor,Math.floor,[.4,-.6]),sqrt:L("sqrt",ae.sqrt,Math.sqrt,[4,7]),cbrt:L("cbrt",ae.cbrt,Math.cbrt,[9,64]),exp:L("exp",ae.exp,Math.exp,[1,-1]),ln:L("ln",ae.ln,Math.log,[Math.E,10]),log10:L("log10",ae.log10,Math.log10,[10,1e5]),log2:L("log2",ae.log2,Math.log2,[4,1024]),sign:L("sign",ae.sign,Math.sign,[-10,10]),pi:V("pi",ae.pi,Math.PI),e:V("e",ae.e,Math.E),toNumber:{name:"toNumber",eval:function*(e,t){const[r]=e;switch(r.type){case"number":return r;case"checkbox":return{type:"number",value:r.value?1:0};case"text":{const e=yield*(0,A.PX)(r.value,t),n=parseFloat(e);return(0,P.hj)(n)?{type:"number",value:parseFloat(e)}:ie}case"date":return{type:"number",value:(0,C.NK)(r.value,t.userTimeZone).start.valueOf()};default:return ie}},parameters:{expected:[{name:"input",type:{type:"unknown"}}]},returnType:{type:"number"},iconType:{type:"number"},examples:[[{input:'toNumber("2")',output:"2"},{input:"toNumber(now())",output:(0,C.uO)((0,C.R_)((0,N.r)()),(0,N.r)()).toString()},{input:"toNumber(true)",output:"1"}],[{input:'"2".toNumber()',output:"2"},{input:"now().toNumber()",output:(0,C.uO)((0,C.R_)((0,N.r)()),(0,N.r)()).toString()},{input:"true.toNumber()",output:"1"}]],syntax:["toNumber(value)","value.toNumber()"],description:ae.toNumber},now:{name:"now",eval:function*(e,t){return{type:"date",value:(0,C.R_)(t.userTimeZone)}},parameters:{},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:"now()",output:[(0,_.YCD)((0,_.pZr)((0,C.R_)((0,N.r)())))]}]],syntax:["now()"],description:ae.now},minute:{name:"minute",eval:Y((e=>e.minute)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'minute(parseDate("2023-07-10T17:35Z"))',output:"35"}],[{input:'parseDate("2023-07-10T17:35Z").minute()',output:"35"}]],syntax:["minute(date)","date.minute()"],description:ae.minute},hour:{name:"hour",eval:Y((e=>e.hour)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'hour(parseDate("2023-07-10T17:35Z"))',output:"17"}],[{input:'parseDate("2023-07-10T17:35Z").hour()',output:"17"}]],syntax:["hour(date)","date.hour()"],description:ae.hour},day:{name:"day",eval:Y((e=>e.weekday)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'day(parseDate("2023-07-10T17:35Z"))',output:"1"}],[{input:'parseDate("2023-07-10T17:35Z").day()',output:"1"}]],syntax:["day(date)","date.day()"],description:ae.day},date:{name:"date",eval:Y((e=>e.day)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'date(parseDate("2023-07-10T17:35Z"))',output:"10"}],[{input:'parseDate("2023-07-10T17:35Z").date()',output:"10"}]],syntax:["date(date)","date.date()"],description:ae.date},week:{name:"week",eval:Y((e=>e.weekNumber)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'week(parseDate("2023-01-02"))',output:"1"}],[{input:'parseDate("2023-01-02").week()',output:"1"}]],syntax:["week(date)","date.week()"],description:ae.week},month:{name:"month",eval:Y((e=>e.month)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'month(parseDate("2023-07-10T17:35Z"))',output:"7"}],[{input:'parseDate("2023-07-10T17:35Z").month()',output:"7"}]],syntax:["month(date)","date.month()"],description:ae.month},year:{name:"year",eval:Y((e=>e.year)),parameters:{expected:[{name:"date",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:"year(now())",output:M.ou.now().year.toString()}],[{input:"now().year()",output:M.ou.now().year.toString()}]],syntax:["year(date)","date.year()"],description:ae.year},dateAdd:{name:"dateAdd",eval:G(((e,t,r)=>e.plus({[r]:t}).valueOf())),parameters:{expected:[{name:"input",type:{type:"date"}},{name:"num",type:{type:"number"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'dateAdd(now(), 1, "days")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().plus({days:1}))))]},{input:'dateAdd(now(), 2, "months")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().plus({months:2}))))]},{input:'dateAdd(now(), 3, "years")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().plus({years:3}))))]}],[{input:'now().dateAdd(1, "days")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().plus({days:1}))))]},{input:'now().dateAdd(2, "months")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().minus({months:2}))))]},{input:'now().dateAdd(3, "years")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().plus({years:3}))))]}]],syntax:["dateAdd(date, num, unit)","date.dateAdd(num, unit)"],description:ae.dateAdd},dateSubtract:{name:"dateSubtract",eval:G(((e,t,r)=>e.minus({[r]:t}).valueOf())),parameters:{expected:[{name:"input",type:{type:"date"}},{name:"num",type:{type:"number"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'dateSubtract(now(), 1, "days")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().minus({days:1}))))]},{input:'dateSubtract(now(), 2, "months")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().minus({months:2}))))]},{input:'dateSubtract(now(), 3, "years")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().minus({years:3}))))]}],[{input:'now().dateSubtract(1, "days")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().minus({days:1}))))]},{input:'now().dateSubtract(2, "months")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().minus({months:2}))))]},{input:'now().dateSubtract(3, "years")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.now().minus({years:3}))))]}]],syntax:["dateSubtract(date, num, unit)","date.dateSubtract(num, unit)"],description:ae.dateSubtract},dateBetween:{name:"dateBetween",eval:function*(e,t){const[r,n,o]=e;oe("date"===r.type&&"date"===n.type&&"text"===o.type);const a=(0,C.NK)(r.value,t.userTimeZone).start,i=(0,C.NK)(n.value,t.userTimeZone).start,s=yield*$(o.value,t);return{type:"number",value:Math.trunc(a.diff(i,s).get(s))}},parameters:{expected:[{name:"left",type:{type:"date"}},{name:"right",type:{type:"date"}},{name:"unit",type:{type:"text"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:'dateBetween(now(), parseDate("2022-09-07"), "days")',output:Math.trunc(M.ou.now().diff(M.ou.fromISO("2022-09-07"),"days").days).toString()},{input:'dateBetween(parseDate("2030-01-01"), now(), "years")',output:Math.trunc(M.ou.fromISO("2030-01-01").diffNow("years").years).toString()}],[{input:'now().dateBetween(parseDate("2022-09-07"), "days")',output:Math.trunc(M.ou.now().diff(M.ou.fromISO("2022-09-07"),"days").days).toString()},{input:'parseDate("2030-01-01").dateBetween(now(), "years")',output:Math.trunc(M.ou.fromISO("2030-01-01").diffNow("years").years).toString()}]],syntax:["dateBetween(date, date, unit)","date.dateBetween(date, unit)"],description:ae.dateBetween},dateRange:{name:"dateRange",eval:function*(e,t){const[r,n]=e;return oe("date"===r.type&&"date"===n.type),"start_time"in r.value||"start_time"in n.value?{type:"date",value:{type:"datetimerange",start_date:r.value.start_date,start_time:"start_time"in r.value?r.value.start_time:"00:00",end_date:"end_date"in n.value?n.value.end_date:n.value.start_date,end_time:"end_time"in n.value?n.value.end_time:"start_time"in n.value?n.value.start_time:"23:59",time_zone:"time_zone"in r.value&&r.value.time_zone||"time_zone"in n.value&&n.value.time_zone||t.userTimeZone}}:{type:"date",value:{type:"daterange",start_date:r.value.start_date,end_date:"end_date"in n.value?n.value.end_date:n.value.start_date}}},parameters:{expected:[{name:"start",type:{type:"date"}},{name:"end",type:{type:"date"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:[["dateRange("],(0,re.h0)("Start Date"),[", "],(0,re.h0)("End Date"),[")"]],output:[(0,_.YCD)((0,_.pZr)({type:"daterange",start_date:"2022-09-07",end_date:"2023-09-07"}))]}],[{input:[(0,re.h0)("Start Date"),[".dateRange("],(0,re.h0)("End Date"),[")"]],output:[(0,_.YCD)((0,_.pZr)({type:"daterange",start_date:"2022-09-07",end_date:"2023-09-07"}))]}]],syntax:["dateRange(start, end)"],description:ae.dateRange},dateStart:{name:"dateStart",eval:function*(e,t){const[r]=e;return oe("date"===r.type),{type:"date",value:(0,Z.Ws)(r.value)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:[["dateStart("],(0,re.h0)("Date Range"),[")"]],output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.fromISO("2022-09-07"))))]},{input:[["dateBetween(dateStart("],(0,re.h0)("Date Range"),["), dateEnd("],(0,re.h0)("Date Range"),['), "days")']],output:[["-365"]]}],[{input:[(0,re.h0)("Date Range"),[".dateStart()"]],output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.fromISO("2022-09-07"))))]},{input:[(0,re.h0)("Date Range"),[".dateStart().dateBetween("],(0,re.h0)("Date Range"),['.dateEnd(), "days")']],output:[["-365"]]}]],syntax:["dateStart(dateRange)","dateRange.dateStart()"],description:ae.dateStart},dateEnd:{name:"dateEnd",eval:function*(e,t){const[r]=e;return oe("date"===r.type),{type:"date",value:(0,Z.S$)(r.value)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:[["dateEnd("],(0,re.h0)("Date range"),[")"]],output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.fromISO("2023-09-07"))))]},{input:[["dateBetween(dateEnd("],(0,re.h0)("Date Range"),["), dateStart("],(0,re.h0)("Date Range"),['), "days")']],output:"365"}],[{input:[(0,re.h0)("Date Range"),[".dateEnd()"]],output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.fromISO("2023-09-07"))))]},{input:[(0,re.h0)("Date Range"),[".dateEnd().dateBetween("],(0,re.h0)("Date Range"),['.dateStart(), "days")']],output:"365"}]],syntax:["dateEnd(dateRange)","dataRange.dateEnd()"],description:ae.dateEnd},timestamp:{name:"timestamp",eval:function*(e,t){const[r]=e;return oe("date"===r.type),{type:"number",value:(0,C.uO)(r.value,t.userTimeZone)}},parameters:{expected:[{name:"input",type:{type:"date"}}]},returnType:{type:"number"},iconType:{type:"date"},examples:[[{input:"timestamp(now())",output:(0,C.uO)((0,C.R_)((0,N.r)()),(0,N.r)()).toString()}],[{input:"now().timestamp()",output:(0,C.uO)((0,C.R_)((0,N.r)()),(0,N.r)()).toString()}]],syntax:["timestamp(date)","date.timestamp()"],description:ae.timestamp},fromTimestamp:{name:"fromTimestamp",eval:function*(e,t){const[r]=e;return oe("number"===r.type),{type:"date",value:(0,C.CQ)(r.value,t.userTimeZone)}},parameters:{expected:[{name:"input",type:{type:"number"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:"fromTimestamp(1689024900000)",output:[(0,_.YCD)((0,_.pZr)((0,C.CQ)(16890249e5,(0,N.r)())))]}],[{input:"1689024900000.fromTimestamp()",output:[(0,_.YCD)((0,_.pZr)((0,C.CQ)(16890249e5,(0,N.r)())))]}]],syntax:["fromTimestamp(timestamp)","timestamp.fromTimestamp()"],description:ae.fromTimestamp},formatDate:{name:"formatDate",eval:function*(e,t){const[r,n]=e;oe("date"===r.type&&"text"===n.type);const o=(0,C.NK)((0,Z.Ws)(r.value),t.userTimeZone,t.intl.locale).start;return{type:"text",value:(0,_.TPx)((0,I.P)(o,yield*(0,A.PX)(n.value,t)))}},parameters:{expected:[{name:"date",type:{type:"date"}},{name:"format",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"date"},examples:[[{input:'formatDate(now(), "MMMM D, Y")',output:[['"'],[(0,I.P)(M.ou.now(),"MMMM D, Y")],['"']]},{input:'formatDate(now(), "MM/DD/YYYY")',output:[['"'],[(0,I.P)(M.ou.now(),"MM/DD/YYYY")],['"']]},{input:'formatDate(now(), "HH:mm A")',output:[['"'],[(0,I.P)(M.ou.now(),"HH:mm A")],['"']]}],[{input:'now().formatDate("MMMM D, Y")',output:[['"'],[(0,I.P)(M.ou.now(),"MMMM D, Y")],['"']]},{input:'now().formatDate("MM/DD/YYYY")',output:[['"'],[(0,I.P)(M.ou.now(),"MM/DD/YYYY")],['"']]},{input:'now().formatDate("HH:mm A")',output:[['"'],[(0,I.P)(M.ou.now(),"HH:mm")],['"']]}]],syntax:["formatDate(date, format)","date.formatDate(format)"],description:ae.formatDate},parseDate:{name:"parseDate",eval:function*(e,t){const[r]=e;oe("text"===r.type);const n=yield*(0,A.PX)(r.value,t),o=(0,S.fuzzyValidDateTimeFromISO)(n);return o?{type:"date",value:(0,S.luxonDateToNotionDateOrDateTime)(o)}:ie},parameters:{expected:[{name:"dateString",type:{type:"text"}}]},returnType:{type:"date"},iconType:{type:"date"},examples:[[{input:'parseDate("2022-01-01")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.fromISO("2022-01-01"))))]},{input:'parseDate("2022-01-01T00:00Z")',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.fromISO("2022-01-01T00:00Z"))))]}],[{input:'"2022-01-01".parseDate()',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.fromISO("2022-01-01"))))]},{input:'"2022-01-01T00:00Z".parseDate()',output:[(0,_.YCD)((0,_.pZr)((0,S.luxonDateToNotionDateOrDateTime)(M.ou.fromISO("2022-01-01T00:00Z"))))]}]],syntax:["parseDate(dateText)","dateText.parseDate()"],description:ae.parseDate},name:{name:"name",eval:function*(e,t){const[r]=e;oe("person"===r.type);const n=(yield{recordPointers:[r.value]}).getRecordModel(r.value);if(!n)throw new B.Mu({type:B.sj.UserNotFound});return{type:"text",value:(0,_.TPx)(n.getDisplayName(t.intl))}},parameters:{expected:[{name:"person",type:{type:"person"}}]},returnType:{type:"text"},iconType:{type:"person"},examples:[[{input:[["name("],(0,re.um)(k.vz.CreatedBy),[")"]],isCopyable:!0},{input:[(0,re.h0)("Pioneers"),['.map(name(current)).join(", ")']],output:'"Grace Hopper, Ada Lovelace"'}],[{input:[(0,re.um)(k.vz.CreatedBy),[".name()"]],isCopyable:!0},{input:[(0,re.h0)("Pioneers"),['.map(current.name()).join(", ")']],output:'"Grace Hopper, Ada Lovelace"'}]],syntax:["name(person)","person.name()"],description:ae.name},email:{name:"email",eval:function*(e,t){const[r]=e;oe("person"===r.type);const n=(yield{recordPointers:[r.value]}).getRecordModel(r.value);if(!n)throw new B.Mu({type:B.sj.UserNotFound});return n.isUser()?{type:"text",value:(0,_.TPx)(n.getEmail())}:ie},parameters:{expected:[{name:"person",type:{type:"person"}}]},returnType:{type:"text"},iconType:{type:"person"},examples:[[{input:[["email("],(0,re.um)(k.vz.CreatedBy),[")"]],isCopyable:!0},{input:[(0,re.h0)("People"),['.map(email(current)).join(", ")']]}],[{input:[(0,re.um)(k.vz.CreatedBy),[".email()"]],isCopyable:!0},{input:[(0,re.h0)("People"),['.map(current.email()).join(", ")']]}]],syntax:["email(person)","person.email()"],description:ae.email},at:{name:"at",eval:function*(e,t){const[r,n]=e;oe("array"===r.type&&"number"===n.type);const o=r.values.at(n.value);return void 0!==o?o:ie},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"index",type:{type:"number"}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"at([1, 2, 3], 1)",output:"2"}],[{input:"[1, 2, 3].at(1)",output:"2"}]],syntax:["at(list, index)","list.at(index)"],description:ae.at},first:{name:"first",eval:function*(e,t){const[r]=e;return oe("array"===r.type),r.values.length>0?r.values[0]:ie},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"first([1, 2, 3])",output:"1"}],[{input:"[1, 2, 3].first()",output:"1"},{input:"[].first()",output:"Empty"}]],syntax:["first(list)","list.first()"],description:ae.first},last:{name:"last",eval:function*(e,t){const[r]=e;return oe("array"===r.type),r.values.length>0?r.values[r.values.length-1]:ie},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"last([1, 2, 3])",output:"3"}],[{input:"[1, 2, 3].last()",output:"3"}]],syntax:["last(list)","list.last()"],description:ae.last},slice:{name:"slice",eval:function*(e,t){const[r,n,o]=e;return oe("array"===r.type&&"number"===n.type),{type:"array",values:r.values.slice(n.value,"number"===(null==o?void 0:o.type)?o.value:void 0)}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"startIndex",type:{type:"number"}},{name:"endIndex",optional:!0,type:{type:"number"}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"slice([1, 2, 3], 1, 2)",output:"[2]"},{input:'slice(["a", "b", "c"], 1)',output:'["b", "c"]'}],[{input:"[1, 2, 3].slice(1, 2)",output:"[2]"},{input:'["a", "b", "c"].slice(1)',output:'["b", "c"]'}]],syntax:["slice(list, startIndex, endIndex?)","list.slice(startIndex, endIndex?)"],description:ae.slice},concat:{name:"concat",eval:function*(e){return{type:"array",values:e.flatMap((e=>(oe("array"===e.type),e.values.filter((e=>"undefined"!==e.type)))))}},parameters:{varargs:[{name:"arg",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{const t=null==e?void 0:e[0];if(void 0===t)return{type:"array",of:{type:"unknown"}};for(let r=1;r<e.length;r++)if(void 0!==e[r]&&!(0,D.Jy)(e[r],t))return{type:"array",of:{type:"unknown"}};return t},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"concat([1, 2], [3, 4])",output:"[1, 2, 3, 4]"},{input:'concat(["a", "b"], ["c", "d"])',output:'["a", "b", "c", "d"]'}],[{input:"[1, 2].concat([3, 4])",output:"[1, 2, 3, 4]"},{input:'["a", "b"].concat(["c", "d"])',output:'["a", "b", "c", "d"]'}]],syntax:["concat(list, list2, ...)","list.concat(list2, ...)"],description:ae.concat},sort:{name:"sort",eval:function*(e,t){const[r,n]=e;oe("array"===r.type);const o=r.values.filter((e=>"undefined"!==e.type));return{type:"array",values:void 0!==n?yield*function*(e,t,r){const n=yield*z(e,t,r);if(Q(n))return(0,p.$R)(e,n).sort(((e,t)=>{if(void 0===e[1]||void 0===t[1])throw new Error("Expected formula value to be present in map");return ee({left:e[1],right:t[1],context:r})})).map((e=>{let[t]=e;return t}));const o=yield*(0,A.LD)(n.map((e=>(0,A.PX)((0,A.j4)(e),r))));return(0,p.$R)(e,n,o).sort(((e,t)=>te({left:e[1],leftAsString:e[2],right:t[1],rightAsString:t[2],context:r}))).map((e=>{let[t]=e;return t}))}(o,n,t):yield*function*(e,t){if(Q(e))return e.sort(((e,r)=>ee({left:e,right:r,context:t})));const r=yield*(0,A.LD)(e.map((e=>(0,A.PX)((0,A.j4)(e),t)))),n=new Map((0,p.$R)(e,r));return e.sort(((e,r)=>{const o=n.get(e),a=n.get(r);if(void 0===o||void 0===a)throw new Error("Expected formula value to be present in map");return te({left:e,leftAsString:o,right:r,rightAsString:a,context:t})}))}(o,t)}},parameters:le,returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"sort([3, 1, 2])",output:"[1, 2, 3]"},{input:'sort(["Yash", "Stephen", "Paul", "Simon", "Ryo"])',output:'["Paul", "Ryo", "Simon", "Stephen", "Yash"]'},{input:"sort([1, 2, 3], current * -1)",output:"[3, 2, 1]"}],[{input:"[3, 1, 2].sort()",output:"[1, 2, 3]"},{input:'["Yash", "Stephen", "Paul", "Simon", "Ryo"].sort()',output:'["Paul", "Ryo", "Simon", "Stephen", "Yash"]'},{input:"[1, 2, 3].sort(current * -1)",output:"[3, 2, 1]"}]],syntax:["sort(list)","list.sort()"],description:ae.sort},reverse:{name:"reverse",eval:function*(e,t){const[r]=e;oe("array"===r.type);return{type:"array",values:[...r.values].reverse()}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'reverse(["green", "eggs", "ham"])',output:'["ham", "eggs", "green"]'}],[{input:'["green", "eggs", "ham"].reverse()',output:'["ham", "eggs", "green"]'}]],syntax:["reverse(list)","list.reverse()"],description:ae.reverse},join:{name:"join",eval:function*(e,t){const[r,n]=e;oe("array"===r.type&&"text"===n.type);const o=r.values.map((e=>(0,A.j4)(e)));return{type:"text",value:(0,_.Zxt)((0,R.Z)(o,(()=>n.value)).flat())}},parameters:{expected:[{name:"input",type:{type:"array",of:{type:"unknown"}}},{name:"joiner",type:{type:"text"}}]},returnType:{type:"text"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'join(["a", "b", "c"], ", ")',output:'"a, b, c"'},{input:'join(["dog", "go"], "")',output:'"doggo"'}],[{input:'["a", "b", "c"].join(", ")',output:'"a, b, c"'},{input:'["dog", "go"].join("")',output:'"doggo"'}]],syntax:["join(list, joiner)","list.join(joiner)"],description:ae.join},split:{name:"split",eval:function*(e,t){const[r,n]=e;oe("text"===r.type),oe(void 0===n||"text"===n.type);const o=yield*(0,A.PX)(r.value,t);if(""===o)return{type:"array",values:[]};const a=n?yield*(0,A.PX)(n.value,t):void 0,i=" "===a||void 0===a,s=i?/\s+/:a;return{type:"array",values:o.split(s).filter((e=>!i||e.length>0)).map((e=>({type:"text",value:(0,_.TPx)(e)})))}},parameters:{expected:[{name:"input",type:{type:"text"}},{name:"separator",optional:!0,type:{type:"text"}}]},returnType:{type:"array",of:{type:"text"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'split("apple,pear,orange", ",")',output:'["apple", "pear", "orange"]'}],[{input:'"apple,pear,orange".split(",")',output:'["apple", "pear", "orange"]'}]],syntax:["split(text, separator)","text.split(separator)"],description:ae.split},unique:{name:"unique",eval:function*(e,t){const[r]=e;oe("array"===r.type);const n=[];for(const o of r.values){(yield*(0,A.LD)(n.map((e=>(0,A.Jr)(e,o,t))))).some((e=>e))||n.push(o)}return{type:"array",values:n}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e;return"array"===(null==t?void 0:t.type)?t:{type:"array",of:{type:"unknown"}}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"unique([1, 1, 2])",output:"[1, 2]"}],[{input:"[1, 1, 2].unique()",output:"[1, 2]"}]],syntax:["unique(list)","list.unique()"],description:ae.unique},includes:{name:"includes",eval:function*(e,t){const[r,n]=e;oe("array"===r.type);for(const o of r.values){if(yield*(0,A.Jr)(o,n,t))return{type:"checkbox",value:!0}}return{type:"checkbox",value:!1}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}},{name:"needle",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:'includes(["a", "b", "c"], "b")',output:"true"},{input:"includes([1, 2, 3], 4)",output:"false"}],[{input:'["a", "b", "c"].includes("b")',output:"true"},{input:"[1, 2, 3].includes(4)",output:"false"}]],syntax:["includes(list, search)","list.includes(search)"],description:ae.includes},find:{name:"find",eval:function*(e,t){const[r,n]=e;oe("array"===r.type);const o=yield*z(r.values,n,t);return r.values.find(((e,t)=>(0,A.vh)(o[t])))??{type:"undefined"}},parameters:ue,returnType:e=>{let[t,r]=e;return"array"===(null==t?void 0:t.type)?t.of:{type:"unknown"}},iconType:{type:"text"},examples:[[{input:'find(["a", "b", "c"], current == "b")',output:'"b"'},{input:"find([1, 2, 3], current > 100)",output:"Empty"}],[{input:'["a", "b", "c"].find(current == "b")',output:'"b"'},{input:"[1, 2, 3].find(current > 100)",output:"Empty"}]],syntax:["find(list, condition)","list.find(condition)"],description:ae.find},findIndex:{name:"findIndex",eval:function*(e,t){const[r,n]=e;oe("array"===r.type);return{type:"number",value:(yield*z(r.values,n,t)).findIndex((e=>(0,A.vh)(e)))}},parameters:ue,returnType:{type:"number"},iconType:{type:"text"},examples:[[{input:'findIndex(["a", "b", "c"], current == "b")',output:"1"},{input:"findIndex([1, 2, 3], current > 100)",output:"-1"}],[{input:'["a", "b", "c"].findIndex(current == "b")',output:"1"},{input:"[1, 2, 3].findIndex(current > 100)",output:"-1"}]],syntax:["findIndex(list, condition)","list.findIndex(condition)"],description:ae.findIndex},filter:{name:"filter",eval:function*(e,t){const[r,n]=e;oe("array"===r.type);const o=yield*z(r.values,n,t);return{type:"array",values:r.values.filter(((e,t)=>(0,A.vh)(o[t])))}},parameters:ue,returnType:e=>{let[t,r]=e;return"array"===(null==t?void 0:t.type)?t:{type:"unknown"}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"filter([1, 2, 3], current > 1)",output:"[2, 3]"},{input:'filter(["a", "b", "c"], current == "a")',output:'["a"]'}],[{input:"[1, 2, 3].filter(current > 1)",output:"[2, 3]"},{input:'["a", "b", "c"].filter(current == "a")',output:'["a"]'}]],syntax:["filter(list, condition)","list.filter(condition)"],description:ae.filter},some:{name:"some",eval:function*(e,t){const[r,n]=e;oe("array"===r.type);return{type:"checkbox",value:(yield*z(r.values,n,t)).some((e=>(0,A.vh)(e)))}},parameters:ue,returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"some([1, 2, 3], current == 2)",output:"true"},{input:'some(["a", "b", "c"], current.length > 2)',output:"false"}],[{input:"[1, 2, 3].some(current == 2)",output:"true"},{input:'["a", "b", "c"].some(current.length > 2)',output:"false"}]],syntax:["some(list, expression)","list.some(expression)"],description:ae.some},every:{name:"every",eval:function*(e,t){const[r,n]=e;oe("array"===r.type);return{type:"checkbox",value:(yield*z(r.values,n,t)).every((e=>(0,A.vh)(e)))}},parameters:ue,returnType:{type:"checkbox"},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"every([1, 2, 3], current > 0)",output:"true"},{input:'every(["a", "b", "c"], current == "b")',output:"false"}],[{input:"[1, 2, 3].every(current > 0)",output:"true"},{input:'["a", "b", "c"].every(current == "b")',output:"false"}]],syntax:["every(list, condition)","list.every(condition)"],description:ae.every},map:{name:"map",eval:function*(e,t){const[r,n]=e;return oe("array"===r.type),{type:"array",values:yield*z(r.values,n,t)}},parameters:ue,returnType:e=>{let[t,r]=e;return{type:"array",of:r??{type:"unknown"}}},iconType:{type:"array",of:{type:"text"}},examples:[[{input:"map([1, 2, 3], current + 1)",output:"[2, 3, 4]"},{input:"map([1, 2, 3], current + index)",output:"[1, 3, 5]"}],[{input:"[1, 2, 3].map(current + 1)",output:"[2, 3, 4]"},{input:"[1, 2, 3].map(current + index)",output:"[1, 3, 5]"}]],syntax:["map(list, expression)","list.map(expression)"],description:ae.map},flat:{name:"flat",eval:function*(e,t){const[r]=e;oe("array"===r.type);const n=[];for(const o of r.values)"array"===o.type?n.push(...o.values):n.push(o);return{type:"array",values:n}},parameters:{expected:[{name:"list",type:{type:"array",of:{type:"unknown"}}}]},returnType:e=>{let[t]=e,r={type:"unknown"};return"array"===(null==t?void 0:t.type)&&(r="array"===t.of.type?t.of.of:t.of),{type:"array",of:r}},iconType:{type:"array",of:{type:"unknown"}},examples:[[{input:"flat([1, 2, 3])",output:"[1, 2, 3]"},{input:"flat([[1, 2], [3, 4]])",output:"[1, 2, 3, 4]"}],[{input:"[1, 2, 3].flat()",output:"[1, 2, 3]"},{input:"[[1, 2], [3, 4]].flat()",output:"[1, 2, 3, 4]"}]],syntax:["flat(list, list2?, ...)","list.flat(list2?, ...)"],description:ae.flat},id:{name:"id",eval:function*(e,t){const[r]=e;if(!r){var n;const e=null===(n=t.values.find((e=>e.kind===k.yp.ThisRow)))||void 0===n?void 0:n.value;if("block"!==(null==e?void 0:e.type))throw new B.Mu({type:B.sj.TryingToGetIdWithoutThisRow});return{type:"text",value:(0,_.TPx)((0,U.cj)(e.value.id))}}return oe("block"===r.type),{type:"text",value:(0,_.TPx)((0,U.cj)(r.value.id))}},parameters:{expected:[{name:"block",type:{type:"block"},optional:!0}]},returnType:{type:"text"},iconType:{type:"text"},syntax:["id(block?)","block.id()"],examples:[[{input:"id()"},{input:"id(block)"}],[{input:"block.id()"}]],description:ae.id},equal:{name:"equal",eval:function*(e,t){const[r,n]=e;return{type:"checkbox",value:yield*(0,A.Jr)(r,n,t)}},parameters:{expected:[{name:"lhs",type:{type:"unknown"}},{name:"rhs",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"equal(1, 1)",output:"true"},{input:'"a" == "b"',output:"false"}],[{input:"1.equal(1)",output:"true"},{input:'"a" == "b"',output:"false"}]],syntax:["equal(value, value)","value.equal(value)"],description:ae.equal},unequal:{name:"unequal",eval:function*(e,t){const[r,n]=e;return{type:"checkbox",value:!(yield*(0,A.Jr)(r,n,t))}},parameters:{expected:[{name:"lhs",type:{type:"unknown"}},{name:"rhs",type:{type:"unknown"}}]},returnType:{type:"checkbox"},iconType:{type:"checkbox"},examples:[[{input:"unequal(1, 2)",output:"true"},{input:'"a" != "a"',output:"false"}],[{input:"1.unequal(2)",output:"true"},{input:'"a" != "a"',output:"false"}]],syntax:["unequal(value, value)","value.unequal(value)"],description:ae.unequal},let:{name:"let",eval:function*(e,t){const[r,n,o]=e;if(r.kind!==B.bG.Identifier)throw new B.Mu({type:B.sj.LetBindingNameNotIdentifier,node:r});let a;try{a=yield*Ie(n,t)}catch{a={type:"undefined"}}return yield*Ie(o,{...t,values:[{kind:k.yp.Binding,id:r.text,value:a},...t.values]})},parameters:{expected:[{name:"identifier",type:{type:"expression"}},{name:"value",type:{type:"expression"}},{name:"expression",type:{type:"expression"}}]},returnType:e=>{let[t,r,n]=e;return n??{type:"unknown"}},iconType:{type:"text"},examples:[[{input:'let(name, "Doug Engelbart", "Hello, " + name + "!")',output:'"Hello, Doug Engelbart!"'},{input:"let(radius, 4, round(pi() * radius ^ 2))",output:"50"}],[{input:'name.let("Alan Kay", "Hello, " + name + "!")',output:'"Hello, Alan Kay!"'},{input:"radius.let(4, round(pi() * radius ^ 2)",output:"50"}]],syntax:["let(variable, value, expression)","variable.let(value, expression)"],description:ae.let},lets:{name:"lets",eval:function*(e,t){const r=e;if(r.length<3||r.length%2!=1)throw new B.Mu({type:B.sj.NotEnoughArguments});const n={...t};for(let a=0;a<r.length-1;a+=2){const e=r[a],t=r[a+1];if(e.kind!==B.bG.Identifier)throw new B.Mu({type:B.sj.LetBindingNameNotIdentifier,node:e});let o;try{o=yield*Ie(t,n)}catch{o={type:"undefined"}}n.values=[{kind:k.yp.Binding,id:e.text,value:o},...n.values]}const o=r[r.length-1];return yield*Ie(o,n)},parameters:{varargs:[{name:"args",type:{type:"expression"}}]},returnType:e=>e[e.length-1]??{type:"unknown"},iconType:{type:"text"},examples:[[{input:'lets(a, "Hello", b, "world", a + " " + b)',output:'"Hello world"'},{input:"lets(base, 3, height, 8, base * height / 2)",output:"12"}],[]],syntax:["lets(variable, value, variable2, value2, ..., expression)","variable.lets(value, variable2, value2, ..., expression)"],description:ae.lets}};const de=["block","array","person"],pe=["let","lets"];r(92087);var me=r(77090);const ye=p.HP((()=>function(){const e=(0,me.V3)({name:"AdditionOperator",pattern:me.hW.NA}),t=(0,me.V3)({name:"UnaryOperator",pattern:me.hW.NA}),r=(0,me.V3)({name:"Plus",pattern:/\+/,categories:e}),n=(0,me.V3)({name:"Minus",pattern:/-/,categories:[e,t]}),o=(0,me.V3)({name:"ExclamationPoint",pattern:/!/,categories:t}),a=(0,me.V3)({name:"MultiplicationOperator",pattern:me.hW.NA}),i=(0,me.V3)({name:"Multi",pattern:/\*/,categories:a}),s=(0,me.V3)({name:"Div",pattern:/\//,categories:a}),u=(0,me.V3)({name:"Modulo",pattern:/%/,categories:a}),l=(0,me.V3)({name:"Caret",pattern:/\^/}),c=(0,me.V3)({name:"BooleanLiteral",pattern:me.hW.NA}),d=(0,me.V3)({name:"True",pattern:/true/i,categories:c}),p=(0,me.V3)({name:"False",pattern:/false/i,categories:c}),m=(0,me.V3)({name:"And",pattern:/and |&&/i}),y=(0,me.V3)({name:"Or",pattern:/or |\|\|/i}),f=(0,me.V3)({name:"Not",pattern:/not /i,categories:t}),v=(0,me.V3)({name:"RelationalOperator",pattern:me.hW.NA}),_=(0,me.V3)({name:"LessThan",pattern:/<=?/,categories:v}),b=(0,me.V3)({name:"GreaterThan",pattern:/>=?/,categories:v}),h=(0,me.V3)({name:"EqualityOperator",pattern:me.hW.NA}),x=(0,me.V3)({name:"Equal",pattern:/==/,categories:h}),T=(0,me.V3)({name:"NotEqual",pattern:/!=/,categories:h}),M=(0,me.V3)({name:"LParen",pattern:/\(/}),w=(0,me.V3)({name:"RParen",pattern:/\)/}),Z=(0,me.V3)({name:"LBracket",pattern:/\[/}),C=(0,me.V3)({name:"RBracket",pattern:/\]/}),S=(0,me.V3)({name:"Comma",pattern:/,/}),I=(0,me.V3)({name:"Dot",pattern:/\./}),N=(0,me.V3)({name:"QuestionMark",pattern:/\?/}),R=(0,me.V3)({name:"Colon",pattern:/:/}),U=(0,me.V3)({name:"StringLiteral",pattern:/"(?:[^\\"]|\\.)*"/,start_chars_hint:['"']}),P=(0,me.V3)({name:"UnclosedStringLiteral",pattern:/"(?:[^\\"]|\\.)*/,start_chars_hint:['"']}),D=(0,me.V3)({name:"NumberLiteral",pattern:/(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?/}),O=(0,me.V3)({name:"Comment",pattern:/\/\*(?:[^*]|\*(?:[^\/]))*\*\//,group:me.hW.SKIPPED,start_chars_hint:["/*"]}),E=(0,me.V3)({name:"UnclosedComment",pattern:/\/\*(?:[^*]|\*(?:[^\/]))*/,group:me.hW.SKIPPED,start_chars_hint:["/*"]}),F=(0,me.V3)({name:"InputToken",pattern:{exec:(e,t)=>{if(!e.startsWith(k.Eb,t))return null;const r=e.substring(t),n=k.kA.exec(r);if(null!==n){const e=[n[0]],t=(0,A.i0)(n[1]);let r;if(void 0!==n[2])r={type:k.Oy.BlockProperty,property:t,collection:{table:g.v,id:n[3],spaceId:n[4]}};else{if(!k.WG.includes(t))return null;r={type:k.Oy.BlockProperty,property:t,collection:void 0}}return e.payload=r,e}const o=k.QQ.exec(r);if(null!==o){const e=[o[0]],t={type:k.Oy.Block,blockId:o[1],spaceId:void 0!==o[2]?o[2].substring(1):void 0};return e.payload=t,e}const a=k.eO.exec(r);if(null!==a){const e=[a[0]],t={type:k.Oy.Person,userId:a[1]};return e.payload=t,e}const i=k.DF.exec(r);if(null!==i){const e=[i[0]],t={type:k.Oy.Checkbox,checked:"true"===i[1]};return e.payload=t,e}const s=k.Uq.exec(r);if(null!==s){const e=[s[0]],t=(0,A.wf)(s[1]),r={type:k.Oy.ContextValue,valueId:t};return e.payload=r,e}const u=k.Xm.exec(r);if(null!==u){const e=[u[0]],t={type:k.Oy.Date,date:(0,A.DF)(u[1])};return e.payload=t,e}return null}},line_breaks:!1,start_chars_hint:[k.Eb]}),B=(0,me.V3)({name:"IdentifierName",pattern:(V=/[\p{Letter}_][\p{Number}\p{Letter}_]*/u,(e,t)=>{const r=new RegExp(V.source,`${V.flags}y`);return r.lastIndex=t,r.exec(e)}),line_breaks:!1});var V;return{WhiteSpace:(0,me.V3)({name:"WhiteSpace",pattern:/\s+/,group:me.hW.SKIPPED}),NumberLiteral:D,StringLiteral:U,UnclosedStringLiteral:P,Comment:O,UnclosedComment:E,InputToken:F,True:d,False:p,And:m,Or:y,Not:f,IdentifierName:B,Equal:x,NotEqual:T,Plus:r,Minus:n,ExclamationPoint:o,Multi:i,Div:s,Modulo:u,Caret:l,LParen:M,RParen:w,LBracket:Z,RBracket:C,AdditionOperator:e,MultiplicationOperator:a,LessThan:_,GreaterThan:b,QuestionMark:N,Colon:R,Comma:S,Dot:I,UnaryOperator:t,EqualityOperator:h,RelationalOperator:v,BooleanLiteral:c}}()));const fe=p.HP((e=>new me.hW(function(e){return Object.values(e)}(e))));class ge extends me.wd{constructor(e){super(Object.values(e),{recoveryEnabled:!0,nodeLocationTracking:"onlyOffset"}),this.formulaTokens=void 0,this.expression=this.RULE("expression",(()=>{this.SUBRULE(this.conditionalExpression)})),this.primaryExpression=this.RULE("primaryExpression",(()=>{this.OR([{ALT:()=>this.SUBRULE(this.parenthesisExpression)},{ALT:()=>this.SUBRULE(this.arrayExpression)},{ALT:()=>this.CONSUME(this.formulaTokens.NumberLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.StringLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.UnclosedStringLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.BooleanLiteral)},{ALT:()=>this.CONSUME(this.formulaTokens.IdentifierName)},{ALT:()=>this.CONSUME(this.formulaTokens.InputToken)}])})),this.conditionalExpression=this.RULE("conditionalExpression",(()=>{this.SUBRULE(this.logicalOrExpression,{LABEL:"condition"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.QuestionMark),this.SUBRULE2(this.logicalOrExpression,{LABEL:"expIfTrue"}),this.CONSUME(this.formulaTokens.Colon),this.SUBRULE3(this.logicalOrExpression,{LABEL:"expIfFalse"})}))})),this.logicalOrExpression=this.RULE("logicalOrExpression",(()=>{this.SUBRULE(this.logicalAndExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.Or),this.SUBRULE2(this.logicalAndExpression,{LABEL:"rhs"})}))})),this.logicalAndExpression=this.RULE("logicalAndExpression",(()=>{this.SUBRULE(this.equalityExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.And),this.SUBRULE2(this.equalityExpression,{LABEL:"rhs"})}))})),this.equalityExpression=this.RULE("equalityExpression",(()=>{this.SUBRULE(this.relationalExpression,{LABEL:"lhs"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.EqualityOperator),this.SUBRULE2(this.relationalExpression,{LABEL:"rhs"})}))})),this.relationalExpression=this.RULE("relationalExpression",(()=>{this.SUBRULE(this.additionExpression,{LABEL:"lhs"}),this.OPTION((()=>{this.CONSUME(this.formulaTokens.RelationalOperator),this.SUBRULE2(this.additionExpression,{LABEL:"rhs"})}))})),this.additionExpression=this.RULE("additionExpression",(()=>{this.SUBRULE(this.multiplicationExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.AdditionOperator),this.SUBRULE2(this.multiplicationExpression,{LABEL:"rhs"})}))})),this.multiplicationExpression=this.RULE("multiplicationExpression",(()=>{this.SUBRULE(this.exponentiationExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.MultiplicationOperator),this.SUBRULE2(this.exponentiationExpression,{LABEL:"rhs"})}))})),this.exponentiationExpression=this.RULE("exponentiationExpression",(()=>{this.SUBRULE(this.unaryExpression,{LABEL:"lhs"}),this.MANY((()=>{this.CONSUME(this.formulaTokens.Caret),this.SUBRULE2(this.unaryExpression,{LABEL:"rhs"})}))})),this.unaryExpression=this.RULE("unaryExpression",(()=>{this.OPTION((()=>{this.CONSUME(this.formulaTokens.UnaryOperator)})),this.SUBRULE(this.primaryExpression),this.MANY((()=>{this.SUBRULE2(this.memberCallSubExpression)}))})),this.memberCallSubExpression=this.RULE("memberCallSubExpression",(()=>{this.OR([{ALT:()=>this.SUBRULE(this.dotMemberExpression)},{ALT:()=>this.SUBRULE(this.callArguments)}])})),this.dotMemberExpression=this.RULE("dotMemberExpression",(()=>{this.CONSUME(this.formulaTokens.Dot),this.OR([{ALT:()=>this.CONSUME(this.formulaTokens.IdentifierName)},{GATE:()=>{var e;const t=this.LA(1);return t.tokenType===this.formulaTokens.InputToken&&(null===(e=t.payload)||void 0===e?void 0:e.type)===k.Oy.BlockProperty},ALT:()=>this.CONSUME(this.formulaTokens.InputToken)}])})),this.callArguments=this.RULE("callArguments",(()=>{this.CONSUME(this.formulaTokens.LParen),this.OPTION((()=>{this.SUBRULE(this.expression),this.MANY((()=>{this.CONSUME(this.formulaTokens.Comma),this.SUBRULE2(this.expression)}))})),this.CONSUME(this.formulaTokens.RParen)})),this.parenthesisExpression=this.RULE("parenthesisExpression",(()=>{this.CONSUME(this.formulaTokens.LParen),this.SUBRULE(this.expression),this.CONSUME(this.formulaTokens.RParen)})),this.arrayExpression=this.RULE("arrayExpression",(()=>{this.CONSUME(this.formulaTokens.LBracket),this.OPTION((()=>{this.SUBRULE(this.expression),this.MANY((()=>{this.CONSUME(this.formulaTokens.Comma),this.SUBRULE2(this.expression)}))})),this.CONSUME(this.formulaTokens.RBracket)})),this.formulaTokens=e,this.performSelfAnalysis()}}const ve=p.HP((e=>new ge(e)));function _e(e){const t=/unexpected character: ->(.+)<- at offset/.exec(e.message);if(null!==t)return{type:B.$E.InvalidCharacter,character:t[1],offset:e.offset};if("unclosed string literal"===e.message)return{type:B.$E.UnclosedStringLiteral,offset:e.offset};if("unclosed comment"===e.message)return{type:B.$E.UnclosedComment,offset:e.offset};throw new Error(`Unhandled chevrotain recognition error: ${e.message}`)}const be={RParen:")",RBracket:"]",Colon:":"};function he(e){const t=e.token.tokenType===me.sd?"eof":e.token.startOffset;switch(e.name){case"MismatchedTokenException":{const r=/Expecting token of type --> (.+) <-- but found/.exec(e.message);if(null!==r){const e=r[1],n=be[e];if(void 0!==n)return{type:B.$E.TokenExpected,token:n,offset:t}}break}case"NoViableAltException":{const r=e.context.ruleStack[e.context.ruleStack.length-1];switch(r){case"primaryExpression":return{type:B.$E.ExpressionExpected,offset:t};case"dotMemberExpression":return{type:B.$E.PropertyTokenOrFunctionExpected,offset:t}}throw new Error(`Unhandled unviable alt: ${r}`)}case"NotAllInputParsedException":return{type:B.$E.EndOfInputExpected,offset:t}}return{type:B.$E.UnexpectedError,error:new Error(`Unhandled chevrotain recognition error: ${e.name}`),offset:t}}const ke=new RegExp(/\\([\\nt"])/g);function xe(e){return e.find((e=>void 0!==e&&!isNaN(e)))}function Te(e){const t=function(){const e=ye(),t=ve(e).getBaseCstVisitorConstructor();return new class extends t{constructor(){super(),this.validateVisitor()}expression(e){return this.visit(e.conditionalExpression)}primaryExpression(e){if(void 0!==e.parenthesisExpression)return this.visit(e.parenthesisExpression);if(void 0!==e.arrayExpression)return this.visit(e.arrayExpression);if(void 0!==e.NumberLiteral)return{kind:B.bG.Number,text:e.NumberLiteral[0].image,startOffset:e.NumberLiteral[0].startOffset,endOffset:e.NumberLiteral[0].endOffset};if(void 0!==e.StringLiteral){const t=e.StringLiteral[0].image.slice(1,-1).replace(ke,((e,t)=>{switch(t){case"n":return"\n";case"t":return"\t";default:return t}}));return{kind:B.bG.String,text:t,startOffset:e.StringLiteral[0].startOffset,endOffset:e.StringLiteral[0].endOffset}}return void 0!==e.UnclosedStringLiteral?{kind:B.bG.String,text:e.UnclosedStringLiteral[0].image.substring(1,e.UnclosedStringLiteral[0].image.length),startOffset:e.UnclosedStringLiteral[0].startOffset,endOffset:e.UnclosedStringLiteral[0].endOffset}:void 0!==e.BooleanLiteral?{kind:B.bG.Boolean,text:e.BooleanLiteral[0].image,startOffset:e.BooleanLiteral[0].startOffset,endOffset:e.BooleanLiteral[0].endOffset}:void 0!==e.InputToken?{kind:B.bG.NotionToken,token:e.InputToken[0].payload,startOffset:e.InputToken[0].startOffset,endOffset:e.InputToken[0].endOffset}:void 0!==e.IdentifierName?{kind:B.bG.Identifier,text:e.IdentifierName[0].image,startOffset:e.IdentifierName[0].startOffset,endOffset:e.IdentifierName[0].endOffset}:{kind:B.bG.RecoveryNode,startOffset:-1,endOffset:-1}}conditionalExpression(e){const t=this.visit(e.condition[0]);var r,n,o,a;return void 0!==e.QuestionMark?{kind:B.bG.Conditional,condition:t,expIfTrue:this.visit(e.expIfTrue[0]),expIfFalse:void 0!==(null===(r=e.expIfFalse)||void 0===r?void 0:r[0])?this.visit(e.expIfFalse[0]):void 0,startOffset:e.condition[0].location.startOffset,endOffset:xe([null===(n=e.expIfFalse)||void 0===n||null===(n=n[0].location)||void 0===n?void 0:n.endOffset,null===(o=e.Colon)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.endOffset,null===(a=e.expIfTrue[0].location)||void 0===a?void 0:a.endOffset,e.QuestionMark[0].endOffset])}:t}logicalOrExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.Or){var r,n;const o=(null===(r=e.rhs)||void 0===r?void 0:r.map((e=>this.visit(e))))??[];return{kind:B.bG.LogicalOr,elements:[t,...o],startOffset:e.lhs[0].location.startOffset,endOffset:xe([null===(n=e.rhs)||void 0===n||null===(n=n[e.rhs.length-1])||void 0===n||null===(n=n.location)||void 0===n?void 0:n.endOffset,e.Or[0].endOffset])}}return t}logicalAndExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.And){var r,n;const o=(null===(r=e.rhs)||void 0===r?void 0:r.map((e=>this.visit(e))))??[];return{kind:B.bG.LogicalAnd,elements:[t,...o],startOffset:e.lhs[0].location.startOffset,endOffset:xe([null===(n=e.rhs)||void 0===n||null===(n=n[e.rhs.length-1])||void 0===n||null===(n=n.location)||void 0===n?void 0:n.endOffset,e.And[0].endOffset])}}return t}equalityExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.EqualityOperator){var r;const n=e.rhs[0];return{kind:B.bG.Equality,op:e.EqualityOperator[0].image,lhs:t,rhs:this.visit(n),startOffset:e.lhs[0].location.startOffset,endOffset:xe([null===(r=n.location)||void 0===r?void 0:r.endOffset,e.EqualityOperator[0].endOffset])}}return t}relationalExpression(e){const t=this.visit(e.lhs[0]);if(void 0!==e.RelationalOperator){var r;const n=e.rhs[0];return{kind:B.bG.Relational,op:e.RelationalOperator[0].image,lhs:t,rhs:this.visit(n),startOffset:e.lhs[0].location.startOffset,endOffset:xe([null===(r=n.location)||void 0===r?void 0:r.endOffset,e.RelationalOperator[0].endOffset])}}return t}additionExpression(e){let t=this.visit(e.lhs[0]);if(void 0!==e.AdditionOperator)for(let n=0;n<e.AdditionOperator.length;n++){var r;const o=e.rhs[n];t={kind:B.bG.Additive,op:e.AdditionOperator[n].image,lhs:t,rhs:this.visit(o),startOffset:e.lhs[0].location.startOffset,endOffset:xe([null===(r=o.location)||void 0===r?void 0:r.endOffset,e.AdditionOperator[n].endOffset])}}return t}multiplicationExpression(e){let t=this.visit(e.lhs[0]);if(void 0!==e.MultiplicationOperator)for(let n=0;n<e.MultiplicationOperator.length;n++){var r;const o=e.rhs[n];t={kind:B.bG.Multiplicative,op:e.MultiplicationOperator[n].image,lhs:t,rhs:this.visit(o),startOffset:e.lhs[0].location.startOffset,endOffset:xe([null===(r=o.location)||void 0===r?void 0:r.endOffset,e.MultiplicationOperator[n].endOffset])}}return t}exponentiationExpression(e){let t;const r=this.visit(e.lhs[0]);if(void 0!==e.Caret){var n;const o=e.Caret.length-1;let a,i=null===(n=e.rhs[o].location)||void 0===n?void 0:n.endOffset;(void 0===i||isNaN(i))&&(i=e.Caret[o].endOffset);for(let r=e.Caret.length-1;r>=0;r--){const n=e.rhs[r];t=void 0===a?this.visit(n):{kind:B.bG.Exponentiation,op:a,lhs:this.visit(n),rhs:t,startOffset:n.location.startOffset,endOffset:i},a=e.Caret[r].image}return{kind:B.bG.Exponentiation,op:a,lhs:r,rhs:t,startOffset:e.lhs[0].location.startOffset,endOffset:i}}return r}unaryExpression(e){let t=this.visit(e.primaryExpression[0]),r=e.primaryExpression[0].location.startOffset;const n=void 0!==e.UnaryOperator&&"-"===e.UnaryOperator[0].image&&t.kind===B.bG.Number;var o;if(n&&(t={kind:B.bG.Unary,op:e.UnaryOperator[0].image.toLowerCase(),expression:t,startOffset:e.UnaryOperator[0].startOffset,endOffset:t.endOffset}),isNaN(r)&&(r=null===(o=e.memberCallSubExpression)||void 0===o?void 0:o[0].location.startOffset),void 0!==e.memberCallSubExpression)for(const u of e.memberCallSubExpression){const e=u.location.endOffset;if(void 0!==u.children.callArguments){var a,i,s;const n=u.children.callArguments[0].children;t={kind:B.bG.Call,expression:t,arguments:(null===(a=u.children.callArguments[0])||void 0===a||null===(a=a.children.expression)||void 0===a?void 0:a.map((e=>this.visit(e))))??[],lParenOffset:n.LParen[0].startOffset,rParenOffset:null===(i=n.RParen)||void 0===i?void 0:i[0].startOffset,commaOffsets:(null===(s=n.Comma)||void 0===s?void 0:s.map((e=>e.startOffset)))??[],startOffset:r,endOffset:e}}else if(void 0!==u.children.dotMemberExpression){const n=u.children.dotMemberExpression[0].children;if(void 0!==n.IdentifierName){const o=n.IdentifierName[0];t={kind:B.bG.UnifiedFunctionProperty,expression:t,name:o.image,nameStartOffset:o.startOffset,nameEndOffset:o.endOffset,startOffset:r,endOffset:e}}else if(void 0!==n.InputToken){const o=n.InputToken[0],a=o.payload;switch(a.type){case k.Oy.BlockProperty:t={kind:B.bG.MemberBlockProperty,expression:t,propertyToken:void 0===a.collection?{property:a.property,collection:void 0}:{property:a.property,collection:a.collection},propertyStartOffset:o.startOffset,propertyEndOffset:o.endOffset,startOffset:r,endOffset:e}}}}}return void 0===e.UnaryOperator||n?t:{kind:B.bG.Unary,op:e.UnaryOperator[0].image.toLowerCase().trimEnd(),expression:t,startOffset:e.UnaryOperator[0].startOffset,endOffset:t.endOffset}}parenthesisExpression(e){return this.visit(e.expression[0])}arrayExpression(e){var t,r,n,o,a;return{kind:B.bG.Array,elements:(null===(t=e.expression)||void 0===t?void 0:t.map((e=>this.visit(e))))??[],lBracketOffset:e.LBracket[0].startOffset,rBracketOffset:null===(r=e.RBracket)||void 0===r?void 0:r[0].startOffset,commaOffsets:(null===(n=e.Comma)||void 0===n?void 0:n.map((e=>e.startOffset)))??[],startOffset:e.LBracket[0].startOffset,endOffset:xe([null===(o=e.RBracket)||void 0===o?void 0:o[0].endOffset,null===(a=e.expression)||void 0===a||null===(a=a[e.expression.length-1])||void 0===a||null===(a=a.location)||void 0===a?void 0:a.endOffset,e.LBracket[0].endOffset])}}memberCallSubExpression(e){throw new Error("unexpected memberCallSubExpression")}dotMemberExpression(e){throw new Error("unexpected dotMemberExpression")}callArguments(e){throw new Error("unexpected callArguments")}}}();try{return{value:t.visit(e)}}catch(r){return{error:{type:B.$E.UnexpectedError,error:(0,d.tg)(r),offset:0}}}}function Me(e,t){const r=ye(),n=fe(r).tokenize(e),o=[...n.errors],a=[];for(const u of o)a.push(_e(u));for(const u of n.tokens.filter((e=>e.tokenType===r.UnclosedStringLiteral||e.tokenType===r.UnclosedComment)))a.push({type:u.tokenType===r.UnclosedStringLiteral?B.$E.UnclosedStringLiteral:B.$E.UnclosedComment,offset:t?(0,T.aU)(t,u.startOffset,"left"):u.startOffset});for(const u of n.tokens.filter((e=>e.tokenType===r.StringLiteral)))k.zF.test(u.image)&&a.push({type:B.$E.StringLiteralContainsToken,offset:t?(0,T.aU)(t,u.startOffset,"left"):u.startOffset});const i=ve(r);i.input=n.tokens;const s=i.expression();for(const u of i.errors)a.push(he(u));return[s,a]}const we=new WeakMap;function Ze(e){let t=we.get(e);if(void 0!==t)return t;const[r,n]=(0,T.dJ)(e),[o,a]=Me(r);return t=a.length>0?{error:a[0]}:Te(o),we.set(e,t),t}const Ce=3e5;function Se(e,t,r){if("number"!==t.type&&"undefined"!==t.type)throw new B.WV({type:B.FY.CannotDoMathOnType,op:r,operand:e,valueType:t.type})}function*Ie(e,t){if(t.depth>7)throw new B.WV({type:B.FY.DepthExceeded});if(t.formulaTimeoutTimestampMs&&Date.now()>t.formulaTimeoutTimestampMs)throw t.logFormulaTimeoutFn&&t.logFormulaTimeoutFn(),new B.WV({type:B.FY.MaxEvaluationTimeExceeded});switch(e.kind){case B.bG.Number:return{type:"number",value:parseFloat(e.text)};case B.bG.String:return{type:"text",value:[[e.text]]};case B.bG.Boolean:return{type:"checkbox",value:"true"===e.text.toLowerCase()};case B.bG.NotionToken:{const n=e.token;switch(n.type){case k.Oy.Checkbox:return{type:"checkbox",value:n.checked};case k.Oy.BlockProperty:{const r=t.values.find((e=>e.kind===k.yp.ThisRow));if("block"!==(null==r?void 0:r.value.type))throw new B.WV({type:B.FY.MissingThisRow,node:e});const o=r.value.value,a=(yield{recordPointers:[o]}).getRecordModel(o);if(void 0===a)throw new B.WV({type:B.FY.MissingThisRow,node:e});if(void 0===n.collection)return(0,A.SQ)(a,n.property);const i=(0,A.SR)(n.property),s=yield*(0,x.co)(a);if(!s)throw new B.WV({type:B.FY.MissingDataDependencyBlock,node:e,blockPointer:a.pointer});if(!(0,y.qo)(n.collection,s))throw new B.WV({type:B.FY.ThisRowBlockPropertyMismatchCollection,node:e,thisRowCollection:s});const u=(yield{recordPointers:[s]}).getRecordModel(s),l=null==u?void 0:u.getNormalizedSchema(),c=null==l?void 0:l[i];if(void 0===u||void 0===c||void 0===l)throw new B.WV({type:B.FY.MissingSchemaPropertyOnThisRow,node:e,collectionId:a.getParentId(),property:i});return yield*Re({block:a,parentCollectionModel:u,property:i,schema:l,propertySchema:c,oldContext:t})}case k.Oy.Block:return{type:"block",value:{table:f.iU,id:n.blockId,spaceId:n.spaceId}};case k.Oy.ContextValue:{var r;const o=null===(r=t.values.find((e=>e.kind===k.yp.ContextValue&&e.id===(0,A.Kv)(n.valueId))))||void 0===r?void 0:r.value;if(void 0===o)throw new B.WV({type:B.FY.MissingContextVariable,node:e,valueId:n.valueId});return o}case k.Oy.Date:return{type:"date",value:n.date};case k.Oy.Person:return{type:"person",value:{table:v.KJ,id:n.userId}};default:return(0,b.t1)(n)}}case B.bG.Identifier:{var n;const r=null===(n=t.values.find((t=>t.kind===k.yp.Binding&&t.id===e.text)))||void 0===n?void 0:n.value;if(void 0!==r)return r;if(ce.hasOwnProperty(e.text))return{type:"function",function:ce[e.text]};throw new B.WV({type:B.FY.IdentifierNotFound,node:e})}case B.bG.Array:return{type:"array",values:yield*(0,A.LD)(e.elements.map((e=>Ie(e,t))))};case B.bG.Conditional:{const r=yield*Ie(e.condition,t);return(0,A.vh)(r)?yield*Ie(e.expIfTrue,t):yield*Ie(e.expIfFalse,t)}case B.bG.LogicalOr:return{type:"checkbox",value:(yield*(0,A.LD)(e.elements.map((e=>Ie(e,t))))).map(A.vh).some((e=>e))};case B.bG.LogicalAnd:return{type:"checkbox",value:(yield*(0,A.LD)(e.elements.map((e=>Ie(e,t))))).map(A.vh).every((e=>e))};case B.bG.Equality:{const[r,n]=yield*(0,A.LD)([Ie(e.lhs,t),Ie(e.rhs,t)]),o=yield*(0,A.Jr)(r,n,t),a=e.op;switch(a){case"==":return{type:"checkbox",value:o};case"!=":return{type:"checkbox",value:!o};default:return(0,b.t1)(a)}}case B.bG.Relational:{const[r,n]=yield*(0,A.LD)([Ie(e.lhs,t),Ie(e.rhs,t)]);if("undefined"===r.type||"undefined"===n.type)return{type:"checkbox",value:!1};if("date"===r.type&&"date"===n.type){const o=(0,A.SU)(r.value,n.value,t.userTimeZone);switch(e.op){case"<":return{type:"checkbox",value:o<0};case"<=":return{type:"checkbox",value:o<=0};case">":return{type:"checkbox",value:o>0};case">=":return{type:"checkbox",value:o>=0}}}if("text"===r.type&&"text"===n.type){const[o,a]=yield*(0,A.LD)([(0,A.PX)(r.value,t),(0,A.PX)(n.value,t)]);switch(e.op){case"<":return{type:"checkbox",value:o<a};case"<=":return{type:"checkbox",value:o<=a};case">":return{type:"checkbox",value:o>a};case">=":return{type:"checkbox",value:o>=a}}}if("number"===r.type&&"number"===n.type||"checkbox"===r.type&&"checkbox"===n.type)switch(e.op){case"<":return{type:"checkbox",value:r.value<n.value};case"<=":return{type:"checkbox",value:r.value<=n.value};case">":return{type:"checkbox",value:r.value>n.value};case">=":return{type:"checkbox",value:r.value>=n.value}}throw new B.WV({type:B.FY.CannotRelativelyCompareTypes,lhs:e.lhs,rhs:e.rhs,lhsType:r.type,rhsType:n.type})}case B.bG.Additive:{let[r,n]=yield*(0,A.LD)([Ie(e.lhs,t),Ie(e.rhs,t)]);if("undefined"===r.type&&"undefined"===n.type)return{type:"number",value:0};switch("undefined"===r.type&&"number"===n.type?r={type:"number",value:0}:"undefined"===n.type&&"number"===r.type&&(n={type:"number",value:0}),e.op){case"+":return"number"===r.type&&"number"===n.type?{type:"number",value:p.NM(r.value+n.value,12)}:{type:"text",value:(0,_.Zxt)((0,A.j4)(r).concat((0,A.j4)(n)))};case"-":if(Se(e.lhs,r,e.op),Se(e.rhs,n,e.op),"number"===r.type&&"number"===n.type)return{type:"number",value:p.NM(r.value-n.value,12)}}return{type:"undefined"}}case B.bG.Multiplicative:{let[r,n]=yield*(0,A.LD)([Ie(e.lhs,t),Ie(e.rhs,t)]);if(Se(e.lhs,r,e.op),Se(e.rhs,n,e.op),"undefined"===r.type&&"undefined"===n.type)return{type:"number",value:0};switch("undefined"===r.type&&"number"===n.type?r={type:"number",value:0}:"undefined"===n.type&&"number"===r.type&&(n={type:"number",value:0}),e.op){case"*":if("number"===r.type&&"number"===n.type)return{type:"number",value:p.NM(r.value*n.value,12)};break;case"/":if("number"===r.type&&"number"===n.type)return 0===n.value?{type:"undefined"}:{type:"number",value:p.NM(r.value/n.value,12)};break;case"%":if("number"===r.type&&"number"===n.type)return{type:"number",value:r.value%n.value}}return{type:"undefined"}}case B.bG.Exponentiation:{const[r,n]=yield*(0,A.LD)([Ie(e.lhs,t),Ie(e.rhs,t)]);switch(Se(e.lhs,r,e.op),Se(e.rhs,n,e.op),e.op){case"^":if("number"===r.type&&"number"===n.type)return{type:"number",value:p.NM(r.value**n.value,12)}}return{type:"undefined"}}case B.bG.Unary:{const r=yield*Ie(e.expression,t),n=e.op;switch(n){case"-":if("number"!==r.type)throw new B.WV({type:B.FY.UnaryMinusOnNonNumber,node:e.expression,expressionType:r.type});return{type:"number",value:-r.value};case"!":case"not":return{type:"checkbox",value:!(0,A.vh)(r)};default:return(0,b.t1)(n)}}case B.bG.Call:{const r=yield*Ie(e.expression,t);if("function"!==r.type)throw new B.WV({type:B.FY.CannotCallNonFunction,node:e,calleeType:r.type});const n=r.function,a=(0,A.P2)(n),i=void 0!==r.boundTarget?[r.boundTarget,...e.arguments]:e.arguments;if(i.length<a)throw new B.WV({type:B.FY.FunctionCallTooFewArguments,node:e,libraryFunction:n,numArguments:i.length});const s=yield*(0,A.LD)(i.map(((r,o)=>function*(e,t,r,n,o){const a=(0,A.J3)(n,r);if(void 0===a)throw new B.WV({type:B.FY.FunctionCallUnexpectedArgument,node:e,argument:t,libraryFunction:n,parameterIndex:r});if(!Array.isArray(a.type)&&"expression"===a.type.type)return t;const i=yield*Ie(t,o);if(!(0,A.mB)(i,a.type)){if(Array.isArray(a.type)?a.type.some((e=>"checkbox"===e.type)):"checkbox"===a.type.type)return{type:"checkbox",value:(0,A.vh)(i)};if(Array.isArray(a.type)?a.type.some((e=>"text"===e.type)):"text"===(0,A.B8)(a.type).type)return"array"===i.type&&(Array.isArray(a.type)?a.type.some((e=>"array"===e.type)):"array"===a.type.type)?{type:"array",values:i.values.map((e=>({type:"text",value:(0,A.j4)(e)})))}:"array"===i.type&&0===i.values.length?{type:"text",value:[[""]]}:{type:"text",value:(0,A.j4)(i)};if(!k.zq.includes(n.name))throw new B.WV({type:B.FY.FunctionCallArgumentWrongType,node:e,argument:t,libraryFunction:n,parameterIndex:r,argumentType:i.type})}return i}(e,r,o,n,t))));try{return yield*n.eval(s,t)}catch(o){throw new B.WV({type:B.FY.LibraryFunctionExecutionError,node:e,libraryFunction:n,error:o})}}case B.bG.UnifiedFunctionProperty:if(ce.hasOwnProperty(e.name))return{type:"function",function:ce[e.name],boundTarget:e.expression};throw new B.WV({type:B.FY.UnifiedFunctionPropertyNotFound,node:e});case B.bG.MemberBlockProperty:{const r=yield*Ie(e.expression,t);if("undefined"===r.type)return{type:"undefined"};if("block"!==r.type)throw new B.WV({type:B.FY.AccessingPropertyOnNonBlock,node:e,expressionValue:r});const n=(yield{recordPointers:[r.value]}).getRecordModel(r.value);if(void 0===n)throw new B.WV({type:B.FY.MissingDataDependencyBlock,node:e,blockPointer:r.value});if(void 0===e.propertyToken.collection)return(0,A.SQ)(n,e.propertyToken.property);const o=yield*(0,x.co)(n);if(!o)throw new B.WV({type:B.FY.MissingDataDependencyBlock,node:e,blockPointer:n.pointer});const a=(0,A.SR)(e.propertyToken.property);if(!(0,y.qo)(e.propertyToken.collection,o))throw new B.WV({type:B.FY.MemberPropertyMismatchCollection,node:e,blockCollection:o});const i=(yield{recordPointers:[o]}).getRecordModel(o),s=null==i?void 0:i.getNormalizedSchema(),u=null==s?void 0:s[a];if(void 0===i||void 0===u||void 0===s)throw new B.WV({type:B.FY.MissingPropertyOnSchemaForMemberProperty,node:e});return yield*Re({block:n,property:a,parentCollectionModel:i,schema:s,propertySchema:u,oldContext:t})}case B.bG.RecoveryNode:throw new B.WV({type:B.FY.UnexpectedRecoveryNode,recovery:e});default:(0,b.t1)(e)}}async function Ne(e,t,r){try{t.formulaTimeoutTimestampMs=t.formulaTimeoutTimestampMs??Date.now()+Ce;const r=Ie(e,t);let n=r.next();for(;!n.done;){const e=t.handleDataRequest(n.value);n=r.next((0,m.tI)(e)?await e:e)}return{value:n.value}}catch(n){if(n instanceof B.WV){const e=n.info;return r&&(0,A.w7)(e)?{error:{...e,node:(0,T.tE)(e.node,r)}}:{error:e}}return{error:{type:B.FY.UnexpectedError,error:(0,d.tg)(n)}}}}function Re(e){let{block:t,property:r,parentCollectionModel:d,schema:m,propertySchema:y,oldContext:v}=e;return function*(){if("rollup"===y.type){const n=`${t.id}:${r}`;if(v.visitedProperties.has(n))throw new B.WV({type:B.FY.CycleDetected});const o=new Set(v.visitedProperties);o.add(n);const a=(0,i.XU)({resultCache:v.resultCache,blockId:t.id,property:r});if(void 0!==a)return a;const c={...v,visitedProperties:o,depth:v.depth+1};if(y.aggregation&&"show_unique"!==y.aggregation){var e;const n=yield*(0,x._z)(r,m),{relation_property:o}=y;if(null==n||!n.targetCollectionPointer||!o)return{type:"undefined"};const a=(0,s.rq)(null===(e=t.getProperties())||void 0===e?void 0:e[o]);if(!a)return{type:"undefined"};const l=yield*(0,x.co)(t);if(!l)return{type:"undefined"};const{getRecordModel:d}=yield{recordPointers:[n.targetCollectionPointer,t.pointer,...a],collectionBlockProperties:[{blockPointers:[t.pointer],collectionPointer:l.pointer,schema:m,property:r}]},p={error:null},f=(0,u.O0)({property:r,schema:m,block:t,getRecordModel:d,collectionRequestContext:{...c,userId:void 0},formula2Error:p});if(null!==p.error)throw p.error;if(void 0===f)return{type:"undefined"};const g=function(e){if(void 0===e.value)return{type:"undefined"};switch(e.type){case"text":return{type:"text",value:(0,_.TPx)(e.value)};case"number":return{type:"number",value:e.value};case"date":return{type:"date",value:e.value}}}(f);return(0,i.j1)({resultCache:c.resultCache,blockId:t.id,property:r,value:g}),g}{var T;const e=yield*(0,x._z)(r,m),{relation_property:n,target_property:o}=y;if(void 0===e||void 0===n||void 0===o)return{type:"undefined"};const{relationPropertySchema:a,targetCollectionSchema:u,targetCollectionModel:d}=e,f=(0,s.rq)(null===(T=t.getProperties())||void 0===T?void 0:T[n]),g=yield*(0,x.Ec)(f,a),_=yield*(0,A.LD)(g.flatMap((e=>{if(void 0===e)return[];const t=u[o];if(void 0===t)return[];const r={kind:k.yp.ThisRow,value:{type:"block",value:e.pointer}};return c.values=[r],[Re({block:e,property:o,parentCollectionModel:d,schema:u,propertySchema:t,oldContext:c})]}))),b=(0,A.Yw)({type:"array",values:_});if("show_unique"===y.aggregation){const{getRecordModel:e}=yield{recordPointers:[t.pointer,...f]},n=(0,i.XU)({resultCache:v.resultCache,blockId:t.id,property:r});if(void 0!==n)return n;const o={type:"array",values:p.mN(b.values,(t=>(0,l.QT)({result:t,getRecordModel:e,userTimeZone:c.userTimeZone,intl:c.intl})))};return(0,i.j1)({resultCache:c.resultCache,blockId:t.id,property:r,value:o}),o}const h={type:"array",values:b.values};return(0,i.j1)({resultCache:c.resultCache,blockId:t.id,property:r,value:h}),h}}if("formula"===y.type){const e=`${t.id}:${r}`;if(v.visitedProperties.has(e))throw new B.WV({type:B.FY.CycleDetected});const o=new Set(v.visitedProperties);if("v2"===y.version){o.add(e);const n=(0,i.XU)({resultCache:v.resultCache,blockId:t.id,property:r});if(void 0!==n)return n}const a={...v,visitedProperties:o,depth:v.depth+1},s=yield*(0,x.co)(t);if(!s)return{type:"undefined"};const{getRecordModel:u}=yield{collectionBlockProperties:[{blockPointers:[t.pointer],collectionPointer:s.pointer,schema:m,property:r}]};if(void 0!==y.version){var M;const e=null===(M=y.formula2)||void 0===M?void 0:M.code;if(!e)return{type:"undefined"};const o=(0,i.XU)({resultCache:a.resultCache,blockId:t.id,property:r});if(void 0!==o)return o;const s=Ze(e);if(n.x.isFail(s))return{type:"undefined"};const u={kind:k.yp.ThisRow,value:{type:"block",value:t.pointer}};a.values=[u];const l=yield*Ie(s.value,a);return(0,i.j1)({resultCache:a.resultCache,blockId:t.id,property:r,value:l}),l}{const e={error:null},n=(0,h.AH)({schema:m,property:r,block:t,getRecordModel:u,collectionRequestContext:{userId:void 0,userTimeZone:a.userTimeZone,intl:a.intl,depth:a.depth,resultCache:a.resultCache,logFormulaTimeoutFn:a.logFormulaTimeoutFn,visitedProperties:a.visitedProperties},formula2Error:e});if(null!==e.error)throw e.error;switch(typeof n){case"string":return{type:"text",value:(0,_.TPx)(n)};case"number":return{type:"number",value:n};case"boolean":return{type:"checkbox",value:n};case"object":return{type:"date",value:n};case"undefined":default:return{type:"undefined"}}}}else if(k.WG.includes(y.type))return(0,A.SQ)(t,y.type);const w=(0,s.fp)(t,r,d),Z=yield{recordPointers:[d.pointer,...null!=w&&w.eoipPointer?[w.eoipPointer]:[]]},C=(0,s.wS)(t,r,Z.getRecordModel);if("status"===y.type){const e=(0,s.ZG)(C,y);return void 0===e?{type:"undefined"}:{type:"text",value:(0,_.TPx)(e)}}if("checkbox"===y.type&&void 0===C)return{type:"checkbox",value:!1};if(("relation"===y.type||"multi_select"===y.type)&&void 0===C)return{type:"array",values:[]};if("person"===y.type&&void 0===C){const e=t.getCreatedByPointer();return"created_by"===y.default&&void 0!==e&&(0,o.Wk)(e)?{type:"array",values:[{type:"person",value:e}]}:{type:"array",values:[]}}if(void 0===C)return{type:"undefined"};switch(y.type){case"title":case"text":return{type:"text",value:C};case"url":case"email":case"phone_number":return{type:"text",value:(0,_.TPx)((0,s.zB)(C))};case"select":{const e=(0,s.Sj)(C,y.options??[]);return void 0===e?{type:"undefined"}:{type:"text",value:(0,_.TPx)(e)}}case"multi_select":return{type:"array",values:(0,s.uP)(C,y.options??[]).map((e=>({type:"text",value:(0,_.TPx)(e)})))};case"checkbox":return{type:"checkbox",value:(0,s.Ml)(C)};case"date":{const e=(0,s.Gl)(C);return void 0===e?{type:"undefined"}:{type:"date",value:e}}case"person":return{type:"array",values:(0,s.DW)({textValue:C,propertySchema:y,blockCreatorPointer:void 0}).map((e=>({type:"person",value:e})))};case"relation":return{type:"array",values:(yield*(0,x.Ec)((0,s.rq)(C),y)).map((e=>({type:"block",value:{table:f.iU,id:e.id,spaceId:e.getSpaceId()}})))};case"number":const e=(0,s.VY)(C);return"number"==typeof e?{type:"number",value:e}:{type:"undefined"};case"auto_increment_id":{var S;const{getRecordModel:e}=yield{recordPointers:[t.pointer]},r=yield*(0,x.co)(t);if(!r)return{type:"undefined"};const n=null===(S=e((0,c.We)({spaceId:t.getSpaceId(),parentTable:g.v,parentId:r.id})))||void 0===S?void 0:S.getRecordKey(),o=(0,s.VY)(C),i=(0,a.wf)(n,o);return void 0!==i?{type:"text",value:[[i]]}:{type:"undefined"}}case"file":return{type:"array",values:(0,s.g)(C).map((e=>{let{url:t}=e;return{type:"text",value:(0,_.TPx)(t)}}))};case"created_time":case"last_edited_time":case"created_by":case"last_edited_by":case"last_visited_time":case"button":case"location":case"verification":return{type:"undefined"};default:(0,b.t1)(y)}}()}var Ue=r(91905);const Pe={slice:"substring",start:"dateStart",end:"dateEnd"},De={unaryMinus:"-",unaryPlus:"+",larger:">",largerEq:">=",smaller:"<",smallerEq:"<="},Oe=["add","subtract","multiply","divide","pow","mod","equal","unequal","larger","largerEq","smaller","smallerEq"];function Ee(e,t,r){return n=e,o=Fe(e,t,r),"conditional"===n.type||"function"===n.type&&(Oe.includes(n.name)||["unaryPlus","unaryMinus"].includes(n.name))||"operator"===n.type&&void 0!==n.args&&n.args.length>=2?[["("],...o,[")"]]:o;var n,o}function Fe(e,t,r){switch(e.type){case"conditional":return[["if("],...Ee(e.condition,t,r),[", "],...Ee(e.true,t,r),[", "],...Ee(e.false,t,r),[")"]];case"constant":switch(e.value_type){case"number":return(0,_.TPx)(`${e.value}`);case"string":const t=e.value.replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/\t/g,"\\t");return(0,_.TPx)(`"${t}"`);case"boolean":return(0,_.TPx)(""+(e.value?"true":"false"));default:throw new Error(`unexpected constant type: ${e.value_type}`)}case"function":if(Oe.includes(e.name)){const n="equal"===e.name?"==":"concat"===e.name?"+":Ue.Gn[e.name].operator;return[...Ee(e.args[0],t,r),[` ${n} `],...Ee(e.args[1],t,r)]}switch(e.name){case"unaryMinus":return[["-"],...Ee(e.args[0],t,r)];case"unaryPlus":return[["toNumber("],...Fe(e.args[0],t,r),[")"]];case"month":return[["month("],...Fe(e.args[0],t,r),[") - 1"]];case"day":return[["day("],...Fe(e.args[0],t,r),[") % 7"]];case"concat":return[["("],...(0,R.Z)((e.args??[]).map((e=>Fe(e,t,r))),(()=>[[" + "]])).flat(),[")"]];case"join":return[["join("],["["],...(0,R.Z)((e.args??[]).slice(1).map((e=>Fe(e,t,r))),(()=>[[", "]])).flat(),["]"],[", "],...Fe(e.args[0],t,r),[")"]];default:if("id"===e.name)return(0,_.TPx)("id()");const n=Pe[e.name]??e.name;if(void 0===ce[n])throw new Error(`unexpected formula: ${n}`);return[[`${n}(`],...(0,R.Z)((e.args??[]).map((e=>Fe(e,t,r))),(()=>[[", "]])).flat(),[")"]]}case"operator":var n,o;if(1===(null===(n=e.args)||void 0===n?void 0:n.length))switch(e.operator){case"not":return[["!"],...Ee(e.args[0],t,r)];case"+":return[["toNumber("],...Fe(e.args[0],t,r),[")"]];default:return[[`${e.operator}`],...Ee(e.args[0],t,r)]}if(2===(null===(o=e.args)||void 0===o?void 0:o.length))return[...Ee(e.args[0],t,r),[` ${e.operator} `],...Ee(e.args[1],t,r)];switch(e.operator){case"?":return[...Ee(e.args[0],t,r),[" ? "],...Ee(e.args[0],t,r),[" : "],...Ee(e.args[0],t,r)];default:throw new Error(`unhandled operator: ${e.operator}`)}case"symbol":switch(e.name){case"pi":return(0,_.TPx)("pi()");case"e":return(0,_.TPx)("e()");case"true":return(0,_.TPx)("true");case"false":return(0,_.TPx)("false");default:throw new Error(`unexpected constant: ${e.name}`)}case"property":{const n=r[e.id];if(void 0===n)return[[e.name]];const o=(0,_.YCD)((0,_.kbv)({collection:t,property:e.id,name:n.name}));switch(n.type){case"person":case"relation":return[["join(map("],o,[', format(current)), ", ")']];case"rollup":return n.aggregation&&"show_unique"!==n.aggregation?[o]:[["join(map("],o,[', format(current)), ",")']];case"file":case"multi_select":return[["join("],o,[', ", ")']];case"auto_increment_id":return[o,[".split('-').last().toNumber()"]];default:return[o]}}case"error":throw new Error("unexpected formula error node")}}var Be=r(21114);function*Ae(e,t){const{valueTypes:r}=t;switch(e.kind){case B.bG.Number:return{node:{...e,type:{type:"number"},valueTypes:r},errors:[]};case B.bG.String:return{node:{...e,type:{type:"text"},valueTypes:r},errors:[]};case B.bG.Boolean:return{node:{...e,type:{type:"checkbox"},valueTypes:r},errors:[]};case B.bG.NotionToken:{const i=e.token;switch(i.type){case k.Oy.Checkbox:return{node:{...e,type:{type:"checkbox"},valueTypes:r},errors:[]};case k.Oy.BlockProperty:{var n;const a=null===(n=r.find((e=>e.kind===k.yp.ThisRow)))||void 0===n?void 0:n.type;if(void 0===a)return{node:{...e,type:{type:"unknown"},valueTypes:r},errors:[{type:B.h4.ThisRowTypeNotFound,node:e}]};if("block"!==a.type||void 0===a.collection)return{node:{...e,type:{type:"unknown"},valueTypes:r},errors:[{type:B.h4.ThisRowNotBlockWithCollection,node:e}]};if(void 0===i.collection)return{node:{...e,type:k.dy[i.property],valueTypes:r},errors:[]};const s=(yield{recordPointers:[a.collection]}).getRecordModel(a.collection),u=null==s?void 0:s.getNormalizedSchema(),l=(0,A.SR)(i.property),c=null==u?void 0:u[l];var o;if(void 0===c||void 0===u)return{node:{...e,type:{type:"unknown"},valueTypes:r},errors:[{type:B.h4.MissingPropertyOnThisRow,node:e,property:(null===(o=t.formulaPropertyNames)||void 0===o?void 0:o[l])??l}]};const d=yield*(0,A.IP)(l,u,c);return{node:{...e,type:d??{type:"unknown"},valueTypes:r},errors:void 0===d?[{type:B.h4.MemberPropertyTypeInvalid,node:e,token:i,propertyName:c.name,propertyType:c.type}]:[]}}case k.Oy.ContextValue:{var a;const t=null===(a=r.find((e=>e.kind===k.yp.ContextValue&&e.id===(0,A.Kv)(i.valueId))))||void 0===a?void 0:a.type;return void 0===t?{node:{...e,type:{type:"unknown"},valueTypes:r},errors:[{type:B.h4.MissingContextVariable,node:e,token:i}]}:{node:{...e,type:t,valueTypes:r},errors:[]}}case k.Oy.Block:{const t={table:f.iU,id:i.blockId,spaceId:i.spaceId},n=(yield{recordPointers:[t]}).getRecordModel(t);if(void 0===n)return{node:{...e,type:{type:"unknown"},valueTypes:r},errors:[{type:B.h4.MissingBlock,node:e,token:i}]};const o=n.getCollectionPointer();return{node:{...e,type:{type:"block",collection:o},valueTypes:r},errors:[]}}case k.Oy.Person:return{node:{...e,type:{type:"person"},valueTypes:r},errors:[]};case k.Oy.Date:return{node:{...e,type:{type:"date"},valueTypes:r},errors:[]};default:return(0,b.t1)(i)}}case B.bG.Array:{const n=yield*(0,A.LD)(e.elements.map((e=>Ae(e,t))));let o={type:"unknown"};if(n.length>0){o=n[0].node.type;for(let e=1;e<n.length;e++)if(!(0,D.Jy)(o,n[e].node.type)){o={type:"unknown"};break}}return{node:{...e,elements:n.map((e=>e.node)),type:{type:"array",of:o},valueTypes:r},errors:n.flatMap((e=>e.errors))}}case B.bG.Identifier:{var i;const t=null===(i=r.find((t=>t.kind===k.yp.Binding&&t.id===e.text)))||void 0===i?void 0:i.type;if(void 0!==t)return{node:{...e,type:t,valueTypes:r},errors:[]};const n=ce.hasOwnProperty(e.text)?ce[e.text]:void 0;if(void 0===n){const t=[{type:B.h4.UndefinedIdentifier,node:e}];return Pe.hasOwnProperty(e.text)?t.push({type:B.h4.RenamedIdentifier,node:e,identifier:e.text,renamedTo:Pe[e.text]}):De.hasOwnProperty(e.text)&&t.push({type:B.h4.RemovedFunction,node:e,functionName:e.text,alternative:De[e.text]}),{node:{...e,type:{type:"unknown"},valueTypes:r},errors:t}}return{node:{...e,type:{type:"function",libraryFunction:n,calledFromUnifiedFunctionProperty:!1},valueTypes:r},errors:[]}}case B.bG.Conditional:{const n=yield*Ae(e.condition,t),o=yield*Ae(e.expIfTrue,t),a=void 0!==e.expIfFalse?yield*Ae(e.expIfFalse,t):void 0;let i={type:"unknown"};return void 0===o.node.type||void 0!==(null==a?void 0:a.node.type)&&!(0,D.Jy)(o.node.type,a.node.type)||(i=o.node.type),{node:{...e,condition:n.node,expIfTrue:o.node,expIfFalse:null==a?void 0:a.node,type:i,valueTypes:r},errors:[...n.errors,...o.errors??[],...(null==a?void 0:a.errors)??[]]}}case B.bG.LogicalOr:case B.bG.LogicalAnd:const u=yield*(0,A.LD)(e.elements.map((e=>Ae(e,t)))),l=u.flatMap((e=>e.errors));return{node:{...e,elements:u.map((e=>e.node)),type:{type:"checkbox"},valueTypes:r},errors:l};case B.bG.Equality:case B.bG.Relational:{const n=yield*Ae(e.lhs,t),o=yield*Ae(e.rhs,t),a=[...n.errors,...o.errors];if(e.kind===B.bG.Relational){const t=n.node.type,r=o.node.type;"unknown"===t.type||"unknown"===r.type||t.type===r.type&&["number","date","text","checkbox"].includes(t.type)||a.push({type:B.h4.CannotRelativelyCompareTypes,node:e,lhsType:t,rhsType:r})}return{node:{...e,lhs:n.node,rhs:o.node,type:{type:"checkbox"},valueTypes:r},errors:a}}case B.bG.Additive:case B.bG.Multiplicative:case B.bG.Exponentiation:{const n=yield*Ae(e.lhs,t),o=yield*Ae(e.rhs,t),a=[...n.errors,...o.errors];if("+"===e.op)return"number"===n.node.type.type&&"number"===o.node.type.type?{node:{...e,lhs:n.node,rhs:o.node,type:{type:"number"},valueTypes:r},errors:a}:{node:{...e,lhs:n.node,rhs:o.node,type:["unknown","number"].includes(n.node.type.type)&&["unknown","number"].includes(o.node.type.type??"unknown")?{type:"unknown"}:{type:"text"},valueTypes:r},errors:a};const i=function(e,t,r){const n=t.type,o=(null==r?void 0:r.type)??{type:"unknown"};if(!["unknown","number"].includes(n.type)||!["unknown","number"].includes(o.type))return{type:B.h4.CannotDoMathOnType,node:e,lhsType:n,rhsType:o}}(e,n.node,o.node);return void 0!==i&&a.push(i),{node:{...e,lhs:n.node,rhs:o.node,type:{type:"number"},valueTypes:r},errors:a}}case B.bG.Unary:{const n=yield*Ae(e.expression,t),o=[...n.errors];let a;switch(e.op){case"-":["number","unknown"].includes(n.node.type.type)||o.push({type:B.h4.UnaryMinusOnNonNumber,node:e,expression:n.node}),a={type:"number"};break;case"!":case"not":a={type:"checkbox"};break;default:(0,b.t1)(e)}return{node:{...e,expression:n.node,type:a,valueTypes:r},errors:o}}case B.bG.Call:{const{node:n,errors:o}=yield*Ae(e.expression,t),a=[...o];if(n.kind===B.bG.Identifier&&("lets"===n.text||"let"===n.text)){const o=[];let i=[...r];for(let r=0;r<e.arguments.length-1;r+=2){const n=e.arguments[r],s=e.arguments[r+1];if(n.kind!==B.bG.Identifier){a.push({type:B.h4.IdentifierExpected,node:n});continue}const{node:u,errors:l}=yield*Ae(s,{...t,valueTypes:i});o[r+1]=u,a.push(...l);const c=n.text;i=[{kind:k.yp.Binding,id:c,name:c,type:u.type},...i],o[r]={...n,type:u.type,valueTypes:i}}const s=e.arguments[e.arguments.length-1];if(!s)return{node:{...e,expression:n,arguments:o,type:{type:"unknown"},valueTypes:i},errors:a};const{node:u,errors:l}=yield*Ae(s,{...t,valueTypes:i});return o[e.arguments.length-1]=u,a.push(...l),{node:{...e,expression:n,arguments:o,type:u.type,valueTypes:i},errors:a}}["function","unknown"].includes(n.type.type)||a.push({type:B.h4.CallingNotFunction,node:e,callee:n});const i="function"===n.type.type?n.type.libraryFunction:void 0,s="function"===n.type.type?n.type.boundTargetType:void 0;if(void 0!==i){const t=(0,A.P2)(i),r=e.arguments.length+(void 0!==s?1:0);r<t&&("function"===n.type.type&&n.type.calledFromUnifiedFunctionProperty?a.push({type:B.h4.FunctionCallTooFewArguments,node:e,libraryFunction:i,numArguments:r-1,minNumParameters:t-1}):a.push({type:B.h4.FunctionCallTooFewArguments,node:e,libraryFunction:i,numArguments:r,minNumParameters:t}))}const u=[],l=[];void 0!==s&&l.push(s);for(let c=0;c<e.arguments.length;c++){const n=e.arguments[c],o=void 0!==s?c+1:c,d=void 0!==i?(0,A.J3)(i,o):void 0;if(void 0!==i&&void 0===d&&a.push({type:B.h4.FunctionCallUnexpectedArgument,node:e,libraryFunction:i,argument:n,parameterIndex:o}),void 0!==(null==d?void 0:d.augmentScope)){const e=u.map((e=>(null==e?void 0:e.type)??{type:"unknown"})),o=d.augmentScope(void 0!==s?[s,...e]:e),{node:i,errors:p}=yield*Ae(n,{...t,valueTypes:[...Object.entries(o).map((e=>{let[t,r]=e;return{kind:k.yp.Binding,id:t,type:r}})),...r]});u[c]=i,l.push(i.type),a.push(...p)}else{const{node:r,errors:o}=yield*Ae(n,t);if(u[c]=r,void 0!==i&&void 0!==d){const t="id"===i.name&&"block"===r.type.type||(0,D.xK)(r.type,d.type);"boolean"==typeof t?(l.push(r.type),t||a.push({type:B.h4.FunctionCallArgumentWrongType,node:e,libraryFunction:i,argument:r,expectedParameter:d})):l.push(t)}else l.push(r.type);a.push(...o)}}return{node:{...e,expression:n,arguments:u,type:void 0!==i?"function"==typeof i.returnType?i.returnType(l):i.returnType:{type:"unknown"},valueTypes:r},errors:a}}case B.bG.UnifiedFunctionProperty:{const n=ce.hasOwnProperty(e.name)?ce[e.name]:void 0,{node:o,errors:a}=yield*Ae(e.expression,t),i=[...a];let s={type:"unknown"};if(void 0===n)i.push({type:B.h4.UnifiedFunctionCannotFindFunction,node:e,name:e.name});else{const t=(0,A.J3)(n,0);if(void 0===t)i.push({type:B.h4.UnifiedFunctionNoArguments,node:e,libraryFunction:n});else{const r="id"===n.name&&"block"===o.type.type||(0,D.xK)(o.type,t.type);"boolean"==typeof r?(s=o.type,r||i.push({type:B.h4.UnifiedFunctionTargetWrongType,node:e,expression:o,libraryFunction:n})):s=r}}return{node:{...e,expression:o,type:void 0!==n?{type:"function",boundTargetType:s,libraryFunction:n,calledFromUnifiedFunctionProperty:!0}:{type:"unknown"},valueTypes:r},errors:i}}case B.bG.MemberBlockProperty:{const{node:n,errors:o}=yield*Ae(e.expression,t),a=[...o];let i;if("block"===n.type.type)if(void 0===e.propertyToken.collection)i=k.dy[e.propertyToken.property];else{const r=(yield{recordPointers:[e.propertyToken.collection]}).getRecordModel(e.propertyToken.collection),o=null==r?void 0:r.getNormalizedSchema(),u=(0,A.SR)(e.propertyToken.property),l=null==o?void 0:o[u];var s;if(void 0===l||void 0===o)a.push({type:B.h4.MemberPropertyMissing,node:e,property:(null===(s=t.formulaPropertyNames)||void 0===s?void 0:s[u])??u});else if(void 0!==n.type.collection)if((0,y.qo)(e.propertyToken.collection,n.type.collection)){const t=yield*(0,A.IP)(u,o,l);i=t,void 0===t&&a.push({type:B.h4.MemberPropertyTypeInvalid,node:e,token:e.propertyToken,propertyName:l.name,propertyType:l.type})}else a.push({type:B.h4.MemberPropertyMismatchCollection,node:e,token:e.propertyToken})}else"unknown"!==n.type.type&&a.push({type:B.h4.MemberPropertyTargetNotBlock,node:e,expression:n});return{node:{...e,expression:n,type:i??{type:"unknown"},valueTypes:r},errors:a}}case B.bG.RecoveryNode:return{node:{...e,type:{type:"unknown"},valueTypes:r},errors:[]};default:(0,b.t1)(e)}}async function Ve(e,t,r){const n=Ae(e,t);let o=n.next();for(;!o.done;){const e=t.handleDataRequest(o.value);o=n.next((0,m.tI)(e)?await e:e)}if(!r)return o.value;const a=o.value.errors.map((e=>{const t=(0,Be.sB)(e);return{...e,node:(0,T.tE)(t,r)}}));return{node:o.value.node,errors:a}}function Le(e,t,r){const n=Ae(e,t);let o=n.next();for(;!o.done;){const e=t.handleDataRequest(o.value);o=n.next(e)}if(!r)return o.value;const a=o.value.errors.map((e=>{const t=(0,Be.sB)(e);return{...e,node:(0,T.tE)(t,r)}}));return{node:o.value.node,errors:a}}var qe=r(58573);const je=["title","text","url","email","phone_number","checkbox","person","created_by","last_edited_by","file","select","multi_select","status","number","date","created_time","last_edited_time","last_visited_time","formula","relation","rollup","auto_increment_id"];async function $e(e,t,r){const n=[],o=new Set;if(void 0!==e){const a=t.handleDataRequest({recordPointers:[e]}),i=((0,m.tI)(a)?await a:a).getRecordModel(e),s=null==i?void 0:i.getNormalizedSchema();if(s)for(const[u,l]of Object.entries(s))void 0!==(null==l?void 0:l.type)&&k.WG.includes(null==l?void 0:l.type)&&o.add(l.type),u!==t.sourceProperty&&null!=l&&l.name&&je.includes(null==l?void 0:l.type)&&Ge(r,l.name)&&n.push({kind:k.x2.Token,name:l.name,token:{type:k.Oy.BlockProperty,property:(0,A.Uw)(u),collection:e}})}for(const a of Object.values(k.vz)){if(o.has(a))continue;const e=(0,A.Ve)(a);(""===r||Ge(r,e))&&n.push({kind:k.x2.Token,token:{type:k.Oy.BlockProperty,property:a,collection:void 0},name:e})}return n}function Ge(e,t){return""===e||(0,qe.C6)(e,t)}async function Ye(e){const{prefix:t,context:r,receiverType:n,includeDeprecatedCompletions:o,dotMemberExpression:a}=e,i=[],s=[],u=[],l=new Set;if(void 0===n){var c;r.valueTypes.forEach((e=>{if(e.kind===k.yp.Binding){const r=e.id;!l.has(r)&&t!==e.id&&Ge(t,e.id)&&(i.push({kind:k.x2.Binding,text:r,type:e.type}),l.add(r))}}));const e=null===(c=r.valueTypes.find((e=>e.kind===k.yp.ThisRow)))||void 0===c?void 0:c.type;"block"===(null==e?void 0:e.type)&&void 0!==e.collection&&s.push(...await $e(e.collection,r,t)),r.valueTypes.forEach((e=>{if(e.kind===k.yp.ContextValue&&Ge(t,e.name)){const t=(0,A.ij)(e.id);s.push({kind:k.x2.Token,token:{type:k.Oy.ContextValue,valueId:t}})}}))}else"block"===n.type&&s.push(...await $e(n.collection,r,t));for(const m in ce)if(!l.has(m)&&Ge(t,m)&&(o||!m.startsWith("_"))&&("toNumber"!==m||null==n||!n.type||!de.includes(n.type))&&(!a||!pe.includes(m))){const e=ce[m];if(void 0!==n){var d,p;const t=(null===(d=e.parameters)||void 0===d||null===(d=d.expected)||void 0===d||null===(d=d[0])||void 0===d?void 0:d.type)??(null===(p=e.parameters)||void 0===p||null===(p=p.varargs)||void 0===p||null===(p=p[0])||void 0===p?void 0:p.type);if(void 0===t||!(0,D.qT)(n,t))continue}u.push({kind:k.x2.LibraryFunction,libraryFunction:e}),l.add(m)}return[...(0,qe.ZP)(t,i,(e=>e.text)),...(0,qe.ZP)(t,s,(e=>e.name??"")),...(0,qe.ZP)(t,[],(e=>e.builtin)),...(0,qe.ZP)(t,u,(e=>e.libraryFunction.name))]}function ze(e,t){const r=[...e].reverse().find((e=>e.kind===B.bG.Call));if((null==r?void 0:r.kind)===B.bG.Call){let e=-1;if(t>r.lParenOffset&&(void 0===r.rParenOffset||t<=r.rParenOffset))for(e=0;e<r.commaOffsets.length&&!(r.commaOffsets[e]>t);e++);return{expression:r.expression,parameterIndex:e}}}const We={[k.x2.Binding]:0,[k.x2.Token]:1,[k.x2.Builtin]:2,[k.x2.LibraryFunction]:3};async function He(e){var t,r;const{formula:o,inputPosition:a,context:i,includeDeprecatedCompletions:s}=e,[u,l]=(0,T.dJ)(o),c=(0,T.Eh)(l,a);let d=u.substring(0,c);const p=d[d.length-1],m=/[\s.]/.test(p);m&&(d=`${d}_`);const y=ye(),f=fe(y).tokenize(d).tokens,g=ve(y);g.input=f;const v=Te(g.expression());if(n.x.isFail(v))return{value:void 0};const _=await Ve(v.value,i,l),{node:b}=_,h=f[f.length-1];let x=!1,M=f;void 0!==h&&(0,me.ol)(h,y.IdentifierName)&&(M=[...M],M.pop(),x=!0);const w=g.computeContentAssist("expression",M),Z=x?h.image.substring(0,h.image.length-(m?1:0)):void 0,C=(0,A.cQ)(b,c),S={inputPosition:a,mappedPosition:c,nodePath:C,callParameter:ze(C,c)},I=[],N=ze(C,c),R={handleDataRequest:i.handleDataRequest,valueTypes:b.valueTypes,sourceProperty:i.sourceProperty};let U;for(let n=1;n<=5;n++){const e=(0,A.cQ)(b,c-n);if(U=e[e.length-1],void 0!==U)break}(null===(t=U)||void 0===t?void 0:t.kind)===B.bG.RecoveryNode&&(U=void 0);const P=void 0!==U&&0===C.length,D=!U||U.kind===B.bG.Unary||U.kind===B.bG.Equality||U.kind===B.bG.Identifier,O=!U||U.kind===B.bG.Equality||U.kind===B.bG.Identifier;for(const n of w){var E,F,V,L,q,j,$,G,Y;if(n.nextTokenType===y.IdentifierName){const e="dotMemberExpression"===n.ruleStack[n.ruleStack.length-1];if(e){const t=M[M.length-1];if(!(0,me.ol)(t,y.Dot))return{value:void 0};const r=C[C.length-1];if(void 0!==r&&(r.kind===B.bG.UnifiedFunctionProperty||r.kind===B.bG.MemberBlockProperty)){const t=r.expression;S.completionsInfo={type:"member dot receiver",prefix:Z,receiverNode:t};const n=await Ye({prefix:Z??"",context:R,receiverType:t.type,includeDeprecatedCompletions:s,dotMemberExpression:e});I.push(...n)}}else{S.completionsInfo={type:"free identifier",prefix:Z};const t=await Ye({prefix:Z??"",context:R,includeDeprecatedCompletions:s,dotMemberExpression:e});if(I.push(...t),N&&(N.expression.kind===B.bG.UnifiedFunctionProperty&&0===N.parameterIndex||N.expression.kind===B.bG.Identifier&&1===N.parameterIndex)){const e=N.expression.kind===B.bG.UnifiedFunctionProperty?N.expression.name:N.expression.text,t=ce[e];if(((null==t?void 0:t.parameters)===ue||(null==t?void 0:t.parameters)===le)&&Ge(Z??"",k.GV)&&Z!==k.GV&&Z!==`${k.GV}.`){var z,W;const e=N.expression,t="function"===e.type.type&&"array"===(null===(z=e.type.boundTargetType)||void 0===z?void 0:z.type)&&(null===(W=e.type.boundTargetType)||void 0===W?void 0:W.of)||{type:"unknown"};I.push({kind:k.x2.Binding,text:k.GV,type:t}),I.push({kind:k.x2.Binding,text:k.WY,type:{type:"number"}})}}}}else if(n.nextTokenType===y.AdditionOperator&&P&&"text"===(null===(E=U)||void 0===E?void 0:E.type.type)){const e=Ke(["+"],Z??"");I.push(...e)}else if(n.nextTokenType===y.AdditionOperator&&P&&"number"===(null===(F=U)||void 0===F?void 0:F.type.type)){const e=Ke(["+","-"],Z??"");I.push(...e)}else if(n.nextTokenType===y.MultiplicationOperator&&P&&"number"===(null===(V=U)||void 0===V?void 0:V.type.type)){const e=Ke(["*","/"],Z??"");I.push(...e)}else if(n.nextTokenType!==y.RelationalOperator||!P||"number"!==(null===(L=U)||void 0===L?void 0:L.type.type)&&"text"!==(null===(q=U)||void 0===q?void 0:q.type.type)&&"date"!==(null===(j=U)||void 0===j?void 0:j.type.type)){if(n.nextTokenType===y.EqualityOperator&&P&&null!==($=U)&&void 0!==$&&$.type.type&&"unknown"!==(null===(G=U)||void 0===G?void 0:G.type.type)){const e=Ke(["==","!="],Z??"");I.push(...e)}else if(n.nextTokenType===y.BooleanLiteral&&D){const e=Ke(["true","false"],Z??"");I.push(...e)}else if(n.nextTokenType===y.And&&P&&"checkbox"===(null===(Y=U)||void 0===Y?void 0:Y.type.type)){const e=Ke(["and","or"],Z??"");I.push(...e)}else if(n.nextTokenType===y.UnaryOperator&&O){const e=Ke(["not"],Z??"");I.push(...e)}}else{const e=Ke([">",">=","<","<="],Z??"");I.push(...e)}}const H=null===(r=f[f.length-1])||void 0===r?void 0:r.tokenType;if(0===I.length&&H===y.IdentifierName){const e=f.slice(-4).reverse(),t=[];for(let n=0;n<e.length;n++){var K;if((null===(K=e[n])||void 0===K?void 0:K.tokenType)!==y.IdentifierName)break;const r=x?e[n].image.substring(0,e[n].image.length-(m?1:0)):void 0;void 0!==r&&(0===n?t.push(r):t.push(r+t[n-1]))}let r=[];for(let n=1;n<t.length;n++){const e=t[n],o=await Ye({prefix:e.trim(),context:R,includeDeprecatedCompletions:s,dotMemberExpression:!1});if(o.length>0){r=o.map((t=>({...t,overridePrefixLength:e.length+n})))}}I.push(...r)}return S.completions=I.sort(((e,t)=>{const r=e.kind,n=t.kind;return We[r]-We[n]})),{value:S}}function Ke(e,t){return e.filter((e=>Ge(t,e))).map((e=>({kind:k.x2.Builtin,builtin:e})))}function Je(e,t){const r=Ze(e);return n.x.isFail(r)?r:function(e,t,r){try{t.formulaTimeoutTimestampMs=t.formulaTimeoutTimestampMs??Date.now()+Ce;const r=Ie(e,t);let n=r.next();for(;!n.done;){const e=t.handleDataRequest(n.value);n=r.next(e)}return{value:n.value}}catch(n){if(n instanceof B.WV){const e=n.info;return r&&(0,A.w7)(e)?{error:{...e,node:(0,T.tE)(e.node,r)}}:{error:e}}return{error:{type:B.FY.UnexpectedError,error:(0,d.tg)(n)}}}}(r.value,t)}async function Xe(e,t){const r=Ze(e);return n.x.isFail(r)?r:await Ne(r.value,t)}async function Qe(e,t){const r=Ze(e);if(n.x.isFail(r))return{value:{parseErrors:[r.error]}};const o=await Ve(r.value,t),{node:a,errors:i}=o;return{value:{type:a.type,typeErrors:i}}}function et(e){const t=Ze(e);return n.x.isFail(t)?[]:(0,A.JT)(t.value)}},47218:(e,t,r)=>{r.d(t,{$E:()=>o,FY:()=>s,Mu:()=>i,WV:()=>c,bG:()=>n,h4:()=>d,no:()=>l,sj:()=>a});r(21703);let n=function(e){return e.Number="number",e.String="string",e.Boolean="boolean",e.Array="array",e.Identifier="identifier",e.NotionToken="notionToken",e.Conditional="conditional",e.LogicalOr="logicalOr",e.LogicalAnd="logicalAnd",e.Equality="equality",e.Relational="relational",e.Additive="additive",e.Multiplicative="multiplicative",e.Exponentiation="exponentiation",e.Unary="unary",e.Call="call",e.UnifiedFunctionProperty="unifiedFunctionProperty",e.MemberBlockProperty="memberProperty",e.RecoveryNode="recovery",e}({}),o=function(e){return e.InvalidCharacter="InvalidCharacter",e.UnclosedStringLiteral="UnclosedStringLiteral",e.UnclosedComment="UnclosedComment",e.TokenExpected="TokenExpected",e.StringLiteralContainsToken="StringLiteralContainsToken",e.ExpressionExpected="ExpressionExpected",e.PropertyTokenOrFunctionExpected="PropertyTokenOrFunctionExpected",e.EndOfInputExpected="EndOfInputExpected",e.UnexpectedError="UnexpectedError",e}({}),a=function(e){return e[e.DateInvalidDurationUnit=0]="DateInvalidDurationUnit",e[e.TryingToGetIdWithoutThisRow=1]="TryingToGetIdWithoutThisRow",e[e.LetBindingNameNotIdentifier=2]="LetBindingNameNotIdentifier",e[e.NotEnoughArguments=3]="NotEnoughArguments",e[e.UserNotFound=4]="UserNotFound",e}({});class i extends Error{constructor(e){super(),this.info=void 0,this.info=e}}let s=function(e){return e.MissingThisRow="MissingThisRow",e.MissingSchemaPropertyOnThisRow="MissingSchemaPropertyOnThisRow",e.ThisRowBlockPropertyMismatchCollection="ThisRowBlockPropertyMismatchCollection",e.MissingContextVariable="MissingContextVariableEval",e.IdentifierNotFound="IdentifierNotFound",e.CannotRelativelyCompareTypes="CannotRelativelyCompareTypesEval",e.CannotDoMathOnType="CannotDoMathOnTypeEval",e.CannotCallNonFunction="CannotCallNonFunction",e.UnifiedFunctionPropertyNotFound="UnifiedFunctionPropertyNotFound",e.LibraryFunctionExecutionError="LibraryFunctionExecutionError",e.FunctionCallTooFewArguments="FunctionCallTooFewArgumentsEval",e.FunctionCallUnexpectedArgument="FunctionCallUnexpectedArgumentEval",e.FunctionCallArgumentWrongType="FunctionCallArgumentWrongTypeEval",e.AccessingPropertyOnNonBlock="AccessingPropertyOnNonBlock",e.MissingDataDependencyBlock="MissingDataDependencyBlock",e.MissingDataDependencyPerson="MissingDataDependencyPerson",e.MemberPropertyMismatchCollection="MemberPropertyMismatchCollectionEval",e.MissingPropertyOnSchemaForMemberProperty="MissingPropertyOnSchemaForMemberProperty",e.UnaryMinusOnNonNumber="UnaryMinusOnNonNumberEval",e.UnexpectedRecoveryNode="UnexpectedRecoveryNode",e.UnexpectedError="UnexpectedEvalError",e.DepthExceeded="DepthExceeded",e.CycleDetected="CycleDetected",e.MaxEvaluationTimeExceeded="MaxEvaluationTimeExceeded",e}({});const u=[s.CycleDetected,s.DepthExceeded,s.MaxEvaluationTimeExceeded];function l(e){return u.includes(e.type)}class c extends Error{constructor(e){super(),this.info=void 0,this.info=e}}let d=function(e){return e.ThisRowTypeNotFound="ThisRowTypeNotFound",e.ThisRowNotBlockWithCollection="ThisRowNotBlockWithCollection",e.MissingPropertyOnThisRow="MissingPropertyOnThisRow",e.MissingContextVariable="MissingContextVariable",e.MissingBlock="MissingBlock",e.CallingNotFunction="CallingNotFunction",e.FunctionCallTooFewArguments="FunctionCallTooFewArguments",e.FunctionCallUnexpectedArgument="FunctionCallUnexpectedArgument",e.FunctionCallArgumentWrongType="FunctionCallArgumentWrongType",e.MemberPropertyMismatchCollection="MemberPropertyMismatchCollection",e.MemberPropertyMissing="MemberPropertyMissing",e.MemberPropertyTargetNotBlock="MemberPropertyTargetNotBlock",e.MemberPropertyTypeInvalid="MemberPropertyTypeInvalid",e.UndefinedIdentifier="UndefinedIdentifier",e.UnifiedFunctionCannotFindFunction="UnifiedFunctionCannotFindFunction",e.UnifiedFunctionNoArguments="UnifiedFunctionNoArguments",e.UnifiedFunctionTargetWrongType="UnifiedFunctionTargetWrongType",e.CannotRelativelyCompareTypes="CannotRelativelyCompareTypes",e.CannotDoMathOnType="CannotDoMathOnType",e.UnaryMinusOnNonNumber="UnaryMinusOnNonNumber",e.IdentifierExpected="IdentifierExpected",e.FunctionCallExpected="FunctionCallExpected",e.RenamedIdentifier="RenamedIdentifier",e.RemovedFunction="RemovedFunction",e}({})},78106:(e,t,r)=>{r.d(t,{B8:()=>D,DF:()=>oe,Fl:()=>j,IP:()=>E,J3:()=>L,JT:()=>ye,Jr:()=>A,Kd:()=>z,Kl:()=>ke,Kv:()=>Y,LD:()=>re,MY:()=>W,Ny:()=>xe,P2:()=>V,PX:()=>ae,Qc:()=>H,SQ:()=>F,SR:()=>X,SU:()=>ie,UQ:()=>_e,Uw:()=>J,Ve:()=>pe,Wo:()=>ve,Yw:()=>N,_u:()=>ce,aL:()=>O,bw:()=>R,cQ:()=>Te,dh:()=>$,fQ:()=>de,hV:()=>se,hp:()=>le,i0:()=>Q,ij:()=>G,j4:()=>U,lc:()=>ee,mB:()=>P,vh:()=>B,vx:()=>q,w7:()=>ue,wf:()=>K,yf:()=>te});r(57658),r(21703),r(52262),r(24506);var n=r(67266),o=r.n(n),a=r(2032),i=r(99036),s=r(80951),u=r(43690),l=r(10070),c=r(16691),d=r(40506),p=r(53877),m=r(42875),y=r(76725),f=r(72126),g=r(59753),v=(r(4615),r(45953)),_=r(606),b=r(82883),h=r(149),k=(r(21202),r(6287)),x=r(19889),T=r(70203),M=r(97880),w=r(84116),Z=r(21027),C=r(51849),S=r(47218),I=r(60709);function N(e){return{type:"array",values:e.values.flatMap((e=>"array"===e.type?N(e).values:[e]))}}function R(e){const{result:t,currentPropertyValue:r,action:n,propertySchema:o}=e;switch(t.type){case"text":if(!i.t(o))return U(t);const e=(o.options??[]).map((e=>e.value)),a=(0,T.QaF)(t.value);if(!e.includes(a))return;return(0,s.O2)(a);case"number":case"date":case"person":case"block":case"undefined":case"function":return U(t);case"checkbox":return(0,s._I)(t.value);case"array":{const e=N(t),a=e.values[0],u=i.en(o)?o.limit:void 0;if(!a)return;if("person"===a.type){const t=(0,s.DW)({textValue:r,propertySchema:o,blockCreatorPointer:void 0}),a=f.oA(e.values.map((e=>"person"===e.type?e.value:void 0)));let i;return"replace"===n?i=a:"append"===n?i=f.mN([...t,...a],c.dn):"remove"===n?i=t.filter((e=>!a.find((t=>(0,c.dn)(e)===(0,c.dn)(t))))):(0,M.t1)(n),(0,s.C1)((0,M.$K)(u)?i.slice(0,u):i)}if("block"===a.type){const t=(0,s.rq)(r),o=f.oA(e.values.map((e=>"block"===e.type?e.value:void 0)));let a;return"replace"===n?a=o:"append"===n?a=f.mN([...t,...o],c.dn):"remove"===n?a=t.filter((e=>!o.find((t=>(0,c.dn)(e)===(0,c.dn)(t))))):(0,M.t1)(n),(0,s.ow)((0,M.$K)(u)?a.slice(0,u):a)}if("text"===a.type){if(!i.t(o))return;const t=(o.options??[]).map((e=>e.value)),a=(0,s.uP)(r,o.options||[]),u=f.oA(e.values.map((e=>"text"===e.type?(0,T.QaF)(e.value):void 0))).filter((e=>t.includes(e)));if("replace"===n)return(0,s.zq)(u);if("append"===n)return(0,s.zq)(f.jj([...a,...u]));if("remove"===n)return(0,s.zq)(a.filter((e=>!u.find((t=>e===t)))));(0,M.t1)(n)}break}default:(0,M.t1)(t)}}function U(e){switch(e.type){case"text":return e.value;case"number":return(0,s.eP)(e.value);case"checkbox":return(0,T.TPx)(e.value?"true":"false");case"date":return(0,s.d7)(e.value);case"person":return(0,s.C1)([e.value]);case"block":return(0,s.ow)([e.value]);case"array":return(0,T.Zxt)((0,y.Z)(e.values,(()=>({type:"text",value:(0,T.TPx)(",")}))).flatMap((e=>U(e))));case"function":case"undefined":return[];default:(0,M.t1)(e)}}function P(e,t){if(Array.isArray(t))return t.some((t=>P(e,t)));switch(t.type){case"text":case"number":case"checkbox":case"date":case"person":return e.type===t.type;case"array":return"array"===e.type&&e.values.every((e=>P(e,t.of)));case"unknown":case"expression":return!0;case"block":return"block"===e.type;case"select":case"function":return!1;default:(0,M.t1)(t)}}function D(e){return"array"!==e.type?e:D(e.of)}function O(e){return"array"!==e.type?e:O(e.of)}function*E(e,t,r){switch(r.type){case"title":case"text":case"email":case"phone_number":case"url":case"select":case"auto_increment_id":case"status":return{type:"text"};case"number":return{type:"number"};case"checkbox":return{type:"checkbox"};case"file":case"multi_select":return{type:"array",of:{type:"text"}};case"date":case"created_time":case"last_edited_time":case"last_visited_time":return{type:"date"};case"person":return{type:"array",of:{type:"person"}};case"created_by":case"last_edited_by":return{type:"person"};case"relation":return{type:"array",of:{type:"block",collection:r.collection_pointer}};case"rollup":if(void 0!==r.aggregation&&"show_unique"!==r.aggregation){return{type:(0,a.W6)((0,a.gu)(r.aggregation))}}const o=yield*(0,Z._z)(e,t);if(void 0===o)return{type:"text"};const{targetCollectionSchema:i,targetProperty:s,targetPropertySchema:u}=o,l=yield*E(s,i,u);if(void 0===l)return;return{type:"array",of:D(l)};case"formula":switch(r.version){case void 0:var n;return void 0!==(null===(n=r.formula)||void 0===n?void 0:n.result_type)?{type:r.formula.result_type}:{type:"unknown"};case"v2":return r.formula2?r.formula2.result_type:{type:"unknown"};default:return(0,M.t1)(r.version)}case"button":case"location":case"verification":return;default:(0,M.t1)(r)}}function F(e,t){const r=e.getProperties();switch(t){case w.vz.Title:const n=null==r?void 0:r.title;return void 0!==n?{type:"text",value:n}:{type:"undefined"};case w.vz.CreatedBy:const o=e.getCreatedByPointer();return o?{type:"person",value:o}:{type:"undefined"};case w.vz.CreatedTime:const a=e.getCreatedTime();return void 0!==a?{type:"date",value:(0,p.CQ)(a,(0,m.r)())}:{type:"undefined"};case w.vz.LastEditedBy:const i=e.getLastEditedByPointer();return i?{type:"person",value:i}:{type:"undefined"};case w.vz.LastEditedTime:const s=e.getLastEditedTime();return void 0!==s?{type:"date",value:(0,p.CQ)(s,(0,m.r)())}:{type:"undefined"};default:(0,M.t1)(t)}}function B(e){return!("checkbox"===e.type&&!1===e.value||"undefined"===e.type||"number"===e.type&&0===e.value||"array"===e.type&&0===e.values.length||"text"===e.type&&!e.value.some((e=>(0,T.J1x)(e)>0)))}function*A(e,t,r){if("text"===e.type&&"text"===t.type){const[n,o]=yield*re([ae(e.value,r),ae(t.value,r)]);return n===o}if("number"===e.type&&"number"===t.type)return e.value===t.value;if("checkbox"===e.type&&"checkbox"===t.type)return e.value===t.value;if("date"===e.type&&"date"===t.type)return(0,d.AP)(e.value,t.value);if("person"===e.type&&"person"===t.type)return(0,_.qo)(e.value,t.value);if("array"===e.type&&"array"===t.type){if(e.values.length!==t.values.length)return!1;return(yield*re(e.values.map(((e,n)=>A(e,t.values[n],r))))).every((e=>!0===e))}return"block"===e.type&&"block"===t.type?e.value.id===t.value.id:"undefined"===e.type&&"undefined"===t.type}function V(e){var t;return(null===(t=e.parameters)||void 0===t||null===(t=t.expected)||void 0===t?void 0:t.filter((e=>!0!==e.optional)).length)??0}function L(e,t){var r,n;const o=null===(r=e.parameters)||void 0===r||null===(r=r.expected)||void 0===r?void 0:r[t];if(void 0!==o)return o;const a=null===(n=e.parameters)||void 0===n?void 0:n.varargs;if(void 0!==a&&a.length>0){var i;return a[(t-((null===(i=e.parameters)||void 0===i||null===(i=i.expected)||void 0===i?void 0:i.length)??0))%a.length]}}function q(e,t){return e.find((e=>e.kind===w.yp.ContextValue&&e.id===t))}function j(e,t){return e.kind===w.yp.Binding?t.kind===w.yp.Binding&&e.name===t.name:e.kind===w.yp.ContextValue?t.kind===w.yp.ContextValue&&e.name===t.name:e.kind===w.yp.ThisRow?t.kind===w.yp.ThisRow:void(0,M.t1)(e)}function $(e,t){return e.find((e=>e.kind===w.yp.ContextValue&&e.id===t))}function G(e){return encodeURIComponent(e)}function Y(e){return decodeURIComponent(e)}function z(e){return o()(e)}function W(e){return JSON.parse(e)}function H(e){return e}function K(e){return e}function J(e){return encodeURIComponent(e)}function X(e){return decodeURIComponent(e)}function Q(e){return e}function ee(e){return t=>({getRecordModel:e})}function te(e,t,r,n,o,a,i){return s=>{var l;const c=[],d=v.Ak.create();if(null===(l=s.recordPointers)||void 0===l||l.forEach((t=>{const r=e(t);void 0!==r?d.setModel(t,r):c.push(t)})),0===c.length&&(void 0===s.collectionBlockProperties||0===s.collectionBlockProperties.length))return{getRecordModel:g.om.fromRecordMap(d)};const p=void 0!==s.collectionBlockProperties?function(e){const t=[];for(const r of e){const e=t.find((e=>(0,_.qo)(e.collectionPointer,r.collectionPointer)&&e.property===r.property));void 0!==e?e.blockPointers.push(...r.blockPointers):t.push({...r,blockPointers:[...r.blockPointers]})}return t}(s.collectionBlockProperties):[],m=a??new Map,y=i??new Map;return new Promise((async(e,a)=>{try{await Promise.all([...c.map((async e=>{const r=await t(e);d.setModel(e,r)})),...p.map((async e=>{let{blockPointers:a,collectionPointer:i,schema:s,property:l}=e;const c=await(0,u.HF)({collectionPointer:i,schema:s,property:l,loadRecordModel:t,dependencyCache:m}),p=(await Promise.all(f.mN(a,(e=>e.id)).map((e=>t(e))))).filter(M.$K);await(0,u.c_)({blocks:p,dependencies:c,recordMap:d,loadRecordModel:t,formulaTimeoutMs:r,logFormulaTimeoutFn:n,checkCancellation:o,dependencyCache:m,resultCache:y})}))]),e({getRecordModel:g.om.fromRecordMap(d)})}catch(i){a(i)}}))}}function*re(e){const t=[],r=[...e];let n,o=r.length;for(;o>0;){const e=[];for(let a=0;a<r.length;a++){const i=r[a];if(void 0===i)continue;const s=void 0!==n?i.next(n):i.next();s.done?(r[a]=void 0,o--,t[a]=s.value):e.push(s.value)}e.length>0&&(n=yield{recordPointers:f.mN(e.flatMap((e=>e.recordPointers??[])),(e=>`${e.table}:${e.id}`)),collectionBlockProperties:e.flatMap((e=>e.collectionBlockProperties??[]))})}return t}function ne(e){switch(e.type){case"date":return`date|${e.start_date}`;case"daterange":return`daterange|${e.start_date}|${e.end_date}`;case"datetime":return`datetime|${e.start_date}|${e.start_time}|${e.time_zone}`;case"datetimerange":return`datetimerange|${e.start_date}|${e.start_time}|${e.end_date}|${e.end_time}|${e.time_zone}`}}function oe(e){const[t,...r]=e.split("|");switch(t){case"date":return{type:"date",start_date:r[0]};case"daterange":return{type:"daterange",start_date:r[0],end_date:r[1]};case"datetime":return{type:"datetime",start_date:r[0],start_time:r[1],time_zone:r[2]};case"datetimerange":return{type:"datetimerange",start_date:r[0],start_time:r[1],end_date:r[2],end_time:r[3],time_zone:r[4]};default:throw new Error("Invalid serialized date")}}function*ae(e,t){const r=yield{recordPointers:(0,s.sJ)(e)};return(0,b.X)({textValue:e,getRecordModel:r.getRecordModel,userTimeZone:t.userTimeZone,deterministic:!0,disableAnnotationPrefix:!0,intl:t.intl})}function ie(e,t,r){const n=(0,p.uO)(e,r),o=(0,p.uO)(t,r);return n>o?1:n<o?-1:0}function se(e,t){const r=h.x.unwrap(e);switch(typeof t){case"string":return"text"===r.type&&(0,T.QaF)(r.value)===t;case"number":return"number"===r.type&&Math.abs(r.value-t)<1e-6;case"boolean":return"checkbox"===r.type&&r.value===t;case"undefined":return"undefined"===r.type;case"object":return"date"===r.type&&(0,d.AP)(r.value,t)}}function ue(e){return"node"in e}function le(e){return ue(e)&&e.type!==S.FY.FunctionCallArgumentWrongType&&e.type!==S.FY.FunctionCallUnexpectedArgument}function ce(e){const t=(0,T.sP4)(e);if(void 0!==t){const e=G((0,T.vmO)(t).id);return`${w.Eb}${w.Oy.ContextValue}:${e}${w.Av}`}const r=(0,T.jRb)(e);if(void 0!==r){const e=(0,T.pxR)(r),t=J(e.property);return void 0!==e.collection?`${w.Eb}${w.Oy.BlockProperty}:${t}:${e.collection.id}:${e.collection.spaceId}${w.Av}`:`${w.Eb}${w.Oy.BlockProperty}:${t}${w.Av}`}const n=(0,T.K9C)(e);if(void 0!==n){const e=(0,T.zyO)(n);return o=e,`${w.Eb}${w.Oy.Date}:${ne(o)}${w.Av}`}var o;const a=(0,T.V8Y)(e);if(void 0!==a){const e=(0,T.yrl)(a);if(void 0!==e)return`${w.Eb}${w.Oy.Block}:${e.id}${void 0!==e.spaceId?`:${e.spaceId}`:""}${w.Av}`}const i=(0,T.hH9)(e);if(void 0!==i){const e=(0,T.zEN)(i);return`${w.Eb}${w.Oy.Person}:${e}${w.Av}`}}function de(e,t,r,n){const o=(0,T.sP4)(e);if(void 0!==o){return(0,T.vmO)(o).id}const a=(0,T.jRb)(e);if(void 0!==a){var i;const e=(0,T.pxR)(a);if(!e.collection)return`prop("${pe(`${e.property}`)}")`;const r=t(e.collection);if(!r)return;const n=null===(i=r.getSchema()[e.property])||void 0===i?void 0:i.name;if(!n)return;return`prop("${n}")`}const s=(0,T.K9C)(e);if(void 0!==s){return ne((0,T.zyO)(s))}const u=(0,T.V8Y)(e);if(void 0!==u){const e=(0,T.yrl)(u);if(void 0===e)return;const o=t(e);if(!o)return;return o.getRenderTitle({getRecordModel:t,intl:r,userTimeZone:n})}const l=(0,T.hH9)(e);if(void 0!==l){const e=t({id:(0,T.zEN)(l),table:x.KJ});if(!e)return;return e.getFullName(r)}}function pe(e){switch(e){case w.vz.CreatedTime:return"Created Time";case w.vz.LastEditedTime:return"Last Edited Time";case w.vz.LastEditedBy:return"Last Edited By";case w.vz.CreatedBy:return"Created By";case w.vz.Title:return"Page Name";default:(0,M.t1)(e)}}function me(e){switch(e){case"Created Time":return w.vz.CreatedTime;case"Last Edited Time":return w.vz.LastEditedTime;case"Last Edited By":return w.vz.LastEditedBy;case"Created By":return w.vz.CreatedBy;case"Page Name":return w.vz.Title;default:return}}function ye(e){switch(e.kind){case S.bG.Conditional:return fe([e.condition,e.expIfFalse,e.expIfTrue]);case S.bG.Equality:case S.bG.Relational:case S.bG.Additive:case S.bG.Multiplicative:case S.bG.Exponentiation:return fe([e.lhs,e.rhs]);case S.bG.Call:return fe([...e.arguments,e.expression]);case S.bG.Unary:case S.bG.UnifiedFunctionProperty:return fe([e.expression]);case S.bG.LogicalAnd:case S.bG.LogicalOr:case S.bG.Array:return fe(e.elements);case S.bG.NotionToken:return e.token.type===w.Oy.BlockProperty?ge(e.token.property):[];case S.bG.MemberBlockProperty:return ge(e.propertyToken.property);case S.bG.RecoveryNode:case S.bG.String:case S.bG.Boolean:case S.bG.Identifier:case S.bG.Number:return[];default:(0,M.t1)(e)}}function fe(e){const t=f.oA(e).map((e=>ye(e)));return f.G0(...t)}function ge(e){return w.WG.includes(e)?[]:[X(e)]}function ve(e,t,r){const n=[];return e.forEach((e=>{const o=(0,T.hDy)(e),a=(0,T.jRb)(o);if(!a)return void n.push(e);const i=(0,T.pxR)(a);if(!i.collection)return void n.push(e);const s=t({requester:r,requested:i.collection});if((null==s?void 0:s.table)!==k.v)return void n.push(e);const u=i.property,l=(0,T.YCD)((0,T.kbv)({collection:s,property:u}));n.push(l)})),n}function _e(e,t,r){let[n,o]=be({textValue:e,sourceCollection:t,getRecordModel:r,removeProp:!1}),a=0;for(;o&&a<100;)[n,o]=be({textValue:n,sourceCollection:t,getRecordModel:r,removeProp:!1}),a++;const[i,s]=be({textValue:n,sourceCollection:t,getRecordModel:r,removeProp:!0});return i}function be(e){const{textValue:t,sourceCollection:r,getRecordModel:n,removeProp:o}=e,a=(0,I.l)(),[i,s]=a.processFormulaInput(t),[u]=a.parseFormulaInputToCst(i),c=a.convertFormulaCSTToAST(u);if(h.x.isFail(c))return[t,!1];const d={type:"block",collection:r.pointer},p={valueTypes:[{kind:w.yp.ThisRow,type:d}],handleDataRequest:ee(n)},{node:m}=a.addTypesToFormulaAST(c.value,p);let y=!1;const f=[];let g=0;for(const v of t){if(y){f.push(v);continue}if(!T.QJH(v)){g+=1,f.push(v);continue}const e=v[0];let t,a=0;for(;null!==(t=w.gD.exec(e));){if(y)continue;t.index>a&&f.push([e.substring(a,t.index)]);const i=Te(m,(0,C.Eh)(s,g+t.index-1)),u=i[i.length-1];let c=r.pointer;if(u){const e=D(u.type);"block"===e.type&&e.collection&&(c=e.collection)}const d=t[2],p=n(c);if(!p){f.push([d]);continue}const v=(0,l.W0)(d,p.getNormalizedSchema());if(v){const[e,t]=v,r=(0,T.YCD)((0,T.kbv)({collection:p.pointer,property:e,name:t.name}));y=!0,f.push(r)}else{const e=me(d);e?(f.push((0,T.YCD)((0,T.kbv)({collection:void 0,property:e,name:d}))),y=!0):o?f.push([d]):f.push([`prop("${d}")`])}a=w.gD.lastIndex}a<e.length&&f.push([e.substring(a)]),g+=e.length}return[f,y]}function he(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const n=[];for(const o of e)if(void 0!==o){const e=ke(o,t,r);e.length>0&&n.push.apply(n,e)}return n}function ke(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(n.has(e))return[];if(n.add(e),!t&&e.kind!==S.bG.Call&&"function"===(null==e||null===(r=e.type)||void 0===r?void 0:r.type))return[{type:S.h4.FunctionCallExpected,node:e,functionName:e.type.libraryFunction.name}];let o=[];switch(e.kind){case S.bG.Conditional:o=he([e.condition,e.expIfTrue,e.expIfFalse],!1,n);break;case S.bG.Equality:case S.bG.Relational:case S.bG.Additive:case S.bG.Multiplicative:case S.bG.Exponentiation:o=he([e.lhs,e.rhs],!1,n);break;case S.bG.Call:const r=e.expression;r.kind===S.bG.Identifier&&("let"===r.text||"lets"===r.text)?(o=[...he(e.arguments.slice(0,e.arguments.length-1),!0,n),...he([e.expression],!0,n)],e.arguments.length>2&&e.arguments.length%3==0&&o.push(...he([e.arguments.at(-1)],t,n))):o=[...he(e.arguments,!1,n),...he([e.expression],!0,n)];break;case S.bG.Unary:case S.bG.UnifiedFunctionProperty:o=he([e.expression],!1,n);break;case S.bG.LogicalAnd:case S.bG.LogicalOr:case S.bG.Array:o=he(e.elements,!1);break;case S.bG.RecoveryNode:case S.bG.String:case S.bG.Boolean:case S.bG.Identifier:case S.bG.NotionToken:case S.bG.MemberBlockProperty:case S.bG.Number:o=[];break;default:(0,M.t1)(e)}return o}function xe(e){const t=new Map;return e.forEach((e=>{const r=(0,T.hDy)(e),n=(0,T.jRb)(r);if(!n)return;const o=(0,T.pxR)(n);o.name&&(t[o.property]=o.name)})),t}function Te(e,t){if(t<e.startOffset||t>e.endOffset+1)return[];const r=e.kind;switch(r){case S.bG.Number:case S.bG.String:case S.bG.Boolean:case S.bG.NotionToken:case S.bG.Identifier:case S.bG.RecoveryNode:return[e];case S.bG.Conditional:{const r=Te(e.condition,t);if(r.length>0)return[e,...r];const n=Te(e.expIfTrue,t);if(n.length>0)return[e,...n];if(void 0!==e.expIfFalse){const r=Te(e.expIfFalse,t);if(r.length>0)return[e,...r]}return[e]}case S.bG.Equality:case S.bG.Relational:case S.bG.Additive:case S.bG.Multiplicative:case S.bG.Exponentiation:{const r=Te(e.lhs,t);if(r.length>0)return[e,...r];const n=Te(e.rhs,t);return n.length>0?[e,...n]:[e]}case S.bG.LogicalOr:case S.bG.LogicalAnd:case S.bG.Array:for(const r of e.elements){const n=Te(r,t);if(n.length>0)return[e,...n]}return[e];case S.bG.Unary:{const r=Te(e.expression,t);return r.length>0?[e,...r]:[e]}case S.bG.Call:{const r=Te(e.expression,t);if(r.length>0)return[e,...r];for(const n of e.arguments){const r=Te(n,t);if(r.length>0)return[e,...r]}return[e]}case S.bG.UnifiedFunctionProperty:case S.bG.MemberBlockProperty:const n=Te(e.expression,t);return n.length>0?[e,...n]:[e];default:(0,M.t1)(r)}}},60709:(e,t,r)=>{let n;function o(){return n??=r(93685)}r.d(t,{l:()=>o})},84682:(e,t,r)=>{r.d(t,{AH:()=>v,HK:()=>x,Qs:()=>b,y4:()=>M});r(21703);var n=r(66897),o=r(35011),a=r(80951),i=r(34299),s=r(63087),u=r(40506),l=r(7057),c=r(53877),d=r(72126),p=r(59753),m=r(70203),y=r(97880),f=r(47218),g=r(91905);function v(e){const{schema:t,property:r,block:n,getRecordModel:o,collectionRequestContext:a,formula2Error:i}=function(e){return"getRecordModel"in e?e:{...e,block:p.kk.fromBlock(e.block),getRecordModel:p.om.fromGetRecordValueFn(e.getRecordValue)}}(e),{depth:u,resultCache:l,visitedProperties:c,formulaTimeoutTimestampMs:m,logFormulaTimeoutFn:y}=a,g=t[r];if(!g||"formula"!==g.type||!g.formula)return;const{formula:v}=g;if(u>7)return void(null===(null==i?void 0:i.error)&&(i.error=new f.WV({type:f.FY.DepthExceeded})));const b=`${n.id}:${r}`;if(c.has(b))return void(null===(null==i?void 0:i.error)&&(i.error=new f.WV({type:f.FY.CycleDetected})));const h=function(e){var t;let{resultCache:r,blockId:n,property:o}=e;return null===(t=r.get(n))||void 0===t?void 0:t.get(`${o}:${s.H.FormulaValue}`)}({resultCache:l,blockId:n.id,property:r});if(void 0!==h)return h;if(m&&Date.now()>m)return y&&y(),void(null===(null==i?void 0:i.error)&&(i.error=new f.WV({type:f.FY.MaxEvaluationTimeExceeded})));const k=new Set(c);k.add(b);try{let e=_({formula:v,schema:t,block:n,getRecordModel:o,collectionRequestContext:{...a,visitedProperties:k},formula2Error:i});if(d.hj(e)){if(!d.xV(e))return;e=d.NM(e,12)}return function(e){let{resultCache:t,blockId:r,property:n,value:o}=e;const a=t.get(r)??new Map;a.set(`${n}:${s.H.FormulaValue}`,o),t.set(r,a)}({resultCache:l,blockId:n.id,property:r,value:e}),e}catch(x){return void console.error(x)}}function _(e){const{formula:t,schema:r,block:n,getRecordModel:o,collectionRequestContext:a,formula2Error:i}=function(e){return"getRecordModel"in e?e:{...e,block:p.kk.fromBlock(e.block),getRecordModel:p.om.fromGetRecordValueFn(e.getRecordValue)}}(e),{userTimeZone:s,intl:u}=a;if("conditional"===t.type)return _({formula:t.condition,schema:r,block:n,getRecordModel:o,collectionRequestContext:a,formula2Error:i})?_({formula:t.true,schema:r,block:n,getRecordModel:o,collectionRequestContext:a,formula2Error:i}):_({formula:t.false,schema:r,block:n,getRecordModel:o,collectionRequestContext:a,formula2Error:i});if("constant"===t.type){const{value:e,value_type:r}=t;return"string"===r?e:"number"===r?parseFloat(e):"boolean"===r?!!JSON.parse(e):void 0}if("function"===t.type){const{args:e}=t,l=(e||[]).map((e=>_({formula:e,schema:r,block:n,getRecordModel:o,collectionRequestContext:a,formula2Error:i}))),c=g.uf(t.name),d=g.aV(t.name);return c?c.apply(l,s,u,n):d?d.apply(l,s,u,n):void 0}if("property"===t.type)return b({property:t.id,schema:r,block:n,getRecordModel:o,collectionRequestContext:a,formula2Error:i});if("operator"===t.type){const{args:e,name:l}=t,c=(e||[]).map((e=>_({formula:e,schema:r,block:n,getRecordModel:o,collectionRequestContext:a,formula2Error:i}))),d=g.aV(l);if(!d)return;return d.apply(c,s,u,n)}if("symbol"===t.type){const{name:e}=t;return e in g._G?g._G[e].value:void 0}}function b(e){const t=function(e){return"getRecordModel"in e?e:{...e,block:p.kk.fromBlock(e.block),getRecordModel:p.om.fromGetRecordValueFn(e.getRecordValue)}}(e),{property:r,schema:n}=t,o=n[r];if(o)return T[o.type](t)}function h(e){const{property:t,block:r}=e,n=a.wS(r,t)||[];return m.Jcv(n)}function k(e){const{property:t,block:r}=e,n=a.wS(r,t)||[];return a.zB(n)}function x(e){const{timestampType:t,block:r,userTimeZone:n}=e;if("created_time"===t){if(r.getCreatedTime())return c.CQ(r.getCreatedTime(),n)}else if("last_edited_time"===t){if(r.getLastEditedTime())return c.CQ(r.getLastEditedTime(),n)}else(0,y.t1)(t)}const T={title:h,text:h,url:k,email:k,phone_number:k,select:e=>{let{property:t,schema:r,block:n}=e;const o=a.wS(n,t)||[],i=r[t].options||[];return a.Sj(o,i)},multi_select:e=>{let{property:t,schema:r,block:n}=e;const o=a.wS(n,t)||[],i=r[t].options||[];return a.uP(o,i).join(", ")},status:e=>{let{property:t,schema:r,block:n}=e;const o=a.wS(n,t)||[],i=r[t];return a.ZG(o,i)},checkbox:e=>{let{property:t,block:r}=e;const n=a.wS(r,t)||[];return a.Ml(n)},date:e=>{let{property:t,block:r}=e;const n=a.wS(r,t)||[];return a.Gl(n)},person:e=>{let{property:t,block:r,getRecordModel:o,schema:i,collectionRequestContext:s}=e;const{intl:u}=s,l=a.wS(r,t)||[],c=i[t],d=p.kk.fromBlock(r);return a.DW({textValue:l,propertySchema:c,blockCreatorPointer:d.getCreatedByPointer()}).map((e=>(0,n.$4)(u,(0,n.Hl)({pointer:e,getRecordModel:o})))).join(", ")},relation:e=>{let{property:t,block:r,getRecordModel:n,schema:o}=e;const i=a.wS(r,t)||[],s=o[t];if(!s||"relation"!==s.type)return;return a.j$({relationValue:a.rq(i),propertySchema:s,getRecordModel:n}).map((e=>{const t=n(e);if(!t)return;const r=a.wS(t,"title");return r?m.Jcv(r):void 0})).join(", ")},rollup:e=>{const{property:t,schema:r}=e,n=r[t];if(!n||"rollup"!==n.type||!n.aggregation||"show_unique"===n.aggregation)return i.kJ(e);{const t=i.O0(e);if(void 0===t)return;if("text"===t.type)return t.value;if("number"===t.type)return t.value;if("date"===t.type)return t.value;(0,y.t1)(t)}},number:e=>{let{property:t,block:r}=e;const n=a.wS(r,t)||[];return a.VY(n)},file:e=>{let{property:t,block:r}=e;const n=a.wS(r,t)||[];return a.g(n).map((e=>{let{url:t}=e;return t})).join(", ")},formula:e=>{const{intl:t,userTimeZone:r,formulaTimeoutTimestampMs:n,depth:a,visitedProperties:i}=e.collectionRequestContext;return"v2"===e.schema[e.property].version?(0,o.py)({schema:e.schema,property:e.property,blockModel:e.block,getRecordModel:e.getRecordModel,intl:t,userTimeZone:r,depth:a+1,formulaTimeoutTimestampMs:n,visitedProperties:i,formula2Error:e.formula2Error,resultCache:e.collectionRequestContext.resultCache}):v({...e,collectionRequestContext:{...e.collectionRequestContext,depth:e.collectionRequestContext.depth+1}})},created_time:e=>{let{block:t,collectionRequestContext:r}=e;const{userTimeZone:n}=r,o=p.kk.fromBlock(t);if(o.getCreatedTime())return c.CQ(o.getCreatedTime(),n)},last_edited_time:e=>{let{block:t,collectionRequestContext:r}=e;const{userTimeZone:n}=r,o=p.kk.fromBlock(t);if(o.getLastEditedTime())return c.CQ(o.getLastEditedTime(),n)},created_by:e=>{let{block:t,getRecordModel:r,collectionRequestContext:o}=e;const{intl:a}=o,i=p.kk.fromBlock(t).getCreatedByPointer();if(i)return(0,n.$4)(a,(0,n.Hl)({pointer:i,getRecordModel:r}));const s=i&&r(i);return(0,n.$4)(a,s)},last_edited_by:e=>{let{block:t,getRecordModel:r,collectionRequestContext:o}=e;const{intl:a}=o,i=p.kk.fromBlock(t).getLastEditedByPointer();if(i)return(0,n.$4)(a,(0,n.Hl)({pointer:i,getRecordModel:r}))},button:()=>"",location:()=>"",last_visited_time:()=>"",auto_increment_id:e=>{let{property:t,block:r}=e;const n=a.wS(r,t)||[];return a.VY(n)},verification:()=>{}};function M(e){const{schema:t,property:r,collectionRequestContext:n}=e,{userTimeZone:o,intl:a}=n,i=b(e),s=t[r];if(!s)throw new Error("Property not found");if(d.hj(i)){if(!d.xV(i))return;return i.toString()}return"boolean"==typeof i?i.toString():u.U3(i)?"date"===s.type?(0,l.ZV)({value:i,userTimeZone:o,allowRelativeDates:!1,intl:a}):void 0:i}},18955:(e,t,r)=>{r.d(t,{EP:()=>d,as:()=>s,b$:()=>i,wo:()=>u,z6:()=>a});r(21703),r(57658);var n=r(2032),o=r(72126);r(91905);function a(e){return"title"===e.type||"relation"===e.type||"url"===e.type||"select"===e.type||"multi_select"===e.type||"person"===e.type||"file"===e.type||"email"===e.type||"phone_number"===e.type||"text"===e.type||"created_by"===e.type||"last_edited_by"===e.type?"text":"number"===e.type?"number":"created_time"===e.type||"last_edited_time"===e.type||"date"===e.type?"date":"checkbox"===e.type?"checkbox":"rollup"===e.type?e.aggregation&&"show_unique"!==e.aggregation?(0,n.W6)((0,n.gu)(e.aggregation)):"text":"formula"===e.type&&e.formula?"number"===e.formula.result_type?"number":"date"===e.formula.result_type?"date":"checkbox"===e.formula.result_type?"checkbox":"text":"text"}function i(e){if(!e)return[];if("conditional"===e.type)return o.G0(i(e.condition),i(e.true),i(e.false));if("function"===e.type||"operator"===e.type){const t=e.args||[];return o.G0(...t.map(i))}return"property"===e.type?[e.id]:[]}function s(e){if("conditional"===e.type)return{type:e.type,condition:s(e.condition),true:s(e.true),false:s(e.false),result_type:e.result_type};if("constant"===e.type)return{type:e.type,value:e.value,value_type:e.value_type,result_type:e.result_type};if("function"===e.type){const t=e.args||[];return{type:e.type,name:e.name,args:t.map(s),result_type:e.result_type}}if("operator"===e.type){const t=e.args||[];return{type:e.type,operator:e.operator,name:e.name,args:t.map(s),result_type:e.result_type}}if("symbol"===e.type)return{type:e.type,name:e.name,result_type:e.result_type};if("property"===e.type)return{type:e.type,id:e.id,name:e.name,result_type:e.result_type};if("error"===e.type)return{type:e.type,message:e.message,result_type:e.result_type,size:e.size};throw new Error("Invalid formula type.")}function u(e,t){const r=[];let n=null,o=!1,a=!1;const i=e=>null!==n&&r.push([n,e])&&(n=null);return e.split("").forEach(((e,t)=>{var r;"\\"===e?(a=!a,i(t)):'"'===e?(o=a?o:!o,a=!1,i(t)):(r=e,l.test(r)?(o||a||null!==n||(n=t),a=!1):i(t))})),i(e.length),r.find((e=>{let[r,n]=e;return t>=r&&t<=n}))}const l=/^[a-zA-Z][a-zA-Z0-9]*$/;const c={string:{pattern:/"(?:\\\\|\\"|[^\\"])*?"/,greedy:!0},operator:/[-+%^\*\/]|[!=]=|<=?|>=?|\b(?:or|and|not)\b/,number:/\b[0-9]+(\.[0-9]+)?\b/,boolean:/\b(?:true|false)\b/};function d(e,t){return e.highlight(t,c,"formula")}},91905:(e,t,r)=>{r.d(t,{Gn:()=>C,WD:()=>d,ZY:()=>N,_G:()=>g,aV:()=>w,jQ:()=>p,uf:()=>S,wk:()=>I});var n=r(9291),o=r(40506),a=r(7057),i=r(53877),s=r(64340),u=r(4615),l=r(63143);const c=(0,n.defineMessages)({e:{id:"database.formula.constant.e.description",defaultMessage:"The base of the natural logarithm."},pi:{id:"database.formula.constant.pi.description",defaultMessage:"The ratio of a circle's circumference to its diameter."},if:{id:"database.formula.operator.if.description",defaultMessage:"Switches between two options based on another value."},add:{id:"database.formula.operator.add.description",defaultMessage:"Adds two numbers and returns their sum, or concatenates two strings."},subtract:{id:"database.formula.operator.subtract.description",defaultMessage:"Subtracts two numbers and returns their difference."},multiply:{id:"database.formula.operator.multiply.description",defaultMessage:"Multiplies two numbers and returns their product."},divide:{id:"database.formula.operator.divide.description",defaultMessage:"Divides two numbers and returns their quotient."},pow:{id:"database.formula.operator.pow.description",defaultMessage:"Returns base to the exponent power, that is, baseexponent."},mod:{id:"database.formula.operator.mod.description",defaultMessage:"Divides two numbers and returns their remainder."},unaryMinus:{id:"database.formula.operator.unaryMinus.description",defaultMessage:"Negates a number."},unaryPlus:{id:"database.formula.operator.unaryPlus.description",defaultMessage:"Converts its argument into a number."},not:{id:"database.formula.operator.not.description",defaultMessage:"Returns the logical NOT of its argument."},and:{id:"database.formula.operator.and.description",defaultMessage:"Returns the logical AND of its two arguments."},or:{id:"database.formula.operator.or.description",defaultMessage:"Returns the logical OR of its two arguments."},equal:{id:"database.formula.operator.equal.description",defaultMessage:"Returns true if its arguments are equal, and false otherwise."},unequal:{id:"database.formula.operator.unequal.description",defaultMessage:"Returns false if its arguments are equal, and true otherwise."},larger:{id:"database.formula.operator.larger.description",defaultMessage:"Returns true if the first argument is larger than the second."},largerEq:{id:"database.formula.operator.largerEq.description",defaultMessage:"Returns true if the first argument is larger than or equal to than the second."},smaller:{id:"database.formula.operator.smaller.description",defaultMessage:"Returns true if the first argument is smaller than the second."},smallerEq:{id:"database.formula.operator.smallerEq.description",defaultMessage:"Returns true if the first argument is smaller than or equal to than the second."},concat:{id:"database.formula.function.concat.description",defaultMessage:"Concatenates its arguments and returns the result."},join:{id:"database.formula.function.join.description",defaultMessage:"Inserts the first argument between the rest and returns their concatenation."},slice:{id:"database.formula.function.slice.description",defaultMessage:"Extracts a substring from a string from the start index (inclusively) to the end index (optional and exclusively)."},length:{id:"database.formula.function.length.description",defaultMessage:"Returns the length of a string."},format:{id:"database.formula.function.format.description",defaultMessage:"Formats its argument as a string."},toNumber:{id:"database.formula.function.toNumber.description",defaultMessage:"Parses a number from text."},contains:{id:"database.formula.function.contains.description",defaultMessage:"Returns true if the second argument is found in the first."},replace:{id:"database.formula.function.replace.description",defaultMessage:"Replaces the first match of a regular expression with a new value."},replaceAll:{id:"database.formula.function.replaceAll.description",defaultMessage:"Replaces all matches of a regular expression with a new value."},test:{id:"database.formula.function.test.description",defaultMessage:"Tests if a string matches a regular expression."},empty:{id:"database.formula.function.empty.description",defaultMessage:"Tests if a value is empty."},abs:{id:"database.formula.function.abs.description",defaultMessage:"Returns the absolute value of a number."},cbrt:{id:"database.formula.function.cbrt.description",defaultMessage:"Returns the cube root of a number."},ceil:{id:"database.formula.function.ceil.description",defaultMessage:"Returns the smallest integer greater than or equal to a number."},exp:{id:"database.formula.function.exp.description",defaultMessage:"Returns E^x, where x is the argument, and E is Euler's constant (2.718), the base of the natural logarithm."},floor:{id:"database.formula.function.floor.description",defaultMessage:"Returns the largest integer less than or equal to a number."},ln:{id:"database.formula.function.ln.description",defaultMessage:"Returns the natural logarithm of a number."},log10:{id:"database.formula.function.log10.description",defaultMessage:"Returns the base 10 logarithm of a number."},log2:{id:"database.formula.function.log2.description",defaultMessage:"Returns the base 2 logarithm of a number."},max:{id:"database.formula.function.max.description",defaultMessage:"Returns the largest of zero or more numbers."},min:{id:"database.formula.function.min.description",defaultMessage:"Returns the smallest of zero or more numbers."},round:{id:"database.formula.function.round.description",defaultMessage:"Returns the value of a number rounded to the nearest integer."},sign:{id:"database.formula.function.sign.description",defaultMessage:"Returns the sign of the x, indicating whether x is positive, negative or zero."},sqrt:{id:"database.formula.function.sqrt.description",defaultMessage:"Returns the positive square root of a number."},start:{id:"database.formula.function.start.description",defaultMessage:"Returns the start of a date range."},end:{id:"database.formula.function.end.description",defaultMessage:"Returns the end of a date range."},now:{id:"database.formula.function.now.description",defaultMessage:"Returns the current date and time."},timestamp:{id:"database.formula.function.timestamp.description",defaultMessage:"Returns an integer number from a Unix millisecond timestamp, corresponding to the number of milliseconds since January 1, 1970."},fromTimestamp:{id:"database.formula.function.fromTimestamp.description",defaultMessage:"Returns a date constructed from a Unix millisecond timestamp, corresponding to the number of milliseconds since January 1, 1970."},dateAdd:{id:"database.formula.function.dateAdd.description",defaultMessage:'Add to a date. The last argument, unit, can be one of: "years", "quarters", "months", "weeks", "days", "hours", "minutes", "seconds", or "milliseconds".'},dateSubtract:{id:"database.formula.function.dateSubtract.description",defaultMessage:'Subtract from a date. The last argument, unit, can be one of: "years", "quarters", "months", "weeks", "days", "hours", "minutes", "seconds", or "milliseconds".'},dateBetween:{id:"database.formula.function.dateBetween.description",defaultMessage:'Returns the time between two dates. The last argument, unit, can be one of: "years", "quarters", "months", "weeks", "days", "hours", "minutes", "seconds", or "milliseconds".'},formatDate:{id:"database.formula.function.formatDate.description",defaultMessage:"Format a date using the Moment standard time format string."},minute:{id:"database.formula.function.minute.description",defaultMessage:"Returns an integer number, between 0 and 59, corresponding to minutes in the given date."},hour:{id:"database.formula.function.hour.description",defaultMessage:"Returns an integer number, between 0 and 23, corresponding to hour for the given date."},day:{id:"database.formula.function.day.description",defaultMessage:"Returns an integer number corresponding to the day of the week for the given date: 0 for Sunday, 1 for Monday, 2 for Tuesday, and so on."},date:{id:"database.formula.function.date.description",defaultMessage:"Returns an integer number, between 1 and 31, corresponding to day of the month for the given."},month:{id:"database.formula.function.month.description",defaultMessage:"Returns an integer number, between 0 and 11, corresponding to month in the given date according to local time. 0 corresponds to January, 1 to February, and so on."},year:{id:"database.formula.function.year.description",defaultMessage:"Returns a number corresponding to the year of the given date."},id:{id:"database.formula.function.id.description",defaultMessage:"Returns a unique string id for each entry."},properties:{id:"database.formula.category.properties",defaultMessage:"Properties"},constants:{id:"database.formula.category.constants",defaultMessage:"Constants"},operators:{id:"database.formula.category.operators",defaultMessage:"Operators"},functions:{id:"database.formula.category.functions",defaultMessage:"Functions"}});let d=function(e){return e[e.property=0]="property",e[e.constant=1]="constant",e[e.operator=2]="operator",e[e.function=3]="function",e}({});function p(e,t){return{key:m[e],titleMessage:y[e],entries:t}}const m={[d.property]:"properties",[d.constant]:"constants",[d.operator]:"operators",[d.function]:"functions"},y={[d.property]:c.properties,[d.constant]:c.constants,[d.operator]:c.operators,[d.function]:c.functions},f=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],g={e:{name:"e",value:Math.E,category:d.constant,descriptionMessage:c.e,resultType:"number",examples:["e == 2.718281828459045"]},pi:{name:"pi",value:Math.PI,category:d.constant,descriptionMessage:c.pi,resultType:"number",examples:["2 * pi == 6.283185307179586"]},true:{name:"true",value:!0,category:d.constant,descriptionMessage:void 0,resultType:"checkbox",examples:['true ? "yes" : "no" == "yes"']},false:{name:"false",value:!1,category:d.constant,descriptionMessage:void 0,resultType:"checkbox",examples:['false ? "yes" : "no" == "no"']}};function v(e){return{resultType:e,arity:[e,e]}}function _(e){return{resultType:e,arity:[e]}}const b=v("number"),h=v("checkbox"),k=_("number"),x=_("date"),T={resultType:"number",arity:["date"]},M=[{resultType:"checkbox",arity:["text","text"]},{resultType:"checkbox",arity:["checkbox","checkbox"]},{resultType:"checkbox",arity:["date","date"]},{resultType:"checkbox",arity:["number","number"]}],w=function(e){if(C.hasOwnProperty(e))return C[e]},Z=function(e){return e.some((e=>"string"==typeof e))?e.map((e=>e||"")):e.map((e=>e||0))},C={if:{name:"if",apply:e=>e[0]?e[1]:e[2],operator:"?",category:d.operator,descriptionMessage:c.if,signatures:[{resultType:"text",arity:["checkbox","text","text"]},{resultType:"number",arity:["checkbox","number","number"]},{resultType:"checkbox",arity:["checkbox","checkbox","checkbox"]},{resultType:"date",arity:["checkbox","date","date"]}],examples:["true ? 1 : -1 == 1",'if(false, "yes", "no") == "no"']},add:{name:"add",apply:e=>{const t=Z(e);return t[0]+t[1]},operator:"+",category:d.operator,descriptionMessage:c.add,signatures:[b,{resultType:"text",arity:["text","text"]}],examples:["3 + 4 = 7","add(1, 3) == 4",'"add" + "text" == "addtext"']},subtract:{name:"subtract",apply:e=>{const t=Z(e);return t[0]-t[1]},operator:"-",category:d.operator,descriptionMessage:c.subtract,signatures:[b],examples:["3 - 1 == 2","subtract(4, 5) == -1"]},multiply:{name:"multiply",apply:e=>{const t=Z(e);return t[0]*t[1]},operator:"*",category:d.operator,descriptionMessage:c.multiply,signatures:[b],examples:["6 * 9 == 54","multiply(2, 10) == 20"]},divide:{name:"divide",apply:e=>{const t=Z(e);return t[0]/t[1]},operator:"/",category:d.operator,descriptionMessage:c.divide,signatures:[b],examples:["12 / 4 == 3","divide(12, 3) == 4"]},pow:{name:"pow",apply:e=>{const t=Z(e);return Math.pow(t[0],t[1])},operator:"^",category:d.operator,descriptionMessage:c.pow,signatures:[b],examples:["5 ^ 3 == 125","pow(2, 6) == 64"]},mod:{name:"mod",apply:e=>{const t=Z(e);return t[0]%t[1]},operator:"%",category:d.operator,descriptionMessage:c.mod,signatures:[b],examples:["7 % 5 == 2","mod(3, 3) == 0"]},unaryMinus:{name:"unaryMinus",apply:e=>-Z(e)[0],operator:"-",category:d.operator,descriptionMessage:c.unaryMinus,signatures:[k],examples:["-1 + 2 == 1","unaryMinus(42) == -42"]},unaryPlus:{name:"unaryPlus",apply:e=>+Z(e)[0],operator:"+",category:d.operator,descriptionMessage:c.unaryPlus,signatures:[k,{resultType:"number",arity:["text"]},{resultType:"number",arity:["checkbox"]}],examples:['+ "42" == 42',"unaryPlus(true) == 1"]},not:{name:"not",apply:e=>!e[0],operator:"not",category:d.operator,descriptionMessage:c.not,signatures:[{resultType:"checkbox",arity:["checkbox"]}],examples:["not true == false","not(false) == true"]},and:{name:"and",apply:e=>e[0]&&e[1],operator:"and",category:d.operator,descriptionMessage:c.and,signatures:[h],examples:["true and false == false","and(true, true) == true"]},or:{name:"or",apply:e=>e[0]||e[1],operator:"or",category:d.operator,descriptionMessage:c.or,signatures:[h],examples:["false or true == true","or(false, false) == false"]},equal:{name:"equal",apply:(e,t)=>{const[r,n]=e;return o.U3(r)&&o.U3(n)?i.NK(r,t).start.valueOf()===i.NK(n,t).start.valueOf():r===n},operator:"==",category:d.operator,descriptionMessage:c.equal,signatures:M,examples:["(3 * 5 == 15) == true","equal(false, not true) == true"]},unequal:{name:"unequal",apply:(e,t)=>{const[r,n]=e;return o.U3(r)&&o.U3(n)?i.NK(r,t).start.valueOf()!==i.NK(n,t).start.valueOf():r!==n},operator:"!=",category:d.operator,descriptionMessage:c.unequal,signatures:M,examples:["(6 * 9 != 42) == false","(true != not false) == false"]},larger:{name:"larger",apply:(e,t)=>{const[r,n]=e;return o.U3(r)&&o.U3(n)?i.NK(r,t).start.valueOf()>i.NK(n,t).start.valueOf():r>n},operator:">",category:d.operator,descriptionMessage:c.larger,signatures:M,examples:["5 > 3 == true"]},largerEq:{name:"largerEq",apply:(e,t)=>{const[r,n]=e;return o.U3(r)&&o.U3(n)?i.NK(r,t).start.valueOf()>=i.NK(n,t).start.valueOf():r>=n},operator:">=",category:d.operator,descriptionMessage:c.largerEq,signatures:M,examples:["5 >= 3 == true","4 >= 4 == true"]},smaller:{name:"smaller",apply:(e,t)=>{const[r,n]=e;return o.U3(r)&&o.U3(n)?i.NK(r,t).start.valueOf()<i.NK(n,t).start.valueOf():r<n},operator:"<",category:d.operator,descriptionMessage:c.smaller,signatures:M,examples:["10 < 8 == false"]},smallerEq:{name:"smallerEq",apply:(e,t)=>{const[r,n]=e;return o.U3(r)&&o.U3(n)?i.NK(r,t).start.valueOf()<=i.NK(n,t).start.valueOf():r<=n},operator:"<=",category:d.operator,descriptionMessage:c.smallerEq,signatures:M,examples:["10 <= 8 == false","8 <= 8 == true"]}},S=function(e){if(I.hasOwnProperty(e))return I[e]},I={concat:{name:"concat",apply:e=>e?e.join(""):void 0,category:d.function,descriptionMessage:c.concat,signatures:[{resultType:"text",variadic:"text"}],examples:['"dog" +"go" == "doggo"','concat("dog", "go") == "doggo"']},join:{name:"join",apply:e=>e?e.slice(1).join(e[0]):void 0,category:d.function,descriptionMessage:c.join,signatures:[{resultType:"text",variadic:"text"}],examples:['join("-", "a", "b", "c") == "a-b-c"']},slice:{name:"slice",apply:e=>e&&e[0]?e[0].slice(e[1],e[2]):void 0,category:d.function,descriptionMessage:c.slice,signatures:[{resultType:"text",arity:["text","number"]},{resultType:"text",arity:["text","number","number"]}],examples:['slice("Hello world", 1, 5) == "ello"','slice("notion", 3) == "ion"']},length:{name:"length",apply:e=>e[0]?e[0].length:0,category:d.function,descriptionMessage:c.length,signatures:[{resultType:"number",arity:["text"]}],examples:['length("Hello world") == 11']},format:{name:"format",apply:(e,t,r)=>{const n=e[0];return o.U3(n)?(0,a.ZV)({value:n,userTimeZone:t,allowRelativeDates:!1,intl:r}):void 0!==n?n.toString():void 0},category:d.function,descriptionMessage:c.format,signatures:[{resultType:"text",arity:["number"]},{resultType:"text",arity:["checkbox"]},{resultType:"text",arity:["date"]},{resultType:"text",arity:["text"]}],examples:['format(42) == "42"','format(true) == "true"','format(now()) == "December 31, 1969 16:00 (PST)"']},toNumber:{name:"toNumber",apply:(e,t)=>{const r=e[0];if(o.U3(r))return i.NK(r,t).start.valueOf();if("boolean"==typeof r)return r?1:0;if("string"==typeof r){const e=parseFloat(r);return l.hj(e)?e:void 0}return l.hj(r)?r:void 0},category:d.function,descriptionMessage:c.toNumber,signatures:[{resultType:"number",arity:["text"]},{resultType:"number",arity:["number"]},{resultType:"number",arity:["checkbox"]},{resultType:"number",arity:["date"]}],examples:['toNumber("42") == 42',"toNumber(false) == 0"]},contains:{name:"contains",apply:e=>Boolean(e[0]&&e[0].includes(e[1])),category:d.function,descriptionMessage:c.contains,signatures:[{resultType:"checkbox",arity:["text","text"]}],examples:['contains("notion", "ion") == true']},replace:{name:"replace",apply:e=>{try{const t=e[0]?e[0].toString():"";return e[1]?t.replace(new RegExp(e[1]),e[2]||""):""}catch(t){return}},category:d.function,descriptionMessage:c.replace,signatures:[{resultType:"text",arity:["number","text","text"]},{resultType:"text",arity:["text","text","text"]},{resultType:"text",arity:["checkbox","text","text"]}],examples:['replace("1-2-3", "-", "!") == "1!2-3"']},replaceAll:{name:"replaceAll",apply:e=>{try{const t=e[0]?e[0].toString():"";return e[1]?t.replace(new RegExp(e[1],"g"),e[2]||""):""}catch(t){return}},category:d.function,descriptionMessage:c.replaceAll,signatures:[{resultType:"text",arity:["number","text","text"]},{resultType:"text",arity:["text","text","text"]},{resultType:"text",arity:["checkbox","text","text"]}],examples:['replaceAll("1-2-3", "-", "!") == "1!2!3"']},test:{name:"test",apply:e=>{try{const t=e[0]?e[0].toString():"";return new RegExp(e[1]).test(t)}catch(t){return}},category:d.function,descriptionMessage:c.test,signatures:[{resultType:"checkbox",arity:["number","text"]},{resultType:"checkbox",arity:["text","text"]},{resultType:"checkbox",arity:["checkbox","text"]}],examples:['test("1-2-3", "-") == true']},empty:{name:"empty",apply:e=>!Boolean(e[0]),category:d.function,descriptionMessage:c.empty,signatures:[{resultType:"checkbox",arity:["number"]},{resultType:"checkbox",arity:["text"]},{resultType:"checkbox",arity:["checkbox"]},{resultType:"checkbox",arity:["date"]}],examples:['empty("") == true']},abs:{name:"abs",apply:e=>Math.abs(e[0]),category:d.function,descriptionMessage:c.abs,signatures:[k],examples:["abs(-3) == 3"]},cbrt:{name:"cbrt",apply:e=>Math.cbrt(e[0]),category:d.function,descriptionMessage:c.cbrt,signatures:[k],examples:["cbrt(8) == 2"]},ceil:{name:"ceil",apply:e=>Math.ceil(e[0]),category:d.function,descriptionMessage:c.ceil,signatures:[k],examples:["ceil(4.2) == 5"]},exp:{name:"exp",apply:e=>Math.exp(e[0]),category:d.function,descriptionMessage:c.exp,signatures:[k],examples:["exp(1) == 2.718281828459045"]},floor:{name:"floor",apply:e=>Math.floor(e[0]),category:d.function,descriptionMessage:c.floor,signatures:[k],examples:["floor(2.8) == 2"]},ln:{name:"ln",apply:e=>Math.log(e[0]),category:d.function,descriptionMessage:c.ln,signatures:[k],examples:["ln(e) == 1"]},log10:{name:"log10",apply:e=>Math.log10(e[0]),category:d.function,descriptionMessage:c.log10,signatures:[k],examples:["log10(1000) == 3"]},log2:{name:"log2",apply:e=>Math.log2(e[0]),category:d.function,descriptionMessage:c.log2,signatures:[k],examples:["log2(64) == 6"]},max:{name:"max",apply:e=>Math.max.apply(void 0,e),category:d.function,descriptionMessage:c.max,signatures:[{resultType:"number",variadic:"number"}],examples:["max(5, 2, 9, 3) == 9"]},min:{name:"min",apply:e=>Math.min.apply(void 0,e),category:d.function,descriptionMessage:c.min,signatures:[{resultType:"number",variadic:"number"}],examples:["min(4, 1, 5, 3) == 1"]},round:{name:"round",apply:e=>Math.round(e[0]),category:d.function,descriptionMessage:c.round,signatures:[k],examples:["round(4.4) == 4","round(4.5) == 5"]},sign:{name:"sign",apply:e=>Math.sign(e[0]),category:d.function,descriptionMessage:c.sign,signatures:[k],examples:["sign(4) == 1","sign(-9) == -1","sign(0) == 0"]},sqrt:{name:"sqrt",apply:e=>Math.sqrt(e[0]),category:d.function,descriptionMessage:c.sqrt,signatures:[k],examples:["sqrt(144) == 12"]},start:{name:"start",apply:e=>{const t=e[0];if(o.U3(t)){if("daterange"===t.type){return{type:"date",start_date:t.start_date}}if("datetimerange"===t.type){return{type:"datetime",start_date:t.start_date,start_time:t.start_time,time_zone:t.time_zone}}return t}},category:d.function,descriptionMessage:c.start,signatures:[x],examples:['start(prop("Date")) == Feb 2, 1996']},end:{name:"end",apply:e=>{const t=e[0];if(o.U3(t)){if("daterange"===t.type){return{type:"date",start_date:t.end_date}}if("datetimerange"===t.type){return{type:"datetime",start_date:t.end_date,start_time:t.end_time,time_zone:t.time_zone,reminder:t.reminder}}return t}},category:d.function,descriptionMessage:c.end,signatures:[x],examples:['end(prop("Date")) == Feb 2, 1996']},now:{name:"now",apply:(e,t)=>i.R_(t),category:d.function,descriptionMessage:c.now,signatures:[{resultType:"date",arity:[]}],examples:["now() == Feb 2, 1996"]},timestamp:{name:"timestamp",apply:(e,t)=>{const r=e[0];if(o.U3(r))return i.NK(r,t).start.valueOf()},category:d.function,descriptionMessage:c.timestamp,signatures:[T],examples:["timestamp(now()) == 1512593154718"]},fromTimestamp:{name:"fromTimestamp",apply:(e,t)=>l.hj(e[0])?i.CQ(e[0],t):void 0,category:d.function,descriptionMessage:c.fromTimestamp,signatures:[{resultType:"date",arity:["number"]}],examples:["fromTimestamp(2000000000000) == Tue May 17 2033"]},dateAdd:{name:"dateAdd",apply:(e,t)=>{const[r,n,o]=e;if(!r||!l.hj(n)||f.indexOf(o)<0)return;const a=i.NK(r,t).start.plus({[o]:n}).valueOf();return"datetime"===r.type||"datetimerange"===r.type?i.CQ(a,r.time_zone):i.hT(a,t)},category:d.function,descriptionMessage:c.dateAdd,signatures:[{resultType:"date",arity:["date","number","text"]}],examples:f.map((e=>`dateAdd(date, amount, "${e}")`))},dateSubtract:{name:"dateSubtract",apply:(e,t)=>{const[r,n,o]=e;if(!r||!l.hj(n)||f.indexOf(o)<0)return;const a=i.NK(r,t).start.minus({[o]:n}).valueOf();return"datetime"===r.type||"datetimerange"===r.type?i.CQ(a,r.time_zone):i.hT(a,t)},category:d.function,descriptionMessage:c.dateSubtract,signatures:[{resultType:"date",arity:["date","number","text"]}],examples:f.map((e=>`dateSubtract(date, amount, "${e}")`))},dateBetween:{name:"dateBetween",apply:(e,t)=>{const[r,n,o]=e;if(!r||!n||f.indexOf(o)<0)return;const a=i.NK(r,t).start,s=i.NK(n,t).start;return Math.trunc(a.diff(s,o).get(o))},category:d.function,descriptionMessage:c.dateBetween,signatures:[{resultType:"number",arity:["date","date","text"]}],examples:f.map((e=>`dateBetween(date, date2, "${e}")`))},formatDate:{name:"formatDate",apply:(e,t,r)=>{const[n,o]=e;if(n&&o){const e=i.NK(n,t,r.locale).start;return(0,s.P)(e,o)}},category:d.function,descriptionMessage:c.formatDate,signatures:[{resultType:"text",arity:["date","text"]}],examples:['formatDate(now(), "MMMM D YYYY, HH:mm") == March 30 2010, 12:00','formatDate(now(), "YYYY/MM/DD, HH:mm") == 2010/03/30, 12:00','formatDate(now(), "MM/DD/YYYY, HH:mm") == 03/30/2010, 12:00','formatDate(now(), "HH:mm A") == 12:00 PM','formatDate(now(), "M/D/YY") == 3/30/10']},minute:{name:"minute",apply:(e,t)=>{const r=e[0];if(o.U3(r))return i.NK(r,t).start.minute},category:d.function,descriptionMessage:c.minute,signatures:[T],examples:["minute(now()) == 45"]},hour:{name:"hour",apply:(e,t)=>{const r=e[0];if(o.U3(r))return i.NK(r,t).start.hour},category:d.function,descriptionMessage:c.hour,signatures:[T],examples:["hour(now()) == 17"]},day:{name:"day",apply:(e,t)=>{const r=e[0];if(o.U3(r))return i.YC(i.NK(r,t).start)},category:d.function,descriptionMessage:c.day,signatures:[T],examples:["day(now()) == 3"]},date:{name:"date",apply:(e,t)=>{const r=e[0];if(o.U3(r))return i.NK(r,t).start.day},category:d.function,descriptionMessage:c.date,signatures:[T],examples:["date(now()) == 13"]},month:{name:"month",apply:(e,t)=>{const r=e[0];if(o.U3(r))return i.NK(r,t).start.month-1},category:d.function,descriptionMessage:c.month,signatures:[T],examples:["month(now()) == 11"]},year:{name:"year",apply:(e,t)=>{const r=e[0];if(o.U3(r))return i.NK(r,t).start.year},category:d.function,descriptionMessage:c.year,signatures:[T],examples:["year(now()) == 1984"]},id:{name:"id",apply:(e,t,r,n)=>(0,u.cj)(n.id),category:d.function,descriptionMessage:c.id,signatures:[{resultType:"text",arity:[]}],examples:[`id() == "${(0,u.cj)((0,u.ZP)())}"`]}},N=[p(d.constant,l.VO(g)),p(d.operator,l.VO(C)),p(d.function,l.VO(I))]},58573:(e,t,r)=>{r.d(t,{$r:()=>u,C6:()=>f,EB:()=>y,V5:()=>l,ZP:()=>p});var n=r(43261),o=r.n(n),a=r(33728),i=r(72126),s=r(97880);const u=2e6,l=1e4;function c(e){return e.normalize("NFKD")}function d(e){return-e.score}function p(e,t,r,n){const o=(null==n?void 0:n.minThreshold)||0,a=(null==n?void 0:n.getSortScore)||d,s=i.oA(t.map((t=>{const n=f(e,r(t));if(n&&n.score>o)return{original:t,score:n.score}})));return i.MR(s,(e=>a(e))).map((e=>e.original))}function m(e,t,r){const n=e.charAt(0);let a=r;for(let i=1;i<t.length;++i){if(t.charAt(i)!==n)continue;const r=o().match(e,t.substring(i));r&&r.score>a&&(a=r.score)}return a}function y(e,t,r){const n=c(e).toLowerCase(),o=c(t).toLowerCase();if(o===n)return{isExactMatch:!0};const s=o.indexOf(n);if(0===s)return{isPrefixMatch:!0};if(" "===o[s-1])return(0,a.oH)(o.substring(s,s+e.length))?{isExactMatch:!0}:{isWordPrefixMatch:!0};if(s>-1)return{isSubstringMatch:!0};if(n.includes(" ")){const e=function(e,t){const r=i.hr(e.trim()).replace(/\s+/g,"(.*?) "),n=new RegExp(r),o=t.match(n);return o?{result:!0,distance:o.slice(1).reduce(((e,t)=>e+t.length),0)}:{result:!1}}(n,o);return e.result?{isInOrderTokenMatch:!0,inOrderMatchDistance:e.distance}:void 0}return null!=r&&r.ignoreFuzzyFallback?void 0:{isFuzzyMatch:!0}}function f(e,t,r){const n=c(e),a=c(t),i=o().match(n,a,r);if(!i)return;const d=n.toLowerCase(),p=a.toLowerCase(),f=y(d,p,r);return f?"isExactMatch"in f?{...i,score:1e6,matchMetadata:f}:"isPrefixMatch"in f?{...i,score:1e5,matchMetadata:f}:"isWordPrefixMatch"in f?{...i,score:l,matchMetadata:f}:"isSubstringMatch"in f?{...i,score:1e3,matchMetadata:f}:"isInOrderTokenMatch"in f?{...i,score:900-f.inOrderMatchDistance,matchMetadata:f}:"isFuzzyMatch"in f?{...i,score:m(d,p,i.score),matchMetadata:f}:"isExactIdMatch"in f?{...i,score:u,matchMetadata:f}:void(0,s.t1)(f):void 0}},38297:(e,t,r)=>{r.d(t,{J2:()=>m,Rd:()=>l,ky:()=>p});var n=r(41432),o=r(77492),a=r(59753),i=r(606),s=r(21202),u=r(6287);async function l(e){const t=await c({blockModel:e.block,loadRecordModel:e.loadRecordModel});if(t)return t;const r=e.block.type;return(0,n.Pm)(r)?f(e):void 0}async function c(e){const{loadRecordModel:t,blockModel:r}=function(e){return"loadRecordModel"in e?e:{blockModel:a.kk.fromBlock(e.blockValue),loadRecordModel:a.s8.fromLoadRecordValueFn(e.loadRecordValue)}}(e),n=r.getParentPointer();if(n.table===u.v)return await t(n)}function d(e){return"getRecordModel"in e?e:{block:a.kk.fromBlock(e.block),getRecordModel:a.om.fromGetRecordValueFn(e.getRecordValue)}}function p(e){const t=d(e),r=m(t);if(r)return t.getRecordModel.getRecordValue(r.pointer)}function m(e){const t=d(e),r=function(e){const{getRecordModel:t,block:r}=e,n=r.getParentPointer();if(n.table===u.v)return t(n)}(t);if(r)return r;const o=t.block.getType();return(0,n.Pm)(o)?y(t):void 0}const{sync:y,async:f}=o.R.makeRunners((function*(e){const{block:t}=e;let r=t.getParentPointer();for(;r;){if(i.dr.isEqual(r,t.pointer))return;if(r.table!==s.iU)return;const e=yield*o.R.fetchRecord(r);if(!e)return;if(!e.isCollectionView()){r=e.getParentPointer();continue}const n=e.getCollectionPointer();if(!n)return;const a=yield*o.R.fetchRecord(n);if(!a)return;const u=a.getRootPagePointer();return a.isPageTreeCollection()&&u&&i.dr.isEqual(u,r)?a:void 0}}))},60310:(e,t,r)=>{r.d(t,{CN:()=>i,Eq:()=>c,dn:()=>l,hH:()=>u,hJ:()=>d});var n=r(9291),o=r(41432),a=r(4615);const i=(0,n.defineMessages)({myTasks:{defaultMessage:"My tasks",id:"homePageTemplates.myTasks"},personalHome:{defaultMessage:"Home",id:"homePageTemplates.home"},assignedToMeView:{defaultMessage:"My tasks",id:"homePageTemplates.assignedToMeView"},createdByMeView:{defaultMessage:"Created by me",id:"homePageTemplates.createdByMeView"}}),s={trending:{block:"trending",collectionView:"trendingCollectionView",collection:"trendingCollection"},myTasks:{block:"myTasks",collectionView:"myTasksAssignedToMeCollectionView"},similarUsers:{block:"similarUsers",collectionView:"similarUsersCollectionView",collection:"similarUsersCollection"},main:{block:"main"}};function u(e){let{userId:t,spaceId:r}=e;return{main:p({userId:t,spaceId:r,type:"main"}),trending:p({userId:t,spaceId:r,type:"trending"}),myTasks:p({userId:t,spaceId:r,type:"myTasks"}),similarUsers:p({userId:t,spaceId:r,type:"similarUsers"}),trendingCollectionView:y({userId:t,spaceId:r,type:"trending"}),myTasksAssignedToMeCollectionView:y({userId:t,spaceId:r,type:"myTasks"}),similarUsersCollectionView:y({userId:t,spaceId:r,type:"similarUsers"}),trendingCollection:m({userId:t,spaceId:r,type:"trending"}),similarUsersCollection:m({userId:t,spaceId:r,type:"similarUsers"})}}function l(e){return e.isType(o.Ti.personalHomePage)}function c(e){return s[e.type].collection}function d(e){return m(e)}function p(e){let{userId:t,spaceId:r,type:n}=e;const o=s[n].block;return(0,a.Ul)(`${t}-${r}-${o}`)}function m(e){let{userId:t,spaceId:r,type:n}=e;const o=s[n].collection;return(0,a.Ul)(`${t}-${r}-${o}`)}function y(e){let{userId:t,spaceId:r,type:n}=e;const o=s[n].collectionView;return(0,a.Ul)(`${t}-${r}-${o}`)}},45238:(e,t,r)=>{r.d(t,{I:()=>a});r(67294);var n=r(33831),o=r(85893);function a(e,t){let{viewBox:r,svg:a}=t;return Object.assign(((t,i)=>{const s=i?`${e} ${i}`:e;return(0,o.jsx)(n.Z,{viewBox:r,className:s,style:t,children:a})}),{__isIcon:!0,__iconName:e,__iconViewBox:r})}},69651:(e,t,r)=>{r.d(t,{C:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("calendar",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.24902 14.7764H12.6621C14.1455 14.7764 14.918 14.0107 14.918 12.5479V4.22852C14.918 2.76562 14.1455 2 12.6621 2H3.24902C1.77246 2 1 2.75879 1 4.22852V12.5479C1 14.0107 1.77246 14.7764 3.24902 14.7764ZM3.24219 13.416C2.6748 13.416 2.36035 13.1221 2.36035 12.5205V6.23145C2.36035 5.62988 2.6748 5.33594 3.24219 5.33594H12.6689C13.2363 5.33594 13.5508 5.62988 13.5508 6.23145V12.5205C13.5508 13.1221 13.2363 13.416 12.6689 13.416H3.24219ZM6.63965 7.69434H7.04297C7.28906 7.69434 7.37109 7.61914 7.37109 7.37988V6.97656C7.37109 6.73047 7.28906 6.65527 7.04297 6.65527H6.63965C6.39355 6.65527 6.31152 6.73047 6.31152 6.97656V7.37988C6.31152 7.61914 6.39355 7.69434 6.63965 7.69434ZM8.875 7.69434H9.27832C9.51758 7.69434 9.59961 7.61914 9.59961 7.37988V6.97656C9.59961 6.73047 9.51758 6.65527 9.27832 6.65527H8.875C8.62891 6.65527 8.54688 6.73047 8.54688 6.97656V7.37988C8.54688 7.61914 8.62891 7.69434 8.875 7.69434ZM11.1035 7.69434H11.5068C11.7529 7.69434 11.835 7.61914 11.835 7.37988V6.97656C11.835 6.73047 11.7529 6.65527 11.5068 6.65527H11.1035C10.8643 6.65527 10.7822 6.73047 10.7822 6.97656V7.37988C10.7822 7.61914 10.8643 7.69434 11.1035 7.69434ZM4.41113 9.89551H4.80762C5.05371 9.89551 5.13574 9.82031 5.13574 9.57422V9.1709C5.13574 8.93164 5.05371 8.85645 4.80762 8.85645H4.41113C4.16504 8.85645 4.08301 8.93164 4.08301 9.1709V9.57422C4.08301 9.82031 4.16504 9.89551 4.41113 9.89551ZM6.63965 9.89551H7.04297C7.28906 9.89551 7.37109 9.82031 7.37109 9.57422V9.1709C7.37109 8.93164 7.28906 8.85645 7.04297 8.85645H6.63965C6.39355 8.85645 6.31152 8.93164 6.31152 9.1709V9.57422C6.31152 9.82031 6.39355 9.89551 6.63965 9.89551ZM8.875 9.89551H9.27832C9.51758 9.89551 9.59961 9.82031 9.59961 9.57422V9.1709C9.59961 8.93164 9.51758 8.85645 9.27832 8.85645H8.875C8.62891 8.85645 8.54688 8.93164 8.54688 9.1709V9.57422C8.54688 9.82031 8.62891 9.89551 8.875 9.89551ZM11.1035 9.89551H11.5068C11.7529 9.89551 11.835 9.82031 11.835 9.57422V9.1709C11.835 8.93164 11.7529 8.85645 11.5068 8.85645H11.1035C10.8643 8.85645 10.7822 8.93164 10.7822 9.1709V9.57422C10.7822 9.82031 10.8643 9.89551 11.1035 9.89551ZM4.41113 12.0898H4.80762C5.05371 12.0898 5.13574 12.0146 5.13574 11.7754V11.3721C5.13574 11.126 5.05371 11.0508 4.80762 11.0508H4.41113C4.16504 11.0508 4.08301 11.126 4.08301 11.3721V11.7754C4.08301 12.0146 4.16504 12.0898 4.41113 12.0898ZM6.63965 12.0898H7.04297C7.28906 12.0898 7.37109 12.0146 7.37109 11.7754V11.3721C7.37109 11.126 7.28906 11.0508 7.04297 11.0508H6.63965C6.39355 11.0508 6.31152 11.126 6.31152 11.3721V11.7754C6.31152 12.0146 6.39355 12.0898 6.63965 12.0898ZM8.875 12.0898H9.27832C9.51758 12.0898 9.59961 12.0146 9.59961 11.7754V11.3721C9.59961 11.126 9.51758 11.0508 9.27832 11.0508H8.875C8.62891 11.0508 8.54688 11.126 8.54688 11.3721V11.7754C8.54688 12.0146 8.62891 12.0898 8.875 12.0898Z"})})},31001:(e,t,r)=>{r.d(t,{A:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("docsDB",{viewBox:"0 0 27 35",svg:(0,o.jsx)("path",{d:"M5.20312 34.4688H21.7969C25.0312 34.4688 26.6406 32.8281 26.6406 29.5781V15.3906C26.6406 13.375 26.4062 12.5 25.1562 11.2188L16.5469 2.45312C15.3594 1.23438 14.375 0.96875 12.625 0.96875H5.20312C1.98438 0.96875 0.359375 2.625 0.359375 5.875V29.5781C0.359375 32.8438 1.96875 34.4688 5.20312 34.4688ZM5.3125 31.9531C3.70312 31.9531 2.875 31.0938 2.875 29.5312V5.92188C2.875 4.375 3.70312 3.48438 5.32812 3.48438H12.2812V12.5625C12.2812 14.5312 13.2656 15.5 15.2188 15.5H24.125V29.5312C24.125 31.0938 23.2969 31.9531 21.6719 31.9531H5.3125ZM15.5 13.1406C14.875 13.1406 14.6406 12.8906 14.6406 12.2656V3.96875L23.6406 13.1406H15.5Z"})})},69578:(e,t,r)=>{r.d(t,{f:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("github",{viewBox:"0 0 1024 1024",svg:(0,o.jsx)("path",{d:"M512 0C229.25 0 0 229.25 0 512c0 226.25 146.688 418.125 350.156 485.812 25.594 4.688 34.938-11.125 34.938-24.625 0-12.188-0.469-52.562-0.719-95.312C242 908.812 211.906 817.5 211.906 817.5c-23.312-59.125-56.844-74.875-56.844-74.875-46.531-31.75 3.53-31.125 3.53-31.125 51.406 3.562 78.47 52.75 78.47 52.75 45.688 78.25 119.875 55.625 149 42.5 4.654-33 17.904-55.625 32.5-68.375C304.906 725.438 185.344 681.5 185.344 485.312c0-55.938 19.969-101.562 52.656-137.406-5.219-13-22.844-65.094 5.062-135.562 0 0 42.938-13.75 140.812 52.5 40.812-11.406 84.594-17.031 128.125-17.219 43.5 0.188 87.312 5.875 128.188 17.281 97.688-66.312 140.688-52.5 140.688-52.5 28 70.531 10.375 122.562 5.125 135.5 32.812 35.844 52.625 81.469 52.625 137.406 0 196.688-119.75 240-233.812 252.688 18.438 15.875 34.75 47 34.75 94.75 0 68.438-0.688 123.625-0.688 140.5 0 13.625 9.312 29.562 35.25 24.562C877.438 930 1024 738.125 1024 512 1024 229.25 794.75 0 512 0z"})})},59699:(e,t,r)=>{r.d(t,{N:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("meetingsDB",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.297 13.956h9.406c.743 0 1.301-.19 1.675-.567.378-.374.567-.925.567-1.655V3.415c0-.734-.189-1.287-.567-1.661-.374-.374-.932-.56-1.675-.56H3.297c-.738 0-1.297.186-1.675.56-.378.374-.567.927-.567 1.661v8.32c0 .729.189 1.28.567 1.654.378.378.937.567 1.675.567zm-.014-1.347c-.287 0-.506-.072-.656-.218-.15-.15-.226-.374-.226-.67V5.404c0-.296.076-.52.226-.67.15-.15.37-.225.656-.225h9.427c.287 0 .506.075.656.225.155.15.233.374.233.67v6.317c0 .296-.078.52-.233.67-.15.146-.369.218-.656.218H3.283zM4.46 6.977h7.096a.426.426 0 00.314-.123.449.449 0 00.123-.322.409.409 0 00-.123-.3.426.426 0 00-.314-.124H4.459a.45.45 0 00-.321.123.41.41 0 00-.123.301.45.45 0 00.123.322.45.45 0 00.321.123zm0 2.016h7.096a.426.426 0 00.314-.123.409.409 0 00.123-.3.417.417 0 00-.123-.308.414.414 0 00-.314-.13H4.459a.436.436 0 00-.321.13.417.417 0 00-.123.307.41.41 0 00.123.301.45.45 0 00.321.123zm0 2.024h4.478a.426.426 0 00.314-.123.41.41 0 00.123-.301.417.417 0 00-.123-.308.414.414 0 00-.314-.13H4.459a.436.436 0 00-.321.13.417.417 0 00-.123.308.41.41 0 00.123.3.45.45 0 00.321.124z"})})},54855:(e,t,r)=>{r.d(t,{a:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("pageEmpty",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M4.35645 15.4678H11.6367C13.0996 15.4678 13.8584 14.6953 13.8584 13.2256V7.02539C13.8584 6.0752 13.7354 5.6377 13.1406 5.03613L9.55176 1.38574C8.97754 0.804688 8.50586 0.667969 7.65137 0.667969H4.35645C2.89355 0.667969 2.13477 1.44043 2.13477 2.91016V13.2256C2.13477 14.7021 2.89355 15.4678 4.35645 15.4678ZM4.46582 14.1279C3.80273 14.1279 3.47461 13.7793 3.47461 13.1436V2.99219C3.47461 2.36328 3.80273 2.00781 4.46582 2.00781H7.37793V5.75391C7.37793 6.73145 7.86328 7.20312 8.83398 7.20312H12.5186V13.1436C12.5186 13.7793 12.1836 14.1279 11.5205 14.1279H4.46582ZM8.95703 6.02734C8.67676 6.02734 8.56055 5.9043 8.56055 5.62402V2.19238L12.334 6.02734H8.95703Z"})})},29665:(e,t,r)=>{r.d(t,{B:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("projectManagementBig",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{fillRule:"evenodd",d:"M0 5.302c0 2.793 2.209 5.112 4.96 5.291V9.426a4.124 4.124 0 01-3.79-4.124 4.12 4.12 0 014.127-4.138 4.13 4.13 0 014.071 3.37h1.18C10.168 1.988 7.943 0 5.296 0 2.394 0 0 2.4 0 5.302zm5.302-3.197c1.489 0 2.75 1.043 3.098 2.429h-.1c-.322 0-.633.045-.927.13-.281-.876-1.117-1.533-2.071-1.533-1.18 0-2.17.992-2.17 2.171 0 1.068.823 1.988 1.855 2.147-.018.139-.027.28-.027.425v.607C3.377 8.305 2.11 6.93 2.11 5.302c0-1.744 1.443-3.197 3.192-3.197zm.005 1.967c.586 0 1.086.426 1.204.98A3.353 3.353 0 005.24 6.536a1.244 1.244 0 01-1.167-1.233c0-.676.554-1.23 1.235-1.23zm9.026 11.503H8.177c-1.098 0-1.668-.564-1.668-1.652V7.736c0-1.087.57-1.652 1.668-1.652h6.156C15.43 6.084 16 6.65 16 7.736v6.187c0 1.083-.57 1.652-1.667 1.652zm-6.827-1.738c0 .493.259.742.732.742h6.034c.467 0 .732-.25.732-.742v-6.02c0-.492-.265-.736-.732-.736H8.238c-.473 0-.732.244-.732.737v6.019zm3.655-.854a.526.526 0 01-.448.254c-.188 0-.335-.076-.473-.254l-1.2-1.465a.532.532 0 01-.131-.34c0-.254.193-.453.442-.453.152 0 .274.056.396.214l.946 1.205L12.7 8.92c.107-.173.244-.254.396-.254.24 0 .463.167.463.417 0 .116-.061.238-.127.345l-2.272 3.554z",clipRule:"evenodd"})})},86793:(e,t,r)=>{r.d(t,{D:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("projectsDB",{viewBox:"0 0 33 33",svg:(0,o.jsx)("path",{d:"M16.5 32.6562C25.2188 32.6562 32.4375 25.4219 32.4375 16.7188C32.4375 8 25.2031 0.78125 16.4844 0.78125C7.78125 0.78125 0.5625 8 0.5625 16.7188C0.5625 25.4219 7.79688 32.6562 16.5 32.6562ZM16.5 30C9.125 30 3.23438 24.0938 3.23438 16.7188C3.23438 9.34375 9.10938 3.4375 16.4844 3.4375C23.8594 3.4375 29.7656 9.34375 29.7812 16.7188C29.7969 24.0938 23.875 30 16.5 30ZM16.5 26.625C21.9219 26.625 26.4062 22.125 26.4062 16.7188C26.4062 11.2969 21.9062 6.79688 16.5 6.79688C11.0781 6.79688 6.59375 11.2969 6.59375 16.7188C6.59375 22.125 11.0938 26.625 16.5 26.625ZM16.5 24.1094C12.4844 24.1094 9.10938 20.7344 9.10938 16.7188C9.10938 12.6719 12.4688 9.3125 16.5 9.3125C20.5156 9.3125 23.8906 12.6875 23.8906 16.7188C23.8906 20.75 20.5312 24.1094 16.5 24.1094ZM16.5156 20.7656C18.7344 20.7656 20.5625 18.9531 20.5625 16.7031C20.5625 14.4844 18.7344 12.6719 16.5156 12.6719C14.2812 12.6719 12.4531 14.4844 12.4531 16.7031C12.4531 18.9531 14.2812 20.7656 16.5156 20.7656Z"})})},33507:(e,t,r)=>{r.d(t,{L:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("sprintsDB",{viewBox:"0 0 18 18",svg:(0,o.jsx)("path",{d:"M9.844 3.375c0-.87.537-1.406 1.406-1.406.87 0 1.406.537 1.406 1.406 0 .87-.537 1.406-1.406 1.406-.87 0-1.406-.537-1.406-1.406zm1.83 4.708c.555.658 1.247 1.48 2.951 1.48V8.155c-1.052 0-1.378-.388-1.876-.979-.582-.691-1.308-1.552-3.187-1.552-2.714 0-4.269 1.443-5.343 3.589l1.257.63c.779-1.558 1.606-2.346 2.74-2.652L6.822 9.976c-.531 1.066-1.325 1.555-2.514 1.555H3.094v1.688h1.215c1.884 0 3.147-.77 3.996-2.436.743.563 2.965 2.427 3.592 4.967l1.6-.534c-.621-2.52-2.402-4.346-3.552-5.302l1.198-2.393c.186.16.349.351.529.565l.003-.003zs"})})},59960:(e,t,r)=>{r.d(t,{w:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("tasksDB",{viewBox:"0 0 14 14 ",svg:(0,o.jsx)("path",{d:"M2.72949 13.4561H11.0078C12.4844 13.4561 13.25 12.6904 13.25 11.2344V2.91504C13.25 1.45215 12.4844 0.693359 11.0078 0.693359H2.72949C1.25293 0.693359 0.487305 1.45215 0.487305 2.91504V11.2344C0.487305 12.6973 1.25293 13.4561 2.72949 13.4561ZM2.81152 12.1162C2.17578 12.1162 1.82715 11.7812 1.82715 11.1182V3.02441C1.82715 2.36133 2.17578 2.0332 2.81152 2.0332H10.9258C11.5547 2.0332 11.9102 2.36133 11.9102 3.02441V11.1182C11.9102 11.7812 11.5547 12.1162 10.9258 12.1162H2.81152ZM6.14062 10.3115C6.38672 10.3115 6.59863 10.1885 6.74219 9.96973L9.79785 5.19141C9.88672 5.04785 9.96875 4.88379 9.96875 4.72656C9.96875 4.3916 9.66797 4.16602 9.34668 4.16602C9.1416 4.16602 8.95703 4.27539 8.81348 4.50781L6.11328 8.8418L4.8418 7.22168C4.67773 7.00977 4.51367 6.93457 4.30859 6.93457C3.97363 6.93457 3.71387 7.20117 3.71387 7.54297C3.71387 7.70703 3.77539 7.85742 3.8916 8.00098L5.50488 9.96973C5.68945 10.209 5.8877 10.3115 6.14062 10.3115Z"})})},69576:(e,t,r)=>{r.d(t,{e:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("typesDocs",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M5.498 4.324h5.004a.432.432 0 00.43-.438.417.417 0 00-.43-.43H5.498a.426.426 0 00-.314.123.417.417 0 00-.123.308.432.432 0 00.437.437zm0 2.331h5.004a.418.418 0 00.308-.123.44.44 0 00.123-.314.418.418 0 00-.43-.424H5.497a.426.426 0 00-.314.123.41.41 0 00-.123.3.44.44 0 00.123.315.426.426 0 00.314.123zm0 2.338h2.42a.426.426 0 00.314-.123.41.41 0 00.123-.3.417.417 0 00-.123-.308.414.414 0 00-.314-.13h-2.42a.414.414 0 00-.314.13.417.417 0 00-.123.307.41.41 0 00.123.301.426.426 0 00.314.123zm-3.363 3.733c0 .738.187 1.296.56 1.674.374.379.928.568 1.661.568h7.28c.734 0 1.288-.19 1.662-.568.373-.378.56-.936.56-1.674V2.41c0-.734-.187-1.29-.56-1.668-.374-.383-.928-.574-1.661-.574h-7.28c-.734 0-1.288.191-1.662.574-.373.378-.56.934-.56 1.668v10.316zm1.346-.082V2.499c0-.319.082-.563.247-.731.164-.174.412-.26.745-.26h7.054c.333 0 .581.086.746.26.164.168.246.412.246.731v10.145c0 .314-.082.556-.246.724-.165.169-.413.253-.746.253H4.473c-.333 0-.581-.084-.745-.253-.165-.168-.247-.41-.247-.724z"})})},23539:(e,t,r)=>{r.d(t,{Y:()=>a});r(67294);var n=r(45238),o=r(85893);const a=(0,n.I)("wikiDB",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.282 12.767c0 .31.09.537.267.683.178.15.39.226.636.226.127 0 .25-.03.369-.09.118-.058.25-.136.396-.232.378-.246.784-.44 1.217-.58.433-.142.875-.21 1.326-.206.479.005.944.094 1.395.267.455.178.87.444 1.244.8.16.15.307.255.444.314a1.039 1.039 0 00.84 0c.138-.059.286-.164.445-.314a3.74 3.74 0 011.23-.8 4.115 4.115 0 012.734-.062c.434.142.837.335 1.211.582.15.095.285.173.404.232.118.06.241.089.369.089a.952.952 0 00.635-.226c.178-.146.267-.373.267-.683V3.483a.682.682 0 00-.096-.376c-.214-.373-.526-.713-.936-1.018-.41-.305-.891-.55-1.443-.732a5.542 5.542 0 00-1.763-.273 5.23 5.23 0 00-2.024.383c-.61.255-1.094.588-1.449.998-.365-.41-.854-.743-1.47-.998a5.143 5.143 0 00-2.003-.383c-.638 0-1.232.091-1.784.273a5.067 5.067 0 00-1.435.732 3.41 3.41 0 00-.93 1.018.59.59 0 00-.082.185 1.26 1.26 0 00-.014.191v9.284zm1.347-.76V3.689c.178-.255.417-.476.718-.663.3-.186.638-.332 1.011-.437a4.308 4.308 0 011.17-.157c.615 0 1.175.118 1.681.355.51.233.882.545 1.114.937v8.387a4.156 4.156 0 00-.793-.458 4.802 4.802 0 00-.957-.307 4.72 4.72 0 00-1.046-.117c-.565 0-1.1.071-1.606.212a4.262 4.262 0 00-1.292.568zm7.04.103V3.723c.233-.392.602-.704 1.108-.937a3.948 3.948 0 011.696-.355c.4 0 .786.052 1.155.157.374.105.71.25 1.012.437.305.187.546.408.724.663v8.32a4.356 4.356 0 00-1.299-.568 5.897 5.897 0 00-1.592-.211c-.36 0-.711.038-1.053.116a5.002 5.002 0 00-.957.307c-.3.133-.565.285-.793.458z"})})},74181:(e,t,r)=>{r.d(t,{Cb:()=>_,Mq:()=>l,T0:()=>g,T2:()=>h,VM:()=>u,_o:()=>f,lT:()=>k,mb:()=>m,mo:()=>d,ns:()=>b,t9:()=>c,ue:()=>y,zc:()=>p});var n=r(41892),o=(r(77657),r(59753)),a=r(9844),i=r(97880),s=r(64002);function u(e){if(void 0===e)return!1;const t=o.kk.isAnyModel(e)?e.getCapabilities():e.capabilities;return!0===t.link_preview||!0===t.synced_database}function l(e){if(void 0===e)return!1;const t=o.kk.isAnyModel(e)?e.getCapabilities():e.capabilities;return!0===t.workspace_page_export||!0===t.workspace_search||!0===t.read_teamspace}function c(e){if(void 0===e)return!1;return!0===(o.kk.isAnyModel(e)?e.getCapabilities():e.capabilities).webhooks}const d=e=>u(e),p=e=>{var t;if(!u(e))return!1;const r=o.kk.fromValue(a.K2,e);return Boolean(null==r||null===(t=r.getInfo().original_url_patterns)||void 0===t?void 0:t.find((e=>{var t;return!0===(null===(t=e.additional_types)||void 0===t?void 0:t.collection)})))};function m(e,t){const r=s.yn(t);if(!r)return!1;const n=s.Qc(r);if(!n.hostname)return!1;if("http:"===n.protocol&&"localhost"===n.hostname)return!0;if("https:"!==n.protocol)return!1;const{hostname:o}=s.Qc(e);if(!o)return!1;const a=o.split(".").slice(-2,-1).join("."),i=`${a}.so`,u=`${a}.com`;return n.hostname!==i&&!n.hostname.endsWith(`.${i}`)&&n.hostname!==u&&!n.hostname.endsWith(`.${u}`)}function y(e,t){const r=t.match(/^(h|$)(t|$)(t|$)(p|$)(s|$)(:|$)(\/|$)(\/|$).*$/),n=t.match(/^(h|$)(t|$)(t|$)(p|$)(:|$)(\/|$)(\/|$).*$/);return[t,r?void 0:`https://${t}`,n?void 0:`http://${t}`].filter(i.$K).filter((t=>t&&m(e,t)))}const f="legacy-google-integration",g="legacy-slack-integration",v={id:f,name:"Google Drive",alive:!0,status:"published",info:{icon:n.Z.images.import.googleDrivePng,tagline:"Easily bring Google Docs, Sheets, and Slides into Notion",description:"Connect Google Drive with Notion to easily bring all your files into Notion - including Google Sheets, Google Docs, and Google Slides.",developer_name:"Notion",website_url:"https://www.notion.so/",privacy_policy_url:"https://www.notion.so/notion/Terms-and-Privacy-28ffdd083dc3473e9c2da6ec011b58ac",screenshots:[n.Z.images.integrations.screenshots.googleDriveIntegrationPng]},updated_at:0},_={id:g,name:"Slack",alive:!0,status:"published",info:{icon:n.Z.images.externalIntegrations.slackIconPng,tagline:"See Slack messages directly in Notion for easy sharing and collaboration",description:"Slack is a messaging app for business that connects people to the information they need. Notion's link preview integration with Slack allows you to see Slack messages directly in a Notion page by simply pasting a link, for easy sharing and collaboration across teams.",developer_name:"Notion",website_url:"https://www.notion.so/",privacy_policy_url:"https://www.notion.so/notion/Terms-and-Privacy-28ffdd083dc3473e9c2da6ec011b58ac"},updated_at:0},b=[v,_],h=b.map((e=>e.id));function k(e){return`${e}/eap/app/authorize`}},76725:(e,t,r)=>{r.d(t,{Z:()=>n});r(57658);function n(e,t){const r=[];return e.forEach(((n,o)=>{r.push(n),e[o+1]&&r.push(t(o))})),r}},22808:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(632);const o=function(e){return!(!e||e.length>100||e.startsWith("data")||e.startsWith("http")||e.startsWith("/images")||e.startsWith("/icons"))&&n.onlyEmoji(e).length>0}},30845:(e,t,r)=>{r.d(t,{B:()=>o,s:()=>a});var n=r(65155);const o=(e,t)=>n.Bu(e,t),a=(e,t)=>n.sE(e,t)},58203:(e,t,r)=>{r.d(t,{$B:()=>s,Bn:()=>a});const n="<spoXsEWnSOsAMp>",o="</spoXsEWnSOsAMp>";function a(e,t){return`${n}${e}|${t}${o}`}const i=new RegExp(`${n.replace(/</g,"\\<").replace(/>/g,"\\>")}(.*?)${o.replace(/</g,"\\<").replace(/>/g,"\\>")}`,"g");function s(e){if(e)return e.replace(i,"")}},23210:(e,t,r)=>{r.d(t,{D:()=>o});var n=r(30845);function o(e){const t=n.s(e);if(t[0]){const r=t[0].href;return e.startsWith(r)&&e.slice(r.length).match(/^[^\s]+$/)?e:r}return e}},38737:(e,t,r)=>{r.d(t,{dk:()=>p,td:()=>T,uf:()=>k,IM:()=>x,Bo:()=>N,jD:()=>y,b3:()=>f,dX:()=>m,p3:()=>S,_g:()=>I,DA:()=>w});var n=r(10793),o=r.n(n),a=r(79680),i=r.n(a);class s extends WeakMap{constructor(e,t){t?(super(t),this.defaultFactory=void 0):(super(),this.defaultFactory=void 0),this.defaultFactory=e}get(e){if(!super.has(e)){const t=this.defaultFactory(e);super.set(e,t)}return super.get(e)}}var u=r(24211),l=r(72126),c=r(97880);const d=["dollar","australian_dollar","canadian_dollar","singapore_dollar","euro","pound","yen","ruble","rupee","won","yuan","real","lira","rupiah","franc","hong_kong_dollar","new_zealand_dollar","krona","norwegian_krone","mexican_peso","rand","new_taiwan_dollar","danish_krone","zloty","baht","forint","koruna","shekel","chilean_peso","philippine_peso","dirham","colombian_peso","riyal","ringgit","leu","argentine_peso","uruguayan_peso","peruvian_sol"],p="number",m=["number","number_with_commas","percent",...d];function y(e){return e?["number","number_with_commas","percent",e,...d.filter((t=>t!==e))]:m}function f(e){return"number"!==e&&"number_with_commas"!==e&&"compact"!==e&&"percent"!==e&&"bytes"!==e&&"date_range"!==e&&"date"!==e&&d.includes(e)}const g={dollar:"USD",australian_dollar:"AUD",canadian_dollar:"CAD",singapore_dollar:"SGD",euro:"EUR",pound:"GBP",yen:"JPY",ruble:"RUB",rupee:"INR",won:"KRW",yuan:"CNY",real:"BRL",lira:"TRY",rupiah:"IDR",franc:"CHF",hong_kong_dollar:"HKD",new_zealand_dollar:"NZD",krona:"SEK",norwegian_krone:"NOK",mexican_peso:"MXN",rand:"ZAR",new_taiwan_dollar:"TWD",danish_krone:"DKK",zloty:"PLN",baht:"THB",forint:"HUF",koruna:"CZK",shekel:"ILS",chilean_peso:"CLP",philippine_peso:"PHP",dirham:"AED",colombian_peso:"COP",riyal:"SAR",ringgit:"MYR",leu:"RON",argentine_peso:"ARS",uruguayan_peso:"UYU",peruvian_sol:"PEN"};const v=d.reduce(((e,t)=>(e[t]=function(e){var t;return(null===(t=new Intl.NumberFormat("en-US",{currency:g[e],style:"currency"}).formatToParts(0).find((e=>"currency"===e.type)))||void 0===t?void 0:t.value)||""}(t),e)),{}),_=/[^0-9\.\,\ \-eE]/g,b=/[^0-9\.\-eE]/g,h=/(e\-|E\-||)/g;function k(e,t,r){if(!l.hj(e)||isNaN(e))return"";if("percent"===t)return r.formatNumber(e,{style:"percent",maximumFractionDigits:12,useGrouping:!1});if(t&&(0,c.qg)(v,t))return r.formatNumber(e,{style:"currency",currencyDisplay:"symbol",currency:g[t]});if("number_with_commas"===t){const{decimal:t,integerSeparator:n}=(0,u.iF)(r);return o()({decimal:t,integerSeparator:n})(e)}if("compact"===t)return r.formatNumber(e,{notation:"compact"});if("bytes"===t)return T(e,2);{const t=e.toString();if(t.match(h)){const n=parseInt(t.split(h)[2],10);if(n<20){return e.toFixed(n)}{const{decimal:t,integerSeparator:n}=(0,u.iF)(r);return o()({decimal:t,integerSeparator:n})(e).replace(new RegExp(`\\${n}`,"g"),"")}}{const{decimal:t,integerSeparator:n}=(0,u.iF)(r);return o()({decimal:t,integerSeparator:n})(e).replace(new RegExp(`\\${n}`,"g"),"")}}}function x(e,t){const r=(e??0)/t*100;return Math.max(0,Math.min(r,100))}function T(e,t){if(0===e)return"0 bytes";const r=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,n)).toFixed(r))} ${["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}`}const M={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","-":"-",",":",",".":".",e:"e",E:"E","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"-","":"e","":"E","":",","":"."};function w(e){let t="";if(!e)return t;for(let r=0;r<e.length;r++){const n=M[e[r]];void 0!==n&&(t+=n)}return t}class Z{constructor(e){var t,r;this.group=void 0,this.decimal=void 0,this.numeral=void 0,this.numeralMap=void 0,this.convertNumeral=e=>{const t=this.numeralMap.get(e);return"number"==typeof t?t.toString():e};const n=e.formatNumberToParts(12345.6),o=[...e.formatNumber(9876543210,{useGrouping:!1})].reverse();this.numeralMap=new Map(o.map(((e,t)=>[e,t]))),this.group=new RegExp(`[${null===(t=n.find((e=>"group"===e.type)))||void 0===t?void 0:t.value}]`,"g"),this.decimal=new RegExp(`[${null===(r=n.find((e=>"decimal"===e.type)))||void 0===r?void 0:r.value}]`),this.numeral=new RegExp(`[${o.join("")}]`,"g")}parse(e){const t=(e=e.trim().replace(this.group,"").replace(this.decimal,".").replace(this.numeral,this.convertNumeral))?+e:NaN;return isNaN(t)?void 0:t}}const C=new s((e=>new Z(e)));function S(e,t){if(!e)return;if(t){const r=C.get(t).parse(e);if(void 0!==r)return r}if(-1!==e.indexOf("-Infinity"))return Number.NEGATIVE_INFINITY;if(-1!==e.indexOf("Infinity"))return Number.POSITIVE_INFINITY;const r=e.replace("","/").split("/");if(2===r.length){const[e,t]=r.map((e=>S(e)));if(0===t)return;if(void 0!==e&&void 0!==t)return e/t}const n=w(e.replace(_,"")),o=n.match(/\d(\.| )\d{3}\,\d+$/);if(o||n.match(/\,\d{2}$/)){const e=o&&o[1]?{thousands:o[1]}:{},t=i()(n,{...e,decimal:","});return isNaN(t)?void 0:t}const a=n.replace(b,""),s=i()(a);if(isNaN(s)){const e=Number.parseFloat(a);return isNaN(e)?void 0:e}return s}function I(e){const t=e.replace(/(\d)( |_)(\d\d\d)/g,"$1$3");if(/^\d+(\.\d+)?%$/.test(t))return{format:"percent",value:parseFloat(t)/100};const r=(0,c.Yd)(v).find((e=>t[0]===v[e]));if(r){const e=Number(t.slice(1));if(!l.i2(e))return{format:r,value:e}}else if(t.indexOf("0x")<0&&t.indexOf("/")<0&&t.indexOf(":")<0&&t.indexOf("-")<=0){const e=Number(t);if(!l.i2(e))return{format:"number",value:e}}}function N(e,t){switch(t){case"number":return e.formatMessage({id:"collection.numberFormat.number",defaultMessage:"Number"});case"number_with_commas":return e.formatMessage({id:"collection.numberFormat.numberWithCommas",defaultMessage:"Number with commas"});case"percent":return e.formatMessage({id:"collection.numberFormat.percent",defaultMessage:"Percent"});case"real":return e.formatMessage({id:"collection.numberFormat.brl",defaultMessage:"Real"});case"lira":return e.formatMessage({id:"collection.numberFormat.try",defaultMessage:"Lira"});case"rupiah":return e.formatMessage({id:"collection.numberFormat.idr",defaultMessage:"Rupiah"});case"dollar":return e.formatMessage({id:"collection.numberFormat.dollar",defaultMessage:"US Dollar"});case"australian_dollar":return e.formatMessage({id:"collection.numberFormat.australianDollar",defaultMessage:"Australian dollar"});case"canadian_dollar":return e.formatMessage({id:"collection.numberFormat.canadianDollar",defaultMessage:"Canadian dollar"});case"singapore_dollar":return e.formatMessage({id:"collection.numberFormat.singaporeDollar",defaultMessage:"Singapore dollar"});case"euro":return e.formatMessage({id:"collection.numberFormat.euro",defaultMessage:"Euro"});case"pound":return e.formatMessage({id:"collection.numberFormat.pound",defaultMessage:"Pound"});case"yen":return e.formatMessage({id:"collection.numberFormat.yen",defaultMessage:"Yen"});case"ruble":return e.formatMessage({id:"collection.numberFormat.ruble",defaultMessage:"Ruble"});case"rupee":return e.formatMessage({id:"collection.numberFormat.rupee",defaultMessage:"Rupee"});case"won":return e.formatMessage({id:"collection.numberFormat.won",defaultMessage:"Won"});case"yuan":return e.formatMessage({id:"collection.numberFormat.yuan",defaultMessage:"Yuan"});case"franc":return e.formatMessage({id:"collection.numberFormat.franc",defaultMessage:"Franc"});case"hong_kong_dollar":return e.formatMessage({id:"collection.numberFormat.hongKongDollar",defaultMessage:"Hong Kong dollar"});case"new_zealand_dollar":return e.formatMessage({id:"collection.numberFormat.newZealandDollar",defaultMessage:"New Zealand dollar"});case"krona":return e.formatMessage({id:"collection.numberFormat.krona",defaultMessage:"Krona"});case"norwegian_krone":return e.formatMessage({id:"collection.numberFormat.norwegianKrone",defaultMessage:"Norwegian krone"});case"mexican_peso":return e.formatMessage({id:"collection.numberFormat.mexicanPeso",defaultMessage:"Mexican peso"});case"rand":return e.formatMessage({id:"collection.numberFormat.rand",defaultMessage:"Rand"});case"new_taiwan_dollar":return e.formatMessage({id:"collection.numberFormat.newTaiwanDollar",defaultMessage:"New Taiwan dollar"});case"danish_krone":return e.formatMessage({id:"collection.numberFormat.danishKrone",defaultMessage:"Danish krone"});case"zloty":return e.formatMessage({id:"collection.numberFormat.zloty",defaultMessage:"Zoty"});case"baht":return e.formatMessage({id:"collection.numberFormat.baht",defaultMessage:"Baht"});case"forint":return e.formatMessage({id:"collection.numberFormat.forint",defaultMessage:"Forint"});case"koruna":return e.formatMessage({id:"collection.numberFormat.koruna",defaultMessage:"Koruna"});case"shekel":return e.formatMessage({id:"collection.numberFormat.shekel",defaultMessage:"Shekel"});case"chilean_peso":return e.formatMessage({id:"collection.numberFormat.chileanPeso",defaultMessage:"Chilean peso"});case"philippine_peso":return e.formatMessage({id:"collection.numberFormat.philippinePeso",defaultMessage:"Philippine peso"});case"dirham":return e.formatMessage({id:"collection.numberFormat.dirham",defaultMessage:"Dirham"});case"colombian_peso":return e.formatMessage({id:"collection.numberFormat.colombianPeso",defaultMessage:"Colombian peso"});case"riyal":return e.formatMessage({id:"collection.numberFormat.riyal",defaultMessage:"Riyal"});case"ringgit":return e.formatMessage({id:"collection.numberFormat.ringgit",defaultMessage:"Ringgit"});case"leu":return e.formatMessage({id:"collection.numberFormat.leu",defaultMessage:"Leu"});case"argentine_peso":return e.formatMessage({id:"collection.numberFormat.argentinePeso",defaultMessage:"Argentine peso"});case"uruguayan_peso":return e.formatMessage({id:"collection.numberFormat.uruguayanPeso",defaultMessage:"Uruguayan peso"});case"peruvian_sol":return e.formatMessage({id:"collection.numberFormat.peruvianSol",defaultMessage:"Peruvian sol"})}}},63306:(e,t,r)=>{r.d(t,{$t:()=>G,BW:()=>R,C8:()=>P,DW:()=>U,GR:()=>q,Pz:()=>F,Wq:()=>L,YL:()=>$,YP:()=>Y,Zg:()=>E,el:()=>D,gc:()=>H,hI:()=>N,ne:()=>O,om:()=>V,uJ:()=>A,y:()=>j,zN:()=>B});r(57658);var n=r(41432),o=r(16691),a=r(72126),i=r(59753),s=r(72141),u=r(73360),l=r(74446),c=r(606),d=r(54368),p=r(8542),m=r(98963),y=r(18844),f=r(21202),g=r(77420),v=r(6287),_=r(13493),b=r(70279),h=r(44312),k=r(9844),x=r(24836),T=r(86135),M=r(91644),w=r(15047),Z=r(77858),C=(r(29369),r(19889)),S=r(90965),I=r(97880);function*N(e,t){let r=e;const n=new Set;for(;r;){const e=(0,o.dn)(r);if(n.has(e))break;n.add(e);const a=t(r);if(a&&(yield a),a&&(0,u.mI)(a.table)){r=a.getParentPointer()}else r=void 0}}function*R(e,t){for(const r of N(e,i.om.fromGetRecordValueFn(t))){const e=t(r.pointer),n=r.table;e&&(yield{value:e,table:n})}}function U(e,t){return i.om.is(t)?Array.from(N(e,t)):Array.from(R(e,t))}function P(e){let t=!0;for(const r of e){if(!t&&r.table===f.iU&&r.isNavigableBlock())return r;t=!1}}function D(e){const t=B(a.Gb(e));if(!(t.length<=0))return t[0]}async function O(e,t){if(i.s8.is(t)){const r=[];for await(const n of async function*(e,t){let r=e;const n=new Set;for(;r;){const e=(0,o.dn)(r);if(n.has(e))break;n.add(e);const a=await t(r);a&&(yield a),r=a&&(0,u.tz)(a)?a.getParentPointer():void 0}}(e,t))r.push(n);return r}{const r=[];for await(const n of async function*(e,t){let r=e;const n=new Set;for(;r;){const e=(0,o.dn)(r);if(n.has(e))break;n.add(e);const a=await t(r);a&&(yield{table:r.table,value:a}),r=a&&(0,u.oK)(a)?c.dr.getParentPointerFromRecordWithParent(a):void 0}}(e,t))r.push(n);return r}}function E(e){return void 0===function(e){return a.sE(e,(e=>!function(e){switch(e.table){case f.iU:case Z.zU:case v.v:case _.n:case b.x_:case g.cZ:case k.K2:case h.Jd:case m.cv:case y.Xj:case x.qV:case T.FM:case M.AT:case d.y:case p.t_:return i.kk.isAnyModel(e)?e.parent_id&&e.alive:Boolean(e.value.parent_id&&e.value.alive);default:return e.table,!0}}(e)))}(e)}function F(e,t){if(i.om.is(t)){return!E(U(e,t))}return!E(U(e,t))}function B(e){return e.filter((e=>{if(e.table===f.iU)if(i.kk.isAnyModel(e)){if(e.isNavigableBlock())return!0}else if((0,n.S9)(e.value.type))return!0;return!1})).map((e=>i.kk.isAnyModel(e)?e:e.value))}function A(e,t){if(i.om.is(t)){return B(U(e,t))}return B(U(e,t))}function V(e,t){return U(e,i.om.fromRecordMapWithRole(t))}function L(e,t){return U(e,l.mF.fromRecordMapWithRole(t))}function q(e){return Boolean(j(e))}function j(e){return e.find((e=>{return e.table===w.bx?i.kk.isAnyModel(e)?e.isDeleted():(0,S.l1)(e.value):e.table===f.iU&&(i.kk.isAnyModel(e)?e.isPermanentlyDeleted():null===(t=e.value.permissions)||void 0===t?void 0:t.some(s.gG));var t}))}function $(e,t){return H(e.map(i.kk.fromRecordWithTable)).some((e=>{if(e.table===f.iU){return e.getPermissionItems().some((e=>{if((0,s.C2)(e)&&(0,s.Wi)(e.role))return!1;if(t.isUser()){if((0,s.jg)(e))return e.user_id===t.id}else if(t.isBot())if(t.isUserGuestBot()){if((0,s.jg)(e)){if(t.created_by_table===C.KJ)return e.user_id===t.created_by_id;(0,I.t1)(t.created_by_table)}}else if((0,s.FB)(e))return e.bot_id===t.id;return!1}))}return!1}))}function G(e){return Boolean(W(e))}function Y(e){return function(e){return z(e,(e=>(0,s.J5)(e.role)))}(e)?"read_and_write":function(e){return z(e,(e=>(0,s.RF)(e.role)))}(e)?"comment_only":W(e)?"reader":"none"}function z(e,t){for(const r of H(e)){if(r.table!==f.iU)continue;const e=(i.kk.isAnyModel(r)?r.getPermissionItems():r.value.permissions||[]).find((e=>(0,s.$D)(e)&&(!t||t(e))));if(e&&(0,s.$D)(e))return e}}function W(e){return z(e,(e=>(0,s.YX)(e.role)))}function H(e){const t=[];for(const r of e)if(t.push(r),r.table===f.iU)if(i.kk.isAnyModel(r)){if(r.isRestricted())break}else{if((r.value&&r.value.permissions||[]).some(s.Le))break}return t}},72141:(e,t,r)=>{r.d(t,{$D:()=>K,Av:()=>i,Bc:()=>C,C2:()=>X,D7:()=>k,FB:()=>F,Ix:()=>L,J5:()=>h,Jy:()=>g,KF:()=>A,KK:()=>q,LW:()=>G,Le:()=>P,Lq:()=>z,RF:()=>_,RI:()=>W,RN:()=>v,UF:()=>U,VM:()=>T,WY:()=>x,Wi:()=>m,YX:()=>f,ZK:()=>c,ZQ:()=>H,an:()=>s,bm:()=>j,cY:()=>Q,dy:()=>w,e_:()=>E,fG:()=>Y,gG:()=>D,hV:()=>V,iC:()=>p,ix:()=>B,jD:()=>d,jg:()=>O,mD:()=>u,o7:()=>J,rG:()=>b,rz:()=>y,xm:()=>l,zU:()=>$,zz:()=>M});var n=r(19889),o=r(97880),a=r(74487);const i=["none","reader","comment_only","content_only_editor","read_and_write","membership_admin","editor"],s=["editor","membership_admin","read_and_write","none"],u=(0,o.AO)((e=>"editor"===e||"membership_admin"===e||"read_and_write"===e||"none"===e?{true:e}:{false:e})),l=Object.assign({},...i.map(((e,t)=>({[e]:t})))),c=["read_content","insert_content","update_content","read_comment","insert_comment"],d={none:"none",reader:{read_content:!0,read_comment:!0},comment_only:{read_content:!0,read_comment:!0,insert_comment:!0},content_only_editor:{read_content:!0,insert_content:!0,read_comment:!0,insert_comment:!0},read_and_write:{read_content:!0,insert_content:!0,update_content:!0,read_comment:!0,insert_comment:!0},membership_admin:"none"},p=(0,o.AO)((e=>"none"===e||"reader"===e||"comment_only"===e||"content_only_editor"===e||"read_and_write"===e||"membership_admin"===e||"editor"===e?{true:e}:{false:e})),m=function(e){return"none"===e},y=function(e){return"string"==typeof e?"reader"===e:!0===e.read_content&&!0!==e.insert_content&&!0!==e.update_content||!0===e.read_property&&!0!==e.insert_property&&!0!==e.update_property},f=function(e){return"string"==typeof e?"reader"===e||"comment_only"===e||"content_only_editor"===e||"read_and_write"===e||"membership_admin"===e||"editor"===e:!0===e.read_content||!0===e.read_property},g=function(e){return"read_and_write"===e||"membership_admin"===e||"editor"===e},v=function(e){return"read_and_write"===e},_=function(e){return"comment_only"===e||h(e)||Boolean("object"==typeof e&&e.insert_comment)},b=function(e){return"comment_only"===e},h=function(e){return"content_only_editor"===e||k(e)||S(e)},k=function(e){return"string"==typeof e?"read_and_write"===e||"editor"===e:!0===e.insert_content||!0===e.update_content||!0===e.insert_property||!0===e.update_property},x=function(e){return"content_only_editor"===e},T=function(e){return"object"==typeof e&&!0===e.insert_content&&!0===e.update_content&&!0!==e.read_content},M=function(e){return"editor"===e},w=function(e){return"membership_admin"===e||M(e)},Z=function(e){return"membership_admin"===e},C=function(e){return Z(e)||M(e)},S=function(e){return M(e)||Z(e)||v(e)},I=a.literals("none","reader","comment_only","read_and_write","membership_admin","editor"),N=a.object({required:{type:a.literal("user_permission"),role:I,user_id:a.uuid()},optional:{invite_id:a.uuid()}}),R=a.object({required:{type:a.literal("group_permission"),role:I,group_id:a.uuid()},optional:{}}),U=(a.union([N,R]),["deleted_permission","restricted_permission","exclusive_user_permission","user_permission","bot_permission","group_permission","team_owner_permission","team_permission","explicit_team_guest_permission","explicit_team_permission","explicit_team_owner_permission","space_permission","public_permission"]);function P(e){return"restricted_permission"===e.type}function D(e){return"deleted_permission"===e.type}function O(e){return"user_permission"===e.type}function E(e){return"exclusive_user_permission"===e.type}function F(e){return"bot_id"in e&&"bot_permission"===e.type}(0,o.AO)((e=>e.parent_table===n.KJ?{true:e}:{false:e}));function B(e){return"space_permission"===e.type}function A(e){return B(e)&&Boolean(e.unlisted_timestamp)}function V(e){return"group_permission"===e.type}function L(e){return"team_permission"===e.type}function q(e){return"team_owner_permission"===e.type}function j(e){return"explicit_team_guest_permission"===e.type}function $(e){return"explicit_team_permission"===e.type}function G(e){return"explicit_team_owner_permission"===e.type}function Y(e){return"explicit_team_permission"===e.type||"explicit_team_owner_permission"===e.type}function z(e){return L(e)||$(e)||q(e)||G(e)}function W(e){return L(e)||$(e)}function H(e){return q(e)||G(e)}function K(e){return"public_permission"===e.type}function J(e){return!!e.expiration_timestamp&&Date.now()>e.expiration_timestamp}function X(e){return!D(e)&&!P(e)}function Q(e){return X(e)?e.role:"none"}},74446:(e,t,r)=>{r.d(t,{DH:()=>i,mF:()=>a,zF:()=>s});var n=r(606),o=r(97880);Symbol("Record Loading Function");const a={constant(e){return this.fromMonomorphicFunctionUnsafe((()=>e))},throw(e){return this.fromMonomorphicFunctionUnsafe((()=>{throw e()}))},tryUntilFound(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.fromMonomorphicFunctionUnsafe((e=>{for(const r of t){const t=r(e);if(void 0!==t)return t}}))},fromRecordMap(e){return this.fromMonomorphicFunctionUnsafe((t=>e.getValue(t)))},fromRecordMapWithRole(e){return this.fromMonomorphicFunctionUnsafe((t=>e.getValue(t)))},fromMonomorphicFunctionUnsafe:e=>e},i={fromRecordMapWithRole:e=>t=>{const r=e.getRole(t);return"string"==typeof r?r:void 0},empty:()=>e=>{},constantForPointer:(e,t)=>r=>{if(n.dr.isEqualIdTable(r,e))return t},tryUntilFound:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(const r of t){const t=r(e);if((0,o.$K)(t))return t}}}},s={fromGetRecordValueFn(e){return this.fromMonomorphicFunctionUnsafe((t=>Promise.resolve(e(t))))},fromRecordMap(e){return this.fromMonomorphicFunctionUnsafe((t=>Promise.resolve(e.getValue(t))))},fromRecordMapWithRole(e){return this.fromMonomorphicFunctionUnsafe((t=>Promise.resolve(e.getValue(t))))},sideEffect(e){return this.fromMonomorphicFunctionUnsafe((t=>e(t).then((()=>{}))))},tryUntilFound(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.fromMonomorphicFunctionUnsafe((async e=>{for(const r of t){const t=await r(e);if(void 0!==t)return t}}))},fromMonomorphicFunctionUnsafe:e=>e}},33361:(e,t,r)=>{r.d(t,{aV:()=>i,uf:()=>s,DI:()=>a});var n=r(16691);r(57658);async function o(e){const t=new Set;await async function r(n,o){const a=[];async function i(r){let{key:o,value:i,parentKey:s}=r;if(e.loadIntoMap.set(o,i),void 0===i)return;const u=await e.recurFn(i,o,s,n)??[];for(const n of u){const r=e.keyToString(n);t.has(r)||(t.add(r),a.push({key:n,parentKey:o}))}}const s=[];for(const t of o){const{key:r,parentKey:n}=t,o=e.loadIntoMap.get(r);o?await i({key:r,value:o,parentKey:n}):s.push(t)}if(e.loadMultiFn){const t=await e.loadMultiFn(s.map((e=>{let{key:t}=e;return t})));for(const{key:e,parentKey:r}of s){const n=t.get(e);await i({value:n,key:e,parentKey:r})}}else await Promise.all(s.map((async t=>{let{key:r,parentKey:n}=t;const o=await e.loadFn(r);await i({value:o,key:r,parentKey:n})})));a.length>0&&await r(n+1,a)}(0,e.keys.map((e=>({key:e,parentKey:void 0}))))}function a(e){return e.toRecordMap()}async function i(e){await o({keys:e.recordPointers,keyToString:n.dn,recurFn:async(t,r,n,o)=>await e.recurFn(t,n,o),loadFn:e.loadRecordModel,loadMultiFn:async t=>{const r=await e.loadRecordModel(t);return{get:e=>r.getModel(e)}},loadIntoMap:{get:t=>e.recordMap.getModel(t),set(t,r){e.recordMap.setModel(t,r)}}})}async function s(e){const{loadRecordModels:t}=e;await o({keys:e.recordPointers,keyToString:n.dn,recurFn:(t,r,n,o)=>{if(t.model)return e.recurFn(t.model,t.role,n,o)},loadFn:e.loadRecordModel,loadMultiFn:t&&(async e=>{const r=await t(e);return{get(e){const t=r.getModel(e),n=r.getRole(e);if(n)return{model:t,role:n}}}}),loadIntoMap:{get(t){const r=e.recordMap.getModel(t),n=e.recordMap.getRole(t);if(n)return{model:r,role:n}},set(t,r){r&&e.recordMap.setModelAndRole(t,r.model,r.role)}}})}},98459:(e,t,r)=>{r.d(t,{Bq:()=>u,F2:()=>l});var n=r(72126),o=r(59753),a=(r(73360),r(21202)),i=(r(6287),r(19889)),s=r(70203);function u(e){if(e.table===a.iU){const t=e.value;if(t)return o.kk.fromBlock(t).getCollectionPointer()}}function l(e){const t=s.lzi(e);return n.oA(t.map((e=>{const t=s.hDy(e),r=s.hH9(t),n=s.V8Y(t);if(r){const e=s.zEN(r);if(e)return{table:i.KJ,id:e}}else if(n){const e=s.TOT(n);if(e)return{table:a.iU,id:e}}})))}},82883:(e,t,r)=>{r.d(t,{X:()=>g,w:()=>v});var n=r(9291),o=r(80951),a=r(7057),i=r(78106),s=r(59753),u=r(21202),l=r(6287),c=r(15047),d=r(19889),p=r(54584),m=r(70203),y=r(7928);const f=(0,n.defineMessages)({untitledTextAsString:{defaultMessage:"Untitled",id:"textRenderHelpers.untitledTextAsString"}});function g(e){const{textValue:t,getRecordModel:r,userTimeZone:n,deterministic:o,intl:s,seenBlocks:u,disableAnnotationPrefix:l=!1,disableInsertedAnnotations:g=!1}=e,_=m.lzi(t);let b="";const h=u||new Set;for(const k of _){const e=m.hDy(k),t=m.hH9(e),u=m.V8Y(e),_=m.K9C(e),x=m.xat(e),T=m.Ap(e),M=m.QGY(e),w=l?"":"@";if(t){const e=m.zEN(t);if(e){const t=r({table:d.KJ,id:e});b+=`${w}${(0,y.Nz)(s,t)}`}}else if(x){const e=m.kxk(x);if(e){const{groupId:t,spaceId:n}=e,o=r({table:c.bx,id:n});b+=`${w}${(0,p.QH)(s,o,t)}`}}else if(u){const e=m.TOT(u);e&&!h.has(e)&&(h.add(e),b+=`${w}${v({blockId:e,getRecordModel:r,intl:s,userTimeZone:n,seenBlocks:h})||s.formatMessage(f.untitledTextAsString)}`)}else if(_){const{date_format:e,time_format:t,...r}=m.zyO(_);b+=`${w}${(0,a.ZV)({value:r,date_format:e,time_format:t,userTimeZone:n,intl:s,...o?{allowRelativeDates:!1}:{allowRelativeDates:!0}})}`}else if(T){b+=`$${m.xey(T)}$`}else if(M){b+=`${w}${m.U$y(m.fsE(M).type,s)}`}else if(m.jFV(e))b+=(0,i.fQ)(e,r,s,n);else if(m.jC0(e));else if(g&&m.gCI(e));else{b+=m.WiV(k)}}return b}function v(e){const{blockId:t,getRecordModel:r,intl:n,userTimeZone:a,seenBlocks:i}=e,c=r({table:u.iU,id:t});if(!c)return"";const d=c.getRenderFormatPointer(r);if(!d)return"";if(d.table===u.iU){if(c.isCollectionView()){const e=(0,o.wS)(c,"title");return e?g({textValue:e,getRecordModel:r,userTimeZone:a,deterministic:!1,intl:n,seenBlocks:i}):c.getEmptyTitlePlaceholder({getRecordModel:r,userTimeZone:a,intl:n})}const e=r(d);if(e){return g({textValue:(0,o.wS)(e,"title")||[],getRecordModel:r,userTimeZone:a,deterministic:!1,intl:n,seenBlocks:i,disableInsertedAnnotations:!0})}}else if(d.table===l.v){const e=r(d);if(!e)return"";const t=s.kk.fromCollection(e).getNormalizedName();if(t)return g({textValue:t,getRecordModel:r,userTimeZone:a,deterministic:!1,intl:n,seenBlocks:i,disableInsertedAnnotations:!0})}return""}},5228:(e,t,r)=>{r.d(t,{AE:()=>a,_h:()=>i,a7:()=>u,jY:()=>s,v9:()=>o});var n=r(89101);function o(e,t){return`${a(t)}/${e}`}function a(e){return`${e}${n._j.samlAuth}`}function i(e){const{samlConfigStatus:t,emailDomains:r,idp_metadata:n,idp_metadata_url:o}=e;return("configured"===t||"enforced"===t)&&!!r&&r.length>0&&Boolean(n||o)}function s(e){return 0===e.length?{type:"invalid",reason:"empty"}:{type:"valid"}}function u(e){return 0===e.length?{type:"invalid",reason:"empty"}:e.includes('WantAuthnRequestsSigned="true"')?{type:"invalid",reason:"signed_request"}:{type:"valid"}}},58129:(e,t,r)=>{r.d(t,{J8:()=>a,Kc:()=>i,ZP:()=>s});var n=r(80873),o=r(76096);const a="access_request";function i(e){return Boolean(e.granted_by_table)}const s={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_table:n.Z.String,parent_id:n.Z.UUID,for_actor_table:n.Z.String,for_actor_id:n.Z.UUID,granted_time:n.Z.Number,granted_by_table:n.Z.String,granted_by_id:n.Z.UUID,created_time:n.Z.Number,created_by_table:n.Z.String,created_by_id:n.Z.UUID,resolved_time:n.Z.Number,resolved_by_table:n.Z.String,resolved_by_id:n.Z.UUID,message:n.Z.String,status:n.Z.String,attributes:n.Z.JSON,type:n.Z.String},model:(0,o.y)({RecordStore:!0,properties:{resolved_by_id:{getRelationalPointerMethod:!1},for_actor_id:{getRelationalPointerMethod:!1},granted_by_id:{getRelationalPointerMethod:!1},created_by_id:{getRelationalPointerMethod:!1}}})}},70921:(e,t,r)=>{r.d(t,{L8:()=>d,Py:()=>p,Se:()=>m,TY:()=>y,ZP:()=>f,rH:()=>c,uJ:()=>l});var n=r(67266),o=r.n(n),a=r(4615),i=r(63143),s=r(80873),u=r(76096);const l=i.XP({space_id:!0,team_id:!0,navigable_block_id:!0,collection_id:!0,mentioned_user_id:!0,mentioned_block_id:!0,mentioned_property:!0,top_level_block_id:!0,collection_row_id:!0,discussion_id:!0,invited_user_id:!0,collection_property_id:!0,collection_view_id:!0,reminder_block_id:!0,reminder_property:!0,permission_group_id:!0,access_request_id:!0,mentioned_group_id:!0,contains_important_property_updates_only:!0,access_request_type:!0});function c(e){const t=Object.fromEntries(Object.entries(e).filter((e=>{let[t,r]=e;return l.includes(t)&&null!=r}))),r=o()(t);return(0,a.Ul)(r)}const d={"block-created":"block-edited","block-deleted":"block-edited","block-changed":"block-edited","block-property-changed":"block-property-edited","permission-created":"permissions-edited","permission-deleted":"permissions-edited","permission-changed":"permissions-edited","permission-restriction-created":"permissions-edited","permission-restriction-deleted":"permissions-edited","permission-group-created":"permission-group-edited","permission-group-deleted":"permission-group-edited","permission-group-changed":"permission-group-edited","top-level-block-created":"top-level-block-created","top-level-block-deleted":"top-level-block-deleted","collection-row-created":"collection-row-created","collection-row-deleted":"collection-row-deleted","mention-created":"user-mentioned","mention-deleted":"user-mentioned","comment-created":"commented","comment-changed":"commented","comment-deleted":"commented","team-member-added":"team-membership-edited","user-invited":"user-invited","collection-created":"collection-edited","collection-changed":"collection-edited","collection-property-created":"collection-property-edited","collection-property-deleted":"collection-property-edited","collection-property-changed":"collection-property-edited","collection-view-created":"collection-view-edited","collection-view-deleted":"collection-view-edited","collection-view-changed":"collection-view-edited","reminder-created":"reminder","page-locked":"page-locked","page-unlocked":"page-unlocked","email-changed":"email-edited","access-requested":"access-requested","access-request-resolved":"access-request-resolved","page-deleted":"page-deleted","page-restored":"page-restored","page-permanently-deleted":"page-permanently-deleted","private-content-transferred":"private-content-transferred","permission-group-mention-created":"permission-group-mentioned","permission-group-mention-deleted":"permission-group-mentioned","export-completed":"export-completed","import-completed":"import-completed"},p=["block-edited","permissions-edited","commented","page-locked","page-unlocked"],m=["block-edited","permissions-edited","collection-row-created","collection-row-deleted","collection-edited","collection-property-edited","collection-view-edited"],y="activity",f={table:y,columnTypes:{id:s.Z.UUID,version:s.Z.Number,last_version:s.Z.Number,index:s.Z.Number,start_time:s.Z.String,end_time:s.Z.String,space_id:s.Z.UUID,team_id:s.Z.UUID,navigable_block_id:s.Z.UUID,collection_id:s.Z.UUID,mentioned_user_id:s.Z.UUID,mentioned_block_id:s.Z.UUID,mentioned_property:s.Z.String,top_level_block_id:s.Z.UUID,discussion_id:s.Z.UUID,invited_user_id:s.Z.UUID,collection_row_id:s.Z.UUID,collection_view_id:s.Z.UUID,collection_property_id:s.Z.String,reminder_block_id:s.Z.UUID,reminder_property:s.Z.String,permission_group_id:s.Z.UUID,access_request_id:s.Z.UUID,type:s.Z.String,edits:s.Z.JSON,invalid:s.Z.Boolean,parent_table:s.Z.String,parent_id:s.Z.UUID,shard_id:s.Z.Number,context_id:s.Z.UUID,in_log:s.Z.Boolean,mentioned_group_id:s.Z.UUID,contains_important_property_updates_only:s.Z.Boolean,access_request_type:s.Z.String},model:(0,u.y)({RecordStore:!0})}},30842:(e,t,r)=>{r.d(t,{Y:()=>o,Z:()=>a});var n=r(80873);const o="admin_api_log",a={table:o,columnTypes:{id:n.Z.UUID,timestamp:n.Z.Number,admin_user_id:n.Z.UUID,event_name:n.Z.String,params:n.Z.JSON,version:n.Z.Number,last_version:n.Z.Number,did_write:n.Z.Boolean},requiredColumns:{id:!0,event_name:!0,admin_user_id:!0,timestamp:!0,version:!0}}},39050:(e,t,r)=>{r.d(t,{L:()=>o,Z:()=>a});var n=r(80873);const o="admin_api_op_log",a={table:o,columnTypes:{id:n.Z.UUID,request_id:n.Z.UUID,timestamp:n.Z.Number,event_name:n.Z.String,operation_index:n.Z.Number,operation:n.Z.JSON,version:n.Z.Number,last_version:n.Z.Number},requiredColumns:{id:!0,version:!0,request_id:!0,timestamp:!0,event_name:!0,operation:!0,operation_index:!0}}},54368:(e,t,r)=>{r.d(t,{Z:()=>i,y:()=>a});var n=r(80873),o=r(76096);const a="agent",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_id:n.Z.UUID,parent_table:n.Z.String,space_id:n.Z.UUID,alive:n.Z.Boolean,created_time:n.Z.Number,created_by_id:n.Z.UUID,created_by_table:n.Z.String,last_edited_time:n.Z.Number,last_edited_by_id:n.Z.UUID,last_edited_by_table:n.Z.String,instruction_block_id:n.Z.UUID,resources:n.Z.JSON,properties:n.Z.JSON},model:(0,o.y)({RecordStore:!0,interfaces:{ActorModelInterface:"@notionhq/shared/models/ActorModelInterface"}})}},51650:(e,t,r)=>{r.d(t,{Z:()=>i,b:()=>a});var n=r(80873),o=r(76096);const a="ai_waitlist",i={table:a,columnTypes:{id:n.Z.UUID,created_at:n.Z.UUID,updated_at:n.Z.UUID,user_id:n.Z.UUID,referring_id:n.Z.UUID,enrolled:n.Z.Boolean,email:n.Z.String,position:n.Z.Number,version:n.Z.Number,invite_code:n.Z.String,space_id:n.Z.String,qna_priority:n.Z.Boolean},model:(0,o.y)({RecordStore:!0})}},88179:(e,t,r)=>{r.d(t,{F:()=>o,Z:()=>a});var n=r(80873);const o="apple_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,access_token:n.Z.String,refresh_token:n.Z.String,apple_user_id:n.Z.String}}},80926:(e,t,r)=>{r.d(t,{D:()=>o,Z:()=>a});var n=r(80873);const o="asana_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,access_token:n.Z.String,refresh_token:n.Z.String,account:n.Z.String}}},8542:(e,t,r)=>{r.d(t,{ZP:()=>i,t_:()=>a});var n=r(80873),o=r(76096);const a="assistant_chat_session",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.UUID,parent_table:n.Z.String,parent_id:n.Z.UUID,created_time:n.Z.Number,chat_step_id:n.Z.UUID,type:n.Z.String,parent_external_id:n.Z.String,alive:n.Z.Boolean,properties:n.Z.JSON},requiredColumns:{id:!0,version:!0,space_id:!0,type:!0,created_time:!0,alive:!0,chat_step_id:!0},model:(0,o.y)({RecordStore:!0})}},10188:(e,t,r)=>{r.d(t,{J4:()=>a,ZP:()=>i});var n=r(80873),o=r(76096);const a="assistant_chat_step",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.UUID,parent_table:n.Z.String,parent_id:n.Z.UUID,created_time:n.Z.Number,properties:n.Z.JSON},requiredColumns:{id:!0,version:!0,space_id:!0,created_time:!0,parent_table:!0,parent_id:!0},model:(0,o.y)({RecordStore:!0})}},98963:(e,t,r)=>{r.d(t,{FT:()=>i,OO:()=>u,ZP:()=>l,cv:()=>a,tb:()=>s});var n=r(80873),o=r(76096);const a="automation",i=100,s=300,u=30,l={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.UUID,parent_table:n.Z.String,parent_id:n.Z.UUID,alive:n.Z.Boolean,created_by_id:n.Z.UUID,created_by_table:n.Z.String,created_time:n.Z.Number,last_edited_by_id:n.Z.UUID,last_edited_by_table:n.Z.String,last_edited_time:n.Z.Number,status:n.Z.String,trigger:n.Z.JSON,action_ids:n.Z.StringArray,run_at:n.Z.Number,properties:n.Z.JSON},requiredColumns:{id:!0,version:!0,space_id:!0,parent_table:!0,parent_id:!0,alive:!0,created_by_id:!0,created_by_table:!0,created_time:!0,last_edited_by_id:!0,last_edited_by_table:!0,last_edited_time:!0,status:!0,trigger:!0},defaultColumnValues:{status:"disabled"},model:(0,o.y)({RecordStore:!0,properties:{trigger:{getKeyStoreMethod:!1}}})}},18844:(e,t,r)=>{r.d(t,{Xj:()=>a,ZP:()=>i});var n=r(80873),o=r(76096);const a="automation_action",i={table:a,columnTypes:{id:n.Z.UUID,type:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.UUID,parent_table:n.Z.String,parent_id:n.Z.UUID,alive:n.Z.Boolean,config:n.Z.JSON,blocks:n.Z.StringArray},requiredColumns:{id:!0,type:!0,version:!0,space_id:!0,parent_table:!0,parent_id:!0,alive:!0},model:(0,o.y)({RecordStore:!0,properties:{config:{getKeyStoreMethod:!1}}})}},7470:(e,t,r)=>{r.d(t,{Z:()=>a,n:()=>o});var n=r(80873);const o="block_token",a={table:o,columnTypes:{id:n.Z.UUID,token_id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number}}},60014:(e,t,r)=>{r.d(t,{Z:()=>a,x:()=>o});var n=r(80873);const o="bot_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,bot_id:n.Z.UUID,created_at:n.Z.Number,revoked_at:n.Z.Number,secret:n.Z.String}}},6287:(e,t,r)=>{r.d(t,{Z:()=>s,v:()=>i});var n=r(78934),o=r(80873),a=r(76096);const i="collection",s={table:i,columnTypes:{id:o.Z.UUID,version:o.Z.Number,last_version:o.Z.Number,name:o.Z.JSON,description:o.Z.JSON,icon:o.Z.String,cover:o.Z.String,schema:o.Z.JSON,format:o.Z.JSON,parent_id:o.Z.UUID,parent_table:o.Z.String,alive:o.Z.Boolean,file_ids:o.Z.StringArray,template_pages:o.Z.StringArray,copied_from:o.Z.UUID,migrated:o.Z.Boolean,space_id:o.Z.UUID,deleted_schema:o.Z.JSON},requiredColumns:{parent_id:!0,parent_table:!0,alive:!0},defaultColumnValues:{alive:!1},model:(0,a.y)({RecordStore:!0,properties:{icon:{getMethod:"getRawIcon",getKeyStoreMethod:"getIconStore"},cover:{getKeyStoreMethod:!0},format:{defaultOnRead:n.Ic},schema:{defaultOnRead:n.Ic},deleted_schema:{defaultOnRead:n.Ic},copied_from:{getMethod:!1}}})}},13493:(e,t,r)=>{r.d(t,{Z:()=>i,n:()=>a});var n=r(80873),o=r(76096);const a="collection_view",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,type:n.Z.String,name:n.Z.String,page_sort:n.Z.UUIDArray,parent_id:n.Z.UUID,parent_table:n.Z.String,alive:n.Z.Boolean,format:n.Z.JSON,query2:n.Z.JSON,space_id:n.Z.UUID,created_time:n.Z.Number,created_by_table:n.Z.String,created_by_id:n.Z.UUID,last_edited_time:n.Z.Number,last_edited_by_table:n.Z.String,last_edited_by_id:n.Z.UUID},requiredColumns:{parent_id:!0,parent_table:!0,alive:!0,type:!0},defaultColumnValues:{alive:!1},model:(0,o.y)({RecordStore:!0,properties:{query2:{getMethod:"getRawQuery",getKeyStoreMethod:"getQueryStore"},format:{defaultOnRead:{}}}})}},70279:(e,t,r)=>{r.d(t,{ZP:()=>i,x_:()=>a});var n=r(80873),o=r(76096);const a="comment",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_id:n.Z.UUID,parent_table:n.Z.String,text:n.Z.JSON,created_time:n.Z.Number,last_edited_time:n.Z.Number,alive:n.Z.Boolean,created_by_table:n.Z.String,created_by_id:n.Z.UUID,space_id:n.Z.UUID,content:n.Z.UUIDArray,reactions:n.Z.UUIDArray},requiredColumns:{parent_id:!0,parent_table:!0,alive:!0,created_time:!0},model:(0,o.y)({RecordStore:!0})}},75908:(e,t,r)=>{r.d(t,{D:()=>o,Z:()=>a});var n=r(80873);const o="confluence_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,site:n.Z.String,email:n.Z.String,access_token:n.Z.String,instance:n.Z.String,authentication_type:n.Z.String,user_id:n.Z.UUID,space_id:n.Z.UUID}}},6359:(e,t,r)=>{r.d(t,{H:()=>o,Z:()=>a});var n=r(80873);const o="cookie_consent",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,consent_id:n.Z.UUID,update_time:n.Z.Number,permission:n.Z.JSON,document_version:n.Z.String}}},7678:(e,t,r)=>{r.d(t,{DJ:()=>a,Vt:()=>o,ZP:()=>i});var n=r(80873);const o="promo",a="credit",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,user_id:n.Z.UUID,amount:n.Z.Number,created_timestamp:n.Z.Number,type:n.Z.String,to_user_id:n.Z.UUID,activated:n.Z.Boolean,from_user_id:n.Z.UUID,sent_email:n.Z.Boolean}}},73409:(e,t,r)=>{r.d(t,{Hf:()=>s,Sh:()=>a,Vx:()=>i,Wb:()=>c,ZP:()=>d,a0:()=>u,og:()=>l,zK:()=>o});var n=r(80873);const o="user_7d",a="user_28d",i="user_90d",s="user_180d",u="template_7d",l="passive",c="csat_feedback",d={table:c,columnTypes:{id:n.Z.UUID,user_id:n.Z.UUID,space_id:n.Z.UUID,additional_feedback:n.Z.String,rating:n.Z.Number,created_time:n.Z.Number,version:n.Z.Number,last_version:n.Z.Number,use_case:n.Z.String,milestone:n.Z.String,template_id:n.Z.String}}},60897:(e,t,r)=>{r.d(t,{BV:()=>s,KK:()=>u,ZP:()=>a,tt:()=>i,uw:()=>l,wK:()=>o});var n=r(80873);const o="customer",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,customer_id:n.Z.String,offers:n.Z.JSON,sales_assisted_plan:n.Z.String}},i=["personal","plus","business","enterprise"],s=["personal_monthly_5","personal_yearly_48","team_monthly_10","team_yearly_96","business_monthly","business_yearly","enterprise_monthly_25","enterprise_yearly_240","plus_monthly_eur","plus_yearly_eur","business_monthly_eur","business_yearly_eur","enterprise_monthly_eur","enterprise_yearly_eur","ambassador_plus_free","ambassador_enterprise_free","employee_plus_free","marketing_team_free","marketing_enterprise_free","nonprofit_free","personal_free","team_free","student_free","student_free_eur","student_club_monthly","student_club_yearly","enterprise_trial","business_trial","enterprise_free","business_sales_assisted","plus_sales_assisted","personal_monthly_0.50","personal_monthly_1.50","personal_monthly_2.50","personal_monthly_3.50","team_monthly_0.10","team_monthly_0.50","team_monthly_0.80","team_monthly_0.90","team_monthly_1","team_monthly_1.20","team_monthly_1.50","team_monthly_2","team_monthly_2.40","team_monthly_2.50","team_monthly_3","team_monthly_3.20","team_monthly_3.50","team_monthly_4","team_monthly_4.50","team_monthly_5","team_monthly_5.60","team_monthly_6","team_monthly_7","team_monthly_8","personal_yearly_4.80","personal_yearly_14.40","personal_yearly_24","personal_yearly_33.60","team_yearly_1","team_yearly_5","team_yearly_8","team_yearly_9","team_yearly_9.60","team_yearly_12","team_yearly_15","team_yearly_20","team_yearly_24","team_yearly_25","team_yearly_28.80","team_yearly_32","team_yearly_35","team_yearly_40","team_yearly_45","team_yearly_48","team_yearly_56","team_yearly_60","team_yearly_67.20","team_yearly_80","enterprise_monthly_8","enterprise_monthly_10","enterprise_monthly_12","enterprise_monthly_14","enterprise_monthly_16","enterprise_monthly_18","enterprise_monthly_20","enterprise_yearly_80","enterprise_yearly_96","enterprise_yearly_120","enterprise_yearly_144","enterprise_yearly_168","enterprise_yearly_180","enterprise_yearly_192","enterprise_yearly_216"],u=[["personal_monthly_5","personal_yearly_48"],["team_monthly_10","team_yearly_96"],["enterprise_monthly_25","enterprise_yearly_240"],["business_monthly","business_yearly"],["plus_monthly_eur","plus_yearly_eur"],["business_monthly_eur","business_yearly_eur"],["enterprise_monthly_eur","enterprise_yearly_eur"],["personal_monthly_0.50","personal_yearly_4.80"],["personal_monthly_1.50","personal_yearly_14.40"],["personal_monthly_2.50","personal_yearly_24"],["personal_monthly_3.50","personal_yearly_33.60"],["team_monthly_0.10","team_yearly_1"],["team_monthly_0.50","team_yearly_5"],["team_monthly_0.80","team_yearly_8"],["team_monthly_0.90","team_yearly_9"],["team_monthly_1","team_yearly_9.60"],["team_monthly_1.20","team_yearly_12"],["team_monthly_1.50","team_yearly_15"],["team_monthly_2","team_yearly_20"],["team_monthly_2.40","team_yearly_24"],["team_monthly_2.50","team_yearly_25"],["team_monthly_3","team_yearly_28.80"],["team_monthly_3.20","team_yearly_32"],["team_monthly_3.50","team_yearly_35"],["team_monthly_4","team_yearly_40"],["team_monthly_4.50","team_yearly_45"],["team_monthly_5","team_yearly_48"],["team_monthly_5.60","team_yearly_56"],["team_monthly_6","team_yearly_60"],["team_monthly_7","team_yearly_67.20"],["team_monthly_8","team_yearly_80"]],l=new Map([["price_1IWYfwCcKlYJxALVn3h1FDMm","month"],["price_1JUEZuCcKlYJxALVYaWwog5r","month"],["price_1Iul91CcKlYJxALVXqpYUS5z","year"],["price_1JUEbNCcKlYJxALVQXiIfVzm","year"],["price_1IWYgUCcKlYJxALVXmBD18kY","year"],["price_1IzyXXCcKlYJxALVZfZMiEJt","year"]])},69549:(e,t,r)=>{r.d(t,{U5:()=>i,ZP:()=>u});var n=r(74487),o=r(80873),a=r(76096);const i="device",s={table:i,columnTypes:{id:o.Z.UUID,user_id:o.Z.UUID,created_at:o.Z.Number,version:o.Z.Number,last_version:o.Z.Number,device_name:o.Z.String,device_os:o.Z.String,os_version:o.Z.NumberArray,device_platform:o.Z.String},model:(0,a.y)({})},u=(n.literals("ios","android","mac","windows","chrome","linux","unknown"),n.literals("react-native","electron","browser"),s)},33709:(e,t,r)=>{r.d(t,{ZP:()=>i,qF:()=>a});var n=r(80873),o=r(76096);const a="discussion",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_id:n.Z.UUID,parent_table:n.Z.String,context:n.Z.JSON,resolved:n.Z.Boolean,comments:n.Z.StringArray,space_id:n.Z.UUID},requiredColumns:{parent_id:!0,parent_table:!0,resolved:!0},model:(0,o.y)({RecordStore:!0})}},44312:(e,t,r)=>{r.d(t,{Jd:()=>a,ZP:()=>i});var n=r(80873),o=r(76096);const a="domain_verification_code";const i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_id:n.Z.UUID,parent_table:n.Z.String,domain:n.Z.String,verification_code:n.Z.String,created_at:n.Z.Number,expires_at:n.Z.Number,verified_at:n.Z.Number,alive:n.Z.Boolean,type:n.Z.String,info:n.Z.JSON},model:(0,o.y)({RecordStore:!0})}},4986:(e,t,r)=>{r.d(t,{ZP:()=>a,rv:()=>o});r(63143);var n=r(80873);const o="drive_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,notion_user_id:n.Z.UUID,google_user_id:n.Z.String,email:n.Z.String,access_token:n.Z.String,refresh_token:n.Z.String,expires_at:n.Z.Number}}},52719:(e,t,r)=>{r.d(t,{Z:()=>a,g:()=>o});var n=r(80873);const o="education_domain",a={table:o,columnTypes:{id:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,domain:n.Z.String,activated_count:n.Z.Number},requiredColumns:{domain:!0,activated_count:!0},defaultColumnValues:{activated_count:0}}},58912:(e,t,r)=>{r.d(t,{J:()=>o,Z:()=>a});var n=r(80873);const o="education_email",a={table:o,columnTypes:{id:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,email:n.Z.String,activated:n.Z.Boolean},requiredColumns:{email:!0,activated:!0},defaultColumnValues:{activated:!1}}},19639:(e,t,r)=>{r.d(t,{ZP:()=>c,gl:()=>s,mz:()=>l,nJ:()=>i,nb:()=>u});var n=r(97880),o=r(80873),a=r(76096);function i(e,t){switch(e){case"unrestricted":return t.formatMessage({id:"emailDomain.workspaceCreationSetting.auditLog.unrestricted",defaultMessage:"Unrestricted"});case"admins_only":return t.formatMessage({id:"emailDomain.workspaceCreationSetting.auditLog.workspaceOwnersOnly",defaultMessage:"Workspace Owners Only"});default:(0,n.t1)(e)}}const s="90_day",u={"1_hour":36e5,"2_hour":72e5,"4_hour":144e5,"8_hour":288e5,"12_hour":432e5,"1_day":864e5,"2_day":1728e5,"3_day":2592e5,"4_day":3456e5,"7_day":6048e5,"14_day":12096e5,"21_day":18144e5,"30_day":2592e6,"60_day":5184e6,"90_day":7776e6},l="email_domain",c={table:l,columnTypes:{id:o.Z.UUID,version:o.Z.Number,last_version:o.Z.Number,created_time:o.Z.Number,created_by_table:o.Z.String,created_by_id:o.Z.UUID,last_edited_time:o.Z.Number,last_edited_by_table:o.Z.String,last_edited_by_id:o.Z.UUID,domain:o.Z.String,space_ids:o.Z.UUIDArray,workspace_creation_enum:o.Z.String,settings:o.Z.JSON},model:(0,a.y)({properties:{created_by_id:{getRelationalPointerMethod:!1},last_edited_by_id:{getRelationalPointerMethod:!1}}})}},36077:(e,t,r)=>{r.d(t,{Z:()=>a,z:()=>o});var n=r(80873);const o="evernote_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,account:n.Z.String,request_token:n.Z.String,request_secret:n.Z.String,access_token:n.Z.String,access_secret:n.Z.String,created_time:n.Z.Number}}},97715:(e,t,r)=>{r.d(t,{Le:()=>o,ZP:()=>s,bt:()=>a,sl:()=>i});var n=r(80873);const o="control",a=["userId","deviceId","spaceId"],i="experiment",s={table:i,columnTypes:{id:n.Z.UUID,experiment_id:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,groups:n.Z.JSON,overrides:n.Z.JSON,experiment_version:n.Z.Number,start_time:n.Z.Number,end_time:n.Z.Number,target_type:n.Z.String}}},32161:(e,t,r)=>{r.d(t,{P:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="external_authentication",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,last_edited_time:n.Z.Number,parent_table:n.Z.String,parent_id:n.Z.UUID,space_id:n.Z.UUID,user_id:n.Z.UUID,integration_id:n.Z.UUID,account_key:n.Z.String,account_name:n.Z.String},model:(0,o.y)({})}},82447:(e,t,r)=>{r.d(t,{Z:()=>a,r:()=>o});var n=r(80873);const o="external_authentication_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,access_token:n.Z.String,refresh_token:n.Z.String,bot_id:n.Z.String,user_id:n.Z.String,integration_id:n.Z.String,space_id:n.Z.String,expires_at:n.Z.Number}}},9713:(e,t,r)=>{r.d(t,{Z:()=>i,a:()=>a});var n=r(80873),o=r(76096);const a="external_entity",i={table:a,columnTypes:{id:n.Z.UUID,entity_type:n.Z.String,external_identifier:n.Z.String,external_display_name:n.Z.String,metainfo:n.Z.JSON,external_integration_id:n.Z.String,bot_id:n.Z.String,user_id:n.Z.UUID,space_id:n.Z.UUID,alive:n.Z.Boolean,version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,created_by_table:n.Z.String,created_by_id:n.Z.String,updated_by_table:n.Z.String,updated_by_id:n.Z.String},model:(0,o.y)({})}},57398:(e,t,r)=>{r.d(t,{T:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="external_integration_app",i={table:a,columnTypes:{id:n.Z.UUID,client_id:n.Z.String,client_secret:n.Z.String,oauth_authorize_url:n.Z.String,oauth_token_url:n.Z.String,deletion_url:n.Z.String,scopes:n.Z.StringArray,internal_integration_id:n.Z.UUID,alive:n.Z.Boolean,version:n.Z.Number,created_at:n.Z.Number,created_by_table:n.Z.String,created_by_id:n.Z.UUID,updated_by_table:n.Z.String,updated_by_id:n.Z.UUID,updated_at:n.Z.Number},model:(0,o.y)({})}},49953:(e,t,r)=>{r.d(t,{ZP:()=>u,r9:()=>s,wG:()=>i});var n=r(74487),o=r(80873),a=r(76096);const i=n.object({required:{oauth_authorize_url:n.string(),oauth_token_url:n.string(),client_id:n.string(),client_secret:n.string()},optional:{scopes:n.string(),deletion_url:n.string()}}),s="external_integration_authorization",u={table:s,columnTypes:{id:o.Z.UUID,version:o.Z.Number,last_version:o.Z.Number,parent_table:o.Z.String,parent_id:o.Z.String,oauth_authorize_url:o.Z.String,oauth_token_url:o.Z.String,client_id:o.Z.String,client_secret:o.Z.String,scopes:o.Z.String,deletion_url:o.Z.String},model:(0,a.y)({})}},14710:(e,t,r)=>{r.d(t,{Dw:()=>a,ZP:()=>i,kE:()=>o});var n=r(80873);const o={avatar:"avatar",identifier:"identifier",title:"title",primary:"primary",secondary:"secondary",body:"body",entity:"entity",embed:"embed",background:"background"},a="external_object",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,last_edited_time:n.Z.Number,external_created_at:n.Z.Number,external_last_edited_time:n.Z.Number,bot_id:n.Z.UUID,space_id:n.Z.UUID,uri:n.Z.String,attributes:n.Z.JSON,error:n.Z.JSON,schema:n.Z.JSON,external_collection_uris:n.Z.StringArray,sync_state:n.Z.JSON}}},9508:(e,t,r)=>{r.d(t,{F:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="external_token",i={table:a,columnTypes:{id:n.Z.UUID,external_entity_id:n.Z.UUID,scopes:n.Z.StringArray,auth_type:n.Z.String,access_token:n.Z.String,refresh_token:n.Z.String,expires_at:n.Z.Number,lock_status:n.Z.String,alive:n.Z.Boolean,version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,created_by_table:n.Z.String,created_by_id:n.Z.UUID,updated_by_table:n.Z.String,updated_by_id:n.Z.UUID},model:(0,o.y)({})}},62643:(e,t,r)=>{r.d(t,{ZP:()=>s,q4:()=>i,r9:()=>a});var n=r(4615),o=r(80873);function a(e){const{user_id:t,token:r}=e;return(0,n.Ul)([t,r].join(""))}const i="firebase_token",s={table:i,columnTypes:{id:o.Z.UUID,version:o.Z.Number,last_version:o.Z.Number,token:o.Z.String,user_id:o.Z.UUID,invalid:o.Z.Boolean}}},57883:(e,t,r)=>{r.d(t,{$j:()=>f,GC:()=>d,Tg:()=>c,ZP:()=>v,r$:()=>p,t0:()=>g,vU:()=>m,yI:()=>y});var n=r(4615),o=r(74487),a=r(80873),i=r(76096);const s=o.object({required:{comments:o.literal("all"),property_updates:o.literal("all"),mentions:o.literal(!0),other:o.literal(!0),explicitly_set_by_user:o.boolean()},optional:{}}),u=o.object({required:{comments:o.literal("all"),property_updates:o.literal("off"),mentions:o.literal(!0),other:o.literal(!0),explicitly_set_by_user:o.boolean()},optional:{}}),l=o.object({required:{comments:o.literal("all"),property_updates:o.literal("important"),mentions:o.literal(!0),other:o.literal(!0),explicitly_set_by_user:o.boolean()},optional:{}}),c=o.object({required:{comments:o.literal("replies"),property_updates:o.literal("off"),mentions:o.literal(!0),other:o.literal(!1),explicitly_set_by_user:o.boolean()},optional:{}});o.union([s,u,l,c]);function d(e){return{comments:"all",property_updates:"important",mentions:!0,other:!0,explicitly_set_by_user:e.explicitly_set_by_user}}function p(e){return{comments:"all",property_updates:"off",mentions:!0,other:!0,explicitly_set_by_user:e.explicitly_set_by_user}}function m(e){return{comments:"replies",property_updates:"off",mentions:!0,other:!1,explicitly_set_by_user:e.explicitly_set_by_user}}function y(e){return{comments:"all",property_updates:"all",mentions:!0,other:!0,explicitly_set_by_user:e.explicitly_set_by_user}}function f(e){const{user_id:t,navigable_block_id:r}=e;return(0,n.Ul)([t,r].join(""))}const g="follow",v={table:g,columnTypes:{id:a.Z.UUID,version:a.Z.Number,last_version:a.Z.Number,user_id:a.Z.UUID,navigable_block_id:a.Z.UUID,following:a.Z.Boolean,created_time:a.Z.Number,space_id:a.Z.UUID,follow_settings:a.Z.JSON},model:(0,i.y)({RecordStore:!0})}},66726:(e,t,r)=>{r.d(t,{Z:()=>a,l:()=>o});var n=r(80873);const o="geo_ip_location",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,geoname_id:n.Z.Number,locale_code:n.Z.String,continent_code:n.Z.String,continent_name:n.Z.String,country_iso_code:n.Z.String,country_name:n.Z.String,subdivision_1_iso_code:n.Z.String,subdivision_1_name:n.Z.String,subdivision_2_iso_code:n.Z.String,subdivision_2_name:n.Z.String,city_name:n.Z.String,metro_code:n.Z.Number,time_zone:n.Z.String,is_in_european_union:n.Z.Boolean}}},30754:(e,t,r)=>{r.d(t,{G:()=>o,Z:()=>a});var n=r(80873);const o="geo_ip_network",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,network:n.Z.String,geoname_id:n.Z.Number,registered_country_geoname_id:n.Z.Number,represented_country_geoname_id:n.Z.Number,is_anonymous_proxy:n.Z.Boolean,is_satellite_provider:n.Z.Boolean,postal_code:n.Z.String,latitude:n.Z.Number,longitude:n.Z.Number,accuracy_radius:n.Z.Number}}},6946:(e,t,r)=>{r.d(t,{N:()=>o,Z:()=>a});var n=r(80873);const o="google_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,token:n.Z.String,google_user_id:n.Z.String}}},25753:(e,t,r)=>{r.d(t,{Z:()=>a,z:()=>o});var n=r(80873);const o="integration_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,integration_id:n.Z.UUID,created_at:n.Z.Number,revoked_at:n.Z.Number,token_hash:n.Z.String}}},84683:(e,t,r)=>{r.d(t,{Tu:()=>a,ZP:()=>i,_e:()=>o});var n=r(80873);const o="group",a="invite",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,flow_id:n.Z.UUID,space_id:n.Z.UUID,target_id:n.Z.UUID,target_table:n.Z.String,inviter_id:n.Z.UUID,inviter_table:n.Z.String,invitee_id:n.Z.UUID,invitee_table_or_group:n.Z.String,message:n.Z.String,created_time:n.Z.Number,attributes:n.Z.JSON},requiredColumns:{id:!0,version:!0,space_id:!0,target_id:!0,target_table:!0,inviter_id:!0,inviter_table:!0,invitee_id:!0,invitee_table_or_group:!0,created_time:!0,attributes:!0}}},38429:(e,t,r)=>{r.d(t,{ZP:()=>l,i6:()=>a});var n=r(74487),o=r(80873);const a="mfa_settings",i={table:a,columnTypes:{id:o.Z.UUID,user_id:o.Z.UUID,created_at:o.Z.Number,enabled:o.Z.Boolean,is_primary:o.Z.Boolean,method:o.Z.String,setting:o.Z.JSON,version:o.Z.Number,last_version:o.Z.Number}},s=(n.literals("totp","sms","backup_code"),n.literals("totp","sms"),n.literals("bcrypt")),u=n.literals("crypto-service"),l=(n.object({required:{backup_codes:n.array(n.object({required:{codeHash:n.string(),hasBeenUsed:n.boolean()},optional:{}})),hash_method:s},optional:{recovery:n.boolean()}}),n.object({required:{phone_number:n.string(),masked_phone_number:n.string()},optional:{}}),n.object({required:{totp_secret:n.string(),encryption_method:u,key_version:n.string(),friendly_name:n.string()},optional:{}}),i)},89488:(e,t,r)=>{r.d(t,{N:()=>o,Z:()=>a});var n=r(80873);const o="monday_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,email:n.Z.String,api_token:n.Z.String,user_id:n.Z.UUID,space_id:n.Z.UUID}}},65311:(e,t,r)=>{r.d(t,{ZP:()=>s,hE:()=>a,uX:()=>i});r(4615);var n=r(80873),o=r(76096);const a={"user-mentioned":"mentions",commented:"mentions","block-property-edited":"mentions","user-invited":"mentions","team-membership-edited":"mentions",reminder:"mentions","email-edited":"mentions","access-requested":"mentions","access-request-resolved":"mentions","private-content-transferred":"mentions","permission-group-mentioned":"mentions","verification-expired":"mentions","import-completed":"mentions","export-completed":"mentions","block-edited":"following","permissions-edited":"following","permission-group-edited":"following","top-level-block-created":"following","top-level-block-deleted":"following","collection-row-created":"following","collection-row-deleted":"following","collection-edited":"following","collection-property-edited":"following","collection-view-edited":"following","page-locked":"following","page-unlocked":"following","page-deleted":"following","page-restored":"following","page-permanently-deleted":"following"};const i="notification",s={table:i,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,user_id:n.Z.String,activity_id:n.Z.UUID,received:n.Z.Boolean,read:n.Z.Boolean,visited:n.Z.Boolean,emailed:n.Z.Boolean,invalid:n.Z.Boolean,space_id:n.Z.UUID,navigable_block_id:n.Z.UUID,collection_id:n.Z.UUID,discussion_id:n.Z.UUID,end_time:n.Z.String,type:n.Z.String,channel:n.Z.String,archived_at:n.Z.Number},model:(0,o.y)({RecordStore:!0})}},16427:(e,t,r)=>{r.d(t,{V:()=>o,Z:()=>a});var n=r(80873);const o="oauth_authorization_code",a={table:o,columnTypes:{id:n.Z.UUID,created_time:n.Z.Number,version:n.Z.Number,last_version:n.Z.Number,redirect_uri:n.Z.String,created_by_id:n.Z.UUID,created_by_table:n.Z.String,bot_id:n.Z.UUID,created_bot_token_id:n.Z.UUID,revoked_at:n.Z.Number,type:n.Z.String,space_id:n.Z.UUID,integration_id:n.Z.UUID,optional_info:n.Z.JSON,capabilities:n.Z.JSON}}},61220:(e,t,r)=>{r.d(t,{V7:()=>a,ZP:()=>i});var n=r(80873),o=r(76096);const a="organization",i={table:a,columnTypes:{id:n.Z.UUID,name:n.Z.String,membership:n.Z.JSON,version:n.Z.Number,last_version:n.Z.Number,alive:n.Z.Boolean,created_time:n.Z.Number,created_by_id:n.Z.UUID,created_by_table:n.Z.String,last_edited_time:n.Z.Number,last_edited_by_id:n.Z.UUID,last_edited_by_table:n.Z.String,disable_guests:n.Z.JSON,disable_public_access:n.Z.JSON,integration_restrictions:n.Z.JSON},requiredColumns:{id:!0,version:!0,alive:!0,created_time:!0,created_by_id:!0,created_by_table:!0,last_edited_by_id:!0,last_edited_by_table:!0,last_edited_time:!0},model:(0,o.y)({RecordStore:!0})}},96683:(e,t,r)=>{r.d(t,{K:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="organization_space",i={table:a,columnTypes:{id:n.Z.UUID,organization_id:n.Z.UUID,space_id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number},requiredColumns:{id:!0,version:!0,organization_id:!0,space_id:!0},model:(0,o.y)({})}},70017:(e,t,r)=>{r.d(t,{Kk:()=>a,ZP:()=>i});r(4615);var n=r(80873),o=r(76096);const a="page_exit",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_table:n.Z.String,parent_id:n.Z.UUID,user_id:n.Z.UUID,exited_at:n.Z.Number,space_id:n.Z.UUID},requiredColumns:{parent_table:!0,parent_id:!0,user_id:!0,exited_at:!0},model:(0,o.y)({RecordStore:!0})}},89470:(e,t,r)=>{r.d(t,{Pv:()=>i,UI:()=>s,ZP:()=>u});var n=r(4615),o=r(80873),a=r(76096);function i(e){const{parent_id:t,user_id:r}=e;return(0,n.Ul)(`block:${t}:${r}`)}const s="page_visit",u={table:s,columnTypes:{id:o.Z.UUID,version:o.Z.Number,last_version:o.Z.Number,parent_table:o.Z.String,parent_id:o.Z.UUID,user_id:o.Z.UUID,visited_at:o.Z.Number,space_id:o.Z.UUID},requiredColumns:{parent_table:!0,parent_id:!0,user_id:!0,visited_at:!0},model:(0,a.y)({RecordStore:!0})}},49126:(e,t,r)=>{r.d(t,{Z:()=>a,v:()=>o});var n=r(80873);const o="password",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,password_hash:n.Z.String}}},94578:(e,t,r)=>{r.d(t,{P9:()=>o,ZP:()=>a});var n=r(80873);const o="property_item";const a={table:o,columnTypes:{id:n.Z.UUID,space_id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_id:n.Z.UUID,parent_table:n.Z.String,parent_version:n.Z.Number,property_id:n.Z.String,property_version:n.Z.Number,fractional_index:n.Z.String,collection_id:n.Z.UUID,json_value:n.Z.JSON,plain_text_value:n.Z.String,text_has_mentions:n.Z.Boolean,url_value:n.Z.String,boolean_value:n.Z.Boolean,number_value:n.Z.Number,date_value_start:n.Z.Number,date_value_end:n.Z.Number,date_value_is_datetime:n.Z.Boolean,date_value_timezone:n.Z.String,date_value_original:n.Z.String,select_value:n.Z.String,pointer_value_id:n.Z.UUID,pointer_value_space_id:n.Z.UUID,pointer_value_table:n.Z.String}}},4137:(e,t,r)=>{r.d(t,{A:()=>o,Z:()=>a});var n=r(80873);const o="public_email_domain",a={table:o,columnTypes:{id:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,domain:n.Z.String},requiredColumns:{domain:!0}}},80396:(e,t,r)=>{r.d(t,{ZP:()=>i,yo:()=>a});var n=r(80873),o=r(76096);const a="reaction",i={table:a,columnTypes:{id:n.Z.UUID,space_id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_time:n.Z.Number,parent_id:n.Z.UUID,parent_table:n.Z.String,icon:n.Z.String,actors:n.Z.JSON},requiredColumns:{parent_id:!0,parent_table:!0,space_id:!0,icon:!0},defaultColumnValues:{},model:(0,o.y)({RecordStore:!0})}},24836:(e,t,r)=>{r.d(t,{Sr:()=>u,ZP:()=>s,qV:()=>i});var n=r(4615),o=r(80873),a=r(76096);const i="record_counter",s={table:i,columnTypes:{id:o.Z.UUID,version:o.Z.Number,last_version:o.Z.Number,space_id:o.Z.UUID,parent_table:o.Z.String,parent_id:o.Z.UUID,next_value:o.Z.Number,alive:o.Z.Boolean},requiredColumns:{space_id:!0,parent_table:!0,parent_id:!0,next_value:!0,alive:!0},model:(0,a.y)({RecordStore:!0})};function u(e){const{spaceId:t,parentTable:r,parentId:o}=e;return(0,n.Ul)(`${t}-${r}-${o}`)}},23867:(e,t,r)=>{function n(e){return e}r.d(t,{C:()=>n})},78929:(e,t,r)=>{r.d(t,{BA:()=>i,Nw:()=>s,WL:()=>u,ZP:()=>d,_h:()=>l,xs:()=>c});var n=r(5228),o=r(74487),a=r(80873);const i=["view","add","remove","delete"],s=(o.literals("unconfigured","disabled"),o.literals("configured","enforced"),"saml_config");function u(e){return"unconfigured"===e.status||"disabled"===e.status}function l(e){return n._h({samlConfigStatus:e.status,emailDomains:e.email_domains,idp_metadata:e.idp_metadata,idp_metadata_url:e.idp_metadata_url})}function c(e){return l(e)&&Boolean(e.idp_metadata)}const d={table:s,columnTypes:{id:a.Z.UUID,version:a.Z.Number,last_version:a.Z.Number,status:a.Z.String,email_domains:a.Z.StringArray,idp_metadata_url:a.Z.String,idp_public_certificate:a.Z.String,idp_sign_in_url:a.Z.String,idp_sign_out_url:a.Z.String,create_account:a.Z.Boolean,last_edited_by:a.Z.UUID,last_edited_time:a.Z.Number,idp_metadata:a.Z.XML,space_ids:a.Z.UUIDArray,owner_table:a.Z.String,owner_id:a.Z.String},requiredColumns:{status:!0,create_account:!0,last_edited_by:!0,last_edited_time:!0,space_ids:!0,owner_table:!0,owner_id:!0},defaultColumnValues:{status:"unconfigured",create_account:!1}}},84323:(e,t,r)=>{r.d(t,{Z:()=>a,b:()=>o});var n=r(80873);const o="server_integrations__github_installation",a={table:o,columnTypes:{id:n.Z.UUID,bot_id:n.Z.UUID,installation_id:n.Z.String,space_id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number}}},83200:(e,t,r)=>{r.d(t,{Z:()=>i,w:()=>a});var n=r(80873),o=r(76096);const a="server_integrations__slack_bot_token",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,access_token:n.Z.String,scopes:n.Z.StringArray,parent_table:n.Z.String,parent_id:n.Z.String},model:(0,o.y)({})}},67627:(e,t,r)=>{r.d(t,{Z:()=>a,m:()=>o});var n=r(80873);const o="server_integrations__slack_channel",a={table:o,columnTypes:{id:n.Z.UUID,slack_channel_id:n.Z.String,slack_workspace_id:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,preferences:n.Z.JSON}}},65963:(e,t,r)=>{r.d(t,{Z:()=>a,a:()=>o});var n=r(80873);const o="server_integrations__slack_enterprise",a={table:o,columnTypes:{id:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number}}},14130:(e,t,r)=>{r.d(t,{O:()=>o,Z:()=>a});var n=r(80873);const o="server_integrations__slack_notion_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,slack_unique_global_user_id:n.Z.UUID,access_token:n.Z.String,notion_workspace_id:n.Z.String,alive:n.Z.Boolean,notion_bot_id:n.Z.UUID}}},34406:(e,t,r)=>{r.d(t,{ZP:()=>a,f1:()=>o});var n=r(80873);const o="server_integrations__slack_unique_global_user",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,slack_global_user_id:n.Z.String,slack_enterprise_id:n.Z.String,preferences:n.Z.JSON}}},42314:(e,t,r)=>{r.d(t,{P:()=>o,Z:()=>a});var n=r(80873);const o="server_integrations__slack_unique_local_user",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,slack_workspace_id:n.Z.String,slack_local_user_id:n.Z.String,slack_unique_global_user_id:n.Z.UUID}}},16663:(e,t,r)=>{r.d(t,{Z:()=>a,h:()=>o});var n=r(80873);const o="server_integrations__slack_workspace",a={table:o,columnTypes:{id:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,slack_enterprise_id:n.Z.String,name:n.Z.String,icon:n.Z.String,preferences:n.Z.JSON}}},19221:(e,t,r)=>{r.d(t,{Z:()=>a,a:()=>o});var n=r(80873);const o="server_integrations__zendesk_token",a={table:o,columnTypes:{id:n.Z.UUID,bot_id:n.Z.UUID,zendesk_access_token:n.Z.String,notion_access_token:n.Z.String,zendesk_sub_domain:n.Z.String,zendesk_user_id:n.Z.Number,notion_proxy_token:n.Z.String,space_id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number}}},93646:(e,t,r)=>{r.d(t,{O:()=>o,Z:()=>a});var n=r(80873);const o="signup_tracking",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,email:n.Z.String,variant:n.Z.String,temporary_password:n.Z.String,csrf_token:n.Z.String,attribution_data:n.Z.JSON,created_at:n.Z.Number,user_id:n.Z.UUID,link_opened:n.Z.Boolean,link_opened_at:n.Z.Number}}},91644:(e,t,r)=>{r.d(t,{AT:()=>i,ZP:()=>s});var n=r(97880),o=r(80873),a=r(76096);const i="skill",s=((0,n.AO)((e=>"custom"===e.type||"tasks_slack"===e.type||"wiki_slack"===e.type||"meeting_summary"===e.type||"meeting_action_items"===e.type||"workflow"===e.type?{true:e}:{false:e})),(0,n.AO)((e=>"custom"===e.type?{true:e}:{false:e})),{table:i,columnTypes:{id:o.Z.UUID,version:o.Z.Number,last_version:o.Z.Number,type:o.Z.String,settings:o.Z.JSON,parent_id:o.Z.UUID,parent_table:o.Z.String,space_id:o.Z.UUID,alive:o.Z.Boolean,created_time:o.Z.Number,created_by_id:o.Z.UUID,created_by_table:o.Z.String,last_edited_time:o.Z.Number,last_edited_by_id:o.Z.UUID,last_edited_by_table:o.Z.String,blocks:o.Z.StringArray},model:(0,a.y)({RecordStore:!0,properties:{settings:{getKeyStoreMethod:!1}}})})},63787:(e,t,r)=>{r.d(t,{Z:()=>i,s:()=>a});var n=r(80873),o=r(76096);const a="slack_integration",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,team_name:n.Z.String,channel:n.Z.String,channel_id:n.Z.String,configuration_url:n.Z.String,webhook_url:n.Z.String,enabled:n.Z.Boolean,parent_id:n.Z.UUID,parent_table:n.Z.String,channel_locale:n.Z.String},model:(0,o.y)({RecordStore:!0})}},38952:(e,t,r)=>{r.d(t,{A:()=>o,Z:()=>a});var n=r(80873);const o="slack_notification",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,sent:n.Z.Boolean}}},40837:(e,t,r)=>{r.d(t,{Z:()=>i,r:()=>a});var n=r(80873),o=r(76096);const a="snapshot",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_table:n.Z.String,parent_id:n.Z.UUID,collection_ids:n.Z.UUIDArray,inline_collection_block_ids:n.Z.UUIDArray,timestamp:n.Z.String,authors:n.Z.JSON,space_id:n.Z.UUID},model:(0,o.y)({})}},65635:(e,t,r)=>{r.d(t,{BA:()=>i,Wi:()=>u,ZP:()=>c,Zx:()=>l,k1:()=>s,mR:()=>a});r(59730);var n=r(4615),o=(r(97880),r(80873));function a(e){return e.table===l&&function(e){const t=e.split("|"),[r,o]=t;return 2===t.length&&(0,n.e)(r)&&(0,n.e)(o)}(e.id)}function i(e){const{botId:t,spaceId:r}=e;return`${t}|${r}`}function s(e){return"bot_owner"===e}function u(e){return"none"===e}const l="space_bot",c={table:l,columnTypes:{id:o.Z.String,bot_id:o.Z.String,space_id:o.Z.String,role:o.Z.String,bot_parent_table:o.Z.String,bot_parent_id:o.Z.UUID,version:o.Z.Number}}},96740:(e,t,r)=>{r.d(t,{L:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="space_content_duplication_lookup",i={table:a,columnTypes:{id:n.Z.UUID,source_space_id:n.Z.UUID,target_space_id:n.Z.UUID,source_id:n.Z.UUID,source_type:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,created_time:n.Z.Number},model:(0,o.y)({properties:{source_id:{getRelationalPointerMethod:!1}}})}},63921:(e,t,r)=>{r.d(t,{N3:()=>i,ZP:()=>s,r3:()=>o});var n=r(80873);const o="space_domain",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,domain:n.Z.String,is_autogenerated:n.Z.Boolean}},i="e12b42ac-4e54-476f-a4f5-7d6bdb1e61e2",s=a},75990:(e,t,r)=>{r.d(t,{F:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="space_email_domain",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_created_by_id:n.Z.UUID,space_created_by_table:n.Z.String,space_created_by_email_domain:n.Z.String},model:(0,o.y)({properties:{space_created_by_id:{getRelationalPointerMethod:!1}}})}},57829:(e,t,r)=>{r.d(t,{ZP:()=>i,fF:()=>a});var n=r(80873),o=r(76096);const a="space_entitlement_usage",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,space_id:n.Z.UUID,type:n.Z.String,usage:n.Z.Number,unit:n.Z.String},requiredColumns:{id:!0,version:!0,created_at:!0,updated_at:!0,space_id:!0,type:!0,usage:!0,unit:!0},model:(0,o.y)({})}},63188:(e,t,r)=>{r.d(t,{V:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="space_invite_link",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.String,invite_link_code:n.Z.String,inviter_user_id:n.Z.UUID,channel:n.Z.String},model:(0,o.y)({RecordStore:!0})}},56877:(e,t,r)=>{r.d(t,{L9:()=>a,ZP:()=>i});var n=r(80873),o=r(76096);const a="space_membership_update",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.UUID,created_at:n.Z.Number,is_processed:n.Z.Boolean,attributes:n.Z.JSON},requiredColumns:{id:!0,version:!0,space_id:!0,created_at:!0,is_processed:!0},model:(0,o.y)({})}},76413:(e,t,r)=>{r.d(t,{ZP:()=>a,e8:()=>o});r(4615);var n=r(80873);const o="space_recover_pages",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,user_id:n.Z.UUID,space_id:n.Z.UUID,pages:n.Z.StringArray,created_time:n.Z.Number,last_edited_time:n.Z.Number}}},47969:(e,t,r)=>{r.d(t,{Ni:()=>i,WU:()=>l,Wi:()=>u,X$:()=>a,ZP:()=>c,k1:()=>s});r(59730);var n=r(4615),o=(r(97880),r(80873));function a(e){return e.table===l&&function(e){const t=e.split("|"),[r,o]=t;return 2===t.length&&(0,n.e)(r)&&(0,n.e)(o)}(e.id)}function i(e){const{userId:t,spaceId:r}=e;return`${t}|${r}`}function s(e){return"owner"===e}function u(e){return"none"===e}const l="space_user",c={table:l,columnTypes:{id:o.Z.String,user_id:o.Z.String,space_id:o.Z.String,role:o.Z.JSON,invite_id:o.Z.String,version:o.Z.Number}}},47238:(e,t,r)=>{r.d(t,{ZP:()=>i,x:()=>a});var n=r(80873),o=r(76096);const a="space_user_entitlement_usage",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,created_at:n.Z.Number,updated_at:n.Z.Number,space_id:n.Z.UUID,user_id:n.Z.UUID,type:n.Z.String,usage:n.Z.Number,unit:n.Z.String},requiredColumns:{id:!0,version:!0,created_at:!0,updated_at:!0,space_id:!0,user_id:!0,type:!0,usage:!0,unit:!0},model:(0,o.y)({})}},35623:(e,t,r)=>{r.d(t,{M:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="space_user_recovery",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.UUID,user_id:n.Z.UUID,created_time:n.Z.Number,type:n.Z.String,block_id:n.Z.UUID,team_id:n.Z.UUID,permission_group_id:n.Z.UUID,permission_role:n.Z.String,membership_type:n.Z.String},requiredColumns:{id:!0,version:!0,created_time:!0,space_id:!0,user_id:!0,type:!0},model:(0,o.y)({})}},77858:(e,t,r)=>{r.d(t,{DB:()=>a,ZP:()=>s,zU:()=>i});var n=r(80873),o=r(76096);const a=["last_visited_page","first_page","personal_home"],i="space_view",s={table:i,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.UUID,bookmarked_pages:n.Z.StringArray,shared_pages:n.Z.StringArray,visited_templates:n.Z.StringArray,sidebar_hidden_templates:n.Z.StringArray,notify_mobile:n.Z.Boolean,notify_desktop:n.Z.Boolean,notify_email:n.Z.Boolean,notify_email_always:n.Z.Boolean,created_getting_started:n.Z.Boolean,parent_id:n.Z.UUID,parent_table:n.Z.String,alive:n.Z.Boolean,created_onboarding_templates:n.Z.Boolean,private_pages:n.Z.UUIDArray,joined:n.Z.Boolean,joined_teams:n.Z.UUIDArray,settings:n.Z.JSON,ai_suggestions:n.Z.JSON},model:(0,o.y)({RecordStore:!0,properties:{bookmarked_pages:{getMethod:"getBookmarkedPageIds",getKeyStoreMethod:"getBookmarkedPagesStore"},shared_pages:{getMethod:"getSharedPageIds",getKeyStoreMethod:"getSharedPagesStore"},private_pages:{getMethod:"getPrivatePageIds",getKeyStoreMethod:"getPrivatePagesStore"},visited_templates:{getMethod:"getVisitedTemplateIds",getKeyStoreMethod:"getVisitedTemplatesStore"},sidebar_hidden_templates:{getMethod:"getSidebarHiddenTemplateIds",getKeyStoreMethod:"getSidebarHiddenTemplatesStore"}}})}},37202:(e,t,r)=>{r.d(t,{FU:()=>o,ZP:()=>a});r(4615);var n=r(80873);const o="subscription",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_id:n.Z.UUID,provider:n.Z.String,api_version:n.Z.String,product:n.Z.String,expires_at:n.Z.Number,data:n.Z.JSON,updated_at:n.Z.Number,write_id:n.Z.UUID},requiredColumns:{space_id:!0,provider:!0,data:!0,updated_at:!0}}},26195:(e,t,r)=>{r.d(t,{ZP:()=>i,nE:()=>a});var n=r(80873),o=r(76096);const a="template",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,contentful_id:n.Z.String,name:n.Z.String,slug:n.Z.String,locale:n.Z.String,description:n.Z.String,price:n.Z.Number,authors:n.Z.StringArray,made_by:n.Z.String,tags:n.Z.StringArray,body:n.Z.JSON,attributes:n.Z.JSON,block_id:n.Z.UUID,created_at:n.Z.Number,last_updated_at:n.Z.Number,published_version:n.Z.Number,last_synced_at:n.Z.Number,all_tags:n.Z.StringArray,number_of_duplicates:n.Z.Number,score_1:n.Z.Number,score_2:n.Z.Number,score_3:n.Z.Number,score_4:n.Z.Number,score_5:n.Z.Number,show_in_gallery:n.Z.Boolean,template_draft_id:n.Z.UUID,template_draft_version:n.Z.Number},requiredColumns:{id:!0,version:!0,contentful_id:!0,name:!0,slug:!0,locale:!0,description:!0,made_by:!0,attributes:!0,created_at:!0,last_updated_at:!0,published_version:!0,last_synced_at:!0,number_of_duplicates:!0,score_1:!0,score_2:!0,score_3:!0,score_4:!0,score_5:!0,show_in_gallery:!0},model:(0,o.y)({RecordStore:!0})}},60113:(e,t,r)=>{r.d(t,{$:()=>a,Z:()=>i});var n=r(80873),o=r(76096);const a="template_checklist",i={table:a,columnTypes:{id:n.Z.UUID,user_id:n.Z.UUID,space_id:n.Z.UUID,created_time:n.Z.Number,version:n.Z.Number,last_version:n.Z.Number,copied_from:n.Z.UUID,block_id:n.Z.UUID,steps_completed:n.Z.StringArray,steps:n.Z.StringArray,opt_out:n.Z.Boolean},model:(0,o.y)({RecordStore:!0})}},14718:(e,t,r)=>{r.d(t,{Z:()=>i,u:()=>a});var n=r(80873),o=r(76096);const a="template_content_group",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,contentful_id:n.Z.String,title:n.Z.String,contents:n.Z.JSON,published_version:n.Z.Number,created_at:n.Z.Number,last_updated_at:n.Z.Number,last_synced_at:n.Z.Number,locale:n.Z.String,category_id:n.Z.String},requiredColumns:{id:!0,version:!0,contentful_id:!0,title:!0,contents:!0,published_version:!0,created_at:!0,last_updated_at:!0,last_synced_at:!0,locale:!0},model:(0,o.y)({RecordStore:!0})}},14327:(e,t,r)=>{r.d(t,{Z:()=>i,z:()=>a});var n=r(80873),o=r(76096);const a="template_creator",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,contentful_id:n.Z.String,name:n.Z.String,username:n.Z.String,email:n.Z.String,is_template_creator:n.Z.Boolean,user_id:n.Z.String,attributes:n.Z.JSON,published_version:n.Z.Number,created_at:n.Z.Number,last_updated_at:n.Z.Number,last_synced_at:n.Z.Number,number_of_templates:n.Z.Number,template_image:n.Z.JSON,tags:n.Z.StringArray,number_of_duplicates:n.Z.Number,score_1:n.Z.Number,score_2:n.Z.Number,score_3:n.Z.Number,score_4:n.Z.Number,score_5:n.Z.Number,is_featured_creator:n.Z.Boolean,is_certified_consultant:n.Z.Boolean},model:(0,o.y)({RecordStore:!0})}},71495:(e,t,r)=>{r.d(t,{Az:()=>a,ZP:()=>i});var n=r(80873),o=r(76096);const a="template_draft",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,contentful_id:n.Z.String,name:n.Z.String,slug:n.Z.String,locale:n.Z.String,description:n.Z.String,price:n.Z.Number,authors:n.Z.StringArray,made_by:n.Z.String,tags:n.Z.StringArray,attributes:n.Z.JSON,block_id:n.Z.UUID,created_at:n.Z.Number,last_updated_at:n.Z.Number,published_version:n.Z.Number,status:n.Z.String,draft_attributes:n.Z.JSON},requiredColumns:{id:!0,version:!0,contentful_id:!0,name:!0,slug:!0,locale:!0,description:!0,made_by:!0,attributes:!0,created_at:!0,last_updated_at:!0,published_version:!0,status:!0,draft_attributes:!0},model:(0,o.y)({RecordStore:!0})}},53412:(e,t,r)=>{r.d(t,{ZP:()=>a,nt:()=>o});var n=r(80873);const o="template_tag",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,contentful_id:n.Z.String,name:n.Z.String,slug:n.Z.String,locale:n.Z.String,description:n.Z.String,contentful_parent_id:n.Z.String,icon:n.Z.JSON,published_version:n.Z.Number,created_at:n.Z.Number,last_updated_at:n.Z.Number,last_synced_at:n.Z.Number,subcategory_contentful_ids:n.Z.StringArray,featured_template_contentful_ids:n.Z.StringArray,attributes:n.Z.JSON,number_of_templates:n.Z.Number,template_image:n.Z.JSON,score_1:n.Z.Number,score_2:n.Z.Number,score_3:n.Z.Number,score_4:n.Z.Number,score_5:n.Z.Number},requiredColumns:{id:!0,version:!0,contentful_id:!0,name:!0,slug:!0,locale:!0,description:!0,icon:!0,published_version:!0,created_at:!0,last_updated_at:!0,last_synced_at:!0,attributes:!0,number_of_templates:!0,score_1:!0,score_2:!0,score_3:!0,score_4:!0,score_5:!0}}},65836:(e,t,r)=>{r.d(t,{ZP:()=>a,jA:()=>o});var n=r(80873);const o="temporary_password",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,password:n.Z.String,timestamp:n.Z.Number,use_case:n.Z.String}}},5505:(e,t,r)=>{r.d(t,{Z:()=>i,u:()=>a});var n=r(80873),o=r(76096);const a="token",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,user_id:n.Z.UUID,timestamp:n.Z.Number,revoked:n.Z.Boolean,user_ids:n.Z.UUIDArray,auth_types:n.Z.JSON,admin_user_id:n.Z.UUID,expiration_settings:n.Z.JSON},model:(0,o.y)({})}},24494:(e,t,r)=>{r.d(t,{Z:()=>i,w:()=>a});var n=r(80873),o=r(76096);const a="transcript_snippet",i={table:a,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,parent_id:n.Z.UUID,parent_table:n.Z.String,space_id:n.Z.UUID,speaker_id:n.Z.UUID,speaker_table:n.Z.String,participant_id:n.Z.Number,participant_email:n.Z.String,participant_name:n.Z.String,relative_utterance_time:n.Z.Number,created_at:n.Z.Number,last_edited_at:n.Z.Number,last_edited_by_id:n.Z.UUID,last_edited_by_table:n.Z.String,discussions:n.Z.StringArray,text:n.Z.JSON},requiredColumns:{id:!0,version:!0,parent_id:!0,parent_table:!0,space_id:!0,text:!0},model:(0,o.y)({RecordStore:!0})}},66295:(e,t,r)=>{r.d(t,{O:()=>o,Z:()=>a});var n=r(80873);const o="trello_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,account:n.Z.String,request_token:n.Z.String,request_secret:n.Z.String,access_token:n.Z.String,access_secret:n.Z.String}}},10354:(e,t,r)=>{r.d(t,{I:()=>o,Z:()=>a});var n=r(80873);const o="used_credit",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,amount:n.Z.Number}}},19716:(e,t,r)=>{r.d(t,{V:()=>o,Z:()=>a});var n=r(80873);const o="user_data_consent_permissions",a={table:o,columnTypes:{id:n.Z.String,version:n.Z.Number,last_version:n.Z.Number,expiry_time:n.Z.Number}}},76244:(e,t,r)=>{r.d(t,{Z:()=>i,e:()=>a});var n=r(80873),o=r(76096);const a="user_device",i={table:a,columnTypes:{id:n.Z.UUID,user_id:n.Z.UUID,device_id:n.Z.UUID,token_id:n.Z.UUID,created_at:n.Z.Number,last_login_at:n.Z.Number,last_login_ip_address:n.Z.String,last_login_geographic_location:n.Z.String,version:n.Z.Number,last_version:n.Z.Number},model:(0,o.y)({})}},98897:(e,t,r)=>{r.d(t,{ZP:()=>s,pm:()=>i});var n=r(74487),o=r(80873),a=r(76096);const i="user_export",s=(n.literals("member_list","space","block","space_analytics_search","space_analytics_content","space_analytics_users","admin_content_search","audit_log","post_workspace_consolidation_report","domain_claimable_spaces"),{table:i,columnTypes:{id:o.Z.UUID,created_at:o.Z.Number,created_by_table:o.Z.String,created_by_id:o.Z.UUID,file_ids:o.Z.StringArray,type:o.Z.String,version:o.Z.Number,last_version:o.Z.Number},model:(0,a.y)({properties:{created_by_id:{getRelationalPointerMethod:!1}}})})},46769:(e,t,r)=>{r.d(t,{Z:()=>a,j:()=>o});var n=r(80873);const o="user_metadata",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,metadata:n.Z.JSON,updated_at:n.Z.Number}}},66079:(e,t,r)=>{r.d(t,{ZP:()=>u,ao:()=>i,dx:()=>s});var n=r(80873),o=r(76096),a=r(77858);function i(e){var t,r;return(null===(t=e.space_view_pointers)||void 0===t?void 0:t.map((e=>(e.table=a.zU,e))))||(null===(r=e.space_views)||void 0===r?void 0:r.map((e=>({id:e,table:a.zU}))))}const s="user_root",u={table:s,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,space_views:n.Z.StringArray,space_view_pointers:n.Z.JSON,left_spaces:n.Z.StringArray,deleted_email:n.Z.String},model:(0,o.y)({RecordStore:!0,properties:{space_views:{getMethod:!1},space_view_pointers:{getMethod:!1}}})}},58161:(e,t,r)=>{r.d(t,{Z:()=>a,t:()=>o});var n=r(80873);const o="user_session_auth_token",a={table:o,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,expires_at:n.Z.Number,cookies:n.Z.JSON,source_type:n.Z.String}}},28182:(e,t,r)=>{r.d(t,{AQ:()=>a,Sr:()=>s,ZP:()=>u,dF:()=>i});var n=r(80873),o=r(76096);const a=["not_seen","space_for_ai","ask_ai_anything","refine_ai_response","complete"],i=["unseen","home","views","owner","verification","tags","complete"],s="user_settings",u={table:s,columnTypes:{id:n.Z.UUID,version:n.Z.Number,last_version:n.Z.Number,settings:n.Z.JSON},model:(0,o.y)({RecordStore:!0})}},35794:(e,t,r)=>{r.d(t,{Z:()=>i,b:()=>a});var n=r(80873),o=r(76096);const a="webhook_subscription",i={table:a,columnTypes:{id:n.Z.UUID,bot_id:n.Z.UUID,webhook_url:n.Z.String,webhook_secret:n.Z.String,parent_id:n.Z.UUID,parent_table:n.Z.String,space_id:n.Z.UUID,api_version:n.Z.String,health:n.Z.JSON,version:n.Z.Number,last_version:n.Z.Number,created_by_table:n.Z.String,created_by_id:n.Z.UUID,last_edited_by_table:n.Z.String,last_edited_by_id:n.Z.UUID,created_time:n.Z.Number,last_edited_time:n.Z.Number},model:(0,o.y)({RecordStore:!0})}},11045:(e,t,r)=>{function n(e){return!(!o(e)&&!function(e){return i.has(e)}(e))}function o(e){return a.has(e)}r.d(t,{IO:()=>o,an:()=>n});const a=new Set(["agent","automation_action","automation","block","collection_view","collection","comment","discussion","external_authentication_token","external_object","follow","invite","page_exit","page_visit","reaction","record_counter","record_key","skill","snapshot","space_bot","space_user","space_view","space","team","webhook_subscription","space_user_recovery","transcript_snippet","property_item","assistant_chat_step","assistant_chat_session"]),i=new Set(["activity"])},54584:(e,t,r)=>{r.d(t,{QH:()=>a,mX:()=>o});const n=(0,r(9291).defineMessages)({groupPlaceHolder:{id:"sharedSpacePermissionGroupHelpers.permissionGroup.anonymous",defaultMessage:"Anonymous group"}});function o(e,t,r){var o;const a=null==t||null===(o=t.permission_groups)||void 0===o?void 0:o.find((e=>e.id===r)),i=null==a?void 0:a.name;return i?`${i}`:e.formatMessage(n.groupPlaceHolder)}function a(e,t,r){var o;const a=null==t||null===(o=t.getPermissionGroups())||void 0===o?void 0:o.find((e=>e.id===r)),i=null==a?void 0:a.name;return i?`${i}`:e.formatMessage(n.groupPlaceHolder)}},90965:(e,t,r)=>{r.d(t,{BD:()=>h,CJ:()=>y,DI:()=>g,KM:()=>m,Mi:()=>T,TZ:()=>_,UD:()=>x,XO:()=>l,XR:()=>v,hU:()=>f,kC:()=>d,l1:()=>c,nV:()=>b,t5:()=>k,wv:()=>p});var n=r(77657),o=r(59753),a=r(72141),i=r(99405),s=r(97880),u=r(64002);function l(e,t,r){return!t||!r||!(0,a.zz)(r)||function(e){if(!e)return[];return o.kk.fromSpace(e).getUserPermissionItems()}(t).filter((t=>t.role&&(0,a.zz)(t.role)&&t.user_id!==e)).length>0}function c(e){return Boolean(e.permissions&&e.permissions.find((e=>"deleted_permission"===e.type)))}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return Boolean(e.find((e=>"user_permission"===e.type&&e.user_id===t&&(0,a.Jy)(e.role))))}function p(e,t){const r=o.kk.isAnyModel(e)?e.getPermissionItems():e.permissions;return Boolean(null==r?void 0:r.find((e=>"user_permission"===e.type&&e.user_id===t&&(0,a.zz)(e.role))))}function m(e,t){const r=e.permissions;return Boolean(null==r?void 0:r.find((e=>"user_permission"===e.type&&e.user_id===t&&(0,a.dy)(e.role))))}function y(e){const t=null==e?void 0:e.integration_restrictions;return"approved_only"===t||"approved_or_built_by_notion"===t}function f(e){const{spaceBotSettings:t,integrationId:r,env:o}=e;return!t||(!y(t)||(!(!t.integration_approval_statuses||!t.integration_approval_statuses[r])||!("approved_or_built_by_notion"!==t.integration_restrictions||!(0,n.BP)({integrationId:r,env:o}))))}const g=(0,s.AO)((e=>e&&"personal_external_transfer"===e.type&&"completed"!==e.status?{true:e}:{false:e})),v=(0,s.AO)((e=>e&&"team_claim_upgrade"===e.type&&"requested"===e.status?{true:e}:{false:e})),_=(0,s.AO)((e=>{if(!e||"domain_claim_space_deletion"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"canceled":return{false:e}}})),b=((0,s.AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"failed_with_closed_source":case"failed":case"completed":case"dry_run_completed":case"pending_deletion":return{false:e}}})),(0,s.AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"completed":return{true:e};case"dry_run_completed":case"failed":case"started":case"failed_with_closed_source":case"pending_deletion":return{false:e}}})),(0,s.AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"pending_deletion":return{true:e};case"dry_run_completed":case"failed":case"started":case"failed_with_closed_source":case"completed":return{false:e}}})),(0,s.AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"failed_with_closed_source":return{true:e};case"dry_run_completed":case"failed":case"started":case"completed":case"pending_deletion":return{false:e}}})),(0,s.AO)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"failed_with_closed_source":case"started":case"completed":case"pending_deletion":return{true:e};case"dry_run_completed":case"failed":return{false:e}}})));function h(e){const{spaceValue:t,baseUrl:r}=e,n=(0,i.Xs)({route:{name:"space",spaceId:t.id,spaceDomain:void 0,requestedOnPublicDomain:void 0,searchQuery:void 0,searchRequest:void 0}});return(0,u.O_)({relativeUrl:n,baseUrl:r})}function k(e){return e?x({permissions:e}).length:0}function x(e){const t=null==e?void 0:e.permissions;return t?t.filter(a.jg).filter((e=>(0,a.Jy)(e.role))):[]}function T(e){return x(e).map((e=>e.user_id))}},70203:(e,t,r)=>{r.d(t,{$0A:()=>Gt,$WM:()=>nt,$z2:()=>D,AJd:()=>Pe,Ap:()=>ye,C9B:()=>er,CGe:()=>Mt,CbB:()=>Wt,D4X:()=>Ae,EPB:()=>ir,GKr:()=>M,Hze:()=>He,I$B:()=>me,IWo:()=>G,J1x:()=>je,J7s:()=>Ge,JA7:()=>V,Jcv:()=>Bt,JmL:()=>te,K$_:()=>H,K9C:()=>ke,KSk:()=>St,KU1:()=>qt,KV2:()=>mt,LAI:()=>Q,Lyt:()=>le,O1u:()=>pr,OAI:()=>At,OU5:()=>re,Oqk:()=>Sr,P$X:()=>Cr,PEL:()=>Ir,PM3:()=>Ar,QGY:()=>Ze,QJH:()=>Ue,QVC:()=>se,QaF:()=>Ft,Qh7:()=>Vt,STJ:()=>_r,STW:()=>W,S_n:()=>P,Sfs:()=>kr,TOT:()=>at,TPx:()=>jt,TZP:()=>vt,U$y:()=>yt,Ulv:()=>Yr,V3y:()=>$t,V8Y:()=>_e,VP_:()=>qr,Vkf:()=>$r,VrM:()=>$e,Vv0:()=>it,W9d:()=>ar,WBu:()=>nr,WU4:()=>F,WiV:()=>qe,XIB:()=>Kt,XSJ:()=>A,XVI:()=>kt,YCD:()=>rr,Y_F:()=>Pt,YnW:()=>ve,YrK:()=>Fe,Z08:()=>ft,ZAl:()=>oe,Zdj:()=>jr,Zxt:()=>fr,_QF:()=>ur,_QS:()=>Zr,_Rq:()=>Je,_bk:()=>Y,aC4:()=>j,aLA:()=>R,aSf:()=>vr,aq:()=>ie,b1T:()=>dr,bjV:()=>Ct,c14:()=>B,cCA:()=>Nt,eIM:()=>Ee,eOb:()=>Oe,edl:()=>Xt,eeV:()=>Et,fCo:()=>xe,fTS:()=>ee,fWo:()=>hr,fpG:()=>J,frE:()=>Te,frW:()=>tt,fsE:()=>ct,fuX:()=>N,gCI:()=>Re,gPn:()=>Vr,gdi:()=>Me,h19:()=>rt,hDy:()=>_t,hH9:()=>ge,hNu:()=>Qt,hn0:()=>bt,hpT:()=>Gr,i6A:()=>gt,inx:()=>L,j0F:()=>q,jC0:()=>Ne,jDe:()=>Rt,jFV:()=>Ie,jRb:()=>Ce,jw:()=>tr,k87:()=>U,kG3:()=>Ur,kbv:()=>sr,km_:()=>De,kuv:()=>ae,kxk:()=>Xe,lcG:()=>wt,llS:()=>xt,lzi:()=>Ot,mF$:()=>or,mfJ:()=>Yt,nSN:()=>X,nai:()=>It,o0h:()=>ht,oP:()=>Mr,olT:()=>w,p9b:()=>wr,pIV:()=>Fr,pJX:()=>Ve,pV3:()=>z,pZr:()=>Ht,pxR:()=>et,qZ6:()=>lr,qyI:()=>I,r3j:()=>st,rIb:()=>K,rOz:()=>Lr,rlz:()=>we,rxn:()=>Ut,s8k:()=>Z,sBO:()=>pt,sP4:()=>Se,tEo:()=>zt,tXA:()=>Le,tk7:()=>Be,uge:()=>ue,vJ3:()=>Dt,vNd:()=>Nr,vmO:()=>Qe,wPk:()=>he,wjk:()=>ce,x36:()=>Jt,x5L:()=>dt,xat:()=>be,xcl:()=>zr,xey:()=>ze,xrQ:()=>gr,xw5:()=>$,yrl:()=>ot,zEN:()=>Ke,zIN:()=>lt,zUo:()=>Tt,zW$:()=>We,zrg:()=>fe,zyO:()=>ut,zyy:()=>Zt});r(57658),r(52262),r(24506);var n=r(9291),o=r(7057),a=r(53877),i=r(15095),s=r(58573),u=r(42875),l=r(30845),c=r(24211),d=r(72126),p=r(58203),m=r(23210),y=r(61158),f=r(21202),g=r(77420),v=r(70279),_=(r(33709),r(23867)),b=r(19889),h=r(97880),k=r(64002),x=r(63143),T=r(82798);const M={Bold:"b",Italic:"i",Strike:"s",Code:"c",FormulaError:"~",Underline:"_",Inserted:"+",Deleted:"-",TemporaryComment:"z",User:"u",Bot:"r",Page:"p",TemporaryPage:"pt",Date:"d",ExternalObjectInstance:"eoi",TemplateVariable:"tv",Comment:"cm",Group:"g",Citation:"ci",Discussion:"m",Link:"a",Highlight:"h",Equation:"e",TemporaryEquation:"et",TemporaryInput:"xt",TemporarySelection:"st",FormulaPageProperty:"fpp",FormulaContextValue:"fv",TemporaryFindHighlight:"mark",TemporaryCursor:"tc"},w=(0,n.defineMessages)({nowText:{defaultMessage:"Now",id:"mentionMenu.templateVariables.text.now"},nowDescription:{defaultMessage:"Time when duplicated",id:"mentionMenu.templateVariables.description.now"},nowKeywords:{defaultMessage:"now",id:"mentionMenu.templateVariables.keywords.now"},todayText:{defaultMessage:"Today",id:"mentionMenu.templateVariables.text.tday"},todayDescription:{defaultMessage:"Date when duplicated",id:"mentionMenu.templateVariables.description.today"},todayKeywords:{defaultMessage:"today",id:"mentionMenu.templateVariables.keywords.today"},meText:{defaultMessage:"Me",id:"mentionMenu.templateVariables.text.me"},meDescription:{defaultMessage:"User when duplicated",id:"mentionMenu.templateVariables.description.me"},meKeywords:{defaultMessage:"me",id:"mentionMenu.templateVariables.keywords.me"}}),Z=["me"],C=[...Z,"now","today"],S={now:{text:w.nowText,description:w.nowDescription,fuzzySearchKeywords:w.nowKeywords,category:"date",resolve:e=>Ht({...a.R_(e.currentTimeZone||(0,u.r)()),date_format:"relative"})},today:{text:w.todayText,description:w.todayDescription,fuzzySearchKeywords:w.todayKeywords,category:"date",resolve:e=>Ht({...a.Lg(e.currentTimeZone||(0,u.r)()),date_format:"relative"})},me:{text:w.meText,description:w.meDescription,fuzzySearchKeywords:w.meKeywords,category:"user",resolve:e=>e.currentUserId?zt(e.currentUserId):void 0}},I="",N="",R={[M.User]:!0,[M.Bot]:!0,[M.Page]:!0,[M.TemporaryPage]:!0,[M.Date]:!0,[M.ExternalObjectInstance]:!0,[M.TemplateVariable]:!0,[M.Comment]:!0,[M.Group]:!0,[M.FormulaPageProperty]:!0,[M.FormulaContextValue]:!0,[M.Citation]:!0},U={...R,[M.FormulaError]:!0,[M.Inserted]:!0,[M.Deleted]:!0,[M.TemporaryComment]:!0,[M.Discussion]:!0,[M.Link]:!0,[M.Equation]:!0,[M.TemporaryEquation]:!0,[M.TemporaryInput]:!0,[M.TemporarySelection]:!0,[M.TemporaryFindHighlight]:!0,[M.TemporaryCursor]:!0},P={[M.Code]:!0};M.Bold,M.Italic,M.Strike,M.Underline,M.Highlight;function D(e){switch(e){case M.Bold:case M.Italic:case M.Strike:case M.Underline:case M.Highlight:return!0;default:return!1}}const O={[M.Bold]:!0,[M.Italic]:!0,[M.Strike]:!0,[M.Code]:!0,[M.FormulaError]:!0,[M.Underline]:!0,[M.Inserted]:!0,[M.Deleted]:!0,[M.TemporaryComment]:!0,[M.TemporarySelection]:!0,[M.TemporaryFindHighlight]:!0,[M.TemporaryCursor]:!0},E={[M.Discussion]:!0};function F(e){return Boolean(E[e])}function B(e){return function(e){return Boolean(E[Ge(e)])}(e)?e:Ge(e)}function A(e){const t="string"==typeof e?e:B(e);return"string"==typeof t?t:`[${t.join(",")}]`}function V(e){return"string"==typeof e?e:e[0]}function L(e){return 1===e.length&&e[0]!==M.TemporaryEquation&&e[0]!==M.TemporaryPage||!!O[e[0]]}function q(e){return 2===e.length&&"a"===e[0]}function j(e){return 1===e.length&&"z"===e[0]}function $(e){return 2===e.length&&"m"===e[0]}function G(e){return 2===e.length&&"u"===e[0]}function Y(e){return 3===e.length&&e[0]===M.Group}function z(e){return 2===e.length&&"r"===e[0]}function W(e){return(2===e.length||3===e.length)&&"p"===e[0]}function H(e){return 3===e.length&&"cm"===e[0]}function K(e){return 1===e.length&&e[0]===M.TemporaryPage}function J(e){return 2===e.length&&"d"===e[0]}function X(e){return 2===e.length&&"eoi"===e[0]}function Q(e){return 2===e.length&&"h"===e[0]}function ee(e){return 1===e.length&&"c"===e[0]}function te(e){return 1===e.length&&"~"===e[0]}function re(e){return 2===e.length&&"ci"===e[0]}function ne(e){return 1===e.length&&e[0]===M.Inserted}function oe(e){return!!(G(e)||W(e)||z(e)||X(e)||J(e)||Y(e)||ie(e)||H(e)||le(e)||ce(e)||re(e))}function ae(e){return 2===e.length&&"e"===e[0]}function ie(e){return 2===e.length&&e[0]===M.TemplateVariable}function se(e){return 1===e.length&&e[0]===M.TemporaryEquation}function ue(e){return 2===e.length&&e[0]===M.TemporaryInput}function le(e){return 2===e.length&&e[0]===M.FormulaPageProperty}function ce(e){return 2===e.length&&e[0]===M.FormulaContextValue}function de(e){return!!(L(e)||q(e)||$(e)||Q(e)||ue(e))}function pe(e){return 1===e.length&&"mark"===e[0]}function me(e){return e.find(oe)}function ye(e){return e.find(ae)}function fe(e){return e.filter($)}function ge(e){return e.find(G)}function ve(e){return e.find((e=>z(e)))}function _e(e){return e.find(W)}function be(e){return e.find(Y)}function he(e){return e.find(H)}function ke(e){return e.find(J)}function xe(e){return e.find(pe)}function Te(e){return e.find(X)}function Me(e){return e.find(ee)}function we(e){return e.find(q)}function Ze(e){return e.find(ie)}function Ce(e){return e.find(le)}function Se(e){return e.find(ce)}function Ie(e){return e.some((e=>le(e)||ce(e)))}function Ne(e){return e.find(re)}function Re(e){return e.find(ne)}function Ue(e){return 1===e.length}function Pe(e){if(2===e.length&&e[0]!==I&&!Fe(e)){const[,t]=e;return t.filter(de).length===t.length}return!1}function De(e){if(2===e.length&&e[0]===I){const[,t]=e;return Boolean(t.find(oe))}return!1}function Oe(e){if(2===e.length&&e[0]===I){const[,t]=e;return Boolean(t.find(W))}return!1}function Ee(e){if(2===e.length&&e[0]===I){const[,t]=e;return Boolean(Ne(t))}return!1}function Fe(e){if(2===e.length&&e[0]===N){const[,t]=e;return Boolean(t.find(ae))}return!1}function Be(e){return!(!Fe(e)&&!Oe(e))}function Ae(e){return"string"==typeof e&&C.includes(e)}function Ve(e){return"me"===e}function Le(e){return"today"===e||"now"===e}function qe(e){return e[0]}function je(e){return i.p4(qe(e)).length}function $e(e){return e.reduce(((e,t)=>e+je(t)),0)}function Ge(e){return e[0]}function Ye(e){if(e&&e[1])return e[1]}function ze(e){return e[1]}function We(e){return Ye(e)}function He(e){const t=we(_t(e));if(t)return We(t)}function Ke(e){return Ye(e)}function Je(e){return Ye(e)}function Xe(e){if(e&&e[1]&&e[2])return{groupId:e[1],spaceId:e[2]}}function Qe(e){return Ye(e)}function et(e){return Ye(e)}function tt(e){return Ye(e)}function rt(e){return Ye(e)}function nt(e){if(e&&3===e.length)return{table:v.x_,id:e[1],spaceId:(0,_.C)(e[2])}}function ot(e){if(e&&e[1])return{table:f.iU,id:e[1],spaceId:(0,_.C)(3===e.length?e[2]:void 0)}}function at(e){return Ye(e)}function it(e){return Ye(e)}function st(e){return Ye(e)}function ut(e){return Ye(e)}function lt(e){return Ye(e)}function ct(e){return Ye(e)}function dt(e,t){const r=ct(e);return S[r.type].resolve(t)}function pt(e,t){const r=_t(e).map((e=>ie(e)?dt(e,t):e)).filter(h.$K);return $t(qe(e),r)}function mt(e,t){return e?e.map((e=>pt(e,t))):[]}function yt(e,t){return t.formatMessage(S[e].text)}function ft(e,t){return t.formatMessage(S[e].description)}function gt(e,t){return S[e].category===t}function vt(e){return Ye(e)}function _t(e){return e&&e[1]&&Array.isArray(e[1])?e[1]:[]}function bt(e){return _t(e)}function ht(e){const t=_t(e).find(ae);if(!t)return"";return ze(t)}function kt(e,t){return(0,s.ZP)(e,Object.entries(S),(e=>{let[r,n]=e;return t.formatMessage(n.fuzzySearchKeywords)})).map((e=>{let[t,r]=e;return t}))}function xt(e){return d.jj(d.xH(Ot(e).map((e=>fe(_t(e)).map((e=>rt(e)))))))}function Tt(e){return d.jj(d.xH(Ot(e).map((e=>function(e){return e.filter(X)}(_t(e)).map((e=>tt(e)))))))}function Mt(e){const t=[];for(const r of Ot(e))if(Fe(r)){const e=ht(r);t.push(e)}return t}function wt(e){const t=[];return Ot(e).forEach((e=>{De(e)&&_t(e).forEach((e=>{if(G(e)){const r=Ke(e);r&&t.push(r)}}))})),t}function Zt(e){const t=[];return Ot(e).forEach((e=>{De(e)&&_t(e).forEach((e=>{if(z(e)){const r=Je(e);r&&t.push(r)}}))})),t}function Ct(e){const t=[];return Ot(e).forEach((e=>{De(e)&&_t(e).forEach((e=>{if(z(e)){const r=Je(e);r&&t.push({table:g.cZ,id:r})}if(G(e)){const r=Ke(e);r&&t.push({table:b.KJ,id:r})}}))})),t}function St(e){const{value:t,includeTemplateVariables:r}=e,n=[];return Ot(t).filter((e=>{De(e)&&_t(e).forEach((e=>{if(r&&ie(e)){const t=ct(e);t&&"me"===t.type&&n.push(t.type)}else if(z(e)){const t=Je(e);t&&n.push({table:g.cZ,id:t})}else if(G(e)){const t=Ke(e);t&&n.push({table:b.KJ,id:t})}}))})),n}function It(e){const t=[],r=Ot(e);for(const n of r)if(De(n)){const e=ke(_t(n));if(e){const r=ut(e);t.push(r)}}return t}function Nt(e){return d.oA(Ot(e).filter(De).flatMap(_t).filter(W).map(ot))}function Rt(e){const t=[];return Ot(e).forEach((e=>{De(e)&&_t(e).forEach((e=>{if(W(e)){const r=at(e);r&&t.push(r)}}))})),t}function Ut(e){const t=[];return Ot(e).forEach((e=>{if(!De(e)){const r=qe(e);_t(e).forEach((e=>{if(q(e)){const n=We(e);n&&t.push({name:r,url:n})}}))}})),t}const Pt=function(e){return $t(Dt(qe(e)),_t(e))},Dt=function(e){return d.d1(i.p4(e),Br).join("")},Ot=function(e){return e&&Array.isArray(e)?e.filter(h.$K):[]},Et=function(e){return i.p4(Ft(e))},Ft=function(e){return Ot(e).map((e=>qe(e))).join("")};function Bt(e){return Ot(e).filter((e=>!De(e))).map((e=>Fe(e)?ht(e):qe(e))).join("")}const At=function(e){return fr(Ot(e).map((e=>$t(qe(e),_t(e).filter((e=>!$(e)))))))};function Vt(e,t,r){const n=Ot(e);let o="";for(const a of n){const e=a[0],n=_t(a);e===I||Fe(a)||(o+=e);for(const a of n)if(J(a))o+=Lt(a);else if(q(a)){const e=We(a),t=k.Qc(e);o+=` ${t.hostname||""}${t.pathname||""} `}else if(ae(a))o+=ze(a);else if(G(a)){const e=Ke(a),n=t({table:b.KJ,id:e}),i=null==n?void 0:n.getName();i&&!r.user.has(e)&&r.user.set(e,i);o+=(0,p.Bn)("user",e)}}return{text:o,mentions:r}}function Lt(e){const t=ut(e);return o.ZV({value:t,date_format:t.date_format,time_format:t.time_format,allowRelativeDates:!1,intl:(0,c.$7)()})}const qt=function(e,t,r){const n=Ot(e),o=[];let a=0,s=0;for(;a<n.length&&s<r;){const e=n[a];if(s>=t){const t=i.p4(qe(e));if(!(s+t.length<=r)){const n=_t(e),a=r-s;o.push($t(t.slice(0,a).join(""),n));break}o.push(e),s+=t.length,a+=1}else{const n=i.p4(qe(e));if(s+n.length>t){if(!(s+n.length<=r)){const a=_t(e),i=t-s,u=r-s;o.push($t(n.slice(i,u).join(""),a));break}{const r=_t(e),i=t-s;o.push($t(n.slice(i).join(""),r)),s+=n.length,a+=1}}else s+=n.length,a+=1}}return o},jt=function(e){return e?[$t(e)]:[]};function $t(e,t){return t&&t.length>0?[e,t]:[e]}function Gt(e,t){return t?["p",e,t]:["p",e]}function Yt(e,t){return["cm",e,t]}function zt(e){return["u",e]}function Wt(e){return["r",e]}function Ht(e){return["d",e]}function Kt(e,t){return["g",e,t]}function Jt(e){return["eoi",e]}function Xt(e){return["a",e]}function Qt(e){return["ci",e]}function er(e,t){return e.map((e=>{const r=_t(e);return $t(qe(e),[...r,Xt((0,m.D)(t))])}))}function tr(e){return[M.Discussion,e]}function rr(e,t){return $t(I,[e,...t||[]])}function nr(e){return[M.TemplateVariable,e]}function or(e){return[M.TemporaryInput,e]}function ar(){return[M.TemporaryEquation]}function ir(){return[M.TemporaryPage]}function sr(e){return[M.FormulaPageProperty,e]}function ur(e){return[M.FormulaContextValue,e]}function lr(e,t){const r=function(e){return["e",e]}(e),n=t?[r,...t]:[r];return $t(N,n)}function cr(e,t){const r=Ot(e);let n=0;for(const o of r){const e=n+je(o);if(e>t)return{startIndex:n,endIndex:e,token:o};n=e}}function dr(e,t){const r=cr(e,t);return r&&r.token}function pr(e){return fr(Ot(e).map((e=>{if(De(e))return e;return $t(qe(e),_t(e).filter((e=>!L(e))))})))}function mr(e){const t=new y.Z;for(const r of e)ue(r)?t.add([M.TemporaryInput,{...Ye(r),prefixIcon:void 0}]):t.add(r);return t}function yr(e,t){const r=mr(e),n=mr(t);return r.equals(n)}function fr(e){const t=[],r=[],n=e=>{0!==r.length&&(1===r.length?t.push(r[0]):t.push($t(r.map(qe).join(""),e)),r.length=0)},o=Ot(e);let a=[];for(const i of o){const e=_t(i);!De(i)&&yr(a,e)||n(a),r.push(i),a=e}return n(a),t}const gr=function(e,t,r){const n=Ot(e),o=[],a=[],s=[];let u=0;for(const l of n){const e=qe(l),n=_t(l),c=i.p4(e),d=u,p=u+c.length;if(p<=t)o.push(l);else if(d>=r)a.push(l);else if(d>=t&&p<=r)s.push(l);else if(d<=t&&p>=r){const e=t-d,i=e+r-t,u=c.slice(0,e),l=c.slice(e,i),p=c.slice(i);u.length>0&&o.push($t(u.join(""),n)),p.length>0&&a.push($t(p.join(""),n)),l.length>0&&s.push($t(l.join(""),n))}else if(d>=t&&d<r){const e=r-d,t=c.slice(0,e),o=c.slice(e);o.length>0&&a.push($t(o.join(""),n)),t.length>0&&s.push($t(t.join(""),n))}else if(d<t&&p>t){const e=t-d,r=c.slice(0,e),a=c.slice(e);r.length>0&&o.push($t(r.join(""),n)),a.length>0&&s.push($t(a.join(""),n))}u=p}return{tokensBeforeRange:fr(o),tokensInsideRange:fr(s),tokensAfterRange:fr(a)}};function vr(e){return br({...e,action:"add"})}function _r(e){return br({...e,action:"remove"})}function br(e){const{textValue:t,selection:r,action:n}=e,o=Yr(t,r);if(o.startIndex===o.endIndex)return t??[];const{tokensBeforeRange:a,tokensInsideRange:i,tokensAfterRange:s}=gr(t,o.startIndex,o.endIndex);return[...a,...i.map((t=>{const r=qe(t),o=_t(t).reduce(((t,r)=>{const o=A(r);if("add"===n)t.has(o)||t.set(o,r);else if("remove"===n){("string"==typeof e.annotationTypeOrKey?Ge(r)===e.annotationTypeOrKey:o===A(e.annotationTypeOrKey))||t.set(o,r)}else(0,h.t1)(n);return t}),new Map);"add"===n&&o.set(A(e.annotation),e.annotation);return $t(r,Array.from(o.values()))})),...s]}function hr(e){const t=new Map;for(const{startIndex:r,endIndex:n,annotation:o}of xr(e)){const e=B(o),a=A(e),i=t.get(a)??[],s=i.at(-1);(null==s?void 0:s.endIndex)!==n&&((null==s?void 0:s.endIndex)!==r?(i.push({annotationKey:e,startIndex:r,endIndex:n}),t.set(a,i)):s.endIndex=n)}return d.xH([...t.values()])}function kr(e){const t=new Map;for(const{startIndex:r,endIndex:n,annotation:o}of xr(e)){const e=A(o),a=t.get(e)??[],i=a.at(-1);(null==i?void 0:i.endIndex)!==n&&((null==i?void 0:i.endIndex)===r&&d.Xy(i.annotation,o)?i.endIndex=n:(a.push({annotation:o,startIndex:r,endIndex:n}),t.set(e,a)))}return d.xH([...t.values()])}function*xr(e){const{textValue:t,startIndex:r,endIndex:n,annotationType:o}=e;if(r===n)return;(0,T.T)(r<n);let a=0;for(const i of Ot(t)){const e=je(i),t=a+e;if(t<=r){a+=e;continue}if(n<=a)break;const s=o?_t(i).filter((e=>Ge(e)===o)):_t(i);for(const o of s)yield{annotation:o,startIndex:Math.max(a,r),endIndex:Math.min(t,n)};a+=e}}const Tr=function(e,t,r,n){const o=Ot(e);let a=0,s=0;for(;a<r&&s<o.length;){const e=o[s],r=qe(e),u=i.p4(r),l=_t(e);if(a+u.length>=t){const e=l.findIndex((e=>Ge(e)===n));if(-1!==e){return{annotationStartIndex:a+e,annotationEndIndex:a+e+u.length}}}s++,a+=u.length}};const Mr=function(e,t,r,n){return void 0!==Tr(e,t,r,n)},wr=function(e,t,r,n){const o=Tr(e,t,r,n);if(!o)return!1;const{annotationStartIndex:a,annotationEndIndex:i}=o;return a===t||i===r},Zr=function(e,t,r){const n=Ot(e),o=[];let a=0;for(const s of n){const e=qe(s),n=_t(s),u=i.p4(e),l=a,c=a+u.length;if(c<=t&&c<=r||l>=t&&l>=r)o.push(s);else if(l>=t&&c<=r);else{const e=t-l,a=e+(r-t),i=u.filter(((t,r)=>!(r>=e&&r<=a-1)));o.push($t(i.join(""),n))}a=c}return o},Cr=function(e,t,r){const n=Ot(e);if(n.length>0){const e=[];let o=0,a=!1;for(const s of n){const n=qe(s),u=_t(s),l=i.p4(n),c=o,d=o+l.length;if(r>=c&&r<=d&&!a){const n=r-c,o=Vr(l,0,n),i=Vr(l,n);o.length>0&&e.push($t(o.join(""),u));for(const r of t)e.push(r);i.length>0&&e.push($t(i.join(""),u)),a=!0}else e.push(s);o=d}return e}return t};function Sr(e){const{ignoreCase:t,substring:r,textValue:n}=e,o=Ft(n),a=t?"gi":"g",i=new RegExp(d.hr(r),a),s=[];let u;for(;u=i.exec(o);)s.push({startIndex:u.index,endIndex:u.index+r.length});return s}function Ir(e,t){return d.MR(e,(e=>Math.abs(t-e.startIndex)+Math.abs(t-e.endIndex)))[0]}function Nr(e){return e&&x.uh(e,De).map((e=>{if(Ue(e))return e;return[Fe(e)?ht(e):qe(e),_t(e).filter(Rr)]}))}function Rr(e){return!(ee(e)||oe(e)||ae(e)||se(e)||te(e))}function Ur(e){if(1!==e.length)return;const t=e.charCodeAt(0);return t>=55296&&t<=56319?"high":t>=56320&&t<=57343?"low":void 0}function Pr(e){return e.toString(16)}const Dr=[`\\u{${Pr(0)}}-\\u{${Pr(8)}}`,`\\u{${Pr(11)}}-\\u{${Pr(31)}}`,"\\u{2028}","\\u{2029}","\\u{200b}"],Or=new RegExp(`[${Dr.join("")}]`,"u");function Er(e){return Or.test(e[0])}function Fr(e){return Or.test(e)}function Br(e){return Er(e)||Boolean(Ur(e))}function Ar(e){let t=!1;for(let r=0;r<e.length;r++){const n=Ur(e[r]);if("low"===n){if(t){t=!1;continue}return!0}"high"===n&&(t=!0)}return t}const Vr=function(e,t,r){return e.slice(Math.max(t,0),r)};function Lr(e){if(e.startsWith("data:")||e.length>8192)return;const t=l.s(e).filter((t=>{let{value:r,href:n}=t;return e===r&&n.indexOf("mailto:")<0}))[0];if(t){try{const e=new URL(t.href);if([".zip"].some((t=>e.hostname.endsWith(t))))return}catch{return}return t}}function qr(e,t){return e.map((e=>$t(qe(e),_t(e).filter(t))))}function jr(e,t){const r=[];let n=0;for(const o of e){const e=i.p4(qe(o)).slice(0,t-n),a=$t(e.join(""),_t(o));if(r.push(a),n+=e.length,n>=t)return r}return r}function $r(e){let t=0;for(const r of e)t+=i.p4(qe(r)).length;return t}function Gr(e,t,r){const n=cr(e,t);if(!n)return;if(!r(n.token,void 0))return;const{tokensBeforeRange:o,tokensAfterRange:a}=gr(e,n.startIndex,n.endIndex);let i=0;for(let u=o.length-1;u>-1;u--){const e=o[u];if(!r(e,o[u+1]||n.token))break;i+=je(e)}let s=0;for(let u=0;u<a.length;u++){const e=a[u];if(!r(e,a[u-1]||n.token))break;s+=je(e)}return{startIndex:n.startIndex-i,endIndex:n.endIndex+s}}function Yr(e,t){const r=Et(e).length,n=Math.min(Math.max(t.startIndex,0),r),o=Math.min(Math.max(t.endIndex,0),r);return n===t.startIndex&&o===t.endIndex?t:{startIndex:n,endIndex:o}}function zr(e){const{properties:t,discussionId:r}=e,n={};if(t)for(const o of Object.keys(t)){let e=!1;const a=(t[o]||[]).map((t=>{const n=qe(t),o=_t(t),a=o.filter((e=>!d.Xy(e,["m",r])));return e=e||o.length!==a.length,$t(n,a)}));e&&(n[o]=fr(a))}return n}},44876:(e,t,r)=>{r.d(t,{Ah:()=>j,An:()=>f,E4:()=>b,Ej:()=>V,GY:()=>q,Gc:()=>w,Gm:()=>A,Id:()=>y,Jq:()=>g,OM:()=>T,Tf:()=>N,U4:()=>F,U5:()=>E,Wj:()=>x,XR:()=>S,_X:()=>P,fl:()=>B,hW:()=>v,km:()=>h,l1:()=>_,li:()=>k,no:()=>M,ny:()=>C,tz:()=>L,wh:()=>m});var n=r(30120),o=r(40506),a=r(53877),i=r(84795),s=r(59730),u=r(74181),l=r(72126),c=r(9844),d=r(97880),p=r(64002);const m=10;function y(e){return"inline"===e.type&&e.values.length>=1&&"string"==typeof e.values[0]}function f(e){return"inline"===e.type&&e.values.length>=1&&"number"==typeof e.values[0]}function g(e){return"inline"===e.type&&e.values.length>=1&&"boolean"==typeof e.values[0]}function v(e){return"inline"===e.type&&e.values.length>=1&&_(e.values[0])}const _=(0,d.AO)((e=>"object"==typeof e&&"r"in e?{true:e}:{false:e}));function b(e){var t,r;return y(e)&&("enum"===(null===(t=e.format)||void 0===t?void 0:t.type)||"title"===(null===(r=e.format)||void 0===r?void 0:r.type))}function h(e){return"embed"===e.type&&e.values.length>=1}function k(e){return"embed"===e.type&&e.values.length>=1&&"image/*"===e.mimeType}function x(e){if(!h(e))return!1;const t=e.format;return!(!t||!("type"in t))&&"icon"===t.type}function T(e){return"relation"===e.type}function M(e){return"person"===e.type}function w(e){return"inline"===e.type&&o.U3(e.values[0])}function Z(e){const{integration:t,currentSpaceId:r}=e,n=t.info.original_url_domains??[],o=t.info.development_url_domains??[];return(0,c.ov)(r,t)?[...n,...o]:n}function C(e){const{url:t,integrations:r,currentSpaceId:n}=e,o=I(t);if(!o)return{type:"failure"};let a,i;for(const s of r){const e=Z({integration:s,currentSpaceId:n});for(const r of s.info.original_url_patterns||[]){const n=S({url:t,domains:e,regex:new RegExp(r.regex)});if("invalid_url"===n.type)break;if("url_does_not_match_domain"===n.type)break;if("url_does_not_match_regex"!==n.type){if("success"===n.type){a=s,i=r;break}(0,d.t1)(n)}else a=s}if(a&&i)break}return i&&a?{type:"success",integration:a,pattern:i}:a?{type:"partial",integration:a,urlDomain:o,parsedUrl:(0,p.Qc)(t)}:{type:"failure"}}function S(e){const{url:t,domains:r,regex:n}=e,o=I(t);return o?r.find((e=>e===o))?n.test(t)?{type:"success"}:{type:"url_does_not_match_regex"}:{type:"url_does_not_match_domain"}:{type:"invalid_url"}}function I(e){var t;const r=null===(t=(0,p.Qc)(e).hostname)||void 0===t?void 0:t.split(".");return r&&r.length>=2?r.slice(r.length-2).join("."):void 0}function N(e){const{url:t,integration:r}=e;if(!(r&&(0,u.VM)(r)&&r.info&&r.info.original_url_patterns))return[];const n=r.info.original_url_patterns.find((e=>{let{regex:r}=e;return new RegExp(r).test(t)}));if(n){const e=new RegExp(n.regex);return l.oA([...(n.attributes||[]).map((r=>function(e,t,r){return y(r)||h(r)?{...r,values:r.values.map((r=>t.replace(e,r)))}:r}(e,t,r)))])}return[]}const R=e=>Array.isArray(e)?e:[e],U=e=>1===e.length?e[0]:e,P=(0,d.AO)((e=>"avatar"===e||"identifier"===e||"title"===e||"primary"===e||"secondary"===e||"body"===e||void 0===e?{true:e}:{false:e})),D=(0,d.AO)((e=>"avatar"===e||"identifier"===e||"primary"===e||"secondary"===e||"body"===e||void 0===e?{true:e}:{false:e})),O=(0,d.AO)((e=>"primary"===e||void 0===e?{true:e}:{false:e})),E=(0,d.AO)((e=>void 0===e?{true:e}:{false:e})),F=(0,d.AO)((e=>void 0===e?{true:e}:{false:e})),B=(0,d.AO)((e=>"entity"===e||"background"===e||void 0===e?{true:e}:{false:e})),A=(0,d.AO)((e=>"primary"===e||"secondary"===e||void 0===e?{true:e}:{false:e})),V=(0,d.AO)((e=>"avatar"===e||"entity"===e||"embed"===e||void 0===e?{true:e}:{false:e})),L=(0,d.AO)((e=>"embed"===e||void 0===e?{true:e}:{false:e}));function q(e){const{id:t,name:r}=e,n={id:t,name:r};if("inline"in e){const t="inline";if("plain_text"in e.inline)return{...n,type:t,values:R(e.inline.plain_text.value),...e.inline.plain_text.section&&{format:{section:e.inline.plain_text.section}}};if("boolean"in e.inline)return{...n,type:t,values:R(e.inline.boolean.value)};if("number"in e.inline)return{...n,type:t,values:R(e.inline.number.value)};if("title"in e.inline)return{...n,type:t,values:R(e.inline.title.value),format:{type:"title",...e.inline.title.color&&{color:e.inline.title.color},section:"title"}};if("enum"in e.inline)return{...n,type:t,values:R(e.inline.enum.value),format:{type:"enum",...e.inline.enum.color&&{color:e.inline.enum.color},...e.inline.enum.section&&{section:e.inline.enum.section}}};if("color"in e.inline)return{...n,type:t,values:R(e.inline.color.value),...e.inline.color.section&&{format:{section:e.inline.color.section}}};if("date"in e.inline){const r=R(e.inline.date.value).map(i.isoToNotionDate);return r.every(o.J_)?{...n,type:t,values:r,...e.inline.date.section&&{format:{section:e.inline.date.section}}}:new s.p8("Invalid date value.")}if("datetime"in e.inline){const r=R(e.inline.datetime.value).map(i.isoToNotionDateTime);return r.every(o.v9)?{...n,type:t,values:r,...e.inline.datetime.section&&{format:{section:e.inline.datetime.section}}}:new s.p8("Invalid datetime value.")}if("datetimerange"in e.inline){if(e.inline.datetimerange.value.length<2)return new s.p8("Invalidate datetimerange value.");const[r,a]=e.inline.datetimerange.value,u=(0,i.isoToNotionDateTimeRange)(r,a);return o.qg(u)?{...n,type:t,values:[u],...e.inline.datetimerange.section&&{format:{section:e.inline.datetimerange.section}}}:new s.p8("Invalid datetimerange value.")}if("created_datetime"in e.inline){const r=R(e.inline.created_datetime.value).map(i.isoToNotionDateTime);return r.every(o.v9)?{...n,type:t,values:r,format:{type:"created_time",...e.inline.created_datetime.section&&{section:e.inline.created_datetime.section}}}:new s.p8("Invalid created_datetime value.")}if("last_edited_datetime"in e.inline){const r=R(e.inline.last_edited_datetime.value).map(i.isoToNotionDateTime);return r.every(o.v9)?{...n,type:t,values:r,format:{type:"last_edited_time",...e.inline.last_edited_datetime.section&&{section:e.inline.last_edited_datetime.section}}}:new s.p8("Invalid last_edited_datetime value.")}(0,d.t1)(e.inline)}else if("embed"in e){const t={};e.embed.default_height&&(t.defaultHeight=e.embed.default_height),e.embed.default_width&&(t.defaultWidth=e.embed.default_width);const r="embed";if("html"in e.embed)return{...n,type:r,values:R(e.embed.src_url),mimeType:"text/html",...e.embed.html.section&&{format:{section:e.embed.html.section,...t}}};if("image"in e.embed)return{...n,type:r,values:R(e.embed.src_url),mimeType:"image/*",format:{...e.embed.image.format&&{type:e.embed.image.format},...t,...e.embed.image.section&&{section:e.embed.image.section}}};if("audio"in e.embed)return{...n,type:r,values:R(e.embed.src_url),mimeType:"audio/*",...e.embed.audio.section&&{format:{section:e.embed.audio.section,...t}}};if("video"in e.embed)return{...n,type:r,values:R(e.embed.src_url),mimeType:"video/*",...e.embed.video.section&&{format:{section:e.embed.video.section,...t}}};if("pdf"in e.embed)return{...n,type:r,values:R(e.embed.src_url),mimeType:"application/pdf",...e.embed.pdf.section&&{format:{section:e.embed.pdf.section,...t}}};(0,d.t1)(e.embed)}else{if("relation"in e){const t="relation";return e.relation.extension?{...n,type:t,values:R(e.relation.uri),format:{type:"extension",extension:e.relation.extension}}:e.relation.mention?{...n,type:t,values:R(e.relation.uri),format:{type:"mention",section:null===(a=e.relation.mention)||void 0===a?void 0:a.section}}:{...n,type:t,values:R(e.relation.uri)};var a}if("people"in e)return{...n,type:"person",values:R(e.people.uri)};(0,d.t1)(e)}}function j(e){const{id:t,name:r}=e,n={id:t,name:r};if("inline"===e.type){var a,i,s,u,l,c;if(y(e))return"title"===(null===(a=e.format)||void 0===a?void 0:a.type)?{...n,type:"inline",inline:{title:{value:e.values[0],..."title"===(null===(s=e.format)||void 0===s?void 0:s.section)&&{section:"title"}}}}:"enum"===(null===(i=e.format)||void 0===i?void 0:i.type)?{...n,type:"inline",inline:{enum:{value:U(e.values),...(null===(u=e.format)||void 0===u?void 0:u.section)&&O(e.format.section)&&{section:e.format.section}}}}:{...n,type:"inline",inline:{plain_text:{value:U(e.values),...(null===(l=e.format)||void 0===l?void 0:l.section)&&D(e.format.section)&&{section:e.format.section}}}};if(g(e))return{...n,type:"inline",inline:{boolean:{value:U(e.values)}}};if(f(e))return{...n,type:"inline",inline:{number:{value:U(e.values)}}};if(v(e))return{...n,type:"inline",inline:{color:{value:U(e.values),...(null===(c=e.format)||void 0===c?void 0:c.section)&&{section:e.format.section}}}};if(function(e){return"inline"===e.type&&o.U3(e.values[0])&&o.J_(e.values[0])}(e)){var p;const t=e.values.map((e=>{let{start_date:t}=e;return t}));return{...n,type:"inline",inline:{date:{value:U(t),...(null===(p=e.format)||void 0===p?void 0:p.section)&&{section:e.format.section}}}}}if(function(e){return"inline"===e.type&&o.U3(e.values[0])&&o.v9(e.values[0])}(e)){var m,_;const t=e.values.map((e=>{let{start_date:t,start_time:r,time_zone:n}=e;return $({date:t,time:r,timeZone:n})}));var b,h,k;return"created_time"===(null===(m=e.format)||void 0===m?void 0:m.type)?{...n,type:"inline",inline:{created_datetime:{value:t[0],...(null===(b=e.format)||void 0===b?void 0:b.section)&&{section:e.format.section}}}}:"last_edited_time"===(null===(_=e.format)||void 0===_?void 0:_.type)?{...n,type:"inline",inline:{last_edited_datetime:{value:t[0],...(null===(h=e.format)||void 0===h?void 0:h.section)&&{section:e.format.section}}}}:{...n,type:"inline",inline:{datetime:{value:U(t),...(null===(k=e.format)||void 0===k?void 0:k.section)&&{section:e.format.section}}}}}if(function(e){return"inline"===e.type&&o.U3(e.values[0])&&o.qg(e.values[0])&&o.U3(e.values[1])&&o.qg(e.values[1])}(e)){var x;const{start_date:t,start_time:r,end_date:o,end_time:a,time_zone:i}=e.values[0],s=[$({date:t,time:r,timeZone:i}),$({date:o,time:a,timeZone:i})];return{...n,type:"inline",inline:{datetimerange:{value:s,...(null===(x=e.format)||void 0===x?void 0:x.section)&&{section:e.format.section}}}}}(0,d.t1)(e)}else if("embed"===e.type){var T,M,w,Z,C,S;if("image/*"===e.mimeType)return{...n,type:"embed",embed:{src_url:e.values[0],image:{...(null===(T=e.format)||void 0===T?void 0:T.type)&&{format:e.format.type},...(null===(M=e.format)||void 0===M?void 0:M.section)&&{section:e.format.section}}}};if("video/*"===e.mimeType)return{...n,type:"embed",embed:{src_url:e.values[0],video:{...(null===(w=e.format)||void 0===w?void 0:w.section)&&{section:e.format.section}}}};if("audio/*"===e.mimeType)return{...n,type:"embed",embed:{src_url:e.values[0],audio:{...(null===(Z=e.format)||void 0===Z?void 0:Z.section)&&{section:e.format.section}}}};if("application/pdf"===e.mimeType)return{...n,type:"embed",embed:{src_url:e.values[0],pdf:{...(null===(C=e.format)||void 0===C?void 0:C.section)&&{section:e.format.section}}}};if("text/html"===e.mimeType)return{...n,type:"embed",embed:{src_url:e.values[0],html:{...(null===(S=e.format)||void 0===S?void 0:S.section)&&{section:e.format.section}}}};(0,d.t1)(e)}else{var I,N,R,P;if("relation"===e.type)return"extension"===(null===(I=e.format)||void 0===I?void 0:I.type)?{...n,type:"relation",relation:{uri:U(e.values),type:"extension",...(null===(R=e.format)||void 0===R?void 0:R.extension)&&{extension:e.format.extension}}}:"mention"===(null===(N=e.format)||void 0===N?void 0:N.type)?{...n,type:"relation",relation:{uri:U(e.values),type:"mention",...(null===(P=e.format)||void 0===P?void 0:P.section)&&{section:e.format.section}}}:{...n,type:"relation",relation:{uri:U(e.values)}};if("person"===e.type)return{...n,type:"people",people:{uri:U(e.values)}};(0,d.t1)(e)}}function $(e){const{date:t,time:r,timeZone:i}=e;return n.ou.fromFormat(`${t} ${r}`,`${a.Iq} ${o.jK}`,{zone:i}).toISO()}},7928:(e,t,r)=>{r.d(t,{Nz:()=>i,of:()=>s});var n=r(72126),o=r(59753),a=r(19889);function i(e,t,r){if(t){return o.kk.fromValue(a.KJ,t).getDisplayName(e,r)}return e.formatMessage(o.dp.messages.anonymousPlaceholder)}function s(e){return n.oA([e.name,e.email]).join(" ")}},82798:(e,t,r)=>{r.d(t,{Fb:()=>i,R9:()=>s,T:()=>o,TO:()=>a});var n=r(59730);function o(e,t){if(!e)throw new n.p8(t??"Expected condition to be true");return e}function a(e,t){if(null==e)throw new n.p8(t??`Expected to exist: ${e}`);return e}function i(e,t){if(!t(e))throw new n.p8("Unexpected type");return e}function s(e,t){if(!(e instanceof t))throw new n.p8("Unexpected type");return e}},4308:(e,t,r)=>{r.d(t,{A3:()=>m,WN:()=>u,X3:()=>f,Xs:()=>i,fm:()=>l,kY:()=>c,z5:()=>d,zz:()=>s});r(21703);var n=r(30120),o=r(9291),a=r(53877);const i=[90,30,7],s=["verified","expired","none"];function u(e){if(!e)return{type:"none"};const[t,r]=e,o=a.XI(r);return o?a.qw(o)?function(e){return e.end.valueOf()<=n.ou.now().valueOf()}(o)?{type:"expired",actorPointer:t,dateTimeRange:o}:{type:"verified",actorPointer:t,isIndefinite:!1,dateTimeRange:o}:{type:"verified",actorPointer:t,isIndefinite:!0,startDateTime:o.start}:{type:"none"}}function l(e){return e.end.diff(e.start,"days").days}function c(e){return n.ou.min(e,n.ou.now()).toRelative()}function d(e,t){if(e<0)throw new Error("negative number of days");if(!isFinite(e))throw new Error("non-finite number of days");const r=t.plus({days:e}).startOf("day");return{start:t,end:r}}const p=(0,o.defineMessages)({verified:{defaultMessage:"Verified",id:"verificationHelpers.verified"},expired:{defaultMessage:"Expired",id:"verificationHelpers.expired"},none:{defaultMessage:"Empty",id:"verificationHelpers.empty"}});function m(e){return p[e]}const y=(0,o.defineMessages)({verifiedIndefinitely:{defaultMessage:"Verified by {actor} indefinitely",id:"verificationHelpers.verifiedIndefinitely"},verifiedUntil:{defaultMessage:"Verified by {actor} until {datetime}",id:"verificationHelpers.verifiedUntil"}}),f={...p,...y}}}]);